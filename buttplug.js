(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["buttplug-commonjs"] = factory();
	else
		root["Buttplug"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/
/******/ 		var prefetchChunks = data[3] || [];
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/ 		// chunk prefetching for javascript
/******/ 		prefetchChunks.forEach(function(chunkId) {
/******/ 			if(installedChunks[chunkId] === undefined) {
/******/ 				installedChunks[chunkId] = null;
/******/ 				var link = document.createElement('link');
/******/
/******/ 				if (__webpack_require__.nc) {
/******/ 					link.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				link.rel = "prefetch";
/******/ 				link.as = "script";
/******/ 				link.href = jsonpScriptSrc(chunkId);
/******/ 				document.head.appendChild(link);
/******/ 			}
/******/ 		});
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 	};
/******/
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "" + chunkId + ".buttplug.js"
/******/ 	}
/******/
/******/ 	// object to store loaded and loading wasm modules
/******/ 	var installedWasmModules = {};
/******/
/******/ 	function promiseResolve() { return Promise.resolve(); }
/******/
/******/ 	var wasmImportObjects = {
/******/ 		"./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.wasm": function() {
/******/ 			return {
/******/ 				"./buttplug_rs_ffi_bg.js": {
/******/ 					"__wbindgen_object_drop_ref": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_object_drop_ref"](p0i32);
/******/ 					},
/******/ 					"__wbindgen_object_clone_ref": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_object_clone_ref"](p0i32);
/******/ 					},
/******/ 					"__wbg_log_e6bbcfdff8337573": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_log_e6bbcfdff8337573"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbindgen_string_new": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_string_new"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbindgen_cb_drop": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_cb_drop"](p0i32);
/******/ 					},
/******/ 					"__wbg_new_59cb74e423758ede": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_new_59cb74e423758ede"]();
/******/ 					},
/******/ 					"__wbg_stack_558ba5917b466edd": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_stack_558ba5917b466edd"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_error_4bb6c2a97407129a": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_error_4bb6c2a97407129a"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_log_b7dcb3facc73166d": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_log_b7dcb3facc73166d"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_log_96295d68ab8338df": function(p0i32,p1i32,p2i32,p3i32,p4i32,p5i32,p6i32,p7i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_log_96295d68ab8338df"](p0i32,p1i32,p2i32,p3i32,p4i32,p5i32,p6i32,p7i32);
/******/ 					},
/******/ 					"__wbg_mark_55c5ecfe509deb6a": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_mark_55c5ecfe509deb6a"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_measure_608563106d70d48a": function(p0i32,p1i32,p2i32,p3i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_measure_608563106d70d48a"](p0i32,p1i32,p2i32,p3i32);
/******/ 					},
/******/ 					"__wbg_Window_f826a1dec163bacb": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_Window_f826a1dec163bacb"](p0i32);
/******/ 					},
/******/ 					"__wbindgen_is_undefined": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_is_undefined"](p0i32);
/******/ 					},
/******/ 					"__wbg_WorkerGlobalScope_967d186155183d38": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_WorkerGlobalScope_967d186155183d38"](p0i32);
/******/ 					},
/******/ 					"__wbg_instanceof_Window_5993230e7331f098": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_instanceof_Window_5993230e7331f098"](p0i32);
/******/ 					},
/******/ 					"__wbg_navigator_da501e0baab77d64": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_navigator_da501e0baab77d64"](p0i32);
/******/ 					},
/******/ 					"__wbg_clearTimeout_4fe71f721d0606af": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_clearTimeout_4fe71f721d0606af"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_setTimeout_d75246e77e993c5d": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setTimeout_d75246e77e993c5d"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_getCharacteristic_c7f9dcc72f7a86f6": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_getCharacteristic_c7f9dcc72f7a86f6"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_value_ce5e4fe742d36a1c": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_value_ce5e4fe742d36a1c"](p0i32);
/******/ 					},
/******/ 					"__wbg_setoncharacteristicvaluechanged_ece60eda828cb0ef": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setoncharacteristicvaluechanged_ece60eda828cb0ef"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_readValue_988440034a0e12ce": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_readValue_988440034a0e12ce"](p0i32);
/******/ 					},
/******/ 					"__wbg_startNotifications_c88eeb920d1eb45c": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_startNotifications_c88eeb920d1eb45c"](p0i32);
/******/ 					},
/******/ 					"__wbg_writeValue_1c451e0da8c56ca9": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_writeValue_1c451e0da8c56ca9"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_target_90b16facc122062f": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_target_90b16facc122062f"](p0i32);
/******/ 					},
/******/ 					"__wbg_requestDevice_2d1b71cc28a67a5a": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_requestDevice_2d1b71cc28a67a5a"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_id_45ecf3258c9f7dd7": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_id_45ecf3258c9f7dd7"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_name_fe9ee17e821ecea5": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_name_fe9ee17e821ecea5"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_gatt_99df2e5380097484": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_gatt_99df2e5380097484"](p0i32);
/******/ 					},
/******/ 					"__wbg_setongattserverdisconnected_80e78a9d86abdf7b": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setongattserverdisconnected_80e78a9d86abdf7b"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_clearTimeout_af54ac34efe00770": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_clearTimeout_af54ac34efe00770"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_setTimeout_c5be4c054c4d7da5": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setTimeout_c5be4c054c4d7da5"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_bluetooth_18ee05df03af2352": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_bluetooth_18ee05df03af2352"](p0i32);
/******/ 					},
/******/ 					"__wbg_setonopen_c3975a4f895a052a": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setonopen_c3975a4f895a052a"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_setonerror_add0a293158012fc": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setonerror_add0a293158012fc"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_setonmessage_0d42c79be06de84f": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_setonmessage_0d42c79be06de84f"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_new_fd9f3bfb89d96362": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_new_fd9f3bfb89d96362"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_close_3797d4fae932c9b9": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_close_3797d4fae932c9b9"](p0i32);
/******/ 					},
/******/ 					"__wbg_send_ca85b0e6799803ef": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_send_ca85b0e6799803ef"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_connect_d31afa0760e2294e": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_connect_d31afa0760e2294e"](p0i32);
/******/ 					},
/******/ 					"__wbg_getPrimaryService_903e198e60097b4a": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_getPrimaryService_903e198e60097b4a"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_data_437e74b835241e70": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_data_437e74b835241e70"](p0i32);
/******/ 					},
/******/ 					"__wbg_call_e5847d15cc228e4f": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_call_e5847d15cc228e4f"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_new_7c995f2adeba6fb5": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_new_7c995f2adeba6fb5"]();
/******/ 					},
/******/ 					"__wbg_push_3f7c76b58919ce0d": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_push_3f7c76b58919ce0d"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_buffer_32296c67828fee6c": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_buffer_32296c67828fee6c"](p0i32);
/******/ 					},
/******/ 					"__wbg_byteLength_da948e1afd83c8f8": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_byteLength_da948e1afd83c8f8"](p0i32);
/******/ 					},
/******/ 					"__wbg_newnoargs_2349ba6aefe72376": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_newnoargs_2349ba6aefe72376"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_call_d63edb857edf16f6": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_call_d63edb857edf16f6"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_new_59986c8731bebaa1": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_new_59986c8731bebaa1"]();
/******/ 					},
/******/ 					"__wbg_resolve_e0690143406c88cb": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_resolve_e0690143406c88cb"](p0i32);
/******/ 					},
/******/ 					"__wbg_then_9caf23122e4fd5d3": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_then_9caf23122e4fd5d3"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_then_16663faf60ffbe95": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_then_16663faf60ffbe95"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_self_35a0fda3eb965abe": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_self_35a0fda3eb965abe"]();
/******/ 					},
/******/ 					"__wbg_window_88a6f88dd3a474f1": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_window_88a6f88dd3a474f1"]();
/******/ 					},
/******/ 					"__wbg_globalThis_1d843c4ad7b6a1f5": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_globalThis_1d843c4ad7b6a1f5"]();
/******/ 					},
/******/ 					"__wbg_global_294ce70448e8fbbf": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_global_294ce70448e8fbbf"]();
/******/ 					},
/******/ 					"__wbg_buffer_0be9fb426f2dd82b": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_buffer_0be9fb426f2dd82b"](p0i32);
/******/ 					},
/******/ 					"__wbg_newwithbyteoffsetandlength_85b7ce82b001ea08": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_newwithbyteoffsetandlength_85b7ce82b001ea08"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_length_3a5138f465b971ad": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_length_3a5138f465b971ad"](p0i32);
/******/ 					},
/******/ 					"__wbg_new_4e8d18dbf9cd5240": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_new_4e8d18dbf9cd5240"](p0i32);
/******/ 					},
/******/ 					"__wbg_set_4769de301eb521d7": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_set_4769de301eb521d7"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_newwithbyteoffset_0a6b0ce9d45270c3": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_newwithbyteoffset_0a6b0ce9d45270c3"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbg_set_7e15d36563072b19": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_set_7e15d36563072b19"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_getRandomValues_11115a852729f4e8": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_getRandomValues_11115a852729f4e8"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_randomFillSync_a2d002fc3b8e30f7": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_randomFillSync_a2d002fc3b8e30f7"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_self_a5f0fe5564782787": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_self_a5f0fe5564782787"]();
/******/ 					},
/******/ 					"__wbg_static_accessor_MODULE_7f278c5446c126c8": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_static_accessor_MODULE_7f278c5446c126c8"]();
/******/ 					},
/******/ 					"__wbg_require_29e58b5f6f133563": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_require_29e58b5f6f133563"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbg_crypto_d91429ea1a087f70": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_crypto_d91429ea1a087f70"](p0i32);
/******/ 					},
/******/ 					"__wbg_msCrypto_c8be2bb4fc7d8cd3": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbg_msCrypto_c8be2bb4fc7d8cd3"](p0i32);
/******/ 					},
/******/ 					"__wbindgen_is_string": function(p0i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_is_string"](p0i32);
/******/ 					},
/******/ 					"__wbindgen_string_get": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_string_get"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbindgen_debug_string": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_debug_string"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbindgen_throw": function(p0i32,p1i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_throw"](p0i32,p1i32);
/******/ 					},
/******/ 					"__wbindgen_memory": function() {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_memory"]();
/******/ 					},
/******/ 					"__wbindgen_closure_wrapper677": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_closure_wrapper677"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbindgen_closure_wrapper679": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_closure_wrapper679"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbindgen_closure_wrapper681": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_closure_wrapper681"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbindgen_closure_wrapper683": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_closure_wrapper683"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbindgen_closure_wrapper2493": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_closure_wrapper2493"](p0i32,p1i32,p2i32);
/******/ 					},
/******/ 					"__wbindgen_closure_wrapper4268": function(p0i32,p1i32,p2i32) {
/******/ 						return installedModules["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.js"].exports["__wbindgen_closure_wrapper4268"](p0i32,p1i32,p2i32);
/******/ 					}
/******/ 				}
/******/ 			};
/******/ 		},
/******/ 	};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 							error.name = 'ChunkLoadError';
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/
/******/ 		// Fetch + compile chunk loading for webassembly
/******/
/******/ 		var wasmModules = {"0":["./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.wasm"]}[chunkId] || [];
/******/
/******/ 		wasmModules.forEach(function(wasmModuleId) {
/******/ 			var installedWasmModuleData = installedWasmModules[wasmModuleId];
/******/
/******/ 			// a Promise means "currently loading" or "already loaded".
/******/ 			if(installedWasmModuleData)
/******/ 				promises.push(installedWasmModuleData);
/******/ 			else {
/******/ 				var importObject = wasmImportObjects[wasmModuleId]();
/******/ 				var req = fetch(__webpack_require__.p + "" + {"./src/buttplug-rs-ffi/buttplug_rs_ffi_bg.wasm":"17a5dc1db11d74b795d7"}[wasmModuleId] + ".module.wasm");
/******/ 				var promise;
/******/ 				if(importObject instanceof Promise && typeof WebAssembly.compileStreaming === 'function') {
/******/ 					promise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {
/******/ 						return WebAssembly.instantiate(items[0], items[1]);
/******/ 					});
/******/ 				} else if(typeof WebAssembly.instantiateStreaming === 'function') {
/******/ 					promise = WebAssembly.instantiateStreaming(req, importObject);
/******/ 				} else {
/******/ 					var bytesPromise = req.then(function(x) { return x.arrayBuffer(); });
/******/ 					promise = bytesPromise.then(function(bytes) {
/******/ 						return WebAssembly.instantiate(bytes, importObject);
/******/ 					});
/******/ 				}
/******/ 				promises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {
/******/ 					return __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;
/******/ 				}));
/******/ 			}
/******/ 		});
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	// object with all WebAssembly.instance exports
/******/ 	__webpack_require__.w = {};
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	var startupResult = (function() {
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/web_index.ts");
/******/ 	})();
/******/
/******/ 	webpackJsonpCallback([[], {}, 0, [0]]);
/******/ 	return startupResult;
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@protobufjs/aspromise/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@protobufjs/aspromise/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = asPromise;

/**
 * Callback as used by {@link util.asPromise}.
 * @typedef asPromiseCallback
 * @type {function}
 * @param {Error|null} error Error, if any
 * @param {...*} params Additional arguments
 * @returns {undefined}
 */

/**
 * Returns a promise from a node-style callback function.
 * @memberof util
 * @param {asPromiseCallback} fn Function to call
 * @param {*} ctx Function context
 * @param {...*} params Function arguments
 * @returns {Promise<*>} Promisified function
 */
function asPromise(fn, ctx/*, varargs */) {
    var params  = new Array(arguments.length - 1),
        offset  = 0,
        index   = 2,
        pending = true;
    while (index < arguments.length)
        params[offset++] = arguments[index++];
    return new Promise(function executor(resolve, reject) {
        params[offset] = function callback(err/*, varargs */) {
            if (pending) {
                pending = false;
                if (err)
                    reject(err);
                else {
                    var params = new Array(arguments.length - 1),
                        offset = 0;
                    while (offset < params.length)
                        params[offset++] = arguments[offset];
                    resolve.apply(null, params);
                }
            }
        };
        try {
            fn.apply(ctx || null, params);
        } catch (err) {
            if (pending) {
                pending = false;
                reject(err);
            }
        }
    });
}


/***/ }),

/***/ "./node_modules/@protobufjs/base64/index.js":
/*!**************************************************!*\
  !*** ./node_modules/@protobufjs/base64/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A minimal base64 implementation for number arrays.
 * @memberof util
 * @namespace
 */
var base64 = exports;

/**
 * Calculates the byte length of a base64 encoded string.
 * @param {string} string Base64 encoded string
 * @returns {number} Byte length
 */
base64.length = function length(string) {
    var p = string.length;
    if (!p)
        return 0;
    var n = 0;
    while (--p % 4 > 1 && string.charAt(p) === "=")
        ++n;
    return Math.ceil(string.length * 3) / 4 - n;
};

// Base64 encoding table
var b64 = new Array(64);

// Base64 decoding table
var s64 = new Array(123);

// 65..90, 97..122, 48..57, 43, 47
for (var i = 0; i < 64;)
    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;

/**
 * Encodes a buffer to a base64 encoded string.
 * @param {Uint8Array} buffer Source buffer
 * @param {number} start Source start
 * @param {number} end Source end
 * @returns {string} Base64 encoded string
 */
base64.encode = function encode(buffer, start, end) {
    var parts = null,
        chunk = [];
    var i = 0, // output index
        j = 0, // goto index
        t;     // temporary
    while (start < end) {
        var b = buffer[start++];
        switch (j) {
            case 0:
                chunk[i++] = b64[b >> 2];
                t = (b & 3) << 4;
                j = 1;
                break;
            case 1:
                chunk[i++] = b64[t | b >> 4];
                t = (b & 15) << 2;
                j = 2;
                break;
            case 2:
                chunk[i++] = b64[t | b >> 6];
                chunk[i++] = b64[b & 63];
                j = 0;
                break;
        }
        if (i > 8191) {
            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
            i = 0;
        }
    }
    if (j) {
        chunk[i++] = b64[t];
        chunk[i++] = 61;
        if (j === 1)
            chunk[i++] = 61;
    }
    if (parts) {
        if (i)
            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
    }
    return String.fromCharCode.apply(String, chunk.slice(0, i));
};

var invalidEncoding = "invalid encoding";

/**
 * Decodes a base64 encoded string to a buffer.
 * @param {string} string Source string
 * @param {Uint8Array} buffer Destination buffer
 * @param {number} offset Destination offset
 * @returns {number} Number of bytes written
 * @throws {Error} If encoding is invalid
 */
base64.decode = function decode(string, buffer, offset) {
    var start = offset;
    var j = 0, // goto index
        t;     // temporary
    for (var i = 0; i < string.length;) {
        var c = string.charCodeAt(i++);
        if (c === 61 && j > 1)
            break;
        if ((c = s64[c]) === undefined)
            throw Error(invalidEncoding);
        switch (j) {
            case 0:
                t = c;
                j = 1;
                break;
            case 1:
                buffer[offset++] = t << 2 | (c & 48) >> 4;
                t = c;
                j = 2;
                break;
            case 2:
                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;
                t = c;
                j = 3;
                break;
            case 3:
                buffer[offset++] = (t & 3) << 6 | c;
                j = 0;
                break;
        }
    }
    if (j === 1)
        throw Error(invalidEncoding);
    return offset - start;
};

/**
 * Tests if the specified string appears to be base64 encoded.
 * @param {string} string String to test
 * @returns {boolean} `true` if probably base64 encoded, otherwise false
 */
base64.test = function test(string) {
    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);
};


/***/ }),

/***/ "./node_modules/@protobufjs/eventemitter/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@protobufjs/eventemitter/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = EventEmitter;

/**
 * Constructs a new event emitter instance.
 * @classdesc A minimal event emitter.
 * @memberof util
 * @constructor
 */
function EventEmitter() {

    /**
     * Registered listeners.
     * @type {Object.<string,*>}
     * @private
     */
    this._listeners = {};
}

/**
 * Registers an event listener.
 * @param {string} evt Event name
 * @param {function} fn Listener
 * @param {*} [ctx] Listener context
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.on = function on(evt, fn, ctx) {
    (this._listeners[evt] || (this._listeners[evt] = [])).push({
        fn  : fn,
        ctx : ctx || this
    });
    return this;
};

/**
 * Removes an event listener or any matching listeners if arguments are omitted.
 * @param {string} [evt] Event name. Removes all listeners if omitted.
 * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.off = function off(evt, fn) {
    if (evt === undefined)
        this._listeners = {};
    else {
        if (fn === undefined)
            this._listeners[evt] = [];
        else {
            var listeners = this._listeners[evt];
            for (var i = 0; i < listeners.length;)
                if (listeners[i].fn === fn)
                    listeners.splice(i, 1);
                else
                    ++i;
        }
    }
    return this;
};

/**
 * Emits an event by calling its listeners with the specified arguments.
 * @param {string} evt Event name
 * @param {...*} args Arguments
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.emit = function emit(evt) {
    var listeners = this._listeners[evt];
    if (listeners) {
        var args = [],
            i = 1;
        for (; i < arguments.length;)
            args.push(arguments[i++]);
        for (i = 0; i < listeners.length;)
            listeners[i].fn.apply(listeners[i++].ctx, args);
    }
    return this;
};


/***/ }),

/***/ "./node_modules/@protobufjs/float/index.js":
/*!*************************************************!*\
  !*** ./node_modules/@protobufjs/float/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = factory(factory);

/**
 * Reads / writes floats / doubles from / to buffers.
 * @name util.float
 * @namespace
 */

/**
 * Writes a 32 bit float to a buffer using little endian byte order.
 * @name util.float.writeFloatLE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Writes a 32 bit float to a buffer using big endian byte order.
 * @name util.float.writeFloatBE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Reads a 32 bit float from a buffer using little endian byte order.
 * @name util.float.readFloatLE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Reads a 32 bit float from a buffer using big endian byte order.
 * @name util.float.readFloatBE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Writes a 64 bit double to a buffer using little endian byte order.
 * @name util.float.writeDoubleLE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Writes a 64 bit double to a buffer using big endian byte order.
 * @name util.float.writeDoubleBE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Reads a 64 bit double from a buffer using little endian byte order.
 * @name util.float.readDoubleLE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Reads a 64 bit double from a buffer using big endian byte order.
 * @name util.float.readDoubleBE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

// Factory function for the purpose of node-based testing in modified global environments
function factory(exports) {

    // float: typed array
    if (typeof Float32Array !== "undefined") (function() {

        var f32 = new Float32Array([ -0 ]),
            f8b = new Uint8Array(f32.buffer),
            le  = f8b[3] === 128;

        function writeFloat_f32_cpy(val, buf, pos) {
            f32[0] = val;
            buf[pos    ] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
        }

        function writeFloat_f32_rev(val, buf, pos) {
            f32[0] = val;
            buf[pos    ] = f8b[3];
            buf[pos + 1] = f8b[2];
            buf[pos + 2] = f8b[1];
            buf[pos + 3] = f8b[0];
        }

        /* istanbul ignore next */
        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;
        /* istanbul ignore next */
        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;

        function readFloat_f32_cpy(buf, pos) {
            f8b[0] = buf[pos    ];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            return f32[0];
        }

        function readFloat_f32_rev(buf, pos) {
            f8b[3] = buf[pos    ];
            f8b[2] = buf[pos + 1];
            f8b[1] = buf[pos + 2];
            f8b[0] = buf[pos + 3];
            return f32[0];
        }

        /* istanbul ignore next */
        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;
        /* istanbul ignore next */
        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;

    // float: ieee754
    })(); else (function() {

        function writeFloat_ieee754(writeUint, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
                val = -val;
            if (val === 0)
                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);
            else if (isNaN(val))
                writeUint(2143289344, buf, pos);
            else if (val > 3.4028234663852886e+38) // +-Infinity
                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);
            else if (val < 1.1754943508222875e-38) // denormal
                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);
            else {
                var exponent = Math.floor(Math.log(val) / Math.LN2),
                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;
                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);
            }
        }

        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);
        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);

        function readFloat_ieee754(readUint, buf, pos) {
            var uint = readUint(buf, pos),
                sign = (uint >> 31) * 2 + 1,
                exponent = uint >>> 23 & 255,
                mantissa = uint & 8388607;
            return exponent === 255
                ? mantissa
                ? NaN
                : sign * Infinity
                : exponent === 0 // denormal
                ? sign * 1.401298464324817e-45 * mantissa
                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);
        }

        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);
        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);

    })();

    // double: typed array
    if (typeof Float64Array !== "undefined") (function() {

        var f64 = new Float64Array([-0]),
            f8b = new Uint8Array(f64.buffer),
            le  = f8b[7] === 128;

        function writeDouble_f64_cpy(val, buf, pos) {
            f64[0] = val;
            buf[pos    ] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
            buf[pos + 4] = f8b[4];
            buf[pos + 5] = f8b[5];
            buf[pos + 6] = f8b[6];
            buf[pos + 7] = f8b[7];
        }

        function writeDouble_f64_rev(val, buf, pos) {
            f64[0] = val;
            buf[pos    ] = f8b[7];
            buf[pos + 1] = f8b[6];
            buf[pos + 2] = f8b[5];
            buf[pos + 3] = f8b[4];
            buf[pos + 4] = f8b[3];
            buf[pos + 5] = f8b[2];
            buf[pos + 6] = f8b[1];
            buf[pos + 7] = f8b[0];
        }

        /* istanbul ignore next */
        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;
        /* istanbul ignore next */
        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;

        function readDouble_f64_cpy(buf, pos) {
            f8b[0] = buf[pos    ];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            f8b[4] = buf[pos + 4];
            f8b[5] = buf[pos + 5];
            f8b[6] = buf[pos + 6];
            f8b[7] = buf[pos + 7];
            return f64[0];
        }

        function readDouble_f64_rev(buf, pos) {
            f8b[7] = buf[pos    ];
            f8b[6] = buf[pos + 1];
            f8b[5] = buf[pos + 2];
            f8b[4] = buf[pos + 3];
            f8b[3] = buf[pos + 4];
            f8b[2] = buf[pos + 5];
            f8b[1] = buf[pos + 6];
            f8b[0] = buf[pos + 7];
            return f64[0];
        }

        /* istanbul ignore next */
        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;
        /* istanbul ignore next */
        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;

    // double: ieee754
    })(); else (function() {

        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
                val = -val;
            if (val === 0) {
                writeUint(0, buf, pos + off0);
                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);
            } else if (isNaN(val)) {
                writeUint(0, buf, pos + off0);
                writeUint(2146959360, buf, pos + off1);
            } else if (val > 1.7976931348623157e+308) { // +-Infinity
                writeUint(0, buf, pos + off0);
                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);
            } else {
                var mantissa;
                if (val < 2.2250738585072014e-308) { // denormal
                    mantissa = val / 5e-324;
                    writeUint(mantissa >>> 0, buf, pos + off0);
                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);
                } else {
                    var exponent = Math.floor(Math.log(val) / Math.LN2);
                    if (exponent === 1024)
                        exponent = 1023;
                    mantissa = val * Math.pow(2, -exponent);
                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);
                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);
                }
            }
        }

        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);
        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);

        function readDouble_ieee754(readUint, off0, off1, buf, pos) {
            var lo = readUint(buf, pos + off0),
                hi = readUint(buf, pos + off1);
            var sign = (hi >> 31) * 2 + 1,
                exponent = hi >>> 20 & 2047,
                mantissa = 4294967296 * (hi & 1048575) + lo;
            return exponent === 2047
                ? mantissa
                ? NaN
                : sign * Infinity
                : exponent === 0 // denormal
                ? sign * 5e-324 * mantissa
                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);
        }

        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);
        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);

    })();

    return exports;
}

// uint helpers

function writeUintLE(val, buf, pos) {
    buf[pos    ] =  val        & 255;
    buf[pos + 1] =  val >>> 8  & 255;
    buf[pos + 2] =  val >>> 16 & 255;
    buf[pos + 3] =  val >>> 24;
}

function writeUintBE(val, buf, pos) {
    buf[pos    ] =  val >>> 24;
    buf[pos + 1] =  val >>> 16 & 255;
    buf[pos + 2] =  val >>> 8  & 255;
    buf[pos + 3] =  val        & 255;
}

function readUintLE(buf, pos) {
    return (buf[pos    ]
          | buf[pos + 1] << 8
          | buf[pos + 2] << 16
          | buf[pos + 3] << 24) >>> 0;
}

function readUintBE(buf, pos) {
    return (buf[pos    ] << 24
          | buf[pos + 1] << 16
          | buf[pos + 2] << 8
          | buf[pos + 3]) >>> 0;
}


/***/ }),

/***/ "./node_modules/@protobufjs/inquire/index.js":
/*!***************************************************!*\
  !*** ./node_modules/@protobufjs/inquire/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = inquire;

/**
 * Requires a module only if available.
 * @memberof util
 * @param {string} moduleName Module to require
 * @returns {?Object} Required module if available and not empty, otherwise `null`
 */
function inquire(moduleName) {
    try {
        var mod = eval("quire".replace(/^/,"re"))(moduleName); // eslint-disable-line no-eval
        if (mod && (mod.length || Object.keys(mod).length))
            return mod;
    } catch (e) {} // eslint-disable-line no-empty
    return null;
}


/***/ }),

/***/ "./node_modules/@protobufjs/pool/index.js":
/*!************************************************!*\
  !*** ./node_modules/@protobufjs/pool/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = pool;

/**
 * An allocator as used by {@link util.pool}.
 * @typedef PoolAllocator
 * @type {function}
 * @param {number} size Buffer size
 * @returns {Uint8Array} Buffer
 */

/**
 * A slicer as used by {@link util.pool}.
 * @typedef PoolSlicer
 * @type {function}
 * @param {number} start Start offset
 * @param {number} end End offset
 * @returns {Uint8Array} Buffer slice
 * @this {Uint8Array}
 */

/**
 * A general purpose buffer pool.
 * @memberof util
 * @function
 * @param {PoolAllocator} alloc Allocator
 * @param {PoolSlicer} slice Slicer
 * @param {number} [size=8192] Slab size
 * @returns {PoolAllocator} Pooled allocator
 */
function pool(alloc, slice, size) {
    var SIZE   = size || 8192;
    var MAX    = SIZE >>> 1;
    var slab   = null;
    var offset = SIZE;
    return function pool_alloc(size) {
        if (size < 1 || size > MAX)
            return alloc(size);
        if (offset + size > SIZE) {
            slab = alloc(SIZE);
            offset = 0;
        }
        var buf = slice.call(slab, offset, offset += size);
        if (offset & 7) // align to 32 bit
            offset = (offset | 7) + 1;
        return buf;
    };
}


/***/ }),

/***/ "./node_modules/@protobufjs/utf8/index.js":
/*!************************************************!*\
  !*** ./node_modules/@protobufjs/utf8/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A minimal UTF8 implementation for number arrays.
 * @memberof util
 * @namespace
 */
var utf8 = exports;

/**
 * Calculates the UTF8 byte length of a string.
 * @param {string} string String
 * @returns {number} Byte length
 */
utf8.length = function utf8_length(string) {
    var len = 0,
        c = 0;
    for (var i = 0; i < string.length; ++i) {
        c = string.charCodeAt(i);
        if (c < 128)
            len += 1;
        else if (c < 2048)
            len += 2;
        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {
            ++i;
            len += 4;
        } else
            len += 3;
    }
    return len;
};

/**
 * Reads UTF8 bytes as a string.
 * @param {Uint8Array} buffer Source buffer
 * @param {number} start Source start
 * @param {number} end Source end
 * @returns {string} String read
 */
utf8.read = function utf8_read(buffer, start, end) {
    var len = end - start;
    if (len < 1)
        return "";
    var parts = null,
        chunk = [],
        i = 0, // char offset
        t;     // temporary
    while (start < end) {
        t = buffer[start++];
        if (t < 128)
            chunk[i++] = t;
        else if (t > 191 && t < 224)
            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;
        else if (t > 239 && t < 365) {
            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;
            chunk[i++] = 0xD800 + (t >> 10);
            chunk[i++] = 0xDC00 + (t & 1023);
        } else
            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;
        if (i > 8191) {
            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
            i = 0;
        }
    }
    if (parts) {
        if (i)
            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
    }
    return String.fromCharCode.apply(String, chunk.slice(0, i));
};

/**
 * Writes a string as UTF8 bytes.
 * @param {string} string Source string
 * @param {Uint8Array} buffer Destination buffer
 * @param {number} offset Destination offset
 * @returns {number} Bytes written
 */
utf8.write = function utf8_write(string, buffer, offset) {
    var start = offset,
        c1, // character 1
        c2; // character 2
    for (var i = 0; i < string.length; ++i) {
        c1 = string.charCodeAt(i);
        if (c1 < 128) {
            buffer[offset++] = c1;
        } else if (c1 < 2048) {
            buffer[offset++] = c1 >> 6       | 192;
            buffer[offset++] = c1       & 63 | 128;
        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {
            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);
            ++i;
            buffer[offset++] = c1 >> 18      | 240;
            buffer[offset++] = c1 >> 12 & 63 | 128;
            buffer[offset++] = c1 >> 6  & 63 | 128;
            buffer[offset++] = c1       & 63 | 128;
        } else {
            buffer[offset++] = c1 >> 12      | 224;
            buffer[offset++] = c1 >> 6  & 63 | 128;
            buffer[offset++] = c1       & 63 | 128;
        }
    }
    return offset - start;
};


/***/ }),

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "./node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;
module.exports.once = once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  checkListener(listener);

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function eventListener() {
      if (errorListener !== undefined) {
        emitter.removeListener('error', errorListener);
      }
      resolve([].slice.call(arguments));
    };
    var errorListener;

    // Adding an error listener is not optional because
    // if an error is thrown on an event emitter we cannot
    // guarantee that the actual event we are waiting will
    // be fired. The result could be a silent way to create
    // memory or file descriptor leaks, which is something
    // we should avoid.
    if (name !== 'error') {
      errorListener = function errorListener(err) {
        emitter.removeListener(name, eventListener);
        reject(err);
      };

      emitter.once('error', errorListener);
    }

    emitter.once(name, eventListener);
  });
}


/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "./node_modules/protobufjs/minimal.js":
/*!********************************************!*\
  !*** ./node_modules/protobufjs/minimal.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// minimal library entry point.


module.exports = __webpack_require__(/*! ./src/index-minimal */ "./node_modules/protobufjs/src/index-minimal.js");


/***/ }),

/***/ "./node_modules/protobufjs/src/index-minimal.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/index-minimal.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var protobuf = exports;

/**
 * Build type, one of `"full"`, `"light"` or `"minimal"`.
 * @name build
 * @type {string}
 * @const
 */
protobuf.build = "minimal";

// Serialization
protobuf.Writer       = __webpack_require__(/*! ./writer */ "./node_modules/protobufjs/src/writer.js");
protobuf.BufferWriter = __webpack_require__(/*! ./writer_buffer */ "./node_modules/protobufjs/src/writer_buffer.js");
protobuf.Reader       = __webpack_require__(/*! ./reader */ "./node_modules/protobufjs/src/reader.js");
protobuf.BufferReader = __webpack_require__(/*! ./reader_buffer */ "./node_modules/protobufjs/src/reader_buffer.js");

// Utility
protobuf.util         = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");
protobuf.rpc          = __webpack_require__(/*! ./rpc */ "./node_modules/protobufjs/src/rpc.js");
protobuf.roots        = __webpack_require__(/*! ./roots */ "./node_modules/protobufjs/src/roots.js");
protobuf.configure    = configure;

/* istanbul ignore next */
/**
 * Reconfigures the library according to the environment.
 * @returns {undefined}
 */
function configure() {
    protobuf.util._configure();
    protobuf.Writer._configure(protobuf.BufferWriter);
    protobuf.Reader._configure(protobuf.BufferReader);
}

// Set up buffer utility according to the environment
configure();


/***/ }),

/***/ "./node_modules/protobufjs/src/reader.js":
/*!***********************************************!*\
  !*** ./node_modules/protobufjs/src/reader.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Reader;

var util      = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

var BufferReader; // cyclic

var LongBits  = util.LongBits,
    utf8      = util.utf8;

/* istanbul ignore next */
function indexOutOfRange(reader, writeLength) {
    return RangeError("index out of range: " + reader.pos + " + " + (writeLength || 1) + " > " + reader.len);
}

/**
 * Constructs a new reader instance using the specified buffer.
 * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.
 * @constructor
 * @param {Uint8Array} buffer Buffer to read from
 */
function Reader(buffer) {

    /**
     * Read buffer.
     * @type {Uint8Array}
     */
    this.buf = buffer;

    /**
     * Read buffer position.
     * @type {number}
     */
    this.pos = 0;

    /**
     * Read buffer length.
     * @type {number}
     */
    this.len = buffer.length;
}

var create_array = typeof Uint8Array !== "undefined"
    ? function create_typed_array(buffer) {
        if (buffer instanceof Uint8Array || Array.isArray(buffer))
            return new Reader(buffer);
        throw Error("illegal buffer");
    }
    /* istanbul ignore next */
    : function create_array(buffer) {
        if (Array.isArray(buffer))
            return new Reader(buffer);
        throw Error("illegal buffer");
    };

var create = function create() {
    return util.Buffer
        ? function create_buffer_setup(buffer) {
            return (Reader.create = function create_buffer(buffer) {
                return util.Buffer.isBuffer(buffer)
                    ? new BufferReader(buffer)
                    /* istanbul ignore next */
                    : create_array(buffer);
            })(buffer);
        }
        /* istanbul ignore next */
        : create_array;
};

/**
 * Creates a new reader using the specified buffer.
 * @function
 * @param {Uint8Array|Buffer} buffer Buffer to read from
 * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}
 * @throws {Error} If `buffer` is not a valid buffer
 */
Reader.create = create();

Reader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;

/**
 * Reads a varint as an unsigned 32 bit value.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.uint32 = (function read_uint32_setup() {
    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)
    return function read_uint32() {
        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;

        /* istanbul ignore if */
        if ((this.pos += 5) > this.len) {
            this.pos = this.len;
            throw indexOutOfRange(this, 10);
        }
        return value;
    };
})();

/**
 * Reads a varint as a signed 32 bit value.
 * @returns {number} Value read
 */
Reader.prototype.int32 = function read_int32() {
    return this.uint32() | 0;
};

/**
 * Reads a zig-zag encoded varint as a signed 32 bit value.
 * @returns {number} Value read
 */
Reader.prototype.sint32 = function read_sint32() {
    var value = this.uint32();
    return value >>> 1 ^ -(value & 1) | 0;
};

/* eslint-disable no-invalid-this */

function readLongVarint() {
    // tends to deopt with local vars for octet etc.
    var bits = new LongBits(0, 0);
    var i = 0;
    if (this.len - this.pos > 4) { // fast route (lo)
        for (; i < 4; ++i) {
            // 1st..4th
            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
        // 5th
        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;
        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;
        if (this.buf[this.pos++] < 128)
            return bits;
        i = 0;
    } else {
        for (; i < 3; ++i) {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            // 1st..3th
            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
        // 4th
        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;
        return bits;
    }
    if (this.len - this.pos > 4) { // fast route (hi)
        for (; i < 5; ++i) {
            // 6th..10th
            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
    } else {
        for (; i < 5; ++i) {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            // 6th..10th
            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
    }
    /* istanbul ignore next */
    throw Error("invalid varint encoding");
}

/* eslint-enable no-invalid-this */

/**
 * Reads a varint as a signed 64 bit value.
 * @name Reader#int64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a varint as an unsigned 64 bit value.
 * @name Reader#uint64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a zig-zag encoded varint as a signed 64 bit value.
 * @name Reader#sint64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a varint as a boolean.
 * @returns {boolean} Value read
 */
Reader.prototype.bool = function read_bool() {
    return this.uint32() !== 0;
};

function readFixed32_end(buf, end) { // note that this uses `end`, not `pos`
    return (buf[end - 4]
          | buf[end - 3] << 8
          | buf[end - 2] << 16
          | buf[end - 1] << 24) >>> 0;
}

/**
 * Reads fixed 32 bits as an unsigned 32 bit integer.
 * @returns {number} Value read
 */
Reader.prototype.fixed32 = function read_fixed32() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    return readFixed32_end(this.buf, this.pos += 4);
};

/**
 * Reads fixed 32 bits as a signed 32 bit integer.
 * @returns {number} Value read
 */
Reader.prototype.sfixed32 = function read_sfixed32() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    return readFixed32_end(this.buf, this.pos += 4) | 0;
};

/* eslint-disable no-invalid-this */

function readFixed64(/* this: Reader */) {

    /* istanbul ignore if */
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 8);

    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));
}

/* eslint-enable no-invalid-this */

/**
 * Reads fixed 64 bits.
 * @name Reader#fixed64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads zig-zag encoded fixed 64 bits.
 * @name Reader#sfixed64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a float (32 bit) as a number.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.float = function read_float() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    var value = util.float.readFloatLE(this.buf, this.pos);
    this.pos += 4;
    return value;
};

/**
 * Reads a double (64 bit float) as a number.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.double = function read_double() {

    /* istanbul ignore if */
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 4);

    var value = util.float.readDoubleLE(this.buf, this.pos);
    this.pos += 8;
    return value;
};

/**
 * Reads a sequence of bytes preceeded by its length as a varint.
 * @returns {Uint8Array} Value read
 */
Reader.prototype.bytes = function read_bytes() {
    var length = this.uint32(),
        start  = this.pos,
        end    = this.pos + length;

    /* istanbul ignore if */
    if (end > this.len)
        throw indexOutOfRange(this, length);

    this.pos += length;
    if (Array.isArray(this.buf)) // plain array
        return this.buf.slice(start, end);
    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1
        ? new this.buf.constructor(0)
        : this._slice.call(this.buf, start, end);
};

/**
 * Reads a string preceeded by its byte length as a varint.
 * @returns {string} Value read
 */
Reader.prototype.string = function read_string() {
    var bytes = this.bytes();
    return utf8.read(bytes, 0, bytes.length);
};

/**
 * Skips the specified number of bytes if specified, otherwise skips a varint.
 * @param {number} [length] Length if known, otherwise a varint is assumed
 * @returns {Reader} `this`
 */
Reader.prototype.skip = function skip(length) {
    if (typeof length === "number") {
        /* istanbul ignore if */
        if (this.pos + length > this.len)
            throw indexOutOfRange(this, length);
        this.pos += length;
    } else {
        do {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
        } while (this.buf[this.pos++] & 128);
    }
    return this;
};

/**
 * Skips the next element of the specified wire type.
 * @param {number} wireType Wire type received
 * @returns {Reader} `this`
 */
Reader.prototype.skipType = function(wireType) {
    switch (wireType) {
        case 0:
            this.skip();
            break;
        case 1:
            this.skip(8);
            break;
        case 2:
            this.skip(this.uint32());
            break;
        case 3:
            while ((wireType = this.uint32() & 7) !== 4) {
                this.skipType(wireType);
            }
            break;
        case 5:
            this.skip(4);
            break;

        /* istanbul ignore next */
        default:
            throw Error("invalid wire type " + wireType + " at offset " + this.pos);
    }
    return this;
};

Reader._configure = function(BufferReader_) {
    BufferReader = BufferReader_;
    Reader.create = create();
    BufferReader._configure();

    var fn = util.Long ? "toLong" : /* istanbul ignore next */ "toNumber";
    util.merge(Reader.prototype, {

        int64: function read_int64() {
            return readLongVarint.call(this)[fn](false);
        },

        uint64: function read_uint64() {
            return readLongVarint.call(this)[fn](true);
        },

        sint64: function read_sint64() {
            return readLongVarint.call(this).zzDecode()[fn](false);
        },

        fixed64: function read_fixed64() {
            return readFixed64.call(this)[fn](true);
        },

        sfixed64: function read_sfixed64() {
            return readFixed64.call(this)[fn](false);
        }

    });
};


/***/ }),

/***/ "./node_modules/protobufjs/src/reader_buffer.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/reader_buffer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = BufferReader;

// extends Reader
var Reader = __webpack_require__(/*! ./reader */ "./node_modules/protobufjs/src/reader.js");
(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;

var util = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

/**
 * Constructs a new buffer reader instance.
 * @classdesc Wire format reader using node buffers.
 * @extends Reader
 * @constructor
 * @param {Buffer} buffer Buffer to read from
 */
function BufferReader(buffer) {
    Reader.call(this, buffer);

    /**
     * Read buffer.
     * @name BufferReader#buf
     * @type {Buffer}
     */
}

BufferReader._configure = function () {
    /* istanbul ignore else */
    if (util.Buffer)
        BufferReader.prototype._slice = util.Buffer.prototype.slice;
};


/**
 * @override
 */
BufferReader.prototype.string = function read_string_buffer() {
    var len = this.uint32(); // modifies pos
    return this.buf.utf8Slice
        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))
        : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + len, this.len));
};

/**
 * Reads a sequence of bytes preceeded by its length as a varint.
 * @name BufferReader#bytes
 * @function
 * @returns {Buffer} Value read
 */

BufferReader._configure();


/***/ }),

/***/ "./node_modules/protobufjs/src/roots.js":
/*!**********************************************!*\
  !*** ./node_modules/protobufjs/src/roots.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};

/**
 * Named roots.
 * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).
 * Can also be used manually to make roots available accross modules.
 * @name roots
 * @type {Object.<string,Root>}
 * @example
 * // pbjs -r myroot -o compiled.js ...
 *
 * // in another module:
 * require("./compiled.js");
 *
 * // in any subsequent module:
 * var root = protobuf.roots["myroot"];
 */


/***/ }),

/***/ "./node_modules/protobufjs/src/rpc.js":
/*!********************************************!*\
  !*** ./node_modules/protobufjs/src/rpc.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Streaming RPC helpers.
 * @namespace
 */
var rpc = exports;

/**
 * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.
 * @typedef RPCImpl
 * @type {function}
 * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called
 * @param {Uint8Array} requestData Request data
 * @param {RPCImplCallback} callback Callback function
 * @returns {undefined}
 * @example
 * function rpcImpl(method, requestData, callback) {
 *     if (protobuf.util.lcFirst(method.name) !== "myMethod") // compatible with static code
 *         throw Error("no such method");
 *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {
 *         callback(err, responseData);
 *     });
 * }
 */

/**
 * Node-style callback as used by {@link RPCImpl}.
 * @typedef RPCImplCallback
 * @type {function}
 * @param {Error|null} error Error, if any, otherwise `null`
 * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error
 * @returns {undefined}
 */

rpc.Service = __webpack_require__(/*! ./rpc/service */ "./node_modules/protobufjs/src/rpc/service.js");


/***/ }),

/***/ "./node_modules/protobufjs/src/rpc/service.js":
/*!****************************************************!*\
  !*** ./node_modules/protobufjs/src/rpc/service.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Service;

var util = __webpack_require__(/*! ../util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

// Extends EventEmitter
(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;

/**
 * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.
 *
 * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.
 * @typedef rpc.ServiceMethodCallback
 * @template TRes extends Message<TRes>
 * @type {function}
 * @param {Error|null} error Error, if any
 * @param {TRes} [response] Response message
 * @returns {undefined}
 */

/**
 * A service method part of a {@link rpc.Service} as created by {@link Service.create}.
 * @typedef rpc.ServiceMethod
 * @template TReq extends Message<TReq>
 * @template TRes extends Message<TRes>
 * @type {function}
 * @param {TReq|Properties<TReq>} request Request message or plain object
 * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message
 * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`
 */

/**
 * Constructs a new RPC service instance.
 * @classdesc An RPC service as returned by {@link Service#create}.
 * @exports rpc.Service
 * @extends util.EventEmitter
 * @constructor
 * @param {RPCImpl} rpcImpl RPC implementation
 * @param {boolean} [requestDelimited=false] Whether requests are length-delimited
 * @param {boolean} [responseDelimited=false] Whether responses are length-delimited
 */
function Service(rpcImpl, requestDelimited, responseDelimited) {

    if (typeof rpcImpl !== "function")
        throw TypeError("rpcImpl must be a function");

    util.EventEmitter.call(this);

    /**
     * RPC implementation. Becomes `null` once the service is ended.
     * @type {RPCImpl|null}
     */
    this.rpcImpl = rpcImpl;

    /**
     * Whether requests are length-delimited.
     * @type {boolean}
     */
    this.requestDelimited = Boolean(requestDelimited);

    /**
     * Whether responses are length-delimited.
     * @type {boolean}
     */
    this.responseDelimited = Boolean(responseDelimited);
}

/**
 * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.
 * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method
 * @param {Constructor<TReq>} requestCtor Request constructor
 * @param {Constructor<TRes>} responseCtor Response constructor
 * @param {TReq|Properties<TReq>} request Request message or plain object
 * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback
 * @returns {undefined}
 * @template TReq extends Message<TReq>
 * @template TRes extends Message<TRes>
 */
Service.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {

    if (!request)
        throw TypeError("request must be specified");

    var self = this;
    if (!callback)
        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);

    if (!self.rpcImpl) {
        setTimeout(function() { callback(Error("already ended")); }, 0);
        return undefined;
    }

    try {
        return self.rpcImpl(
            method,
            requestCtor[self.requestDelimited ? "encodeDelimited" : "encode"](request).finish(),
            function rpcCallback(err, response) {

                if (err) {
                    self.emit("error", err, method);
                    return callback(err);
                }

                if (response === null) {
                    self.end(/* endedByRPC */ true);
                    return undefined;
                }

                if (!(response instanceof responseCtor)) {
                    try {
                        response = responseCtor[self.responseDelimited ? "decodeDelimited" : "decode"](response);
                    } catch (err) {
                        self.emit("error", err, method);
                        return callback(err);
                    }
                }

                self.emit("data", response, method);
                return callback(null, response);
            }
        );
    } catch (err) {
        self.emit("error", err, method);
        setTimeout(function() { callback(err); }, 0);
        return undefined;
    }
};

/**
 * Ends this service and emits the `end` event.
 * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.
 * @returns {rpc.Service} `this`
 */
Service.prototype.end = function end(endedByRPC) {
    if (this.rpcImpl) {
        if (!endedByRPC) // signal end to rpcImpl
            this.rpcImpl(null, null, null);
        this.rpcImpl = null;
        this.emit("end").off();
    }
    return this;
};


/***/ }),

/***/ "./node_modules/protobufjs/src/util/longbits.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/util/longbits.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = LongBits;

var util = __webpack_require__(/*! ../util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

/**
 * Constructs new long bits.
 * @classdesc Helper class for working with the low and high bits of a 64 bit value.
 * @memberof util
 * @constructor
 * @param {number} lo Low 32 bits, unsigned
 * @param {number} hi High 32 bits, unsigned
 */
function LongBits(lo, hi) {

    // note that the casts below are theoretically unnecessary as of today, but older statically
    // generated converter code might still call the ctor with signed 32bits. kept for compat.

    /**
     * Low bits.
     * @type {number}
     */
    this.lo = lo >>> 0;

    /**
     * High bits.
     * @type {number}
     */
    this.hi = hi >>> 0;
}

/**
 * Zero bits.
 * @memberof util.LongBits
 * @type {util.LongBits}
 */
var zero = LongBits.zero = new LongBits(0, 0);

zero.toNumber = function() { return 0; };
zero.zzEncode = zero.zzDecode = function() { return this; };
zero.length = function() { return 1; };

/**
 * Zero hash.
 * @memberof util.LongBits
 * @type {string}
 */
var zeroHash = LongBits.zeroHash = "\0\0\0\0\0\0\0\0";

/**
 * Constructs new long bits from the specified number.
 * @param {number} value Value
 * @returns {util.LongBits} Instance
 */
LongBits.fromNumber = function fromNumber(value) {
    if (value === 0)
        return zero;
    var sign = value < 0;
    if (sign)
        value = -value;
    var lo = value >>> 0,
        hi = (value - lo) / 4294967296 >>> 0;
    if (sign) {
        hi = ~hi >>> 0;
        lo = ~lo >>> 0;
        if (++lo > 4294967295) {
            lo = 0;
            if (++hi > 4294967295)
                hi = 0;
        }
    }
    return new LongBits(lo, hi);
};

/**
 * Constructs new long bits from a number, long or string.
 * @param {Long|number|string} value Value
 * @returns {util.LongBits} Instance
 */
LongBits.from = function from(value) {
    if (typeof value === "number")
        return LongBits.fromNumber(value);
    if (util.isString(value)) {
        /* istanbul ignore else */
        if (util.Long)
            value = util.Long.fromString(value);
        else
            return LongBits.fromNumber(parseInt(value, 10));
    }
    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;
};

/**
 * Converts this long bits to a possibly unsafe JavaScript number.
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {number} Possibly unsafe number
 */
LongBits.prototype.toNumber = function toNumber(unsigned) {
    if (!unsigned && this.hi >>> 31) {
        var lo = ~this.lo + 1 >>> 0,
            hi = ~this.hi     >>> 0;
        if (!lo)
            hi = hi + 1 >>> 0;
        return -(lo + hi * 4294967296);
    }
    return this.lo + this.hi * 4294967296;
};

/**
 * Converts this long bits to a long.
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {Long} Long
 */
LongBits.prototype.toLong = function toLong(unsigned) {
    return util.Long
        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))
        /* istanbul ignore next */
        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };
};

var charCodeAt = String.prototype.charCodeAt;

/**
 * Constructs new long bits from the specified 8 characters long hash.
 * @param {string} hash Hash
 * @returns {util.LongBits} Bits
 */
LongBits.fromHash = function fromHash(hash) {
    if (hash === zeroHash)
        return zero;
    return new LongBits(
        ( charCodeAt.call(hash, 0)
        | charCodeAt.call(hash, 1) << 8
        | charCodeAt.call(hash, 2) << 16
        | charCodeAt.call(hash, 3) << 24) >>> 0
    ,
        ( charCodeAt.call(hash, 4)
        | charCodeAt.call(hash, 5) << 8
        | charCodeAt.call(hash, 6) << 16
        | charCodeAt.call(hash, 7) << 24) >>> 0
    );
};

/**
 * Converts this long bits to a 8 characters long hash.
 * @returns {string} Hash
 */
LongBits.prototype.toHash = function toHash() {
    return String.fromCharCode(
        this.lo        & 255,
        this.lo >>> 8  & 255,
        this.lo >>> 16 & 255,
        this.lo >>> 24      ,
        this.hi        & 255,
        this.hi >>> 8  & 255,
        this.hi >>> 16 & 255,
        this.hi >>> 24
    );
};

/**
 * Zig-zag encodes this long bits.
 * @returns {util.LongBits} `this`
 */
LongBits.prototype.zzEncode = function zzEncode() {
    var mask =   this.hi >> 31;
    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;
    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;
    return this;
};

/**
 * Zig-zag decodes this long bits.
 * @returns {util.LongBits} `this`
 */
LongBits.prototype.zzDecode = function zzDecode() {
    var mask = -(this.lo & 1);
    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;
    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;
    return this;
};

/**
 * Calculates the length of this longbits when encoded as a varint.
 * @returns {number} Length
 */
LongBits.prototype.length = function length() {
    var part0 =  this.lo,
        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,
        part2 =  this.hi >>> 24;
    return part2 === 0
         ? part1 === 0
           ? part0 < 16384
             ? part0 < 128 ? 1 : 2
             : part0 < 2097152 ? 3 : 4
           : part1 < 16384
             ? part1 < 128 ? 5 : 6
             : part1 < 2097152 ? 7 : 8
         : part2 < 128 ? 9 : 10;
};


/***/ }),

/***/ "./node_modules/protobufjs/src/util/minimal.js":
/*!*****************************************************!*\
  !*** ./node_modules/protobufjs/src/util/minimal.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {
var util = exports;

// used to return a Promise where callback is omitted
util.asPromise = __webpack_require__(/*! @protobufjs/aspromise */ "./node_modules/@protobufjs/aspromise/index.js");

// converts to / from base64 encoded strings
util.base64 = __webpack_require__(/*! @protobufjs/base64 */ "./node_modules/@protobufjs/base64/index.js");

// base class of rpc.Service
util.EventEmitter = __webpack_require__(/*! @protobufjs/eventemitter */ "./node_modules/@protobufjs/eventemitter/index.js");

// float handling accross browsers
util.float = __webpack_require__(/*! @protobufjs/float */ "./node_modules/@protobufjs/float/index.js");

// requires modules optionally and hides the call from bundlers
util.inquire = __webpack_require__(/*! @protobufjs/inquire */ "./node_modules/@protobufjs/inquire/index.js");

// converts to / from utf8 encoded strings
util.utf8 = __webpack_require__(/*! @protobufjs/utf8 */ "./node_modules/@protobufjs/utf8/index.js");

// provides a node-like buffer pool in the browser
util.pool = __webpack_require__(/*! @protobufjs/pool */ "./node_modules/@protobufjs/pool/index.js");

// utility to work with the low and high bits of a 64 bit value
util.LongBits = __webpack_require__(/*! ./longbits */ "./node_modules/protobufjs/src/util/longbits.js");

/**
 * Whether running within node or not.
 * @memberof util
 * @type {boolean}
 */
util.isNode = Boolean(typeof global !== "undefined"
                   && global
                   && global.process
                   && global.process.versions
                   && global.process.versions.node);

/**
 * Global object reference.
 * @memberof util
 * @type {Object}
 */
util.global = util.isNode && global
           || typeof window !== "undefined" && window
           || typeof self   !== "undefined" && self
           || this; // eslint-disable-line no-invalid-this

/**
 * An immuable empty array.
 * @memberof util
 * @type {Array.<*>}
 * @const
 */
util.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes

/**
 * An immutable empty object.
 * @type {Object}
 * @const
 */
util.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes

/**
 * Tests if the specified value is an integer.
 * @function
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is an integer
 */
util.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {
    return typeof value === "number" && isFinite(value) && Math.floor(value) === value;
};

/**
 * Tests if the specified value is a string.
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is a string
 */
util.isString = function isString(value) {
    return typeof value === "string" || value instanceof String;
};

/**
 * Tests if the specified value is a non-null object.
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is a non-null object
 */
util.isObject = function isObject(value) {
    return value && typeof value === "object";
};

/**
 * Checks if a property on a message is considered to be present.
 * This is an alias of {@link util.isSet}.
 * @function
 * @param {Object} obj Plain object or message instance
 * @param {string} prop Property name
 * @returns {boolean} `true` if considered to be present, otherwise `false`
 */
util.isset =

/**
 * Checks if a property on a message is considered to be present.
 * @param {Object} obj Plain object or message instance
 * @param {string} prop Property name
 * @returns {boolean} `true` if considered to be present, otherwise `false`
 */
util.isSet = function isSet(obj, prop) {
    var value = obj[prop];
    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins
        return typeof value !== "object" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;
    return false;
};

/**
 * Any compatible Buffer instance.
 * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.
 * @interface Buffer
 * @extends Uint8Array
 */

/**
 * Node's Buffer class if available.
 * @type {Constructor<Buffer>}
 */
util.Buffer = (function() {
    try {
        var Buffer = util.inquire("buffer").Buffer;
        // refuse to use non-node buffers if not explicitly assigned (perf reasons):
        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;
    } catch (e) {
        /* istanbul ignore next */
        return null;
    }
})();

// Internal alias of or polyfull for Buffer.from.
util._Buffer_from = null;

// Internal alias of or polyfill for Buffer.allocUnsafe.
util._Buffer_allocUnsafe = null;

/**
 * Creates a new buffer of whatever type supported by the environment.
 * @param {number|number[]} [sizeOrArray=0] Buffer size or number array
 * @returns {Uint8Array|Buffer} Buffer
 */
util.newBuffer = function newBuffer(sizeOrArray) {
    /* istanbul ignore next */
    return typeof sizeOrArray === "number"
        ? util.Buffer
            ? util._Buffer_allocUnsafe(sizeOrArray)
            : new util.Array(sizeOrArray)
        : util.Buffer
            ? util._Buffer_from(sizeOrArray)
            : typeof Uint8Array === "undefined"
                ? sizeOrArray
                : new Uint8Array(sizeOrArray);
};

/**
 * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.
 * @type {Constructor<Uint8Array>}
 */
util.Array = typeof Uint8Array !== "undefined" ? Uint8Array /* istanbul ignore next */ : Array;

/**
 * Any compatible Long instance.
 * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.
 * @interface Long
 * @property {number} low Low bits
 * @property {number} high High bits
 * @property {boolean} unsigned Whether unsigned or not
 */

/**
 * Long.js's Long class if available.
 * @type {Constructor<Long>}
 */
util.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long
         || /* istanbul ignore next */ util.global.Long
         || util.inquire("long");

/**
 * Regular expression used to verify 2 bit (`bool`) map keys.
 * @type {RegExp}
 * @const
 */
util.key2Re = /^true|false|0|1$/;

/**
 * Regular expression used to verify 32 bit (`int32` etc.) map keys.
 * @type {RegExp}
 * @const
 */
util.key32Re = /^-?(?:0|[1-9][0-9]*)$/;

/**
 * Regular expression used to verify 64 bit (`int64` etc.) map keys.
 * @type {RegExp}
 * @const
 */
util.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;

/**
 * Converts a number or long to an 8 characters long hash string.
 * @param {Long|number} value Value to convert
 * @returns {string} Hash
 */
util.longToHash = function longToHash(value) {
    return value
        ? util.LongBits.from(value).toHash()
        : util.LongBits.zeroHash;
};

/**
 * Converts an 8 characters long hash string to a long or number.
 * @param {string} hash Hash
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {Long|number} Original value
 */
util.longFromHash = function longFromHash(hash, unsigned) {
    var bits = util.LongBits.fromHash(hash);
    if (util.Long)
        return util.Long.fromBits(bits.lo, bits.hi, unsigned);
    return bits.toNumber(Boolean(unsigned));
};

/**
 * Merges the properties of the source object into the destination object.
 * @memberof util
 * @param {Object.<string,*>} dst Destination object
 * @param {Object.<string,*>} src Source object
 * @param {boolean} [ifNotSet=false] Merges only if the key is not already set
 * @returns {Object.<string,*>} Destination object
 */
function merge(dst, src, ifNotSet) { // used by converters
    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)
        if (dst[keys[i]] === undefined || !ifNotSet)
            dst[keys[i]] = src[keys[i]];
    return dst;
}

util.merge = merge;

/**
 * Converts the first character of a string to lower case.
 * @param {string} str String to convert
 * @returns {string} Converted string
 */
util.lcFirst = function lcFirst(str) {
    return str.charAt(0).toLowerCase() + str.substring(1);
};

/**
 * Creates a custom error constructor.
 * @memberof util
 * @param {string} name Error name
 * @returns {Constructor<Error>} Custom error constructor
 */
function newError(name) {

    function CustomError(message, properties) {

        if (!(this instanceof CustomError))
            return new CustomError(message, properties);

        // Error.call(this, message);
        // ^ just returns a new error instance because the ctor can be called as a function

        Object.defineProperty(this, "message", { get: function() { return message; } });

        /* istanbul ignore next */
        if (Error.captureStackTrace) // node
            Error.captureStackTrace(this, CustomError);
        else
            Object.defineProperty(this, "stack", { value: new Error().stack || "" });

        if (properties)
            merge(this, properties);
    }

    (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError;

    Object.defineProperty(CustomError.prototype, "name", { get: function() { return name; } });

    CustomError.prototype.toString = function toString() {
        return this.name + ": " + this.message;
    };

    return CustomError;
}

util.newError = newError;

/**
 * Constructs a new protocol error.
 * @classdesc Error subclass indicating a protocol specifc error.
 * @memberof util
 * @extends Error
 * @template T extends Message<T>
 * @constructor
 * @param {string} message Error message
 * @param {Object.<string,*>} [properties] Additional properties
 * @example
 * try {
 *     MyMessage.decode(someBuffer); // throws if required fields are missing
 * } catch (e) {
 *     if (e instanceof ProtocolError && e.instance)
 *         console.log("decoded so far: " + JSON.stringify(e.instance));
 * }
 */
util.ProtocolError = newError("ProtocolError");

/**
 * So far decoded message instance.
 * @name util.ProtocolError#instance
 * @type {Message<T>}
 */

/**
 * A OneOf getter as returned by {@link util.oneOfGetter}.
 * @typedef OneOfGetter
 * @type {function}
 * @returns {string|undefined} Set field name, if any
 */

/**
 * Builds a getter for a oneof's present field name.
 * @param {string[]} fieldNames Field names
 * @returns {OneOfGetter} Unbound getter
 */
util.oneOfGetter = function getOneOf(fieldNames) {
    var fieldMap = {};
    for (var i = 0; i < fieldNames.length; ++i)
        fieldMap[fieldNames[i]] = 1;

    /**
     * @returns {string|undefined} Set field name, if any
     * @this Object
     * @ignore
     */
    return function() { // eslint-disable-line consistent-return
        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)
            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)
                return keys[i];
    };
};

/**
 * A OneOf setter as returned by {@link util.oneOfSetter}.
 * @typedef OneOfSetter
 * @type {function}
 * @param {string|undefined} value Field name
 * @returns {undefined}
 */

/**
 * Builds a setter for a oneof's present field name.
 * @param {string[]} fieldNames Field names
 * @returns {OneOfSetter} Unbound setter
 */
util.oneOfSetter = function setOneOf(fieldNames) {

    /**
     * @param {string} name Field name
     * @returns {undefined}
     * @this Object
     * @ignore
     */
    return function(name) {
        for (var i = 0; i < fieldNames.length; ++i)
            if (fieldNames[i] !== name)
                delete this[fieldNames[i]];
    };
};

/**
 * Default conversion options used for {@link Message#toJSON} implementations.
 *
 * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:
 *
 * - Longs become strings
 * - Enums become string keys
 * - Bytes become base64 encoded strings
 * - (Sub-)Messages become plain objects
 * - Maps become plain objects with all string keys
 * - Repeated fields become arrays
 * - NaN and Infinity for float and double fields become strings
 *
 * @type {IConversionOptions}
 * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json
 */
util.toJSONOptions = {
    longs: String,
    enums: String,
    bytes: String,
    json: true
};

// Sets up buffer utility according to the environment (called in index-minimal)
util._configure = function() {
    var Buffer = util.Buffer;
    /* istanbul ignore if */
    if (!Buffer) {
        util._Buffer_from = util._Buffer_allocUnsafe = null;
        return;
    }
    // because node 4.x buffers are incompatible & immutable
    // see: https://github.com/dcodeIO/protobuf.js/pull/665
    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||
        /* istanbul ignore next */
        function Buffer_from(value, encoding) {
            return new Buffer(value, encoding);
        };
    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||
        /* istanbul ignore next */
        function Buffer_allocUnsafe(size) {
            return new Buffer(size);
        };
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/protobufjs/src/writer.js":
/*!***********************************************!*\
  !*** ./node_modules/protobufjs/src/writer.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Writer;

var util      = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

var BufferWriter; // cyclic

var LongBits  = util.LongBits,
    base64    = util.base64,
    utf8      = util.utf8;

/**
 * Constructs a new writer operation instance.
 * @classdesc Scheduled writer operation.
 * @constructor
 * @param {function(*, Uint8Array, number)} fn Function to call
 * @param {number} len Value byte length
 * @param {*} val Value to write
 * @ignore
 */
function Op(fn, len, val) {

    /**
     * Function to call.
     * @type {function(Uint8Array, number, *)}
     */
    this.fn = fn;

    /**
     * Value byte length.
     * @type {number}
     */
    this.len = len;

    /**
     * Next operation.
     * @type {Writer.Op|undefined}
     */
    this.next = undefined;

    /**
     * Value to write.
     * @type {*}
     */
    this.val = val; // type varies
}

/* istanbul ignore next */
function noop() {} // eslint-disable-line no-empty-function

/**
 * Constructs a new writer state instance.
 * @classdesc Copied writer state.
 * @memberof Writer
 * @constructor
 * @param {Writer} writer Writer to copy state from
 * @ignore
 */
function State(writer) {

    /**
     * Current head.
     * @type {Writer.Op}
     */
    this.head = writer.head;

    /**
     * Current tail.
     * @type {Writer.Op}
     */
    this.tail = writer.tail;

    /**
     * Current buffer length.
     * @type {number}
     */
    this.len = writer.len;

    /**
     * Next state.
     * @type {State|null}
     */
    this.next = writer.states;
}

/**
 * Constructs a new writer instance.
 * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.
 * @constructor
 */
function Writer() {

    /**
     * Current length.
     * @type {number}
     */
    this.len = 0;

    /**
     * Operations head.
     * @type {Object}
     */
    this.head = new Op(noop, 0, 0);

    /**
     * Operations tail
     * @type {Object}
     */
    this.tail = this.head;

    /**
     * Linked forked states.
     * @type {Object|null}
     */
    this.states = null;

    // When a value is written, the writer calculates its byte length and puts it into a linked
    // list of operations to perform when finish() is called. This both allows us to allocate
    // buffers of the exact required size and reduces the amount of work we have to do compared
    // to first calculating over objects and then encoding over objects. In our case, the encoding
    // part is just a linked list walk calling operations with already prepared values.
}

var create = function create() {
    return util.Buffer
        ? function create_buffer_setup() {
            return (Writer.create = function create_buffer() {
                return new BufferWriter();
            })();
        }
        /* istanbul ignore next */
        : function create_array() {
            return new Writer();
        };
};

/**
 * Creates a new writer.
 * @function
 * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}
 */
Writer.create = create();

/**
 * Allocates a buffer of the specified size.
 * @param {number} size Buffer size
 * @returns {Uint8Array} Buffer
 */
Writer.alloc = function alloc(size) {
    return new util.Array(size);
};

// Use Uint8Array buffer pool in the browser, just like node does with buffers
/* istanbul ignore else */
if (util.Array !== Array)
    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);

/**
 * Pushes a new operation to the queue.
 * @param {function(Uint8Array, number, *)} fn Function to call
 * @param {number} len Value byte length
 * @param {number} val Value to write
 * @returns {Writer} `this`
 * @private
 */
Writer.prototype._push = function push(fn, len, val) {
    this.tail = this.tail.next = new Op(fn, len, val);
    this.len += len;
    return this;
};

function writeByte(val, buf, pos) {
    buf[pos] = val & 255;
}

function writeVarint32(val, buf, pos) {
    while (val > 127) {
        buf[pos++] = val & 127 | 128;
        val >>>= 7;
    }
    buf[pos] = val;
}

/**
 * Constructs a new varint writer operation instance.
 * @classdesc Scheduled varint writer operation.
 * @extends Op
 * @constructor
 * @param {number} len Value byte length
 * @param {number} val Value to write
 * @ignore
 */
function VarintOp(len, val) {
    this.len = len;
    this.next = undefined;
    this.val = val;
}

VarintOp.prototype = Object.create(Op.prototype);
VarintOp.prototype.fn = writeVarint32;

/**
 * Writes an unsigned 32 bit value as a varint.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.uint32 = function write_uint32(value) {
    // here, the call to this.push has been inlined and a varint specific Op subclass is used.
    // uint32 is by far the most frequently used operation and benefits significantly from this.
    this.len += (this.tail = this.tail.next = new VarintOp(
        (value = value >>> 0)
                < 128       ? 1
        : value < 16384     ? 2
        : value < 2097152   ? 3
        : value < 268435456 ? 4
        :                     5,
    value)).len;
    return this;
};

/**
 * Writes a signed 32 bit value as a varint.
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.int32 = function write_int32(value) {
    return value < 0
        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec
        : this.uint32(value);
};

/**
 * Writes a 32 bit value as a varint, zig-zag encoded.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.sint32 = function write_sint32(value) {
    return this.uint32((value << 1 ^ value >> 31) >>> 0);
};

function writeVarint64(val, buf, pos) {
    while (val.hi) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;
        val.hi >>>= 7;
    }
    while (val.lo > 127) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = val.lo >>> 7;
    }
    buf[pos++] = val.lo;
}

/**
 * Writes an unsigned 64 bit value as a varint.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.uint64 = function write_uint64(value) {
    var bits = LongBits.from(value);
    return this._push(writeVarint64, bits.length(), bits);
};

/**
 * Writes a signed 64 bit value as a varint.
 * @function
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.int64 = Writer.prototype.uint64;

/**
 * Writes a signed 64 bit value as a varint, zig-zag encoded.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.sint64 = function write_sint64(value) {
    var bits = LongBits.from(value).zzEncode();
    return this._push(writeVarint64, bits.length(), bits);
};

/**
 * Writes a boolish value as a varint.
 * @param {boolean} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.bool = function write_bool(value) {
    return this._push(writeByte, 1, value ? 1 : 0);
};

function writeFixed32(val, buf, pos) {
    buf[pos    ] =  val         & 255;
    buf[pos + 1] =  val >>> 8   & 255;
    buf[pos + 2] =  val >>> 16  & 255;
    buf[pos + 3] =  val >>> 24;
}

/**
 * Writes an unsigned 32 bit value as fixed 32 bits.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.fixed32 = function write_fixed32(value) {
    return this._push(writeFixed32, 4, value >>> 0);
};

/**
 * Writes a signed 32 bit value as fixed 32 bits.
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.sfixed32 = Writer.prototype.fixed32;

/**
 * Writes an unsigned 64 bit value as fixed 64 bits.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.fixed64 = function write_fixed64(value) {
    var bits = LongBits.from(value);
    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);
};

/**
 * Writes a signed 64 bit value as fixed 64 bits.
 * @function
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.sfixed64 = Writer.prototype.fixed64;

/**
 * Writes a float (32 bit).
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.float = function write_float(value) {
    return this._push(util.float.writeFloatLE, 4, value);
};

/**
 * Writes a double (64 bit float).
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.double = function write_double(value) {
    return this._push(util.float.writeDoubleLE, 8, value);
};

var writeBytes = util.Array.prototype.set
    ? function writeBytes_set(val, buf, pos) {
        buf.set(val, pos); // also works for plain array values
    }
    /* istanbul ignore next */
    : function writeBytes_for(val, buf, pos) {
        for (var i = 0; i < val.length; ++i)
            buf[pos + i] = val[i];
    };

/**
 * Writes a sequence of bytes.
 * @param {Uint8Array|string} value Buffer or base64 encoded string to write
 * @returns {Writer} `this`
 */
Writer.prototype.bytes = function write_bytes(value) {
    var len = value.length >>> 0;
    if (!len)
        return this._push(writeByte, 1, 0);
    if (util.isString(value)) {
        var buf = Writer.alloc(len = base64.length(value));
        base64.decode(value, buf, 0);
        value = buf;
    }
    return this.uint32(len)._push(writeBytes, len, value);
};

/**
 * Writes a string.
 * @param {string} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.string = function write_string(value) {
    var len = utf8.length(value);
    return len
        ? this.uint32(len)._push(utf8.write, len, value)
        : this._push(writeByte, 1, 0);
};

/**
 * Forks this writer's state by pushing it to a stack.
 * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.
 * @returns {Writer} `this`
 */
Writer.prototype.fork = function fork() {
    this.states = new State(this);
    this.head = this.tail = new Op(noop, 0, 0);
    this.len = 0;
    return this;
};

/**
 * Resets this instance to the last state.
 * @returns {Writer} `this`
 */
Writer.prototype.reset = function reset() {
    if (this.states) {
        this.head   = this.states.head;
        this.tail   = this.states.tail;
        this.len    = this.states.len;
        this.states = this.states.next;
    } else {
        this.head = this.tail = new Op(noop, 0, 0);
        this.len  = 0;
    }
    return this;
};

/**
 * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.
 * @returns {Writer} `this`
 */
Writer.prototype.ldelim = function ldelim() {
    var head = this.head,
        tail = this.tail,
        len  = this.len;
    this.reset().uint32(len);
    if (len) {
        this.tail.next = head.next; // skip noop
        this.tail = tail;
        this.len += len;
    }
    return this;
};

/**
 * Finishes the write operation.
 * @returns {Uint8Array} Finished buffer
 */
Writer.prototype.finish = function finish() {
    var head = this.head.next, // skip noop
        buf  = this.constructor.alloc(this.len),
        pos  = 0;
    while (head) {
        head.fn(head.val, buf, pos);
        pos += head.len;
        head = head.next;
    }
    // this.head = this.tail = null;
    return buf;
};

Writer._configure = function(BufferWriter_) {
    BufferWriter = BufferWriter_;
    Writer.create = create();
    BufferWriter._configure();
};


/***/ }),

/***/ "./node_modules/protobufjs/src/writer_buffer.js":
/*!******************************************************!*\
  !*** ./node_modules/protobufjs/src/writer_buffer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = BufferWriter;

// extends Writer
var Writer = __webpack_require__(/*! ./writer */ "./node_modules/protobufjs/src/writer.js");
(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;

var util = __webpack_require__(/*! ./util/minimal */ "./node_modules/protobufjs/src/util/minimal.js");

/**
 * Constructs a new buffer writer instance.
 * @classdesc Wire format writer using node buffers.
 * @extends Writer
 * @constructor
 */
function BufferWriter() {
    Writer.call(this);
}

BufferWriter._configure = function () {
    /**
     * Allocates a buffer of the specified size.
     * @function
     * @param {number} size Buffer size
     * @returns {Buffer} Buffer
     */
    BufferWriter.alloc = util._Buffer_allocUnsafe;

    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === "set"
        ? function writeBytesBuffer_set(val, buf, pos) {
          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)
          // also works for plain array values
        }
        /* istanbul ignore next */
        : function writeBytesBuffer_copy(val, buf, pos) {
          if (val.copy) // Buffer values
            val.copy(buf, pos, 0, val.length);
          else for (var i = 0; i < val.length;) // plain array values
            buf[pos++] = val[i++];
        };
};


/**
 * @override
 */
BufferWriter.prototype.bytes = function write_bytes_buffer(value) {
    if (util.isString(value))
        value = util._Buffer_from(value, "base64");
    var len = value.length >>> 0;
    this.uint32(len);
    if (len)
        this._push(BufferWriter.writeBytesBuffer, len, value);
    return this;
};

function writeStringBuffer(val, buf, pos) {
    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)
        util.utf8.write(val, buf, pos);
    else if (buf.utf8Write)
        buf.utf8Write(val, pos);
    else
        buf.write(val, pos);
}

/**
 * @override
 */
BufferWriter.prototype.string = function write_string_buffer(value) {
    var len = util.Buffer.byteLength(value);
    this.uint32(len);
    if (len)
        this._push(writeStringBuffer, len, value);
    return this;
};


/**
 * Finishes the write operation.
 * @name BufferWriter#finish
 * @function
 * @returns {Buffer} Finished buffer
 */

BufferWriter._configure();


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./src/buttplug_ffi.js":
/*!*****************************!*\
  !*** ./src/buttplug_ffi.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/


var $protobuf = __webpack_require__(/*! protobufjs/minimal */ "./node_modules/protobufjs/minimal.js");

// Common aliases
var $Reader = $protobuf.Reader, $Writer = $protobuf.Writer, $util = $protobuf.util;

// Exported root namespace
var $root = $protobuf.roots["default"] || ($protobuf.roots["default"] = {});

$root.Buttplug = (function() {

    /**
     * Namespace Buttplug.
     * @exports Buttplug
     * @namespace
     */
    var Buttplug = {};

    /**
     * Endpoint enum.
     * @name Buttplug.Endpoint
     * @enum {number}
     * @property {number} Command=0 Command value
     * @property {number} Firmware=1 Firmware value
     * @property {number} Rx=2 Rx value
     * @property {number} RxAccel=3 RxAccel value
     * @property {number} RxBLEBattery=4 RxBLEBattery value
     * @property {number} RxPressure=5 RxPressure value
     * @property {number} RxTouch=6 RxTouch value
     * @property {number} Tx=7 Tx value
     * @property {number} TxMode=8 TxMode value
     * @property {number} TxShock=9 TxShock value
     * @property {number} TxVibrate=10 TxVibrate value
     * @property {number} TxVendorControl=11 TxVendorControl value
     * @property {number} Whitelist=12 Whitelist value
     * @property {number} Generic0=13 Generic0 value
     * @property {number} Generic1=14 Generic1 value
     * @property {number} Generic2=15 Generic2 value
     * @property {number} Generic3=16 Generic3 value
     * @property {number} Generic4=17 Generic4 value
     * @property {number} Generic5=18 Generic5 value
     * @property {number} Generic6=19 Generic6 value
     * @property {number} Generic7=20 Generic7 value
     * @property {number} Generic8=21 Generic8 value
     * @property {number} Generic9=22 Generic9 value
     * @property {number} Generic10=23 Generic10 value
     * @property {number} Generic11=24 Generic11 value
     * @property {number} Generic12=25 Generic12 value
     * @property {number} Generic13=26 Generic13 value
     * @property {number} Generic14=27 Generic14 value
     * @property {number} Generic15=28 Generic15 value
     * @property {number} Generic16=29 Generic16 value
     * @property {number} Generic17=30 Generic17 value
     * @property {number} Generic18=31 Generic18 value
     * @property {number} Generic19=32 Generic19 value
     * @property {number} Generic20=33 Generic20 value
     * @property {number} Generic21=34 Generic21 value
     * @property {number} Generic22=35 Generic22 value
     * @property {number} Generic23=36 Generic23 value
     * @property {number} Generic24=37 Generic24 value
     * @property {number} Generic25=38 Generic25 value
     * @property {number} Generic26=39 Generic26 value
     * @property {number} Generic27=40 Generic27 value
     * @property {number} Generic28=41 Generic28 value
     * @property {number} Generic29=42 Generic29 value
     * @property {number} Generic30=43 Generic30 value
     * @property {number} Generic31=44 Generic31 value
     */
    Buttplug.Endpoint = (function() {
        var valuesById = {}, values = Object.create(valuesById);
        values[valuesById[0] = "Command"] = 0;
        values[valuesById[1] = "Firmware"] = 1;
        values[valuesById[2] = "Rx"] = 2;
        values[valuesById[3] = "RxAccel"] = 3;
        values[valuesById[4] = "RxBLEBattery"] = 4;
        values[valuesById[5] = "RxPressure"] = 5;
        values[valuesById[6] = "RxTouch"] = 6;
        values[valuesById[7] = "Tx"] = 7;
        values[valuesById[8] = "TxMode"] = 8;
        values[valuesById[9] = "TxShock"] = 9;
        values[valuesById[10] = "TxVibrate"] = 10;
        values[valuesById[11] = "TxVendorControl"] = 11;
        values[valuesById[12] = "Whitelist"] = 12;
        values[valuesById[13] = "Generic0"] = 13;
        values[valuesById[14] = "Generic1"] = 14;
        values[valuesById[15] = "Generic2"] = 15;
        values[valuesById[16] = "Generic3"] = 16;
        values[valuesById[17] = "Generic4"] = 17;
        values[valuesById[18] = "Generic5"] = 18;
        values[valuesById[19] = "Generic6"] = 19;
        values[valuesById[20] = "Generic7"] = 20;
        values[valuesById[21] = "Generic8"] = 21;
        values[valuesById[22] = "Generic9"] = 22;
        values[valuesById[23] = "Generic10"] = 23;
        values[valuesById[24] = "Generic11"] = 24;
        values[valuesById[25] = "Generic12"] = 25;
        values[valuesById[26] = "Generic13"] = 26;
        values[valuesById[27] = "Generic14"] = 27;
        values[valuesById[28] = "Generic15"] = 28;
        values[valuesById[29] = "Generic16"] = 29;
        values[valuesById[30] = "Generic17"] = 30;
        values[valuesById[31] = "Generic18"] = 31;
        values[valuesById[32] = "Generic19"] = 32;
        values[valuesById[33] = "Generic20"] = 33;
        values[valuesById[34] = "Generic21"] = 34;
        values[valuesById[35] = "Generic22"] = 35;
        values[valuesById[36] = "Generic23"] = 36;
        values[valuesById[37] = "Generic24"] = 37;
        values[valuesById[38] = "Generic25"] = 38;
        values[valuesById[39] = "Generic26"] = 39;
        values[valuesById[40] = "Generic27"] = 40;
        values[valuesById[41] = "Generic28"] = 41;
        values[valuesById[42] = "Generic29"] = 42;
        values[valuesById[43] = "Generic30"] = 43;
        values[valuesById[44] = "Generic31"] = 44;
        return values;
    })();

    Buttplug.ClientMessage = (function() {

        /**
         * Properties of a ClientMessage.
         * @memberof Buttplug
         * @interface IClientMessage
         * @property {number|null} [id] ClientMessage id
         * @property {Buttplug.ClientMessage.IFFIMessage|null} [message] ClientMessage message
         */

        /**
         * Constructs a new ClientMessage.
         * @memberof Buttplug
         * @classdesc Represents a ClientMessage.
         * @implements IClientMessage
         * @constructor
         * @param {Buttplug.IClientMessage=} [properties] Properties to set
         */
        function ClientMessage(properties) {
            if (properties)
                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        /**
         * ClientMessage id.
         * @member {number} id
         * @memberof Buttplug.ClientMessage
         * @instance
         */
        ClientMessage.prototype.id = 0;

        /**
         * ClientMessage message.
         * @member {Buttplug.ClientMessage.IFFIMessage|null|undefined} message
         * @memberof Buttplug.ClientMessage
         * @instance
         */
        ClientMessage.prototype.message = null;

        /**
         * Creates a new ClientMessage instance using the specified properties.
         * @function create
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {Buttplug.IClientMessage=} [properties] Properties to set
         * @returns {Buttplug.ClientMessage} ClientMessage instance
         */
        ClientMessage.create = function create(properties) {
            return new ClientMessage(properties);
        };

        /**
         * Encodes the specified ClientMessage message. Does not implicitly {@link Buttplug.ClientMessage.verify|verify} messages.
         * @function encode
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {Buttplug.IClientMessage} message ClientMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        ClientMessage.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.id);
            if (message.message != null && Object.hasOwnProperty.call(message, "message"))
                $root.Buttplug.ClientMessage.FFIMessage.encode(message.message, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
            return writer;
        };

        /**
         * Encodes the specified ClientMessage message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.verify|verify} messages.
         * @function encodeDelimited
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {Buttplug.IClientMessage} message ClientMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        ClientMessage.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
        };

        /**
         * Decodes a ClientMessage message from the specified reader or buffer.
         * @function decode
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @param {number} [length] Message length if known beforehand
         * @returns {Buttplug.ClientMessage} ClientMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        ClientMessage.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage();
            while (reader.pos < end) {
                var tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.id = reader.uint32();
                    break;
                case 2:
                    message.message = $root.Buttplug.ClientMessage.FFIMessage.decode(reader, reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        /**
         * Decodes a ClientMessage message from the specified reader or buffer, length delimited.
         * @function decodeDelimited
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @returns {Buttplug.ClientMessage} ClientMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        ClientMessage.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
                reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
        };

        /**
         * Verifies a ClientMessage message.
         * @function verify
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {Object.<string,*>} message Plain object to verify
         * @returns {string|null} `null` if valid, otherwise the reason why it is not
         */
        ClientMessage.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
                return "object expected";
            if (message.id != null && message.hasOwnProperty("id"))
                if (!$util.isInteger(message.id))
                    return "id: integer expected";
            if (message.message != null && message.hasOwnProperty("message")) {
                var error = $root.Buttplug.ClientMessage.FFIMessage.verify(message.message);
                if (error)
                    return "message." + error;
            }
            return null;
        };

        /**
         * Creates a ClientMessage message from a plain object. Also converts values to their respective internal types.
         * @function fromObject
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {Object.<string,*>} object Plain object
         * @returns {Buttplug.ClientMessage} ClientMessage
         */
        ClientMessage.fromObject = function fromObject(object) {
            if (object instanceof $root.Buttplug.ClientMessage)
                return object;
            var message = new $root.Buttplug.ClientMessage();
            if (object.id != null)
                message.id = object.id >>> 0;
            if (object.message != null) {
                if (typeof object.message !== "object")
                    throw TypeError(".Buttplug.ClientMessage.message: object expected");
                message.message = $root.Buttplug.ClientMessage.FFIMessage.fromObject(object.message);
            }
            return message;
        };

        /**
         * Creates a plain object from a ClientMessage message. Also converts values to other types if specified.
         * @function toObject
         * @memberof Buttplug.ClientMessage
         * @static
         * @param {Buttplug.ClientMessage} message ClientMessage
         * @param {$protobuf.IConversionOptions} [options] Conversion options
         * @returns {Object.<string,*>} Plain object
         */
        ClientMessage.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            var object = {};
            if (options.defaults) {
                object.id = 0;
                object.message = null;
            }
            if (message.id != null && message.hasOwnProperty("id"))
                object.id = message.id;
            if (message.message != null && message.hasOwnProperty("message"))
                object.message = $root.Buttplug.ClientMessage.FFIMessage.toObject(message.message, options);
            return object;
        };

        /**
         * Converts this ClientMessage to JSON.
         * @function toJSON
         * @memberof Buttplug.ClientMessage
         * @instance
         * @returns {Object.<string,*>} JSON object
         */
        ClientMessage.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };

        /**
         * DeviceCommunicationManagerTypes enum.
         * @name Buttplug.ClientMessage.DeviceCommunicationManagerTypes
         * @enum {number}
         * @property {number} All=0 All value
         * @property {number} Btleplug=1 Btleplug value
         * @property {number} XInput=2 XInput value
         * @property {number} SerialPort=4 SerialPort value
         * @property {number} LovenseHIDDongle=8 LovenseHIDDongle value
         * @property {number} LovenseSerialDongle=16 LovenseSerialDongle value
         */
        ClientMessage.DeviceCommunicationManagerTypes = (function() {
            var valuesById = {}, values = Object.create(valuesById);
            values[valuesById[0] = "All"] = 0;
            values[valuesById[1] = "Btleplug"] = 1;
            values[valuesById[2] = "XInput"] = 2;
            values[valuesById[4] = "SerialPort"] = 4;
            values[valuesById[8] = "LovenseHIDDongle"] = 8;
            values[valuesById[16] = "LovenseSerialDongle"] = 16;
            return values;
        })();

        ClientMessage.ConnectLocal = (function() {

            /**
             * Properties of a ConnectLocal.
             * @memberof Buttplug.ClientMessage
             * @interface IConnectLocal
             * @property {string|null} [serverName] ConnectLocal serverName
             * @property {number|null} [maxPingTime] ConnectLocal maxPingTime
             * @property {boolean|null} [allowRawMessages] ConnectLocal allowRawMessages
             * @property {string|null} [deviceConfigurationJson] ConnectLocal deviceConfigurationJson
             * @property {string|null} [userDeviceConfigurationJson] ConnectLocal userDeviceConfigurationJson
             * @property {number|null} [commManagerTypes] ConnectLocal commManagerTypes
             */

            /**
             * Constructs a new ConnectLocal.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a ConnectLocal.
             * @implements IConnectLocal
             * @constructor
             * @param {Buttplug.ClientMessage.IConnectLocal=} [properties] Properties to set
             */
            function ConnectLocal(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * ConnectLocal serverName.
             * @member {string} serverName
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             */
            ConnectLocal.prototype.serverName = "";

            /**
             * ConnectLocal maxPingTime.
             * @member {number} maxPingTime
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             */
            ConnectLocal.prototype.maxPingTime = 0;

            /**
             * ConnectLocal allowRawMessages.
             * @member {boolean} allowRawMessages
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             */
            ConnectLocal.prototype.allowRawMessages = false;

            /**
             * ConnectLocal deviceConfigurationJson.
             * @member {string} deviceConfigurationJson
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             */
            ConnectLocal.prototype.deviceConfigurationJson = "";

            /**
             * ConnectLocal userDeviceConfigurationJson.
             * @member {string} userDeviceConfigurationJson
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             */
            ConnectLocal.prototype.userDeviceConfigurationJson = "";

            /**
             * ConnectLocal commManagerTypes.
             * @member {number} commManagerTypes
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             */
            ConnectLocal.prototype.commManagerTypes = 0;

            /**
             * Creates a new ConnectLocal instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {Buttplug.ClientMessage.IConnectLocal=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.ConnectLocal} ConnectLocal instance
             */
            ConnectLocal.create = function create(properties) {
                return new ConnectLocal(properties);
            };

            /**
             * Encodes the specified ConnectLocal message. Does not implicitly {@link Buttplug.ClientMessage.ConnectLocal.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {Buttplug.ClientMessage.IConnectLocal} message ConnectLocal message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            ConnectLocal.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.serverName != null && Object.hasOwnProperty.call(message, "serverName"))
                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.serverName);
                if (message.maxPingTime != null && Object.hasOwnProperty.call(message, "maxPingTime"))
                    writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.maxPingTime);
                if (message.allowRawMessages != null && Object.hasOwnProperty.call(message, "allowRawMessages"))
                    writer.uint32(/* id 3, wireType 0 =*/24).bool(message.allowRawMessages);
                if (message.deviceConfigurationJson != null && Object.hasOwnProperty.call(message, "deviceConfigurationJson"))
                    writer.uint32(/* id 4, wireType 2 =*/34).string(message.deviceConfigurationJson);
                if (message.userDeviceConfigurationJson != null && Object.hasOwnProperty.call(message, "userDeviceConfigurationJson"))
                    writer.uint32(/* id 5, wireType 2 =*/42).string(message.userDeviceConfigurationJson);
                if (message.commManagerTypes != null && Object.hasOwnProperty.call(message, "commManagerTypes"))
                    writer.uint32(/* id 6, wireType 0 =*/48).uint32(message.commManagerTypes);
                return writer;
            };

            /**
             * Encodes the specified ConnectLocal message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.ConnectLocal.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {Buttplug.ClientMessage.IConnectLocal} message ConnectLocal message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            ConnectLocal.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a ConnectLocal message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.ConnectLocal} ConnectLocal
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            ConnectLocal.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.ConnectLocal();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.serverName = reader.string();
                        break;
                    case 2:
                        message.maxPingTime = reader.uint32();
                        break;
                    case 3:
                        message.allowRawMessages = reader.bool();
                        break;
                    case 4:
                        message.deviceConfigurationJson = reader.string();
                        break;
                    case 5:
                        message.userDeviceConfigurationJson = reader.string();
                        break;
                    case 6:
                        message.commManagerTypes = reader.uint32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a ConnectLocal message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.ConnectLocal} ConnectLocal
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            ConnectLocal.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a ConnectLocal message.
             * @function verify
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            ConnectLocal.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.serverName != null && message.hasOwnProperty("serverName"))
                    if (!$util.isString(message.serverName))
                        return "serverName: string expected";
                if (message.maxPingTime != null && message.hasOwnProperty("maxPingTime"))
                    if (!$util.isInteger(message.maxPingTime))
                        return "maxPingTime: integer expected";
                if (message.allowRawMessages != null && message.hasOwnProperty("allowRawMessages"))
                    if (typeof message.allowRawMessages !== "boolean")
                        return "allowRawMessages: boolean expected";
                if (message.deviceConfigurationJson != null && message.hasOwnProperty("deviceConfigurationJson"))
                    if (!$util.isString(message.deviceConfigurationJson))
                        return "deviceConfigurationJson: string expected";
                if (message.userDeviceConfigurationJson != null && message.hasOwnProperty("userDeviceConfigurationJson"))
                    if (!$util.isString(message.userDeviceConfigurationJson))
                        return "userDeviceConfigurationJson: string expected";
                if (message.commManagerTypes != null && message.hasOwnProperty("commManagerTypes"))
                    if (!$util.isInteger(message.commManagerTypes))
                        return "commManagerTypes: integer expected";
                return null;
            };

            /**
             * Creates a ConnectLocal message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.ConnectLocal} ConnectLocal
             */
            ConnectLocal.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.ConnectLocal)
                    return object;
                var message = new $root.Buttplug.ClientMessage.ConnectLocal();
                if (object.serverName != null)
                    message.serverName = String(object.serverName);
                if (object.maxPingTime != null)
                    message.maxPingTime = object.maxPingTime >>> 0;
                if (object.allowRawMessages != null)
                    message.allowRawMessages = Boolean(object.allowRawMessages);
                if (object.deviceConfigurationJson != null)
                    message.deviceConfigurationJson = String(object.deviceConfigurationJson);
                if (object.userDeviceConfigurationJson != null)
                    message.userDeviceConfigurationJson = String(object.userDeviceConfigurationJson);
                if (object.commManagerTypes != null)
                    message.commManagerTypes = object.commManagerTypes >>> 0;
                return message;
            };

            /**
             * Creates a plain object from a ConnectLocal message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @static
             * @param {Buttplug.ClientMessage.ConnectLocal} message ConnectLocal
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            ConnectLocal.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.serverName = "";
                    object.maxPingTime = 0;
                    object.allowRawMessages = false;
                    object.deviceConfigurationJson = "";
                    object.userDeviceConfigurationJson = "";
                    object.commManagerTypes = 0;
                }
                if (message.serverName != null && message.hasOwnProperty("serverName"))
                    object.serverName = message.serverName;
                if (message.maxPingTime != null && message.hasOwnProperty("maxPingTime"))
                    object.maxPingTime = message.maxPingTime;
                if (message.allowRawMessages != null && message.hasOwnProperty("allowRawMessages"))
                    object.allowRawMessages = message.allowRawMessages;
                if (message.deviceConfigurationJson != null && message.hasOwnProperty("deviceConfigurationJson"))
                    object.deviceConfigurationJson = message.deviceConfigurationJson;
                if (message.userDeviceConfigurationJson != null && message.hasOwnProperty("userDeviceConfigurationJson"))
                    object.userDeviceConfigurationJson = message.userDeviceConfigurationJson;
                if (message.commManagerTypes != null && message.hasOwnProperty("commManagerTypes"))
                    object.commManagerTypes = message.commManagerTypes;
                return object;
            };

            /**
             * Converts this ConnectLocal to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.ConnectLocal
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            ConnectLocal.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return ConnectLocal;
        })();

        ClientMessage.ConnectWebsocket = (function() {

            /**
             * Properties of a ConnectWebsocket.
             * @memberof Buttplug.ClientMessage
             * @interface IConnectWebsocket
             * @property {string|null} [address] ConnectWebsocket address
             * @property {boolean|null} [bypassCertVerification] ConnectWebsocket bypassCertVerification
             */

            /**
             * Constructs a new ConnectWebsocket.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a ConnectWebsocket.
             * @implements IConnectWebsocket
             * @constructor
             * @param {Buttplug.ClientMessage.IConnectWebsocket=} [properties] Properties to set
             */
            function ConnectWebsocket(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * ConnectWebsocket address.
             * @member {string} address
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @instance
             */
            ConnectWebsocket.prototype.address = "";

            /**
             * ConnectWebsocket bypassCertVerification.
             * @member {boolean} bypassCertVerification
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @instance
             */
            ConnectWebsocket.prototype.bypassCertVerification = false;

            /**
             * Creates a new ConnectWebsocket instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {Buttplug.ClientMessage.IConnectWebsocket=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.ConnectWebsocket} ConnectWebsocket instance
             */
            ConnectWebsocket.create = function create(properties) {
                return new ConnectWebsocket(properties);
            };

            /**
             * Encodes the specified ConnectWebsocket message. Does not implicitly {@link Buttplug.ClientMessage.ConnectWebsocket.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {Buttplug.ClientMessage.IConnectWebsocket} message ConnectWebsocket message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            ConnectWebsocket.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.address != null && Object.hasOwnProperty.call(message, "address"))
                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.address);
                if (message.bypassCertVerification != null && Object.hasOwnProperty.call(message, "bypassCertVerification"))
                    writer.uint32(/* id 2, wireType 0 =*/16).bool(message.bypassCertVerification);
                return writer;
            };

            /**
             * Encodes the specified ConnectWebsocket message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.ConnectWebsocket.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {Buttplug.ClientMessage.IConnectWebsocket} message ConnectWebsocket message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            ConnectWebsocket.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a ConnectWebsocket message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.ConnectWebsocket} ConnectWebsocket
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            ConnectWebsocket.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.ConnectWebsocket();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.address = reader.string();
                        break;
                    case 2:
                        message.bypassCertVerification = reader.bool();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a ConnectWebsocket message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.ConnectWebsocket} ConnectWebsocket
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            ConnectWebsocket.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a ConnectWebsocket message.
             * @function verify
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            ConnectWebsocket.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.address != null && message.hasOwnProperty("address"))
                    if (!$util.isString(message.address))
                        return "address: string expected";
                if (message.bypassCertVerification != null && message.hasOwnProperty("bypassCertVerification"))
                    if (typeof message.bypassCertVerification !== "boolean")
                        return "bypassCertVerification: boolean expected";
                return null;
            };

            /**
             * Creates a ConnectWebsocket message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.ConnectWebsocket} ConnectWebsocket
             */
            ConnectWebsocket.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.ConnectWebsocket)
                    return object;
                var message = new $root.Buttplug.ClientMessage.ConnectWebsocket();
                if (object.address != null)
                    message.address = String(object.address);
                if (object.bypassCertVerification != null)
                    message.bypassCertVerification = Boolean(object.bypassCertVerification);
                return message;
            };

            /**
             * Creates a plain object from a ConnectWebsocket message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @static
             * @param {Buttplug.ClientMessage.ConnectWebsocket} message ConnectWebsocket
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            ConnectWebsocket.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.address = "";
                    object.bypassCertVerification = false;
                }
                if (message.address != null && message.hasOwnProperty("address"))
                    object.address = message.address;
                if (message.bypassCertVerification != null && message.hasOwnProperty("bypassCertVerification"))
                    object.bypassCertVerification = message.bypassCertVerification;
                return object;
            };

            /**
             * Converts this ConnectWebsocket to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.ConnectWebsocket
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            ConnectWebsocket.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return ConnectWebsocket;
        })();

        ClientMessage.StartScanning = (function() {

            /**
             * Properties of a StartScanning.
             * @memberof Buttplug.ClientMessage
             * @interface IStartScanning
             */

            /**
             * Constructs a new StartScanning.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a StartScanning.
             * @implements IStartScanning
             * @constructor
             * @param {Buttplug.ClientMessage.IStartScanning=} [properties] Properties to set
             */
            function StartScanning(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new StartScanning instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {Buttplug.ClientMessage.IStartScanning=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.StartScanning} StartScanning instance
             */
            StartScanning.create = function create(properties) {
                return new StartScanning(properties);
            };

            /**
             * Encodes the specified StartScanning message. Does not implicitly {@link Buttplug.ClientMessage.StartScanning.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {Buttplug.ClientMessage.IStartScanning} message StartScanning message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StartScanning.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified StartScanning message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.StartScanning.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {Buttplug.ClientMessage.IStartScanning} message StartScanning message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StartScanning.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a StartScanning message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.StartScanning} StartScanning
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StartScanning.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.StartScanning();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a StartScanning message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.StartScanning} StartScanning
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StartScanning.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a StartScanning message.
             * @function verify
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            StartScanning.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a StartScanning message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.StartScanning} StartScanning
             */
            StartScanning.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.StartScanning)
                    return object;
                return new $root.Buttplug.ClientMessage.StartScanning();
            };

            /**
             * Creates a plain object from a StartScanning message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.StartScanning
             * @static
             * @param {Buttplug.ClientMessage.StartScanning} message StartScanning
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            StartScanning.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this StartScanning to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.StartScanning
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            StartScanning.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return StartScanning;
        })();

        ClientMessage.StopScanning = (function() {

            /**
             * Properties of a StopScanning.
             * @memberof Buttplug.ClientMessage
             * @interface IStopScanning
             */

            /**
             * Constructs a new StopScanning.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a StopScanning.
             * @implements IStopScanning
             * @constructor
             * @param {Buttplug.ClientMessage.IStopScanning=} [properties] Properties to set
             */
            function StopScanning(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new StopScanning instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {Buttplug.ClientMessage.IStopScanning=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.StopScanning} StopScanning instance
             */
            StopScanning.create = function create(properties) {
                return new StopScanning(properties);
            };

            /**
             * Encodes the specified StopScanning message. Does not implicitly {@link Buttplug.ClientMessage.StopScanning.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {Buttplug.ClientMessage.IStopScanning} message StopScanning message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StopScanning.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified StopScanning message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.StopScanning.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {Buttplug.ClientMessage.IStopScanning} message StopScanning message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StopScanning.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a StopScanning message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.StopScanning} StopScanning
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StopScanning.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.StopScanning();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a StopScanning message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.StopScanning} StopScanning
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StopScanning.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a StopScanning message.
             * @function verify
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            StopScanning.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a StopScanning message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.StopScanning} StopScanning
             */
            StopScanning.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.StopScanning)
                    return object;
                return new $root.Buttplug.ClientMessage.StopScanning();
            };

            /**
             * Creates a plain object from a StopScanning message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.StopScanning
             * @static
             * @param {Buttplug.ClientMessage.StopScanning} message StopScanning
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            StopScanning.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this StopScanning to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.StopScanning
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            StopScanning.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return StopScanning;
        })();

        ClientMessage.StopAllDevices = (function() {

            /**
             * Properties of a StopAllDevices.
             * @memberof Buttplug.ClientMessage
             * @interface IStopAllDevices
             */

            /**
             * Constructs a new StopAllDevices.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a StopAllDevices.
             * @implements IStopAllDevices
             * @constructor
             * @param {Buttplug.ClientMessage.IStopAllDevices=} [properties] Properties to set
             */
            function StopAllDevices(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new StopAllDevices instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {Buttplug.ClientMessage.IStopAllDevices=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.StopAllDevices} StopAllDevices instance
             */
            StopAllDevices.create = function create(properties) {
                return new StopAllDevices(properties);
            };

            /**
             * Encodes the specified StopAllDevices message. Does not implicitly {@link Buttplug.ClientMessage.StopAllDevices.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {Buttplug.ClientMessage.IStopAllDevices} message StopAllDevices message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StopAllDevices.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified StopAllDevices message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.StopAllDevices.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {Buttplug.ClientMessage.IStopAllDevices} message StopAllDevices message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StopAllDevices.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a StopAllDevices message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.StopAllDevices} StopAllDevices
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StopAllDevices.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.StopAllDevices();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a StopAllDevices message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.StopAllDevices} StopAllDevices
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StopAllDevices.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a StopAllDevices message.
             * @function verify
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            StopAllDevices.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a StopAllDevices message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.StopAllDevices} StopAllDevices
             */
            StopAllDevices.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.StopAllDevices)
                    return object;
                return new $root.Buttplug.ClientMessage.StopAllDevices();
            };

            /**
             * Creates a plain object from a StopAllDevices message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @static
             * @param {Buttplug.ClientMessage.StopAllDevices} message StopAllDevices
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            StopAllDevices.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this StopAllDevices to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.StopAllDevices
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            StopAllDevices.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return StopAllDevices;
        })();

        ClientMessage.Disconnect = (function() {

            /**
             * Properties of a Disconnect.
             * @memberof Buttplug.ClientMessage
             * @interface IDisconnect
             */

            /**
             * Constructs a new Disconnect.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a Disconnect.
             * @implements IDisconnect
             * @constructor
             * @param {Buttplug.ClientMessage.IDisconnect=} [properties] Properties to set
             */
            function Disconnect(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new Disconnect instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {Buttplug.ClientMessage.IDisconnect=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.Disconnect} Disconnect instance
             */
            Disconnect.create = function create(properties) {
                return new Disconnect(properties);
            };

            /**
             * Encodes the specified Disconnect message. Does not implicitly {@link Buttplug.ClientMessage.Disconnect.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {Buttplug.ClientMessage.IDisconnect} message Disconnect message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Disconnect.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified Disconnect message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.Disconnect.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {Buttplug.ClientMessage.IDisconnect} message Disconnect message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Disconnect.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a Disconnect message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.Disconnect} Disconnect
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Disconnect.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.Disconnect();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a Disconnect message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.Disconnect} Disconnect
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Disconnect.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a Disconnect message.
             * @function verify
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            Disconnect.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a Disconnect message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.Disconnect} Disconnect
             */
            Disconnect.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.Disconnect)
                    return object;
                return new $root.Buttplug.ClientMessage.Disconnect();
            };

            /**
             * Creates a plain object from a Disconnect message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.Disconnect
             * @static
             * @param {Buttplug.ClientMessage.Disconnect} message Disconnect
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            Disconnect.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this Disconnect to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.Disconnect
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            Disconnect.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return Disconnect;
        })();

        ClientMessage.Ping = (function() {

            /**
             * Properties of a Ping.
             * @memberof Buttplug.ClientMessage
             * @interface IPing
             */

            /**
             * Constructs a new Ping.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a Ping.
             * @implements IPing
             * @constructor
             * @param {Buttplug.ClientMessage.IPing=} [properties] Properties to set
             */
            function Ping(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new Ping instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {Buttplug.ClientMessage.IPing=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.Ping} Ping instance
             */
            Ping.create = function create(properties) {
                return new Ping(properties);
            };

            /**
             * Encodes the specified Ping message. Does not implicitly {@link Buttplug.ClientMessage.Ping.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {Buttplug.ClientMessage.IPing} message Ping message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Ping.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified Ping message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.Ping.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {Buttplug.ClientMessage.IPing} message Ping message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Ping.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a Ping message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.Ping} Ping
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Ping.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.Ping();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a Ping message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.Ping} Ping
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Ping.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a Ping message.
             * @function verify
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            Ping.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a Ping message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.Ping} Ping
             */
            Ping.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.Ping)
                    return object;
                return new $root.Buttplug.ClientMessage.Ping();
            };

            /**
             * Creates a plain object from a Ping message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.Ping
             * @static
             * @param {Buttplug.ClientMessage.Ping} message Ping
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            Ping.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this Ping to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.Ping
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            Ping.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return Ping;
        })();

        ClientMessage.FFIMessage = (function() {

            /**
             * Properties of a FFIMessage.
             * @memberof Buttplug.ClientMessage
             * @interface IFFIMessage
             * @property {Buttplug.ClientMessage.IConnectLocal|null} [connectLocal] FFIMessage connectLocal
             * @property {Buttplug.ClientMessage.IConnectWebsocket|null} [connectWebsocket] FFIMessage connectWebsocket
             * @property {Buttplug.ClientMessage.IStartScanning|null} [startScanning] FFIMessage startScanning
             * @property {Buttplug.ClientMessage.IStopScanning|null} [stopScanning] FFIMessage stopScanning
             * @property {Buttplug.ClientMessage.IStopAllDevices|null} [stopAllDevices] FFIMessage stopAllDevices
             * @property {Buttplug.ClientMessage.IDisconnect|null} [disconnect] FFIMessage disconnect
             * @property {Buttplug.ClientMessage.IPing|null} [ping] FFIMessage ping
             */

            /**
             * Constructs a new FFIMessage.
             * @memberof Buttplug.ClientMessage
             * @classdesc Represents a FFIMessage.
             * @implements IFFIMessage
             * @constructor
             * @param {Buttplug.ClientMessage.IFFIMessage=} [properties] Properties to set
             */
            function FFIMessage(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * FFIMessage connectLocal.
             * @member {Buttplug.ClientMessage.IConnectLocal|null|undefined} connectLocal
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.connectLocal = null;

            /**
             * FFIMessage connectWebsocket.
             * @member {Buttplug.ClientMessage.IConnectWebsocket|null|undefined} connectWebsocket
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.connectWebsocket = null;

            /**
             * FFIMessage startScanning.
             * @member {Buttplug.ClientMessage.IStartScanning|null|undefined} startScanning
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.startScanning = null;

            /**
             * FFIMessage stopScanning.
             * @member {Buttplug.ClientMessage.IStopScanning|null|undefined} stopScanning
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.stopScanning = null;

            /**
             * FFIMessage stopAllDevices.
             * @member {Buttplug.ClientMessage.IStopAllDevices|null|undefined} stopAllDevices
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.stopAllDevices = null;

            /**
             * FFIMessage disconnect.
             * @member {Buttplug.ClientMessage.IDisconnect|null|undefined} disconnect
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.disconnect = null;

            /**
             * FFIMessage ping.
             * @member {Buttplug.ClientMessage.IPing|null|undefined} ping
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.ping = null;

            // OneOf field names bound to virtual getters and setters
            var $oneOfFields;

            /**
             * FFIMessage msg.
             * @member {"connectLocal"|"connectWebsocket"|"startScanning"|"stopScanning"|"stopAllDevices"|"disconnect"|"ping"|undefined} msg
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             */
            Object.defineProperty(FFIMessage.prototype, "msg", {
                get: $util.oneOfGetter($oneOfFields = ["connectLocal", "connectWebsocket", "startScanning", "stopScanning", "stopAllDevices", "disconnect", "ping"]),
                set: $util.oneOfSetter($oneOfFields)
            });

            /**
             * Creates a new FFIMessage instance using the specified properties.
             * @function create
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {Buttplug.ClientMessage.IFFIMessage=} [properties] Properties to set
             * @returns {Buttplug.ClientMessage.FFIMessage} FFIMessage instance
             */
            FFIMessage.create = function create(properties) {
                return new FFIMessage(properties);
            };

            /**
             * Encodes the specified FFIMessage message. Does not implicitly {@link Buttplug.ClientMessage.FFIMessage.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {Buttplug.ClientMessage.IFFIMessage} message FFIMessage message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FFIMessage.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.connectLocal != null && Object.hasOwnProperty.call(message, "connectLocal"))
                    $root.Buttplug.ClientMessage.ConnectLocal.encode(message.connectLocal, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                if (message.connectWebsocket != null && Object.hasOwnProperty.call(message, "connectWebsocket"))
                    $root.Buttplug.ClientMessage.ConnectWebsocket.encode(message.connectWebsocket, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                if (message.startScanning != null && Object.hasOwnProperty.call(message, "startScanning"))
                    $root.Buttplug.ClientMessage.StartScanning.encode(message.startScanning, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                if (message.stopScanning != null && Object.hasOwnProperty.call(message, "stopScanning"))
                    $root.Buttplug.ClientMessage.StopScanning.encode(message.stopScanning, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                if (message.stopAllDevices != null && Object.hasOwnProperty.call(message, "stopAllDevices"))
                    $root.Buttplug.ClientMessage.StopAllDevices.encode(message.stopAllDevices, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                if (message.disconnect != null && Object.hasOwnProperty.call(message, "disconnect"))
                    $root.Buttplug.ClientMessage.Disconnect.encode(message.disconnect, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                if (message.ping != null && Object.hasOwnProperty.call(message, "ping"))
                    $root.Buttplug.ClientMessage.Ping.encode(message.ping, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified FFIMessage message, length delimited. Does not implicitly {@link Buttplug.ClientMessage.FFIMessage.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {Buttplug.ClientMessage.IFFIMessage} message FFIMessage message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FFIMessage.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a FFIMessage message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ClientMessage.FFIMessage} FFIMessage
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FFIMessage.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ClientMessage.FFIMessage();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.connectLocal = $root.Buttplug.ClientMessage.ConnectLocal.decode(reader, reader.uint32());
                        break;
                    case 2:
                        message.connectWebsocket = $root.Buttplug.ClientMessage.ConnectWebsocket.decode(reader, reader.uint32());
                        break;
                    case 3:
                        message.startScanning = $root.Buttplug.ClientMessage.StartScanning.decode(reader, reader.uint32());
                        break;
                    case 4:
                        message.stopScanning = $root.Buttplug.ClientMessage.StopScanning.decode(reader, reader.uint32());
                        break;
                    case 5:
                        message.stopAllDevices = $root.Buttplug.ClientMessage.StopAllDevices.decode(reader, reader.uint32());
                        break;
                    case 6:
                        message.disconnect = $root.Buttplug.ClientMessage.Disconnect.decode(reader, reader.uint32());
                        break;
                    case 7:
                        message.ping = $root.Buttplug.ClientMessage.Ping.decode(reader, reader.uint32());
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a FFIMessage message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ClientMessage.FFIMessage} FFIMessage
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FFIMessage.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a FFIMessage message.
             * @function verify
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            FFIMessage.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                var properties = {};
                if (message.connectLocal != null && message.hasOwnProperty("connectLocal")) {
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.ConnectLocal.verify(message.connectLocal);
                        if (error)
                            return "connectLocal." + error;
                    }
                }
                if (message.connectWebsocket != null && message.hasOwnProperty("connectWebsocket")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.ConnectWebsocket.verify(message.connectWebsocket);
                        if (error)
                            return "connectWebsocket." + error;
                    }
                }
                if (message.startScanning != null && message.hasOwnProperty("startScanning")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.StartScanning.verify(message.startScanning);
                        if (error)
                            return "startScanning." + error;
                    }
                }
                if (message.stopScanning != null && message.hasOwnProperty("stopScanning")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.StopScanning.verify(message.stopScanning);
                        if (error)
                            return "stopScanning." + error;
                    }
                }
                if (message.stopAllDevices != null && message.hasOwnProperty("stopAllDevices")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.StopAllDevices.verify(message.stopAllDevices);
                        if (error)
                            return "stopAllDevices." + error;
                    }
                }
                if (message.disconnect != null && message.hasOwnProperty("disconnect")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.Disconnect.verify(message.disconnect);
                        if (error)
                            return "disconnect." + error;
                    }
                }
                if (message.ping != null && message.hasOwnProperty("ping")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ClientMessage.Ping.verify(message.ping);
                        if (error)
                            return "ping." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a FFIMessage message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ClientMessage.FFIMessage} FFIMessage
             */
            FFIMessage.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ClientMessage.FFIMessage)
                    return object;
                var message = new $root.Buttplug.ClientMessage.FFIMessage();
                if (object.connectLocal != null) {
                    if (typeof object.connectLocal !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.connectLocal: object expected");
                    message.connectLocal = $root.Buttplug.ClientMessage.ConnectLocal.fromObject(object.connectLocal);
                }
                if (object.connectWebsocket != null) {
                    if (typeof object.connectWebsocket !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.connectWebsocket: object expected");
                    message.connectWebsocket = $root.Buttplug.ClientMessage.ConnectWebsocket.fromObject(object.connectWebsocket);
                }
                if (object.startScanning != null) {
                    if (typeof object.startScanning !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.startScanning: object expected");
                    message.startScanning = $root.Buttplug.ClientMessage.StartScanning.fromObject(object.startScanning);
                }
                if (object.stopScanning != null) {
                    if (typeof object.stopScanning !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.stopScanning: object expected");
                    message.stopScanning = $root.Buttplug.ClientMessage.StopScanning.fromObject(object.stopScanning);
                }
                if (object.stopAllDevices != null) {
                    if (typeof object.stopAllDevices !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.stopAllDevices: object expected");
                    message.stopAllDevices = $root.Buttplug.ClientMessage.StopAllDevices.fromObject(object.stopAllDevices);
                }
                if (object.disconnect != null) {
                    if (typeof object.disconnect !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.disconnect: object expected");
                    message.disconnect = $root.Buttplug.ClientMessage.Disconnect.fromObject(object.disconnect);
                }
                if (object.ping != null) {
                    if (typeof object.ping !== "object")
                        throw TypeError(".Buttplug.ClientMessage.FFIMessage.ping: object expected");
                    message.ping = $root.Buttplug.ClientMessage.Ping.fromObject(object.ping);
                }
                return message;
            };

            /**
             * Creates a plain object from a FFIMessage message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @static
             * @param {Buttplug.ClientMessage.FFIMessage} message FFIMessage
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            FFIMessage.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (message.connectLocal != null && message.hasOwnProperty("connectLocal")) {
                    object.connectLocal = $root.Buttplug.ClientMessage.ConnectLocal.toObject(message.connectLocal, options);
                    if (options.oneofs)
                        object.msg = "connectLocal";
                }
                if (message.connectWebsocket != null && message.hasOwnProperty("connectWebsocket")) {
                    object.connectWebsocket = $root.Buttplug.ClientMessage.ConnectWebsocket.toObject(message.connectWebsocket, options);
                    if (options.oneofs)
                        object.msg = "connectWebsocket";
                }
                if (message.startScanning != null && message.hasOwnProperty("startScanning")) {
                    object.startScanning = $root.Buttplug.ClientMessage.StartScanning.toObject(message.startScanning, options);
                    if (options.oneofs)
                        object.msg = "startScanning";
                }
                if (message.stopScanning != null && message.hasOwnProperty("stopScanning")) {
                    object.stopScanning = $root.Buttplug.ClientMessage.StopScanning.toObject(message.stopScanning, options);
                    if (options.oneofs)
                        object.msg = "stopScanning";
                }
                if (message.stopAllDevices != null && message.hasOwnProperty("stopAllDevices")) {
                    object.stopAllDevices = $root.Buttplug.ClientMessage.StopAllDevices.toObject(message.stopAllDevices, options);
                    if (options.oneofs)
                        object.msg = "stopAllDevices";
                }
                if (message.disconnect != null && message.hasOwnProperty("disconnect")) {
                    object.disconnect = $root.Buttplug.ClientMessage.Disconnect.toObject(message.disconnect, options);
                    if (options.oneofs)
                        object.msg = "disconnect";
                }
                if (message.ping != null && message.hasOwnProperty("ping")) {
                    object.ping = $root.Buttplug.ClientMessage.Ping.toObject(message.ping, options);
                    if (options.oneofs)
                        object.msg = "ping";
                }
                return object;
            };

            /**
             * Converts this FFIMessage to JSON.
             * @function toJSON
             * @memberof Buttplug.ClientMessage.FFIMessage
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            FFIMessage.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return FFIMessage;
        })();

        return ClientMessage;
    })();

    Buttplug.DeviceMessage = (function() {

        /**
         * Properties of a DeviceMessage.
         * @memberof Buttplug
         * @interface IDeviceMessage
         * @property {number|null} [id] DeviceMessage id
         * @property {number|null} [index] DeviceMessage index
         * @property {Buttplug.DeviceMessage.IFFIMessage|null} [message] DeviceMessage message
         */

        /**
         * Constructs a new DeviceMessage.
         * @memberof Buttplug
         * @classdesc Represents a DeviceMessage.
         * @implements IDeviceMessage
         * @constructor
         * @param {Buttplug.IDeviceMessage=} [properties] Properties to set
         */
        function DeviceMessage(properties) {
            if (properties)
                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        /**
         * DeviceMessage id.
         * @member {number} id
         * @memberof Buttplug.DeviceMessage
         * @instance
         */
        DeviceMessage.prototype.id = 0;

        /**
         * DeviceMessage index.
         * @member {number} index
         * @memberof Buttplug.DeviceMessage
         * @instance
         */
        DeviceMessage.prototype.index = 0;

        /**
         * DeviceMessage message.
         * @member {Buttplug.DeviceMessage.IFFIMessage|null|undefined} message
         * @memberof Buttplug.DeviceMessage
         * @instance
         */
        DeviceMessage.prototype.message = null;

        /**
         * Creates a new DeviceMessage instance using the specified properties.
         * @function create
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {Buttplug.IDeviceMessage=} [properties] Properties to set
         * @returns {Buttplug.DeviceMessage} DeviceMessage instance
         */
        DeviceMessage.create = function create(properties) {
            return new DeviceMessage(properties);
        };

        /**
         * Encodes the specified DeviceMessage message. Does not implicitly {@link Buttplug.DeviceMessage.verify|verify} messages.
         * @function encode
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {Buttplug.IDeviceMessage} message DeviceMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        DeviceMessage.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.id);
            if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.index);
            if (message.message != null && Object.hasOwnProperty.call(message, "message"))
                $root.Buttplug.DeviceMessage.FFIMessage.encode(message.message, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
            return writer;
        };

        /**
         * Encodes the specified DeviceMessage message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.verify|verify} messages.
         * @function encodeDelimited
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {Buttplug.IDeviceMessage} message DeviceMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        DeviceMessage.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
        };

        /**
         * Decodes a DeviceMessage message from the specified reader or buffer.
         * @function decode
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @param {number} [length] Message length if known beforehand
         * @returns {Buttplug.DeviceMessage} DeviceMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        DeviceMessage.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage();
            while (reader.pos < end) {
                var tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.id = reader.uint32();
                    break;
                case 2:
                    message.index = reader.uint32();
                    break;
                case 3:
                    message.message = $root.Buttplug.DeviceMessage.FFIMessage.decode(reader, reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        /**
         * Decodes a DeviceMessage message from the specified reader or buffer, length delimited.
         * @function decodeDelimited
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @returns {Buttplug.DeviceMessage} DeviceMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        DeviceMessage.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
                reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
        };

        /**
         * Verifies a DeviceMessage message.
         * @function verify
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {Object.<string,*>} message Plain object to verify
         * @returns {string|null} `null` if valid, otherwise the reason why it is not
         */
        DeviceMessage.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
                return "object expected";
            if (message.id != null && message.hasOwnProperty("id"))
                if (!$util.isInteger(message.id))
                    return "id: integer expected";
            if (message.index != null && message.hasOwnProperty("index"))
                if (!$util.isInteger(message.index))
                    return "index: integer expected";
            if (message.message != null && message.hasOwnProperty("message")) {
                var error = $root.Buttplug.DeviceMessage.FFIMessage.verify(message.message);
                if (error)
                    return "message." + error;
            }
            return null;
        };

        /**
         * Creates a DeviceMessage message from a plain object. Also converts values to their respective internal types.
         * @function fromObject
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {Object.<string,*>} object Plain object
         * @returns {Buttplug.DeviceMessage} DeviceMessage
         */
        DeviceMessage.fromObject = function fromObject(object) {
            if (object instanceof $root.Buttplug.DeviceMessage)
                return object;
            var message = new $root.Buttplug.DeviceMessage();
            if (object.id != null)
                message.id = object.id >>> 0;
            if (object.index != null)
                message.index = object.index >>> 0;
            if (object.message != null) {
                if (typeof object.message !== "object")
                    throw TypeError(".Buttplug.DeviceMessage.message: object expected");
                message.message = $root.Buttplug.DeviceMessage.FFIMessage.fromObject(object.message);
            }
            return message;
        };

        /**
         * Creates a plain object from a DeviceMessage message. Also converts values to other types if specified.
         * @function toObject
         * @memberof Buttplug.DeviceMessage
         * @static
         * @param {Buttplug.DeviceMessage} message DeviceMessage
         * @param {$protobuf.IConversionOptions} [options] Conversion options
         * @returns {Object.<string,*>} Plain object
         */
        DeviceMessage.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            var object = {};
            if (options.defaults) {
                object.id = 0;
                object.index = 0;
                object.message = null;
            }
            if (message.id != null && message.hasOwnProperty("id"))
                object.id = message.id;
            if (message.index != null && message.hasOwnProperty("index"))
                object.index = message.index;
            if (message.message != null && message.hasOwnProperty("message"))
                object.message = $root.Buttplug.DeviceMessage.FFIMessage.toObject(message.message, options);
            return object;
        };

        /**
         * Converts this DeviceMessage to JSON.
         * @function toJSON
         * @memberof Buttplug.DeviceMessage
         * @instance
         * @returns {Object.<string,*>} JSON object
         */
        DeviceMessage.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };

        DeviceMessage.VibrateComponent = (function() {

            /**
             * Properties of a VibrateComponent.
             * @memberof Buttplug.DeviceMessage
             * @interface IVibrateComponent
             * @property {number|null} [index] VibrateComponent index
             * @property {number|null} [speed] VibrateComponent speed
             */

            /**
             * Constructs a new VibrateComponent.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a VibrateComponent.
             * @implements IVibrateComponent
             * @constructor
             * @param {Buttplug.DeviceMessage.IVibrateComponent=} [properties] Properties to set
             */
            function VibrateComponent(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * VibrateComponent index.
             * @member {number} index
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @instance
             */
            VibrateComponent.prototype.index = 0;

            /**
             * VibrateComponent speed.
             * @member {number} speed
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @instance
             */
            VibrateComponent.prototype.speed = 0;

            /**
             * Creates a new VibrateComponent instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {Buttplug.DeviceMessage.IVibrateComponent=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.VibrateComponent} VibrateComponent instance
             */
            VibrateComponent.create = function create(properties) {
                return new VibrateComponent(properties);
            };

            /**
             * Encodes the specified VibrateComponent message. Does not implicitly {@link Buttplug.DeviceMessage.VibrateComponent.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {Buttplug.DeviceMessage.IVibrateComponent} message VibrateComponent message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            VibrateComponent.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                if (message.speed != null && Object.hasOwnProperty.call(message, "speed"))
                    writer.uint32(/* id 2, wireType 1 =*/17).double(message.speed);
                return writer;
            };

            /**
             * Encodes the specified VibrateComponent message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.VibrateComponent.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {Buttplug.DeviceMessage.IVibrateComponent} message VibrateComponent message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            VibrateComponent.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a VibrateComponent message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.VibrateComponent} VibrateComponent
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            VibrateComponent.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.VibrateComponent();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    case 2:
                        message.speed = reader.double();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a VibrateComponent message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.VibrateComponent} VibrateComponent
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            VibrateComponent.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a VibrateComponent message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            VibrateComponent.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.speed != null && message.hasOwnProperty("speed"))
                    if (typeof message.speed !== "number")
                        return "speed: number expected";
                return null;
            };

            /**
             * Creates a VibrateComponent message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.VibrateComponent} VibrateComponent
             */
            VibrateComponent.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.VibrateComponent)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.VibrateComponent();
                if (object.index != null)
                    message.index = object.index >>> 0;
                if (object.speed != null)
                    message.speed = Number(object.speed);
                return message;
            };

            /**
             * Creates a plain object from a VibrateComponent message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @static
             * @param {Buttplug.DeviceMessage.VibrateComponent} message VibrateComponent
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            VibrateComponent.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.index = 0;
                    object.speed = 0;
                }
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.speed != null && message.hasOwnProperty("speed"))
                    object.speed = options.json && !isFinite(message.speed) ? String(message.speed) : message.speed;
                return object;
            };

            /**
             * Converts this VibrateComponent to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.VibrateComponent
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            VibrateComponent.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return VibrateComponent;
        })();

        DeviceMessage.VibrateCmd = (function() {

            /**
             * Properties of a VibrateCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IVibrateCmd
             * @property {Array.<Buttplug.DeviceMessage.IVibrateComponent>|null} [speeds] VibrateCmd speeds
             */

            /**
             * Constructs a new VibrateCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a VibrateCmd.
             * @implements IVibrateCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IVibrateCmd=} [properties] Properties to set
             */
            function VibrateCmd(properties) {
                this.speeds = [];
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * VibrateCmd speeds.
             * @member {Array.<Buttplug.DeviceMessage.IVibrateComponent>} speeds
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @instance
             */
            VibrateCmd.prototype.speeds = $util.emptyArray;

            /**
             * Creates a new VibrateCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {Buttplug.DeviceMessage.IVibrateCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.VibrateCmd} VibrateCmd instance
             */
            VibrateCmd.create = function create(properties) {
                return new VibrateCmd(properties);
            };

            /**
             * Encodes the specified VibrateCmd message. Does not implicitly {@link Buttplug.DeviceMessage.VibrateCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {Buttplug.DeviceMessage.IVibrateCmd} message VibrateCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            VibrateCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.speeds != null && message.speeds.length)
                    for (var i = 0; i < message.speeds.length; ++i)
                        $root.Buttplug.DeviceMessage.VibrateComponent.encode(message.speeds[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified VibrateCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.VibrateCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {Buttplug.DeviceMessage.IVibrateCmd} message VibrateCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            VibrateCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a VibrateCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.VibrateCmd} VibrateCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            VibrateCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.VibrateCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        if (!(message.speeds && message.speeds.length))
                            message.speeds = [];
                        message.speeds.push($root.Buttplug.DeviceMessage.VibrateComponent.decode(reader, reader.uint32()));
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a VibrateCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.VibrateCmd} VibrateCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            VibrateCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a VibrateCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            VibrateCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.speeds != null && message.hasOwnProperty("speeds")) {
                    if (!Array.isArray(message.speeds))
                        return "speeds: array expected";
                    for (var i = 0; i < message.speeds.length; ++i) {
                        var error = $root.Buttplug.DeviceMessage.VibrateComponent.verify(message.speeds[i]);
                        if (error)
                            return "speeds." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a VibrateCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.VibrateCmd} VibrateCmd
             */
            VibrateCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.VibrateCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.VibrateCmd();
                if (object.speeds) {
                    if (!Array.isArray(object.speeds))
                        throw TypeError(".Buttplug.DeviceMessage.VibrateCmd.speeds: array expected");
                    message.speeds = [];
                    for (var i = 0; i < object.speeds.length; ++i) {
                        if (typeof object.speeds[i] !== "object")
                            throw TypeError(".Buttplug.DeviceMessage.VibrateCmd.speeds: object expected");
                        message.speeds[i] = $root.Buttplug.DeviceMessage.VibrateComponent.fromObject(object.speeds[i]);
                    }
                }
                return message;
            };

            /**
             * Creates a plain object from a VibrateCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @static
             * @param {Buttplug.DeviceMessage.VibrateCmd} message VibrateCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            VibrateCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.arrays || options.defaults)
                    object.speeds = [];
                if (message.speeds && message.speeds.length) {
                    object.speeds = [];
                    for (var j = 0; j < message.speeds.length; ++j)
                        object.speeds[j] = $root.Buttplug.DeviceMessage.VibrateComponent.toObject(message.speeds[j], options);
                }
                return object;
            };

            /**
             * Converts this VibrateCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.VibrateCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            VibrateCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return VibrateCmd;
        })();

        DeviceMessage.RotateComponent = (function() {

            /**
             * Properties of a RotateComponent.
             * @memberof Buttplug.DeviceMessage
             * @interface IRotateComponent
             * @property {number|null} [index] RotateComponent index
             * @property {number|null} [speed] RotateComponent speed
             * @property {boolean|null} [clockwise] RotateComponent clockwise
             */

            /**
             * Constructs a new RotateComponent.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RotateComponent.
             * @implements IRotateComponent
             * @constructor
             * @param {Buttplug.DeviceMessage.IRotateComponent=} [properties] Properties to set
             */
            function RotateComponent(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RotateComponent index.
             * @member {number} index
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @instance
             */
            RotateComponent.prototype.index = 0;

            /**
             * RotateComponent speed.
             * @member {number} speed
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @instance
             */
            RotateComponent.prototype.speed = 0;

            /**
             * RotateComponent clockwise.
             * @member {boolean} clockwise
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @instance
             */
            RotateComponent.prototype.clockwise = false;

            /**
             * Creates a new RotateComponent instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {Buttplug.DeviceMessage.IRotateComponent=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RotateComponent} RotateComponent instance
             */
            RotateComponent.create = function create(properties) {
                return new RotateComponent(properties);
            };

            /**
             * Encodes the specified RotateComponent message. Does not implicitly {@link Buttplug.DeviceMessage.RotateComponent.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {Buttplug.DeviceMessage.IRotateComponent} message RotateComponent message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RotateComponent.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                if (message.speed != null && Object.hasOwnProperty.call(message, "speed"))
                    writer.uint32(/* id 2, wireType 1 =*/17).double(message.speed);
                if (message.clockwise != null && Object.hasOwnProperty.call(message, "clockwise"))
                    writer.uint32(/* id 3, wireType 0 =*/24).bool(message.clockwise);
                return writer;
            };

            /**
             * Encodes the specified RotateComponent message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RotateComponent.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {Buttplug.DeviceMessage.IRotateComponent} message RotateComponent message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RotateComponent.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RotateComponent message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RotateComponent} RotateComponent
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RotateComponent.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RotateComponent();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    case 2:
                        message.speed = reader.double();
                        break;
                    case 3:
                        message.clockwise = reader.bool();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RotateComponent message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RotateComponent} RotateComponent
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RotateComponent.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RotateComponent message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RotateComponent.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.speed != null && message.hasOwnProperty("speed"))
                    if (typeof message.speed !== "number")
                        return "speed: number expected";
                if (message.clockwise != null && message.hasOwnProperty("clockwise"))
                    if (typeof message.clockwise !== "boolean")
                        return "clockwise: boolean expected";
                return null;
            };

            /**
             * Creates a RotateComponent message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RotateComponent} RotateComponent
             */
            RotateComponent.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RotateComponent)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.RotateComponent();
                if (object.index != null)
                    message.index = object.index >>> 0;
                if (object.speed != null)
                    message.speed = Number(object.speed);
                if (object.clockwise != null)
                    message.clockwise = Boolean(object.clockwise);
                return message;
            };

            /**
             * Creates a plain object from a RotateComponent message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @static
             * @param {Buttplug.DeviceMessage.RotateComponent} message RotateComponent
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RotateComponent.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.index = 0;
                    object.speed = 0;
                    object.clockwise = false;
                }
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.speed != null && message.hasOwnProperty("speed"))
                    object.speed = options.json && !isFinite(message.speed) ? String(message.speed) : message.speed;
                if (message.clockwise != null && message.hasOwnProperty("clockwise"))
                    object.clockwise = message.clockwise;
                return object;
            };

            /**
             * Converts this RotateComponent to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RotateComponent
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RotateComponent.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RotateComponent;
        })();

        DeviceMessage.RotateCmd = (function() {

            /**
             * Properties of a RotateCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IRotateCmd
             * @property {Array.<Buttplug.DeviceMessage.IRotateComponent>|null} [rotations] RotateCmd rotations
             */

            /**
             * Constructs a new RotateCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RotateCmd.
             * @implements IRotateCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IRotateCmd=} [properties] Properties to set
             */
            function RotateCmd(properties) {
                this.rotations = [];
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RotateCmd rotations.
             * @member {Array.<Buttplug.DeviceMessage.IRotateComponent>} rotations
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @instance
             */
            RotateCmd.prototype.rotations = $util.emptyArray;

            /**
             * Creates a new RotateCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRotateCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RotateCmd} RotateCmd instance
             */
            RotateCmd.create = function create(properties) {
                return new RotateCmd(properties);
            };

            /**
             * Encodes the specified RotateCmd message. Does not implicitly {@link Buttplug.DeviceMessage.RotateCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRotateCmd} message RotateCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RotateCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.rotations != null && message.rotations.length)
                    for (var i = 0; i < message.rotations.length; ++i)
                        $root.Buttplug.DeviceMessage.RotateComponent.encode(message.rotations[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified RotateCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RotateCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRotateCmd} message RotateCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RotateCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RotateCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RotateCmd} RotateCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RotateCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RotateCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        if (!(message.rotations && message.rotations.length))
                            message.rotations = [];
                        message.rotations.push($root.Buttplug.DeviceMessage.RotateComponent.decode(reader, reader.uint32()));
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RotateCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RotateCmd} RotateCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RotateCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RotateCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RotateCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.rotations != null && message.hasOwnProperty("rotations")) {
                    if (!Array.isArray(message.rotations))
                        return "rotations: array expected";
                    for (var i = 0; i < message.rotations.length; ++i) {
                        var error = $root.Buttplug.DeviceMessage.RotateComponent.verify(message.rotations[i]);
                        if (error)
                            return "rotations." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a RotateCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RotateCmd} RotateCmd
             */
            RotateCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RotateCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.RotateCmd();
                if (object.rotations) {
                    if (!Array.isArray(object.rotations))
                        throw TypeError(".Buttplug.DeviceMessage.RotateCmd.rotations: array expected");
                    message.rotations = [];
                    for (var i = 0; i < object.rotations.length; ++i) {
                        if (typeof object.rotations[i] !== "object")
                            throw TypeError(".Buttplug.DeviceMessage.RotateCmd.rotations: object expected");
                        message.rotations[i] = $root.Buttplug.DeviceMessage.RotateComponent.fromObject(object.rotations[i]);
                    }
                }
                return message;
            };

            /**
             * Creates a plain object from a RotateCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @static
             * @param {Buttplug.DeviceMessage.RotateCmd} message RotateCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RotateCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.arrays || options.defaults)
                    object.rotations = [];
                if (message.rotations && message.rotations.length) {
                    object.rotations = [];
                    for (var j = 0; j < message.rotations.length; ++j)
                        object.rotations[j] = $root.Buttplug.DeviceMessage.RotateComponent.toObject(message.rotations[j], options);
                }
                return object;
            };

            /**
             * Converts this RotateCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RotateCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RotateCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RotateCmd;
        })();

        DeviceMessage.LinearComponent = (function() {

            /**
             * Properties of a LinearComponent.
             * @memberof Buttplug.DeviceMessage
             * @interface ILinearComponent
             * @property {number|null} [index] LinearComponent index
             * @property {number|null} [duration] LinearComponent duration
             * @property {number|null} [position] LinearComponent position
             */

            /**
             * Constructs a new LinearComponent.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a LinearComponent.
             * @implements ILinearComponent
             * @constructor
             * @param {Buttplug.DeviceMessage.ILinearComponent=} [properties] Properties to set
             */
            function LinearComponent(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * LinearComponent index.
             * @member {number} index
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @instance
             */
            LinearComponent.prototype.index = 0;

            /**
             * LinearComponent duration.
             * @member {number} duration
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @instance
             */
            LinearComponent.prototype.duration = 0;

            /**
             * LinearComponent position.
             * @member {number} position
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @instance
             */
            LinearComponent.prototype.position = 0;

            /**
             * Creates a new LinearComponent instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {Buttplug.DeviceMessage.ILinearComponent=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.LinearComponent} LinearComponent instance
             */
            LinearComponent.create = function create(properties) {
                return new LinearComponent(properties);
            };

            /**
             * Encodes the specified LinearComponent message. Does not implicitly {@link Buttplug.DeviceMessage.LinearComponent.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {Buttplug.DeviceMessage.ILinearComponent} message LinearComponent message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            LinearComponent.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                if (message.duration != null && Object.hasOwnProperty.call(message, "duration"))
                    writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.duration);
                if (message.position != null && Object.hasOwnProperty.call(message, "position"))
                    writer.uint32(/* id 3, wireType 1 =*/25).double(message.position);
                return writer;
            };

            /**
             * Encodes the specified LinearComponent message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.LinearComponent.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {Buttplug.DeviceMessage.ILinearComponent} message LinearComponent message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            LinearComponent.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a LinearComponent message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.LinearComponent} LinearComponent
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            LinearComponent.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.LinearComponent();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    case 2:
                        message.duration = reader.uint32();
                        break;
                    case 3:
                        message.position = reader.double();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a LinearComponent message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.LinearComponent} LinearComponent
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            LinearComponent.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a LinearComponent message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            LinearComponent.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.duration != null && message.hasOwnProperty("duration"))
                    if (!$util.isInteger(message.duration))
                        return "duration: integer expected";
                if (message.position != null && message.hasOwnProperty("position"))
                    if (typeof message.position !== "number")
                        return "position: number expected";
                return null;
            };

            /**
             * Creates a LinearComponent message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.LinearComponent} LinearComponent
             */
            LinearComponent.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.LinearComponent)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.LinearComponent();
                if (object.index != null)
                    message.index = object.index >>> 0;
                if (object.duration != null)
                    message.duration = object.duration >>> 0;
                if (object.position != null)
                    message.position = Number(object.position);
                return message;
            };

            /**
             * Creates a plain object from a LinearComponent message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @static
             * @param {Buttplug.DeviceMessage.LinearComponent} message LinearComponent
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            LinearComponent.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.index = 0;
                    object.duration = 0;
                    object.position = 0;
                }
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.duration != null && message.hasOwnProperty("duration"))
                    object.duration = message.duration;
                if (message.position != null && message.hasOwnProperty("position"))
                    object.position = options.json && !isFinite(message.position) ? String(message.position) : message.position;
                return object;
            };

            /**
             * Converts this LinearComponent to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.LinearComponent
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            LinearComponent.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return LinearComponent;
        })();

        DeviceMessage.LinearCmd = (function() {

            /**
             * Properties of a LinearCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface ILinearCmd
             * @property {Array.<Buttplug.DeviceMessage.ILinearComponent>|null} [movements] LinearCmd movements
             */

            /**
             * Constructs a new LinearCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a LinearCmd.
             * @implements ILinearCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.ILinearCmd=} [properties] Properties to set
             */
            function LinearCmd(properties) {
                this.movements = [];
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * LinearCmd movements.
             * @member {Array.<Buttplug.DeviceMessage.ILinearComponent>} movements
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @instance
             */
            LinearCmd.prototype.movements = $util.emptyArray;

            /**
             * Creates a new LinearCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {Buttplug.DeviceMessage.ILinearCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.LinearCmd} LinearCmd instance
             */
            LinearCmd.create = function create(properties) {
                return new LinearCmd(properties);
            };

            /**
             * Encodes the specified LinearCmd message. Does not implicitly {@link Buttplug.DeviceMessage.LinearCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {Buttplug.DeviceMessage.ILinearCmd} message LinearCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            LinearCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.movements != null && message.movements.length)
                    for (var i = 0; i < message.movements.length; ++i)
                        $root.Buttplug.DeviceMessage.LinearComponent.encode(message.movements[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified LinearCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.LinearCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {Buttplug.DeviceMessage.ILinearCmd} message LinearCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            LinearCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a LinearCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.LinearCmd} LinearCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            LinearCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.LinearCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        if (!(message.movements && message.movements.length))
                            message.movements = [];
                        message.movements.push($root.Buttplug.DeviceMessage.LinearComponent.decode(reader, reader.uint32()));
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a LinearCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.LinearCmd} LinearCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            LinearCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a LinearCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            LinearCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.movements != null && message.hasOwnProperty("movements")) {
                    if (!Array.isArray(message.movements))
                        return "movements: array expected";
                    for (var i = 0; i < message.movements.length; ++i) {
                        var error = $root.Buttplug.DeviceMessage.LinearComponent.verify(message.movements[i]);
                        if (error)
                            return "movements." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a LinearCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.LinearCmd} LinearCmd
             */
            LinearCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.LinearCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.LinearCmd();
                if (object.movements) {
                    if (!Array.isArray(object.movements))
                        throw TypeError(".Buttplug.DeviceMessage.LinearCmd.movements: array expected");
                    message.movements = [];
                    for (var i = 0; i < object.movements.length; ++i) {
                        if (typeof object.movements[i] !== "object")
                            throw TypeError(".Buttplug.DeviceMessage.LinearCmd.movements: object expected");
                        message.movements[i] = $root.Buttplug.DeviceMessage.LinearComponent.fromObject(object.movements[i]);
                    }
                }
                return message;
            };

            /**
             * Creates a plain object from a LinearCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @static
             * @param {Buttplug.DeviceMessage.LinearCmd} message LinearCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            LinearCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.arrays || options.defaults)
                    object.movements = [];
                if (message.movements && message.movements.length) {
                    object.movements = [];
                    for (var j = 0; j < message.movements.length; ++j)
                        object.movements[j] = $root.Buttplug.DeviceMessage.LinearComponent.toObject(message.movements[j], options);
                }
                return object;
            };

            /**
             * Converts this LinearCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.LinearCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            LinearCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return LinearCmd;
        })();

        DeviceMessage.StopDeviceCmd = (function() {

            /**
             * Properties of a StopDeviceCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IStopDeviceCmd
             */

            /**
             * Constructs a new StopDeviceCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a StopDeviceCmd.
             * @implements IStopDeviceCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IStopDeviceCmd=} [properties] Properties to set
             */
            function StopDeviceCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new StopDeviceCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {Buttplug.DeviceMessage.IStopDeviceCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.StopDeviceCmd} StopDeviceCmd instance
             */
            StopDeviceCmd.create = function create(properties) {
                return new StopDeviceCmd(properties);
            };

            /**
             * Encodes the specified StopDeviceCmd message. Does not implicitly {@link Buttplug.DeviceMessage.StopDeviceCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {Buttplug.DeviceMessage.IStopDeviceCmd} message StopDeviceCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StopDeviceCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified StopDeviceCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.StopDeviceCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {Buttplug.DeviceMessage.IStopDeviceCmd} message StopDeviceCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StopDeviceCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a StopDeviceCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.StopDeviceCmd} StopDeviceCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StopDeviceCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.StopDeviceCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a StopDeviceCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.StopDeviceCmd} StopDeviceCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StopDeviceCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a StopDeviceCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            StopDeviceCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a StopDeviceCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.StopDeviceCmd} StopDeviceCmd
             */
            StopDeviceCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.StopDeviceCmd)
                    return object;
                return new $root.Buttplug.DeviceMessage.StopDeviceCmd();
            };

            /**
             * Creates a plain object from a StopDeviceCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @static
             * @param {Buttplug.DeviceMessage.StopDeviceCmd} message StopDeviceCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            StopDeviceCmd.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this StopDeviceCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.StopDeviceCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            StopDeviceCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return StopDeviceCmd;
        })();

        DeviceMessage.RawReadCmd = (function() {

            /**
             * Properties of a RawReadCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IRawReadCmd
             * @property {Buttplug.Endpoint|null} [endpoint] RawReadCmd endpoint
             * @property {Uint8Array|null} [data] RawReadCmd data
             * @property {number|null} [expectedLength] RawReadCmd expectedLength
             * @property {number|null} [timeout] RawReadCmd timeout
             */

            /**
             * Constructs a new RawReadCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RawReadCmd.
             * @implements IRawReadCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IRawReadCmd=} [properties] Properties to set
             */
            function RawReadCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RawReadCmd endpoint.
             * @member {Buttplug.Endpoint} endpoint
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @instance
             */
            RawReadCmd.prototype.endpoint = 0;

            /**
             * RawReadCmd data.
             * @member {Uint8Array} data
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @instance
             */
            RawReadCmd.prototype.data = $util.newBuffer([]);

            /**
             * RawReadCmd expectedLength.
             * @member {number} expectedLength
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @instance
             */
            RawReadCmd.prototype.expectedLength = 0;

            /**
             * RawReadCmd timeout.
             * @member {number} timeout
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @instance
             */
            RawReadCmd.prototype.timeout = 0;

            /**
             * Creates a new RawReadCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawReadCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RawReadCmd} RawReadCmd instance
             */
            RawReadCmd.create = function create(properties) {
                return new RawReadCmd(properties);
            };

            /**
             * Encodes the specified RawReadCmd message. Does not implicitly {@link Buttplug.DeviceMessage.RawReadCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawReadCmd} message RawReadCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawReadCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.endpoint != null && Object.hasOwnProperty.call(message, "endpoint"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.endpoint);
                if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                    writer.uint32(/* id 2, wireType 2 =*/18).bytes(message.data);
                if (message.expectedLength != null && Object.hasOwnProperty.call(message, "expectedLength"))
                    writer.uint32(/* id 3, wireType 0 =*/24).uint32(message.expectedLength);
                if (message.timeout != null && Object.hasOwnProperty.call(message, "timeout"))
                    writer.uint32(/* id 4, wireType 0 =*/32).uint32(message.timeout);
                return writer;
            };

            /**
             * Encodes the specified RawReadCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RawReadCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawReadCmd} message RawReadCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawReadCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RawReadCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RawReadCmd} RawReadCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawReadCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RawReadCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.endpoint = reader.int32();
                        break;
                    case 2:
                        message.data = reader.bytes();
                        break;
                    case 3:
                        message.expectedLength = reader.uint32();
                        break;
                    case 4:
                        message.timeout = reader.uint32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RawReadCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RawReadCmd} RawReadCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawReadCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RawReadCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RawReadCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    switch (message.endpoint) {
                    default:
                        return "endpoint: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                    case 13:
                    case 14:
                    case 15:
                    case 16:
                    case 17:
                    case 18:
                    case 19:
                    case 20:
                    case 21:
                    case 22:
                    case 23:
                    case 24:
                    case 25:
                    case 26:
                    case 27:
                    case 28:
                    case 29:
                    case 30:
                    case 31:
                    case 32:
                    case 33:
                    case 34:
                    case 35:
                    case 36:
                    case 37:
                    case 38:
                    case 39:
                    case 40:
                    case 41:
                    case 42:
                    case 43:
                    case 44:
                        break;
                    }
                if (message.data != null && message.hasOwnProperty("data"))
                    if (!(message.data && typeof message.data.length === "number" || $util.isString(message.data)))
                        return "data: buffer expected";
                if (message.expectedLength != null && message.hasOwnProperty("expectedLength"))
                    if (!$util.isInteger(message.expectedLength))
                        return "expectedLength: integer expected";
                if (message.timeout != null && message.hasOwnProperty("timeout"))
                    if (!$util.isInteger(message.timeout))
                        return "timeout: integer expected";
                return null;
            };

            /**
             * Creates a RawReadCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RawReadCmd} RawReadCmd
             */
            RawReadCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RawReadCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.RawReadCmd();
                switch (object.endpoint) {
                case "Command":
                case 0:
                    message.endpoint = 0;
                    break;
                case "Firmware":
                case 1:
                    message.endpoint = 1;
                    break;
                case "Rx":
                case 2:
                    message.endpoint = 2;
                    break;
                case "RxAccel":
                case 3:
                    message.endpoint = 3;
                    break;
                case "RxBLEBattery":
                case 4:
                    message.endpoint = 4;
                    break;
                case "RxPressure":
                case 5:
                    message.endpoint = 5;
                    break;
                case "RxTouch":
                case 6:
                    message.endpoint = 6;
                    break;
                case "Tx":
                case 7:
                    message.endpoint = 7;
                    break;
                case "TxMode":
                case 8:
                    message.endpoint = 8;
                    break;
                case "TxShock":
                case 9:
                    message.endpoint = 9;
                    break;
                case "TxVibrate":
                case 10:
                    message.endpoint = 10;
                    break;
                case "TxVendorControl":
                case 11:
                    message.endpoint = 11;
                    break;
                case "Whitelist":
                case 12:
                    message.endpoint = 12;
                    break;
                case "Generic0":
                case 13:
                    message.endpoint = 13;
                    break;
                case "Generic1":
                case 14:
                    message.endpoint = 14;
                    break;
                case "Generic2":
                case 15:
                    message.endpoint = 15;
                    break;
                case "Generic3":
                case 16:
                    message.endpoint = 16;
                    break;
                case "Generic4":
                case 17:
                    message.endpoint = 17;
                    break;
                case "Generic5":
                case 18:
                    message.endpoint = 18;
                    break;
                case "Generic6":
                case 19:
                    message.endpoint = 19;
                    break;
                case "Generic7":
                case 20:
                    message.endpoint = 20;
                    break;
                case "Generic8":
                case 21:
                    message.endpoint = 21;
                    break;
                case "Generic9":
                case 22:
                    message.endpoint = 22;
                    break;
                case "Generic10":
                case 23:
                    message.endpoint = 23;
                    break;
                case "Generic11":
                case 24:
                    message.endpoint = 24;
                    break;
                case "Generic12":
                case 25:
                    message.endpoint = 25;
                    break;
                case "Generic13":
                case 26:
                    message.endpoint = 26;
                    break;
                case "Generic14":
                case 27:
                    message.endpoint = 27;
                    break;
                case "Generic15":
                case 28:
                    message.endpoint = 28;
                    break;
                case "Generic16":
                case 29:
                    message.endpoint = 29;
                    break;
                case "Generic17":
                case 30:
                    message.endpoint = 30;
                    break;
                case "Generic18":
                case 31:
                    message.endpoint = 31;
                    break;
                case "Generic19":
                case 32:
                    message.endpoint = 32;
                    break;
                case "Generic20":
                case 33:
                    message.endpoint = 33;
                    break;
                case "Generic21":
                case 34:
                    message.endpoint = 34;
                    break;
                case "Generic22":
                case 35:
                    message.endpoint = 35;
                    break;
                case "Generic23":
                case 36:
                    message.endpoint = 36;
                    break;
                case "Generic24":
                case 37:
                    message.endpoint = 37;
                    break;
                case "Generic25":
                case 38:
                    message.endpoint = 38;
                    break;
                case "Generic26":
                case 39:
                    message.endpoint = 39;
                    break;
                case "Generic27":
                case 40:
                    message.endpoint = 40;
                    break;
                case "Generic28":
                case 41:
                    message.endpoint = 41;
                    break;
                case "Generic29":
                case 42:
                    message.endpoint = 42;
                    break;
                case "Generic30":
                case 43:
                    message.endpoint = 43;
                    break;
                case "Generic31":
                case 44:
                    message.endpoint = 44;
                    break;
                }
                if (object.data != null)
                    if (typeof object.data === "string")
                        $util.base64.decode(object.data, message.data = $util.newBuffer($util.base64.length(object.data)), 0);
                    else if (object.data.length)
                        message.data = object.data;
                if (object.expectedLength != null)
                    message.expectedLength = object.expectedLength >>> 0;
                if (object.timeout != null)
                    message.timeout = object.timeout >>> 0;
                return message;
            };

            /**
             * Creates a plain object from a RawReadCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @static
             * @param {Buttplug.DeviceMessage.RawReadCmd} message RawReadCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RawReadCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.endpoint = options.enums === String ? "Command" : 0;
                    if (options.bytes === String)
                        object.data = "";
                    else {
                        object.data = [];
                        if (options.bytes !== Array)
                            object.data = $util.newBuffer(object.data);
                    }
                    object.expectedLength = 0;
                    object.timeout = 0;
                }
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    object.endpoint = options.enums === String ? $root.Buttplug.Endpoint[message.endpoint] : message.endpoint;
                if (message.data != null && message.hasOwnProperty("data"))
                    object.data = options.bytes === String ? $util.base64.encode(message.data, 0, message.data.length) : options.bytes === Array ? Array.prototype.slice.call(message.data) : message.data;
                if (message.expectedLength != null && message.hasOwnProperty("expectedLength"))
                    object.expectedLength = message.expectedLength;
                if (message.timeout != null && message.hasOwnProperty("timeout"))
                    object.timeout = message.timeout;
                return object;
            };

            /**
             * Converts this RawReadCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RawReadCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RawReadCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RawReadCmd;
        })();

        DeviceMessage.RawWriteCmd = (function() {

            /**
             * Properties of a RawWriteCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IRawWriteCmd
             * @property {Buttplug.Endpoint|null} [endpoint] RawWriteCmd endpoint
             * @property {Uint8Array|null} [data] RawWriteCmd data
             * @property {boolean|null} [writeWithResponse] RawWriteCmd writeWithResponse
             */

            /**
             * Constructs a new RawWriteCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RawWriteCmd.
             * @implements IRawWriteCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IRawWriteCmd=} [properties] Properties to set
             */
            function RawWriteCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RawWriteCmd endpoint.
             * @member {Buttplug.Endpoint} endpoint
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @instance
             */
            RawWriteCmd.prototype.endpoint = 0;

            /**
             * RawWriteCmd data.
             * @member {Uint8Array} data
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @instance
             */
            RawWriteCmd.prototype.data = $util.newBuffer([]);

            /**
             * RawWriteCmd writeWithResponse.
             * @member {boolean} writeWithResponse
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @instance
             */
            RawWriteCmd.prototype.writeWithResponse = false;

            /**
             * Creates a new RawWriteCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawWriteCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RawWriteCmd} RawWriteCmd instance
             */
            RawWriteCmd.create = function create(properties) {
                return new RawWriteCmd(properties);
            };

            /**
             * Encodes the specified RawWriteCmd message. Does not implicitly {@link Buttplug.DeviceMessage.RawWriteCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawWriteCmd} message RawWriteCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawWriteCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.endpoint != null && Object.hasOwnProperty.call(message, "endpoint"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.endpoint);
                if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                    writer.uint32(/* id 2, wireType 2 =*/18).bytes(message.data);
                if (message.writeWithResponse != null && Object.hasOwnProperty.call(message, "writeWithResponse"))
                    writer.uint32(/* id 3, wireType 0 =*/24).bool(message.writeWithResponse);
                return writer;
            };

            /**
             * Encodes the specified RawWriteCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RawWriteCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawWriteCmd} message RawWriteCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawWriteCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RawWriteCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RawWriteCmd} RawWriteCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawWriteCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RawWriteCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.endpoint = reader.int32();
                        break;
                    case 2:
                        message.data = reader.bytes();
                        break;
                    case 3:
                        message.writeWithResponse = reader.bool();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RawWriteCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RawWriteCmd} RawWriteCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawWriteCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RawWriteCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RawWriteCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    switch (message.endpoint) {
                    default:
                        return "endpoint: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                    case 13:
                    case 14:
                    case 15:
                    case 16:
                    case 17:
                    case 18:
                    case 19:
                    case 20:
                    case 21:
                    case 22:
                    case 23:
                    case 24:
                    case 25:
                    case 26:
                    case 27:
                    case 28:
                    case 29:
                    case 30:
                    case 31:
                    case 32:
                    case 33:
                    case 34:
                    case 35:
                    case 36:
                    case 37:
                    case 38:
                    case 39:
                    case 40:
                    case 41:
                    case 42:
                    case 43:
                    case 44:
                        break;
                    }
                if (message.data != null && message.hasOwnProperty("data"))
                    if (!(message.data && typeof message.data.length === "number" || $util.isString(message.data)))
                        return "data: buffer expected";
                if (message.writeWithResponse != null && message.hasOwnProperty("writeWithResponse"))
                    if (typeof message.writeWithResponse !== "boolean")
                        return "writeWithResponse: boolean expected";
                return null;
            };

            /**
             * Creates a RawWriteCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RawWriteCmd} RawWriteCmd
             */
            RawWriteCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RawWriteCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.RawWriteCmd();
                switch (object.endpoint) {
                case "Command":
                case 0:
                    message.endpoint = 0;
                    break;
                case "Firmware":
                case 1:
                    message.endpoint = 1;
                    break;
                case "Rx":
                case 2:
                    message.endpoint = 2;
                    break;
                case "RxAccel":
                case 3:
                    message.endpoint = 3;
                    break;
                case "RxBLEBattery":
                case 4:
                    message.endpoint = 4;
                    break;
                case "RxPressure":
                case 5:
                    message.endpoint = 5;
                    break;
                case "RxTouch":
                case 6:
                    message.endpoint = 6;
                    break;
                case "Tx":
                case 7:
                    message.endpoint = 7;
                    break;
                case "TxMode":
                case 8:
                    message.endpoint = 8;
                    break;
                case "TxShock":
                case 9:
                    message.endpoint = 9;
                    break;
                case "TxVibrate":
                case 10:
                    message.endpoint = 10;
                    break;
                case "TxVendorControl":
                case 11:
                    message.endpoint = 11;
                    break;
                case "Whitelist":
                case 12:
                    message.endpoint = 12;
                    break;
                case "Generic0":
                case 13:
                    message.endpoint = 13;
                    break;
                case "Generic1":
                case 14:
                    message.endpoint = 14;
                    break;
                case "Generic2":
                case 15:
                    message.endpoint = 15;
                    break;
                case "Generic3":
                case 16:
                    message.endpoint = 16;
                    break;
                case "Generic4":
                case 17:
                    message.endpoint = 17;
                    break;
                case "Generic5":
                case 18:
                    message.endpoint = 18;
                    break;
                case "Generic6":
                case 19:
                    message.endpoint = 19;
                    break;
                case "Generic7":
                case 20:
                    message.endpoint = 20;
                    break;
                case "Generic8":
                case 21:
                    message.endpoint = 21;
                    break;
                case "Generic9":
                case 22:
                    message.endpoint = 22;
                    break;
                case "Generic10":
                case 23:
                    message.endpoint = 23;
                    break;
                case "Generic11":
                case 24:
                    message.endpoint = 24;
                    break;
                case "Generic12":
                case 25:
                    message.endpoint = 25;
                    break;
                case "Generic13":
                case 26:
                    message.endpoint = 26;
                    break;
                case "Generic14":
                case 27:
                    message.endpoint = 27;
                    break;
                case "Generic15":
                case 28:
                    message.endpoint = 28;
                    break;
                case "Generic16":
                case 29:
                    message.endpoint = 29;
                    break;
                case "Generic17":
                case 30:
                    message.endpoint = 30;
                    break;
                case "Generic18":
                case 31:
                    message.endpoint = 31;
                    break;
                case "Generic19":
                case 32:
                    message.endpoint = 32;
                    break;
                case "Generic20":
                case 33:
                    message.endpoint = 33;
                    break;
                case "Generic21":
                case 34:
                    message.endpoint = 34;
                    break;
                case "Generic22":
                case 35:
                    message.endpoint = 35;
                    break;
                case "Generic23":
                case 36:
                    message.endpoint = 36;
                    break;
                case "Generic24":
                case 37:
                    message.endpoint = 37;
                    break;
                case "Generic25":
                case 38:
                    message.endpoint = 38;
                    break;
                case "Generic26":
                case 39:
                    message.endpoint = 39;
                    break;
                case "Generic27":
                case 40:
                    message.endpoint = 40;
                    break;
                case "Generic28":
                case 41:
                    message.endpoint = 41;
                    break;
                case "Generic29":
                case 42:
                    message.endpoint = 42;
                    break;
                case "Generic30":
                case 43:
                    message.endpoint = 43;
                    break;
                case "Generic31":
                case 44:
                    message.endpoint = 44;
                    break;
                }
                if (object.data != null)
                    if (typeof object.data === "string")
                        $util.base64.decode(object.data, message.data = $util.newBuffer($util.base64.length(object.data)), 0);
                    else if (object.data.length)
                        message.data = object.data;
                if (object.writeWithResponse != null)
                    message.writeWithResponse = Boolean(object.writeWithResponse);
                return message;
            };

            /**
             * Creates a plain object from a RawWriteCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @static
             * @param {Buttplug.DeviceMessage.RawWriteCmd} message RawWriteCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RawWriteCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.endpoint = options.enums === String ? "Command" : 0;
                    if (options.bytes === String)
                        object.data = "";
                    else {
                        object.data = [];
                        if (options.bytes !== Array)
                            object.data = $util.newBuffer(object.data);
                    }
                    object.writeWithResponse = false;
                }
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    object.endpoint = options.enums === String ? $root.Buttplug.Endpoint[message.endpoint] : message.endpoint;
                if (message.data != null && message.hasOwnProperty("data"))
                    object.data = options.bytes === String ? $util.base64.encode(message.data, 0, message.data.length) : options.bytes === Array ? Array.prototype.slice.call(message.data) : message.data;
                if (message.writeWithResponse != null && message.hasOwnProperty("writeWithResponse"))
                    object.writeWithResponse = message.writeWithResponse;
                return object;
            };

            /**
             * Converts this RawWriteCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RawWriteCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RawWriteCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RawWriteCmd;
        })();

        DeviceMessage.RawSubscribeCmd = (function() {

            /**
             * Properties of a RawSubscribeCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IRawSubscribeCmd
             * @property {Buttplug.Endpoint|null} [endpoint] RawSubscribeCmd endpoint
             */

            /**
             * Constructs a new RawSubscribeCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RawSubscribeCmd.
             * @implements IRawSubscribeCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IRawSubscribeCmd=} [properties] Properties to set
             */
            function RawSubscribeCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RawSubscribeCmd endpoint.
             * @member {Buttplug.Endpoint} endpoint
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @instance
             */
            RawSubscribeCmd.prototype.endpoint = 0;

            /**
             * Creates a new RawSubscribeCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawSubscribeCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RawSubscribeCmd} RawSubscribeCmd instance
             */
            RawSubscribeCmd.create = function create(properties) {
                return new RawSubscribeCmd(properties);
            };

            /**
             * Encodes the specified RawSubscribeCmd message. Does not implicitly {@link Buttplug.DeviceMessage.RawSubscribeCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawSubscribeCmd} message RawSubscribeCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawSubscribeCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.endpoint != null && Object.hasOwnProperty.call(message, "endpoint"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.endpoint);
                return writer;
            };

            /**
             * Encodes the specified RawSubscribeCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RawSubscribeCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawSubscribeCmd} message RawSubscribeCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawSubscribeCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RawSubscribeCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RawSubscribeCmd} RawSubscribeCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawSubscribeCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RawSubscribeCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.endpoint = reader.int32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RawSubscribeCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RawSubscribeCmd} RawSubscribeCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawSubscribeCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RawSubscribeCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RawSubscribeCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    switch (message.endpoint) {
                    default:
                        return "endpoint: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                    case 13:
                    case 14:
                    case 15:
                    case 16:
                    case 17:
                    case 18:
                    case 19:
                    case 20:
                    case 21:
                    case 22:
                    case 23:
                    case 24:
                    case 25:
                    case 26:
                    case 27:
                    case 28:
                    case 29:
                    case 30:
                    case 31:
                    case 32:
                    case 33:
                    case 34:
                    case 35:
                    case 36:
                    case 37:
                    case 38:
                    case 39:
                    case 40:
                    case 41:
                    case 42:
                    case 43:
                    case 44:
                        break;
                    }
                return null;
            };

            /**
             * Creates a RawSubscribeCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RawSubscribeCmd} RawSubscribeCmd
             */
            RawSubscribeCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RawSubscribeCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.RawSubscribeCmd();
                switch (object.endpoint) {
                case "Command":
                case 0:
                    message.endpoint = 0;
                    break;
                case "Firmware":
                case 1:
                    message.endpoint = 1;
                    break;
                case "Rx":
                case 2:
                    message.endpoint = 2;
                    break;
                case "RxAccel":
                case 3:
                    message.endpoint = 3;
                    break;
                case "RxBLEBattery":
                case 4:
                    message.endpoint = 4;
                    break;
                case "RxPressure":
                case 5:
                    message.endpoint = 5;
                    break;
                case "RxTouch":
                case 6:
                    message.endpoint = 6;
                    break;
                case "Tx":
                case 7:
                    message.endpoint = 7;
                    break;
                case "TxMode":
                case 8:
                    message.endpoint = 8;
                    break;
                case "TxShock":
                case 9:
                    message.endpoint = 9;
                    break;
                case "TxVibrate":
                case 10:
                    message.endpoint = 10;
                    break;
                case "TxVendorControl":
                case 11:
                    message.endpoint = 11;
                    break;
                case "Whitelist":
                case 12:
                    message.endpoint = 12;
                    break;
                case "Generic0":
                case 13:
                    message.endpoint = 13;
                    break;
                case "Generic1":
                case 14:
                    message.endpoint = 14;
                    break;
                case "Generic2":
                case 15:
                    message.endpoint = 15;
                    break;
                case "Generic3":
                case 16:
                    message.endpoint = 16;
                    break;
                case "Generic4":
                case 17:
                    message.endpoint = 17;
                    break;
                case "Generic5":
                case 18:
                    message.endpoint = 18;
                    break;
                case "Generic6":
                case 19:
                    message.endpoint = 19;
                    break;
                case "Generic7":
                case 20:
                    message.endpoint = 20;
                    break;
                case "Generic8":
                case 21:
                    message.endpoint = 21;
                    break;
                case "Generic9":
                case 22:
                    message.endpoint = 22;
                    break;
                case "Generic10":
                case 23:
                    message.endpoint = 23;
                    break;
                case "Generic11":
                case 24:
                    message.endpoint = 24;
                    break;
                case "Generic12":
                case 25:
                    message.endpoint = 25;
                    break;
                case "Generic13":
                case 26:
                    message.endpoint = 26;
                    break;
                case "Generic14":
                case 27:
                    message.endpoint = 27;
                    break;
                case "Generic15":
                case 28:
                    message.endpoint = 28;
                    break;
                case "Generic16":
                case 29:
                    message.endpoint = 29;
                    break;
                case "Generic17":
                case 30:
                    message.endpoint = 30;
                    break;
                case "Generic18":
                case 31:
                    message.endpoint = 31;
                    break;
                case "Generic19":
                case 32:
                    message.endpoint = 32;
                    break;
                case "Generic20":
                case 33:
                    message.endpoint = 33;
                    break;
                case "Generic21":
                case 34:
                    message.endpoint = 34;
                    break;
                case "Generic22":
                case 35:
                    message.endpoint = 35;
                    break;
                case "Generic23":
                case 36:
                    message.endpoint = 36;
                    break;
                case "Generic24":
                case 37:
                    message.endpoint = 37;
                    break;
                case "Generic25":
                case 38:
                    message.endpoint = 38;
                    break;
                case "Generic26":
                case 39:
                    message.endpoint = 39;
                    break;
                case "Generic27":
                case 40:
                    message.endpoint = 40;
                    break;
                case "Generic28":
                case 41:
                    message.endpoint = 41;
                    break;
                case "Generic29":
                case 42:
                    message.endpoint = 42;
                    break;
                case "Generic30":
                case 43:
                    message.endpoint = 43;
                    break;
                case "Generic31":
                case 44:
                    message.endpoint = 44;
                    break;
                }
                return message;
            };

            /**
             * Creates a plain object from a RawSubscribeCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.RawSubscribeCmd} message RawSubscribeCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RawSubscribeCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults)
                    object.endpoint = options.enums === String ? "Command" : 0;
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    object.endpoint = options.enums === String ? $root.Buttplug.Endpoint[message.endpoint] : message.endpoint;
                return object;
            };

            /**
             * Converts this RawSubscribeCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RawSubscribeCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RawSubscribeCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RawSubscribeCmd;
        })();

        DeviceMessage.RawUnsubscribeCmd = (function() {

            /**
             * Properties of a RawUnsubscribeCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IRawUnsubscribeCmd
             * @property {Buttplug.Endpoint|null} [endpoint] RawUnsubscribeCmd endpoint
             */

            /**
             * Constructs a new RawUnsubscribeCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RawUnsubscribeCmd.
             * @implements IRawUnsubscribeCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IRawUnsubscribeCmd=} [properties] Properties to set
             */
            function RawUnsubscribeCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RawUnsubscribeCmd endpoint.
             * @member {Buttplug.Endpoint} endpoint
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @instance
             */
            RawUnsubscribeCmd.prototype.endpoint = 0;

            /**
             * Creates a new RawUnsubscribeCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawUnsubscribeCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RawUnsubscribeCmd} RawUnsubscribeCmd instance
             */
            RawUnsubscribeCmd.create = function create(properties) {
                return new RawUnsubscribeCmd(properties);
            };

            /**
             * Encodes the specified RawUnsubscribeCmd message. Does not implicitly {@link Buttplug.DeviceMessage.RawUnsubscribeCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawUnsubscribeCmd} message RawUnsubscribeCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawUnsubscribeCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.endpoint != null && Object.hasOwnProperty.call(message, "endpoint"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.endpoint);
                return writer;
            };

            /**
             * Encodes the specified RawUnsubscribeCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RawUnsubscribeCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRawUnsubscribeCmd} message RawUnsubscribeCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawUnsubscribeCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RawUnsubscribeCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RawUnsubscribeCmd} RawUnsubscribeCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawUnsubscribeCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RawUnsubscribeCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.endpoint = reader.int32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RawUnsubscribeCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RawUnsubscribeCmd} RawUnsubscribeCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawUnsubscribeCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RawUnsubscribeCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RawUnsubscribeCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    switch (message.endpoint) {
                    default:
                        return "endpoint: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                    case 13:
                    case 14:
                    case 15:
                    case 16:
                    case 17:
                    case 18:
                    case 19:
                    case 20:
                    case 21:
                    case 22:
                    case 23:
                    case 24:
                    case 25:
                    case 26:
                    case 27:
                    case 28:
                    case 29:
                    case 30:
                    case 31:
                    case 32:
                    case 33:
                    case 34:
                    case 35:
                    case 36:
                    case 37:
                    case 38:
                    case 39:
                    case 40:
                    case 41:
                    case 42:
                    case 43:
                    case 44:
                        break;
                    }
                return null;
            };

            /**
             * Creates a RawUnsubscribeCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RawUnsubscribeCmd} RawUnsubscribeCmd
             */
            RawUnsubscribeCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RawUnsubscribeCmd)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.RawUnsubscribeCmd();
                switch (object.endpoint) {
                case "Command":
                case 0:
                    message.endpoint = 0;
                    break;
                case "Firmware":
                case 1:
                    message.endpoint = 1;
                    break;
                case "Rx":
                case 2:
                    message.endpoint = 2;
                    break;
                case "RxAccel":
                case 3:
                    message.endpoint = 3;
                    break;
                case "RxBLEBattery":
                case 4:
                    message.endpoint = 4;
                    break;
                case "RxPressure":
                case 5:
                    message.endpoint = 5;
                    break;
                case "RxTouch":
                case 6:
                    message.endpoint = 6;
                    break;
                case "Tx":
                case 7:
                    message.endpoint = 7;
                    break;
                case "TxMode":
                case 8:
                    message.endpoint = 8;
                    break;
                case "TxShock":
                case 9:
                    message.endpoint = 9;
                    break;
                case "TxVibrate":
                case 10:
                    message.endpoint = 10;
                    break;
                case "TxVendorControl":
                case 11:
                    message.endpoint = 11;
                    break;
                case "Whitelist":
                case 12:
                    message.endpoint = 12;
                    break;
                case "Generic0":
                case 13:
                    message.endpoint = 13;
                    break;
                case "Generic1":
                case 14:
                    message.endpoint = 14;
                    break;
                case "Generic2":
                case 15:
                    message.endpoint = 15;
                    break;
                case "Generic3":
                case 16:
                    message.endpoint = 16;
                    break;
                case "Generic4":
                case 17:
                    message.endpoint = 17;
                    break;
                case "Generic5":
                case 18:
                    message.endpoint = 18;
                    break;
                case "Generic6":
                case 19:
                    message.endpoint = 19;
                    break;
                case "Generic7":
                case 20:
                    message.endpoint = 20;
                    break;
                case "Generic8":
                case 21:
                    message.endpoint = 21;
                    break;
                case "Generic9":
                case 22:
                    message.endpoint = 22;
                    break;
                case "Generic10":
                case 23:
                    message.endpoint = 23;
                    break;
                case "Generic11":
                case 24:
                    message.endpoint = 24;
                    break;
                case "Generic12":
                case 25:
                    message.endpoint = 25;
                    break;
                case "Generic13":
                case 26:
                    message.endpoint = 26;
                    break;
                case "Generic14":
                case 27:
                    message.endpoint = 27;
                    break;
                case "Generic15":
                case 28:
                    message.endpoint = 28;
                    break;
                case "Generic16":
                case 29:
                    message.endpoint = 29;
                    break;
                case "Generic17":
                case 30:
                    message.endpoint = 30;
                    break;
                case "Generic18":
                case 31:
                    message.endpoint = 31;
                    break;
                case "Generic19":
                case 32:
                    message.endpoint = 32;
                    break;
                case "Generic20":
                case 33:
                    message.endpoint = 33;
                    break;
                case "Generic21":
                case 34:
                    message.endpoint = 34;
                    break;
                case "Generic22":
                case 35:
                    message.endpoint = 35;
                    break;
                case "Generic23":
                case 36:
                    message.endpoint = 36;
                    break;
                case "Generic24":
                case 37:
                    message.endpoint = 37;
                    break;
                case "Generic25":
                case 38:
                    message.endpoint = 38;
                    break;
                case "Generic26":
                case 39:
                    message.endpoint = 39;
                    break;
                case "Generic27":
                case 40:
                    message.endpoint = 40;
                    break;
                case "Generic28":
                case 41:
                    message.endpoint = 41;
                    break;
                case "Generic29":
                case 42:
                    message.endpoint = 42;
                    break;
                case "Generic30":
                case 43:
                    message.endpoint = 43;
                    break;
                case "Generic31":
                case 44:
                    message.endpoint = 44;
                    break;
                }
                return message;
            };

            /**
             * Creates a plain object from a RawUnsubscribeCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @static
             * @param {Buttplug.DeviceMessage.RawUnsubscribeCmd} message RawUnsubscribeCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RawUnsubscribeCmd.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults)
                    object.endpoint = options.enums === String ? "Command" : 0;
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    object.endpoint = options.enums === String ? $root.Buttplug.Endpoint[message.endpoint] : message.endpoint;
                return object;
            };

            /**
             * Converts this RawUnsubscribeCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RawUnsubscribeCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RawUnsubscribeCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RawUnsubscribeCmd;
        })();

        DeviceMessage.BatteryLevelCmd = (function() {

            /**
             * Properties of a BatteryLevelCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IBatteryLevelCmd
             */

            /**
             * Constructs a new BatteryLevelCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a BatteryLevelCmd.
             * @implements IBatteryLevelCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IBatteryLevelCmd=} [properties] Properties to set
             */
            function BatteryLevelCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new BatteryLevelCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.IBatteryLevelCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.BatteryLevelCmd} BatteryLevelCmd instance
             */
            BatteryLevelCmd.create = function create(properties) {
                return new BatteryLevelCmd(properties);
            };

            /**
             * Encodes the specified BatteryLevelCmd message. Does not implicitly {@link Buttplug.DeviceMessage.BatteryLevelCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.IBatteryLevelCmd} message BatteryLevelCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            BatteryLevelCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified BatteryLevelCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.BatteryLevelCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.IBatteryLevelCmd} message BatteryLevelCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            BatteryLevelCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a BatteryLevelCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.BatteryLevelCmd} BatteryLevelCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            BatteryLevelCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.BatteryLevelCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a BatteryLevelCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.BatteryLevelCmd} BatteryLevelCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            BatteryLevelCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a BatteryLevelCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            BatteryLevelCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a BatteryLevelCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.BatteryLevelCmd} BatteryLevelCmd
             */
            BatteryLevelCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.BatteryLevelCmd)
                    return object;
                return new $root.Buttplug.DeviceMessage.BatteryLevelCmd();
            };

            /**
             * Creates a plain object from a BatteryLevelCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.BatteryLevelCmd} message BatteryLevelCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            BatteryLevelCmd.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this BatteryLevelCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.BatteryLevelCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            BatteryLevelCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return BatteryLevelCmd;
        })();

        DeviceMessage.RSSILevelCmd = (function() {

            /**
             * Properties of a RSSILevelCmd.
             * @memberof Buttplug.DeviceMessage
             * @interface IRSSILevelCmd
             */

            /**
             * Constructs a new RSSILevelCmd.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a RSSILevelCmd.
             * @implements IRSSILevelCmd
             * @constructor
             * @param {Buttplug.DeviceMessage.IRSSILevelCmd=} [properties] Properties to set
             */
            function RSSILevelCmd(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new RSSILevelCmd instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRSSILevelCmd=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.RSSILevelCmd} RSSILevelCmd instance
             */
            RSSILevelCmd.create = function create(properties) {
                return new RSSILevelCmd(properties);
            };

            /**
             * Encodes the specified RSSILevelCmd message. Does not implicitly {@link Buttplug.DeviceMessage.RSSILevelCmd.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRSSILevelCmd} message RSSILevelCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RSSILevelCmd.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified RSSILevelCmd message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.RSSILevelCmd.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.IRSSILevelCmd} message RSSILevelCmd message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RSSILevelCmd.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RSSILevelCmd message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.RSSILevelCmd} RSSILevelCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RSSILevelCmd.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.RSSILevelCmd();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RSSILevelCmd message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.RSSILevelCmd} RSSILevelCmd
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RSSILevelCmd.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RSSILevelCmd message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RSSILevelCmd.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a RSSILevelCmd message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.RSSILevelCmd} RSSILevelCmd
             */
            RSSILevelCmd.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.RSSILevelCmd)
                    return object;
                return new $root.Buttplug.DeviceMessage.RSSILevelCmd();
            };

            /**
             * Creates a plain object from a RSSILevelCmd message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @static
             * @param {Buttplug.DeviceMessage.RSSILevelCmd} message RSSILevelCmd
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RSSILevelCmd.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this RSSILevelCmd to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.RSSILevelCmd
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RSSILevelCmd.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RSSILevelCmd;
        })();

        DeviceMessage.FFIMessage = (function() {

            /**
             * Properties of a FFIMessage.
             * @memberof Buttplug.DeviceMessage
             * @interface IFFIMessage
             * @property {Buttplug.DeviceMessage.IVibrateCmd|null} [vibrateCmd] FFIMessage vibrateCmd
             * @property {Buttplug.DeviceMessage.IRotateCmd|null} [rotateCmd] FFIMessage rotateCmd
             * @property {Buttplug.DeviceMessage.ILinearCmd|null} [linearCmd] FFIMessage linearCmd
             * @property {Buttplug.DeviceMessage.IStopDeviceCmd|null} [stopDeviceCmd] FFIMessage stopDeviceCmd
             * @property {Buttplug.DeviceMessage.IRawReadCmd|null} [rawReadCmd] FFIMessage rawReadCmd
             * @property {Buttplug.DeviceMessage.IRawWriteCmd|null} [rawWriteCmd] FFIMessage rawWriteCmd
             * @property {Buttplug.DeviceMessage.IRawSubscribeCmd|null} [rawSubscribeCmd] FFIMessage rawSubscribeCmd
             * @property {Buttplug.DeviceMessage.IRawUnsubscribeCmd|null} [rawUnsubscribeCmd] FFIMessage rawUnsubscribeCmd
             * @property {Buttplug.DeviceMessage.IBatteryLevelCmd|null} [batteryLevelCmd] FFIMessage batteryLevelCmd
             * @property {Buttplug.DeviceMessage.IRSSILevelCmd|null} [rssiLevelCmd] FFIMessage rssiLevelCmd
             */

            /**
             * Constructs a new FFIMessage.
             * @memberof Buttplug.DeviceMessage
             * @classdesc Represents a FFIMessage.
             * @implements IFFIMessage
             * @constructor
             * @param {Buttplug.DeviceMessage.IFFIMessage=} [properties] Properties to set
             */
            function FFIMessage(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * FFIMessage vibrateCmd.
             * @member {Buttplug.DeviceMessage.IVibrateCmd|null|undefined} vibrateCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.vibrateCmd = null;

            /**
             * FFIMessage rotateCmd.
             * @member {Buttplug.DeviceMessage.IRotateCmd|null|undefined} rotateCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.rotateCmd = null;

            /**
             * FFIMessage linearCmd.
             * @member {Buttplug.DeviceMessage.ILinearCmd|null|undefined} linearCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.linearCmd = null;

            /**
             * FFIMessage stopDeviceCmd.
             * @member {Buttplug.DeviceMessage.IStopDeviceCmd|null|undefined} stopDeviceCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.stopDeviceCmd = null;

            /**
             * FFIMessage rawReadCmd.
             * @member {Buttplug.DeviceMessage.IRawReadCmd|null|undefined} rawReadCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.rawReadCmd = null;

            /**
             * FFIMessage rawWriteCmd.
             * @member {Buttplug.DeviceMessage.IRawWriteCmd|null|undefined} rawWriteCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.rawWriteCmd = null;

            /**
             * FFIMessage rawSubscribeCmd.
             * @member {Buttplug.DeviceMessage.IRawSubscribeCmd|null|undefined} rawSubscribeCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.rawSubscribeCmd = null;

            /**
             * FFIMessage rawUnsubscribeCmd.
             * @member {Buttplug.DeviceMessage.IRawUnsubscribeCmd|null|undefined} rawUnsubscribeCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.rawUnsubscribeCmd = null;

            /**
             * FFIMessage batteryLevelCmd.
             * @member {Buttplug.DeviceMessage.IBatteryLevelCmd|null|undefined} batteryLevelCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.batteryLevelCmd = null;

            /**
             * FFIMessage rssiLevelCmd.
             * @member {Buttplug.DeviceMessage.IRSSILevelCmd|null|undefined} rssiLevelCmd
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.rssiLevelCmd = null;

            // OneOf field names bound to virtual getters and setters
            var $oneOfFields;

            /**
             * FFIMessage msg.
             * @member {"vibrateCmd"|"rotateCmd"|"linearCmd"|"stopDeviceCmd"|"rawReadCmd"|"rawWriteCmd"|"rawSubscribeCmd"|"rawUnsubscribeCmd"|"batteryLevelCmd"|"rssiLevelCmd"|undefined} msg
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             */
            Object.defineProperty(FFIMessage.prototype, "msg", {
                get: $util.oneOfGetter($oneOfFields = ["vibrateCmd", "rotateCmd", "linearCmd", "stopDeviceCmd", "rawReadCmd", "rawWriteCmd", "rawSubscribeCmd", "rawUnsubscribeCmd", "batteryLevelCmd", "rssiLevelCmd"]),
                set: $util.oneOfSetter($oneOfFields)
            });

            /**
             * Creates a new FFIMessage instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {Buttplug.DeviceMessage.IFFIMessage=} [properties] Properties to set
             * @returns {Buttplug.DeviceMessage.FFIMessage} FFIMessage instance
             */
            FFIMessage.create = function create(properties) {
                return new FFIMessage(properties);
            };

            /**
             * Encodes the specified FFIMessage message. Does not implicitly {@link Buttplug.DeviceMessage.FFIMessage.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {Buttplug.DeviceMessage.IFFIMessage} message FFIMessage message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FFIMessage.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.vibrateCmd != null && Object.hasOwnProperty.call(message, "vibrateCmd"))
                    $root.Buttplug.DeviceMessage.VibrateCmd.encode(message.vibrateCmd, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                if (message.rotateCmd != null && Object.hasOwnProperty.call(message, "rotateCmd"))
                    $root.Buttplug.DeviceMessage.RotateCmd.encode(message.rotateCmd, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                if (message.linearCmd != null && Object.hasOwnProperty.call(message, "linearCmd"))
                    $root.Buttplug.DeviceMessage.LinearCmd.encode(message.linearCmd, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                if (message.stopDeviceCmd != null && Object.hasOwnProperty.call(message, "stopDeviceCmd"))
                    $root.Buttplug.DeviceMessage.StopDeviceCmd.encode(message.stopDeviceCmd, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                if (message.rawReadCmd != null && Object.hasOwnProperty.call(message, "rawReadCmd"))
                    $root.Buttplug.DeviceMessage.RawReadCmd.encode(message.rawReadCmd, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                if (message.rawWriteCmd != null && Object.hasOwnProperty.call(message, "rawWriteCmd"))
                    $root.Buttplug.DeviceMessage.RawWriteCmd.encode(message.rawWriteCmd, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                if (message.rawSubscribeCmd != null && Object.hasOwnProperty.call(message, "rawSubscribeCmd"))
                    $root.Buttplug.DeviceMessage.RawSubscribeCmd.encode(message.rawSubscribeCmd, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                if (message.rawUnsubscribeCmd != null && Object.hasOwnProperty.call(message, "rawUnsubscribeCmd"))
                    $root.Buttplug.DeviceMessage.RawUnsubscribeCmd.encode(message.rawUnsubscribeCmd, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                if (message.batteryLevelCmd != null && Object.hasOwnProperty.call(message, "batteryLevelCmd"))
                    $root.Buttplug.DeviceMessage.BatteryLevelCmd.encode(message.batteryLevelCmd, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();
                if (message.rssiLevelCmd != null && Object.hasOwnProperty.call(message, "rssiLevelCmd"))
                    $root.Buttplug.DeviceMessage.RSSILevelCmd.encode(message.rssiLevelCmd, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified FFIMessage message, length delimited. Does not implicitly {@link Buttplug.DeviceMessage.FFIMessage.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {Buttplug.DeviceMessage.IFFIMessage} message FFIMessage message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FFIMessage.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a FFIMessage message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceMessage.FFIMessage} FFIMessage
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FFIMessage.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceMessage.FFIMessage();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.vibrateCmd = $root.Buttplug.DeviceMessage.VibrateCmd.decode(reader, reader.uint32());
                        break;
                    case 2:
                        message.rotateCmd = $root.Buttplug.DeviceMessage.RotateCmd.decode(reader, reader.uint32());
                        break;
                    case 3:
                        message.linearCmd = $root.Buttplug.DeviceMessage.LinearCmd.decode(reader, reader.uint32());
                        break;
                    case 4:
                        message.stopDeviceCmd = $root.Buttplug.DeviceMessage.StopDeviceCmd.decode(reader, reader.uint32());
                        break;
                    case 5:
                        message.rawReadCmd = $root.Buttplug.DeviceMessage.RawReadCmd.decode(reader, reader.uint32());
                        break;
                    case 6:
                        message.rawWriteCmd = $root.Buttplug.DeviceMessage.RawWriteCmd.decode(reader, reader.uint32());
                        break;
                    case 7:
                        message.rawSubscribeCmd = $root.Buttplug.DeviceMessage.RawSubscribeCmd.decode(reader, reader.uint32());
                        break;
                    case 8:
                        message.rawUnsubscribeCmd = $root.Buttplug.DeviceMessage.RawUnsubscribeCmd.decode(reader, reader.uint32());
                        break;
                    case 9:
                        message.batteryLevelCmd = $root.Buttplug.DeviceMessage.BatteryLevelCmd.decode(reader, reader.uint32());
                        break;
                    case 10:
                        message.rssiLevelCmd = $root.Buttplug.DeviceMessage.RSSILevelCmd.decode(reader, reader.uint32());
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a FFIMessage message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceMessage.FFIMessage} FFIMessage
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FFIMessage.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a FFIMessage message.
             * @function verify
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            FFIMessage.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                var properties = {};
                if (message.vibrateCmd != null && message.hasOwnProperty("vibrateCmd")) {
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.VibrateCmd.verify(message.vibrateCmd);
                        if (error)
                            return "vibrateCmd." + error;
                    }
                }
                if (message.rotateCmd != null && message.hasOwnProperty("rotateCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.RotateCmd.verify(message.rotateCmd);
                        if (error)
                            return "rotateCmd." + error;
                    }
                }
                if (message.linearCmd != null && message.hasOwnProperty("linearCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.LinearCmd.verify(message.linearCmd);
                        if (error)
                            return "linearCmd." + error;
                    }
                }
                if (message.stopDeviceCmd != null && message.hasOwnProperty("stopDeviceCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.StopDeviceCmd.verify(message.stopDeviceCmd);
                        if (error)
                            return "stopDeviceCmd." + error;
                    }
                }
                if (message.rawReadCmd != null && message.hasOwnProperty("rawReadCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.RawReadCmd.verify(message.rawReadCmd);
                        if (error)
                            return "rawReadCmd." + error;
                    }
                }
                if (message.rawWriteCmd != null && message.hasOwnProperty("rawWriteCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.RawWriteCmd.verify(message.rawWriteCmd);
                        if (error)
                            return "rawWriteCmd." + error;
                    }
                }
                if (message.rawSubscribeCmd != null && message.hasOwnProperty("rawSubscribeCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.RawSubscribeCmd.verify(message.rawSubscribeCmd);
                        if (error)
                            return "rawSubscribeCmd." + error;
                    }
                }
                if (message.rawUnsubscribeCmd != null && message.hasOwnProperty("rawUnsubscribeCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.RawUnsubscribeCmd.verify(message.rawUnsubscribeCmd);
                        if (error)
                            return "rawUnsubscribeCmd." + error;
                    }
                }
                if (message.batteryLevelCmd != null && message.hasOwnProperty("batteryLevelCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.BatteryLevelCmd.verify(message.batteryLevelCmd);
                        if (error)
                            return "batteryLevelCmd." + error;
                    }
                }
                if (message.rssiLevelCmd != null && message.hasOwnProperty("rssiLevelCmd")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceMessage.RSSILevelCmd.verify(message.rssiLevelCmd);
                        if (error)
                            return "rssiLevelCmd." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a FFIMessage message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceMessage.FFIMessage} FFIMessage
             */
            FFIMessage.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceMessage.FFIMessage)
                    return object;
                var message = new $root.Buttplug.DeviceMessage.FFIMessage();
                if (object.vibrateCmd != null) {
                    if (typeof object.vibrateCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.vibrateCmd: object expected");
                    message.vibrateCmd = $root.Buttplug.DeviceMessage.VibrateCmd.fromObject(object.vibrateCmd);
                }
                if (object.rotateCmd != null) {
                    if (typeof object.rotateCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.rotateCmd: object expected");
                    message.rotateCmd = $root.Buttplug.DeviceMessage.RotateCmd.fromObject(object.rotateCmd);
                }
                if (object.linearCmd != null) {
                    if (typeof object.linearCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.linearCmd: object expected");
                    message.linearCmd = $root.Buttplug.DeviceMessage.LinearCmd.fromObject(object.linearCmd);
                }
                if (object.stopDeviceCmd != null) {
                    if (typeof object.stopDeviceCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.stopDeviceCmd: object expected");
                    message.stopDeviceCmd = $root.Buttplug.DeviceMessage.StopDeviceCmd.fromObject(object.stopDeviceCmd);
                }
                if (object.rawReadCmd != null) {
                    if (typeof object.rawReadCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.rawReadCmd: object expected");
                    message.rawReadCmd = $root.Buttplug.DeviceMessage.RawReadCmd.fromObject(object.rawReadCmd);
                }
                if (object.rawWriteCmd != null) {
                    if (typeof object.rawWriteCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.rawWriteCmd: object expected");
                    message.rawWriteCmd = $root.Buttplug.DeviceMessage.RawWriteCmd.fromObject(object.rawWriteCmd);
                }
                if (object.rawSubscribeCmd != null) {
                    if (typeof object.rawSubscribeCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.rawSubscribeCmd: object expected");
                    message.rawSubscribeCmd = $root.Buttplug.DeviceMessage.RawSubscribeCmd.fromObject(object.rawSubscribeCmd);
                }
                if (object.rawUnsubscribeCmd != null) {
                    if (typeof object.rawUnsubscribeCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.rawUnsubscribeCmd: object expected");
                    message.rawUnsubscribeCmd = $root.Buttplug.DeviceMessage.RawUnsubscribeCmd.fromObject(object.rawUnsubscribeCmd);
                }
                if (object.batteryLevelCmd != null) {
                    if (typeof object.batteryLevelCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.batteryLevelCmd: object expected");
                    message.batteryLevelCmd = $root.Buttplug.DeviceMessage.BatteryLevelCmd.fromObject(object.batteryLevelCmd);
                }
                if (object.rssiLevelCmd != null) {
                    if (typeof object.rssiLevelCmd !== "object")
                        throw TypeError(".Buttplug.DeviceMessage.FFIMessage.rssiLevelCmd: object expected");
                    message.rssiLevelCmd = $root.Buttplug.DeviceMessage.RSSILevelCmd.fromObject(object.rssiLevelCmd);
                }
                return message;
            };

            /**
             * Creates a plain object from a FFIMessage message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @static
             * @param {Buttplug.DeviceMessage.FFIMessage} message FFIMessage
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            FFIMessage.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (message.vibrateCmd != null && message.hasOwnProperty("vibrateCmd")) {
                    object.vibrateCmd = $root.Buttplug.DeviceMessage.VibrateCmd.toObject(message.vibrateCmd, options);
                    if (options.oneofs)
                        object.msg = "vibrateCmd";
                }
                if (message.rotateCmd != null && message.hasOwnProperty("rotateCmd")) {
                    object.rotateCmd = $root.Buttplug.DeviceMessage.RotateCmd.toObject(message.rotateCmd, options);
                    if (options.oneofs)
                        object.msg = "rotateCmd";
                }
                if (message.linearCmd != null && message.hasOwnProperty("linearCmd")) {
                    object.linearCmd = $root.Buttplug.DeviceMessage.LinearCmd.toObject(message.linearCmd, options);
                    if (options.oneofs)
                        object.msg = "linearCmd";
                }
                if (message.stopDeviceCmd != null && message.hasOwnProperty("stopDeviceCmd")) {
                    object.stopDeviceCmd = $root.Buttplug.DeviceMessage.StopDeviceCmd.toObject(message.stopDeviceCmd, options);
                    if (options.oneofs)
                        object.msg = "stopDeviceCmd";
                }
                if (message.rawReadCmd != null && message.hasOwnProperty("rawReadCmd")) {
                    object.rawReadCmd = $root.Buttplug.DeviceMessage.RawReadCmd.toObject(message.rawReadCmd, options);
                    if (options.oneofs)
                        object.msg = "rawReadCmd";
                }
                if (message.rawWriteCmd != null && message.hasOwnProperty("rawWriteCmd")) {
                    object.rawWriteCmd = $root.Buttplug.DeviceMessage.RawWriteCmd.toObject(message.rawWriteCmd, options);
                    if (options.oneofs)
                        object.msg = "rawWriteCmd";
                }
                if (message.rawSubscribeCmd != null && message.hasOwnProperty("rawSubscribeCmd")) {
                    object.rawSubscribeCmd = $root.Buttplug.DeviceMessage.RawSubscribeCmd.toObject(message.rawSubscribeCmd, options);
                    if (options.oneofs)
                        object.msg = "rawSubscribeCmd";
                }
                if (message.rawUnsubscribeCmd != null && message.hasOwnProperty("rawUnsubscribeCmd")) {
                    object.rawUnsubscribeCmd = $root.Buttplug.DeviceMessage.RawUnsubscribeCmd.toObject(message.rawUnsubscribeCmd, options);
                    if (options.oneofs)
                        object.msg = "rawUnsubscribeCmd";
                }
                if (message.batteryLevelCmd != null && message.hasOwnProperty("batteryLevelCmd")) {
                    object.batteryLevelCmd = $root.Buttplug.DeviceMessage.BatteryLevelCmd.toObject(message.batteryLevelCmd, options);
                    if (options.oneofs)
                        object.msg = "batteryLevelCmd";
                }
                if (message.rssiLevelCmd != null && message.hasOwnProperty("rssiLevelCmd")) {
                    object.rssiLevelCmd = $root.Buttplug.DeviceMessage.RSSILevelCmd.toObject(message.rssiLevelCmd, options);
                    if (options.oneofs)
                        object.msg = "rssiLevelCmd";
                }
                return object;
            };

            /**
             * Converts this FFIMessage to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceMessage.FFIMessage
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            FFIMessage.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return FFIMessage;
        })();

        return DeviceMessage;
    })();

    Buttplug.ServerMessage = (function() {

        /**
         * Properties of a ServerMessage.
         * @memberof Buttplug
         * @interface IServerMessage
         * @property {Buttplug.ServerMessage.IOk|null} [ok] ServerMessage ok
         * @property {Buttplug.ServerMessage.IError|null} [error] ServerMessage error
         * @property {Buttplug.ServerMessage.IScanningFinished|null} [scanningFinished] ServerMessage scanningFinished
         * @property {Buttplug.ServerMessage.IDeviceAdded|null} [deviceAdded] ServerMessage deviceAdded
         * @property {Buttplug.ServerMessage.IDeviceRemoved|null} [deviceRemoved] ServerMessage deviceRemoved
         * @property {Buttplug.ServerMessage.IDisconnect|null} [disconnect] ServerMessage disconnect
         */

        /**
         * Constructs a new ServerMessage.
         * @memberof Buttplug
         * @classdesc Represents a ServerMessage.
         * @implements IServerMessage
         * @constructor
         * @param {Buttplug.IServerMessage=} [properties] Properties to set
         */
        function ServerMessage(properties) {
            if (properties)
                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        /**
         * ServerMessage ok.
         * @member {Buttplug.ServerMessage.IOk|null|undefined} ok
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        ServerMessage.prototype.ok = null;

        /**
         * ServerMessage error.
         * @member {Buttplug.ServerMessage.IError|null|undefined} error
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        ServerMessage.prototype.error = null;

        /**
         * ServerMessage scanningFinished.
         * @member {Buttplug.ServerMessage.IScanningFinished|null|undefined} scanningFinished
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        ServerMessage.prototype.scanningFinished = null;

        /**
         * ServerMessage deviceAdded.
         * @member {Buttplug.ServerMessage.IDeviceAdded|null|undefined} deviceAdded
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        ServerMessage.prototype.deviceAdded = null;

        /**
         * ServerMessage deviceRemoved.
         * @member {Buttplug.ServerMessage.IDeviceRemoved|null|undefined} deviceRemoved
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        ServerMessage.prototype.deviceRemoved = null;

        /**
         * ServerMessage disconnect.
         * @member {Buttplug.ServerMessage.IDisconnect|null|undefined} disconnect
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        ServerMessage.prototype.disconnect = null;

        // OneOf field names bound to virtual getters and setters
        var $oneOfFields;

        /**
         * ServerMessage msg.
         * @member {"ok"|"error"|"scanningFinished"|"deviceAdded"|"deviceRemoved"|"disconnect"|undefined} msg
         * @memberof Buttplug.ServerMessage
         * @instance
         */
        Object.defineProperty(ServerMessage.prototype, "msg", {
            get: $util.oneOfGetter($oneOfFields = ["ok", "error", "scanningFinished", "deviceAdded", "deviceRemoved", "disconnect"]),
            set: $util.oneOfSetter($oneOfFields)
        });

        /**
         * Creates a new ServerMessage instance using the specified properties.
         * @function create
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {Buttplug.IServerMessage=} [properties] Properties to set
         * @returns {Buttplug.ServerMessage} ServerMessage instance
         */
        ServerMessage.create = function create(properties) {
            return new ServerMessage(properties);
        };

        /**
         * Encodes the specified ServerMessage message. Does not implicitly {@link Buttplug.ServerMessage.verify|verify} messages.
         * @function encode
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {Buttplug.IServerMessage} message ServerMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        ServerMessage.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.ok != null && Object.hasOwnProperty.call(message, "ok"))
                $root.Buttplug.ServerMessage.Ok.encode(message.ok, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
            if (message.error != null && Object.hasOwnProperty.call(message, "error"))
                $root.Buttplug.ServerMessage.Error.encode(message.error, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
            if (message.scanningFinished != null && Object.hasOwnProperty.call(message, "scanningFinished"))
                $root.Buttplug.ServerMessage.ScanningFinished.encode(message.scanningFinished, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
            if (message.deviceAdded != null && Object.hasOwnProperty.call(message, "deviceAdded"))
                $root.Buttplug.ServerMessage.DeviceAdded.encode(message.deviceAdded, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
            if (message.deviceRemoved != null && Object.hasOwnProperty.call(message, "deviceRemoved"))
                $root.Buttplug.ServerMessage.DeviceRemoved.encode(message.deviceRemoved, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
            if (message.disconnect != null && Object.hasOwnProperty.call(message, "disconnect"))
                $root.Buttplug.ServerMessage.Disconnect.encode(message.disconnect, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
            return writer;
        };

        /**
         * Encodes the specified ServerMessage message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.verify|verify} messages.
         * @function encodeDelimited
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {Buttplug.IServerMessage} message ServerMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        ServerMessage.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
        };

        /**
         * Decodes a ServerMessage message from the specified reader or buffer.
         * @function decode
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @param {number} [length] Message length if known beforehand
         * @returns {Buttplug.ServerMessage} ServerMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        ServerMessage.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage();
            while (reader.pos < end) {
                var tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.ok = $root.Buttplug.ServerMessage.Ok.decode(reader, reader.uint32());
                    break;
                case 2:
                    message.error = $root.Buttplug.ServerMessage.Error.decode(reader, reader.uint32());
                    break;
                case 3:
                    message.scanningFinished = $root.Buttplug.ServerMessage.ScanningFinished.decode(reader, reader.uint32());
                    break;
                case 4:
                    message.deviceAdded = $root.Buttplug.ServerMessage.DeviceAdded.decode(reader, reader.uint32());
                    break;
                case 5:
                    message.deviceRemoved = $root.Buttplug.ServerMessage.DeviceRemoved.decode(reader, reader.uint32());
                    break;
                case 6:
                    message.disconnect = $root.Buttplug.ServerMessage.Disconnect.decode(reader, reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        /**
         * Decodes a ServerMessage message from the specified reader or buffer, length delimited.
         * @function decodeDelimited
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @returns {Buttplug.ServerMessage} ServerMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        ServerMessage.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
                reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
        };

        /**
         * Verifies a ServerMessage message.
         * @function verify
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {Object.<string,*>} message Plain object to verify
         * @returns {string|null} `null` if valid, otherwise the reason why it is not
         */
        ServerMessage.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
                return "object expected";
            var properties = {};
            if (message.ok != null && message.hasOwnProperty("ok")) {
                properties.msg = 1;
                {
                    var error = $root.Buttplug.ServerMessage.Ok.verify(message.ok);
                    if (error)
                        return "ok." + error;
                }
            }
            if (message.error != null && message.hasOwnProperty("error")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.ServerMessage.Error.verify(message.error);
                    if (error)
                        return "error." + error;
                }
            }
            if (message.scanningFinished != null && message.hasOwnProperty("scanningFinished")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.ServerMessage.ScanningFinished.verify(message.scanningFinished);
                    if (error)
                        return "scanningFinished." + error;
                }
            }
            if (message.deviceAdded != null && message.hasOwnProperty("deviceAdded")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.ServerMessage.DeviceAdded.verify(message.deviceAdded);
                    if (error)
                        return "deviceAdded." + error;
                }
            }
            if (message.deviceRemoved != null && message.hasOwnProperty("deviceRemoved")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.ServerMessage.DeviceRemoved.verify(message.deviceRemoved);
                    if (error)
                        return "deviceRemoved." + error;
                }
            }
            if (message.disconnect != null && message.hasOwnProperty("disconnect")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.ServerMessage.Disconnect.verify(message.disconnect);
                    if (error)
                        return "disconnect." + error;
                }
            }
            return null;
        };

        /**
         * Creates a ServerMessage message from a plain object. Also converts values to their respective internal types.
         * @function fromObject
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {Object.<string,*>} object Plain object
         * @returns {Buttplug.ServerMessage} ServerMessage
         */
        ServerMessage.fromObject = function fromObject(object) {
            if (object instanceof $root.Buttplug.ServerMessage)
                return object;
            var message = new $root.Buttplug.ServerMessage();
            if (object.ok != null) {
                if (typeof object.ok !== "object")
                    throw TypeError(".Buttplug.ServerMessage.ok: object expected");
                message.ok = $root.Buttplug.ServerMessage.Ok.fromObject(object.ok);
            }
            if (object.error != null) {
                if (typeof object.error !== "object")
                    throw TypeError(".Buttplug.ServerMessage.error: object expected");
                message.error = $root.Buttplug.ServerMessage.Error.fromObject(object.error);
            }
            if (object.scanningFinished != null) {
                if (typeof object.scanningFinished !== "object")
                    throw TypeError(".Buttplug.ServerMessage.scanningFinished: object expected");
                message.scanningFinished = $root.Buttplug.ServerMessage.ScanningFinished.fromObject(object.scanningFinished);
            }
            if (object.deviceAdded != null) {
                if (typeof object.deviceAdded !== "object")
                    throw TypeError(".Buttplug.ServerMessage.deviceAdded: object expected");
                message.deviceAdded = $root.Buttplug.ServerMessage.DeviceAdded.fromObject(object.deviceAdded);
            }
            if (object.deviceRemoved != null) {
                if (typeof object.deviceRemoved !== "object")
                    throw TypeError(".Buttplug.ServerMessage.deviceRemoved: object expected");
                message.deviceRemoved = $root.Buttplug.ServerMessage.DeviceRemoved.fromObject(object.deviceRemoved);
            }
            if (object.disconnect != null) {
                if (typeof object.disconnect !== "object")
                    throw TypeError(".Buttplug.ServerMessage.disconnect: object expected");
                message.disconnect = $root.Buttplug.ServerMessage.Disconnect.fromObject(object.disconnect);
            }
            return message;
        };

        /**
         * Creates a plain object from a ServerMessage message. Also converts values to other types if specified.
         * @function toObject
         * @memberof Buttplug.ServerMessage
         * @static
         * @param {Buttplug.ServerMessage} message ServerMessage
         * @param {$protobuf.IConversionOptions} [options] Conversion options
         * @returns {Object.<string,*>} Plain object
         */
        ServerMessage.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            var object = {};
            if (message.ok != null && message.hasOwnProperty("ok")) {
                object.ok = $root.Buttplug.ServerMessage.Ok.toObject(message.ok, options);
                if (options.oneofs)
                    object.msg = "ok";
            }
            if (message.error != null && message.hasOwnProperty("error")) {
                object.error = $root.Buttplug.ServerMessage.Error.toObject(message.error, options);
                if (options.oneofs)
                    object.msg = "error";
            }
            if (message.scanningFinished != null && message.hasOwnProperty("scanningFinished")) {
                object.scanningFinished = $root.Buttplug.ServerMessage.ScanningFinished.toObject(message.scanningFinished, options);
                if (options.oneofs)
                    object.msg = "scanningFinished";
            }
            if (message.deviceAdded != null && message.hasOwnProperty("deviceAdded")) {
                object.deviceAdded = $root.Buttplug.ServerMessage.DeviceAdded.toObject(message.deviceAdded, options);
                if (options.oneofs)
                    object.msg = "deviceAdded";
            }
            if (message.deviceRemoved != null && message.hasOwnProperty("deviceRemoved")) {
                object.deviceRemoved = $root.Buttplug.ServerMessage.DeviceRemoved.toObject(message.deviceRemoved, options);
                if (options.oneofs)
                    object.msg = "deviceRemoved";
            }
            if (message.disconnect != null && message.hasOwnProperty("disconnect")) {
                object.disconnect = $root.Buttplug.ServerMessage.Disconnect.toObject(message.disconnect, options);
                if (options.oneofs)
                    object.msg = "disconnect";
            }
            return object;
        };

        /**
         * Converts this ServerMessage to JSON.
         * @function toJSON
         * @memberof Buttplug.ServerMessage
         * @instance
         * @returns {Object.<string,*>} JSON object
         */
        ServerMessage.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };

        /**
         * ButtplugErrorType enum.
         * @name Buttplug.ServerMessage.ButtplugErrorType
         * @enum {number}
         * @property {number} ButtplugConnectorError=0 ButtplugConnectorError value
         * @property {number} ButtplugHandshakeError=1 ButtplugHandshakeError value
         * @property {number} ButtplugDeviceError=2 ButtplugDeviceError value
         * @property {number} ButtplugPingError=3 ButtplugPingError value
         * @property {number} ButtplugMessageError=4 ButtplugMessageError value
         * @property {number} ButtplugUnknownError=5 ButtplugUnknownError value
         */
        ServerMessage.ButtplugErrorType = (function() {
            var valuesById = {}, values = Object.create(valuesById);
            values[valuesById[0] = "ButtplugConnectorError"] = 0;
            values[valuesById[1] = "ButtplugHandshakeError"] = 1;
            values[valuesById[2] = "ButtplugDeviceError"] = 2;
            values[valuesById[3] = "ButtplugPingError"] = 3;
            values[valuesById[4] = "ButtplugMessageError"] = 4;
            values[valuesById[5] = "ButtplugUnknownError"] = 5;
            return values;
        })();

        /**
         * MessageAttributeType enum.
         * @name Buttplug.ServerMessage.MessageAttributeType
         * @enum {number}
         * @property {number} VibrateCmd=0 VibrateCmd value
         * @property {number} RotateCmd=1 RotateCmd value
         * @property {number} LinearCmd=2 LinearCmd value
         * @property {number} StopDeviceCmd=3 StopDeviceCmd value
         * @property {number} RawReadCmd=4 RawReadCmd value
         * @property {number} RawWriteCmd=5 RawWriteCmd value
         * @property {number} RawSubscribeCmd=6 RawSubscribeCmd value
         * @property {number} RawUnsubscribeCmd=7 RawUnsubscribeCmd value
         * @property {number} BatteryLevelCmd=8 BatteryLevelCmd value
         * @property {number} RSSILevelCmd=9 RSSILevelCmd value
         */
        ServerMessage.MessageAttributeType = (function() {
            var valuesById = {}, values = Object.create(valuesById);
            values[valuesById[0] = "VibrateCmd"] = 0;
            values[valuesById[1] = "RotateCmd"] = 1;
            values[valuesById[2] = "LinearCmd"] = 2;
            values[valuesById[3] = "StopDeviceCmd"] = 3;
            values[valuesById[4] = "RawReadCmd"] = 4;
            values[valuesById[5] = "RawWriteCmd"] = 5;
            values[valuesById[6] = "RawSubscribeCmd"] = 6;
            values[valuesById[7] = "RawUnsubscribeCmd"] = 7;
            values[valuesById[8] = "BatteryLevelCmd"] = 8;
            values[valuesById[9] = "RSSILevelCmd"] = 9;
            return values;
        })();

        ServerMessage.MessageAttributes = (function() {

            /**
             * Properties of a MessageAttributes.
             * @memberof Buttplug.ServerMessage
             * @interface IMessageAttributes
             * @property {Buttplug.ServerMessage.MessageAttributeType|null} [messageType] MessageAttributes messageType
             * @property {number|null} [featureCount] MessageAttributes featureCount
             * @property {Array.<number>|null} [stepCount] MessageAttributes stepCount
             * @property {Array.<Buttplug.Endpoint>|null} [endpoints] MessageAttributes endpoints
             * @property {Array.<number>|null} [maxDuration] MessageAttributes maxDuration
             */

            /**
             * Constructs a new MessageAttributes.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents a MessageAttributes.
             * @implements IMessageAttributes
             * @constructor
             * @param {Buttplug.ServerMessage.IMessageAttributes=} [properties] Properties to set
             */
            function MessageAttributes(properties) {
                this.stepCount = [];
                this.endpoints = [];
                this.maxDuration = [];
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * MessageAttributes messageType.
             * @member {Buttplug.ServerMessage.MessageAttributeType} messageType
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @instance
             */
            MessageAttributes.prototype.messageType = 0;

            /**
             * MessageAttributes featureCount.
             * @member {number} featureCount
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @instance
             */
            MessageAttributes.prototype.featureCount = 0;

            /**
             * MessageAttributes stepCount.
             * @member {Array.<number>} stepCount
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @instance
             */
            MessageAttributes.prototype.stepCount = $util.emptyArray;

            /**
             * MessageAttributes endpoints.
             * @member {Array.<Buttplug.Endpoint>} endpoints
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @instance
             */
            MessageAttributes.prototype.endpoints = $util.emptyArray;

            /**
             * MessageAttributes maxDuration.
             * @member {Array.<number>} maxDuration
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @instance
             */
            MessageAttributes.prototype.maxDuration = $util.emptyArray;

            /**
             * Creates a new MessageAttributes instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {Buttplug.ServerMessage.IMessageAttributes=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.MessageAttributes} MessageAttributes instance
             */
            MessageAttributes.create = function create(properties) {
                return new MessageAttributes(properties);
            };

            /**
             * Encodes the specified MessageAttributes message. Does not implicitly {@link Buttplug.ServerMessage.MessageAttributes.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {Buttplug.ServerMessage.IMessageAttributes} message MessageAttributes message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            MessageAttributes.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.messageType != null && Object.hasOwnProperty.call(message, "messageType"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.messageType);
                if (message.featureCount != null && Object.hasOwnProperty.call(message, "featureCount"))
                    writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.featureCount);
                if (message.stepCount != null && message.stepCount.length) {
                    writer.uint32(/* id 3, wireType 2 =*/26).fork();
                    for (var i = 0; i < message.stepCount.length; ++i)
                        writer.uint32(message.stepCount[i]);
                    writer.ldelim();
                }
                if (message.endpoints != null && message.endpoints.length) {
                    writer.uint32(/* id 4, wireType 2 =*/34).fork();
                    for (var i = 0; i < message.endpoints.length; ++i)
                        writer.int32(message.endpoints[i]);
                    writer.ldelim();
                }
                if (message.maxDuration != null && message.maxDuration.length) {
                    writer.uint32(/* id 5, wireType 2 =*/42).fork();
                    for (var i = 0; i < message.maxDuration.length; ++i)
                        writer.uint32(message.maxDuration[i]);
                    writer.ldelim();
                }
                return writer;
            };

            /**
             * Encodes the specified MessageAttributes message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.MessageAttributes.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {Buttplug.ServerMessage.IMessageAttributes} message MessageAttributes message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            MessageAttributes.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a MessageAttributes message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.MessageAttributes} MessageAttributes
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            MessageAttributes.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.MessageAttributes();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.messageType = reader.int32();
                        break;
                    case 2:
                        message.featureCount = reader.uint32();
                        break;
                    case 3:
                        if (!(message.stepCount && message.stepCount.length))
                            message.stepCount = [];
                        if ((tag & 7) === 2) {
                            var end2 = reader.uint32() + reader.pos;
                            while (reader.pos < end2)
                                message.stepCount.push(reader.uint32());
                        } else
                            message.stepCount.push(reader.uint32());
                        break;
                    case 4:
                        if (!(message.endpoints && message.endpoints.length))
                            message.endpoints = [];
                        if ((tag & 7) === 2) {
                            var end2 = reader.uint32() + reader.pos;
                            while (reader.pos < end2)
                                message.endpoints.push(reader.int32());
                        } else
                            message.endpoints.push(reader.int32());
                        break;
                    case 5:
                        if (!(message.maxDuration && message.maxDuration.length))
                            message.maxDuration = [];
                        if ((tag & 7) === 2) {
                            var end2 = reader.uint32() + reader.pos;
                            while (reader.pos < end2)
                                message.maxDuration.push(reader.uint32());
                        } else
                            message.maxDuration.push(reader.uint32());
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a MessageAttributes message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.MessageAttributes} MessageAttributes
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            MessageAttributes.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a MessageAttributes message.
             * @function verify
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            MessageAttributes.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.messageType != null && message.hasOwnProperty("messageType"))
                    switch (message.messageType) {
                    default:
                        return "messageType: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                        break;
                    }
                if (message.featureCount != null && message.hasOwnProperty("featureCount"))
                    if (!$util.isInteger(message.featureCount))
                        return "featureCount: integer expected";
                if (message.stepCount != null && message.hasOwnProperty("stepCount")) {
                    if (!Array.isArray(message.stepCount))
                        return "stepCount: array expected";
                    for (var i = 0; i < message.stepCount.length; ++i)
                        if (!$util.isInteger(message.stepCount[i]))
                            return "stepCount: integer[] expected";
                }
                if (message.endpoints != null && message.hasOwnProperty("endpoints")) {
                    if (!Array.isArray(message.endpoints))
                        return "endpoints: array expected";
                    for (var i = 0; i < message.endpoints.length; ++i)
                        switch (message.endpoints[i]) {
                        default:
                            return "endpoints: enum value[] expected";
                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:
                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:
                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:
                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:
                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:
                        case 41:
                        case 42:
                        case 43:
                        case 44:
                            break;
                        }
                }
                if (message.maxDuration != null && message.hasOwnProperty("maxDuration")) {
                    if (!Array.isArray(message.maxDuration))
                        return "maxDuration: array expected";
                    for (var i = 0; i < message.maxDuration.length; ++i)
                        if (!$util.isInteger(message.maxDuration[i]))
                            return "maxDuration: integer[] expected";
                }
                return null;
            };

            /**
             * Creates a MessageAttributes message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.MessageAttributes} MessageAttributes
             */
            MessageAttributes.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.MessageAttributes)
                    return object;
                var message = new $root.Buttplug.ServerMessage.MessageAttributes();
                switch (object.messageType) {
                case "VibrateCmd":
                case 0:
                    message.messageType = 0;
                    break;
                case "RotateCmd":
                case 1:
                    message.messageType = 1;
                    break;
                case "LinearCmd":
                case 2:
                    message.messageType = 2;
                    break;
                case "StopDeviceCmd":
                case 3:
                    message.messageType = 3;
                    break;
                case "RawReadCmd":
                case 4:
                    message.messageType = 4;
                    break;
                case "RawWriteCmd":
                case 5:
                    message.messageType = 5;
                    break;
                case "RawSubscribeCmd":
                case 6:
                    message.messageType = 6;
                    break;
                case "RawUnsubscribeCmd":
                case 7:
                    message.messageType = 7;
                    break;
                case "BatteryLevelCmd":
                case 8:
                    message.messageType = 8;
                    break;
                case "RSSILevelCmd":
                case 9:
                    message.messageType = 9;
                    break;
                }
                if (object.featureCount != null)
                    message.featureCount = object.featureCount >>> 0;
                if (object.stepCount) {
                    if (!Array.isArray(object.stepCount))
                        throw TypeError(".Buttplug.ServerMessage.MessageAttributes.stepCount: array expected");
                    message.stepCount = [];
                    for (var i = 0; i < object.stepCount.length; ++i)
                        message.stepCount[i] = object.stepCount[i] >>> 0;
                }
                if (object.endpoints) {
                    if (!Array.isArray(object.endpoints))
                        throw TypeError(".Buttplug.ServerMessage.MessageAttributes.endpoints: array expected");
                    message.endpoints = [];
                    for (var i = 0; i < object.endpoints.length; ++i)
                        switch (object.endpoints[i]) {
                        default:
                        case "Command":
                        case 0:
                            message.endpoints[i] = 0;
                            break;
                        case "Firmware":
                        case 1:
                            message.endpoints[i] = 1;
                            break;
                        case "Rx":
                        case 2:
                            message.endpoints[i] = 2;
                            break;
                        case "RxAccel":
                        case 3:
                            message.endpoints[i] = 3;
                            break;
                        case "RxBLEBattery":
                        case 4:
                            message.endpoints[i] = 4;
                            break;
                        case "RxPressure":
                        case 5:
                            message.endpoints[i] = 5;
                            break;
                        case "RxTouch":
                        case 6:
                            message.endpoints[i] = 6;
                            break;
                        case "Tx":
                        case 7:
                            message.endpoints[i] = 7;
                            break;
                        case "TxMode":
                        case 8:
                            message.endpoints[i] = 8;
                            break;
                        case "TxShock":
                        case 9:
                            message.endpoints[i] = 9;
                            break;
                        case "TxVibrate":
                        case 10:
                            message.endpoints[i] = 10;
                            break;
                        case "TxVendorControl":
                        case 11:
                            message.endpoints[i] = 11;
                            break;
                        case "Whitelist":
                        case 12:
                            message.endpoints[i] = 12;
                            break;
                        case "Generic0":
                        case 13:
                            message.endpoints[i] = 13;
                            break;
                        case "Generic1":
                        case 14:
                            message.endpoints[i] = 14;
                            break;
                        case "Generic2":
                        case 15:
                            message.endpoints[i] = 15;
                            break;
                        case "Generic3":
                        case 16:
                            message.endpoints[i] = 16;
                            break;
                        case "Generic4":
                        case 17:
                            message.endpoints[i] = 17;
                            break;
                        case "Generic5":
                        case 18:
                            message.endpoints[i] = 18;
                            break;
                        case "Generic6":
                        case 19:
                            message.endpoints[i] = 19;
                            break;
                        case "Generic7":
                        case 20:
                            message.endpoints[i] = 20;
                            break;
                        case "Generic8":
                        case 21:
                            message.endpoints[i] = 21;
                            break;
                        case "Generic9":
                        case 22:
                            message.endpoints[i] = 22;
                            break;
                        case "Generic10":
                        case 23:
                            message.endpoints[i] = 23;
                            break;
                        case "Generic11":
                        case 24:
                            message.endpoints[i] = 24;
                            break;
                        case "Generic12":
                        case 25:
                            message.endpoints[i] = 25;
                            break;
                        case "Generic13":
                        case 26:
                            message.endpoints[i] = 26;
                            break;
                        case "Generic14":
                        case 27:
                            message.endpoints[i] = 27;
                            break;
                        case "Generic15":
                        case 28:
                            message.endpoints[i] = 28;
                            break;
                        case "Generic16":
                        case 29:
                            message.endpoints[i] = 29;
                            break;
                        case "Generic17":
                        case 30:
                            message.endpoints[i] = 30;
                            break;
                        case "Generic18":
                        case 31:
                            message.endpoints[i] = 31;
                            break;
                        case "Generic19":
                        case 32:
                            message.endpoints[i] = 32;
                            break;
                        case "Generic20":
                        case 33:
                            message.endpoints[i] = 33;
                            break;
                        case "Generic21":
                        case 34:
                            message.endpoints[i] = 34;
                            break;
                        case "Generic22":
                        case 35:
                            message.endpoints[i] = 35;
                            break;
                        case "Generic23":
                        case 36:
                            message.endpoints[i] = 36;
                            break;
                        case "Generic24":
                        case 37:
                            message.endpoints[i] = 37;
                            break;
                        case "Generic25":
                        case 38:
                            message.endpoints[i] = 38;
                            break;
                        case "Generic26":
                        case 39:
                            message.endpoints[i] = 39;
                            break;
                        case "Generic27":
                        case 40:
                            message.endpoints[i] = 40;
                            break;
                        case "Generic28":
                        case 41:
                            message.endpoints[i] = 41;
                            break;
                        case "Generic29":
                        case 42:
                            message.endpoints[i] = 42;
                            break;
                        case "Generic30":
                        case 43:
                            message.endpoints[i] = 43;
                            break;
                        case "Generic31":
                        case 44:
                            message.endpoints[i] = 44;
                            break;
                        }
                }
                if (object.maxDuration) {
                    if (!Array.isArray(object.maxDuration))
                        throw TypeError(".Buttplug.ServerMessage.MessageAttributes.maxDuration: array expected");
                    message.maxDuration = [];
                    for (var i = 0; i < object.maxDuration.length; ++i)
                        message.maxDuration[i] = object.maxDuration[i] >>> 0;
                }
                return message;
            };

            /**
             * Creates a plain object from a MessageAttributes message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @static
             * @param {Buttplug.ServerMessage.MessageAttributes} message MessageAttributes
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            MessageAttributes.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.arrays || options.defaults) {
                    object.stepCount = [];
                    object.endpoints = [];
                    object.maxDuration = [];
                }
                if (options.defaults) {
                    object.messageType = options.enums === String ? "VibrateCmd" : 0;
                    object.featureCount = 0;
                }
                if (message.messageType != null && message.hasOwnProperty("messageType"))
                    object.messageType = options.enums === String ? $root.Buttplug.ServerMessage.MessageAttributeType[message.messageType] : message.messageType;
                if (message.featureCount != null && message.hasOwnProperty("featureCount"))
                    object.featureCount = message.featureCount;
                if (message.stepCount && message.stepCount.length) {
                    object.stepCount = [];
                    for (var j = 0; j < message.stepCount.length; ++j)
                        object.stepCount[j] = message.stepCount[j];
                }
                if (message.endpoints && message.endpoints.length) {
                    object.endpoints = [];
                    for (var j = 0; j < message.endpoints.length; ++j)
                        object.endpoints[j] = options.enums === String ? $root.Buttplug.Endpoint[message.endpoints[j]] : message.endpoints[j];
                }
                if (message.maxDuration && message.maxDuration.length) {
                    object.maxDuration = [];
                    for (var j = 0; j < message.maxDuration.length; ++j)
                        object.maxDuration[j] = message.maxDuration[j];
                }
                return object;
            };

            /**
             * Converts this MessageAttributes to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.MessageAttributes
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            MessageAttributes.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return MessageAttributes;
        })();

        ServerMessage.Ok = (function() {

            /**
             * Properties of an Ok.
             * @memberof Buttplug.ServerMessage
             * @interface IOk
             */

            /**
             * Constructs a new Ok.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents an Ok.
             * @implements IOk
             * @constructor
             * @param {Buttplug.ServerMessage.IOk=} [properties] Properties to set
             */
            function Ok(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new Ok instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {Buttplug.ServerMessage.IOk=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.Ok} Ok instance
             */
            Ok.create = function create(properties) {
                return new Ok(properties);
            };

            /**
             * Encodes the specified Ok message. Does not implicitly {@link Buttplug.ServerMessage.Ok.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {Buttplug.ServerMessage.IOk} message Ok message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Ok.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified Ok message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.Ok.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {Buttplug.ServerMessage.IOk} message Ok message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Ok.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes an Ok message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.Ok} Ok
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Ok.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.Ok();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes an Ok message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.Ok} Ok
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Ok.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies an Ok message.
             * @function verify
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            Ok.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates an Ok message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.Ok} Ok
             */
            Ok.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.Ok)
                    return object;
                return new $root.Buttplug.ServerMessage.Ok();
            };

            /**
             * Creates a plain object from an Ok message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.Ok
             * @static
             * @param {Buttplug.ServerMessage.Ok} message Ok
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            Ok.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this Ok to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.Ok
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            Ok.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return Ok;
        })();

        ServerMessage.Error = (function() {

            /**
             * Properties of an Error.
             * @memberof Buttplug.ServerMessage
             * @interface IError
             * @property {Buttplug.ServerMessage.ButtplugErrorType|null} [errorType] Error errorType
             * @property {string|null} [message] Error message
             * @property {string|null} [backtrace] Error backtrace
             */

            /**
             * Constructs a new Error.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents an Error.
             * @implements IError
             * @constructor
             * @param {Buttplug.ServerMessage.IError=} [properties] Properties to set
             */
            function Error(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Error errorType.
             * @member {Buttplug.ServerMessage.ButtplugErrorType} errorType
             * @memberof Buttplug.ServerMessage.Error
             * @instance
             */
            Error.prototype.errorType = 0;

            /**
             * Error message.
             * @member {string} message
             * @memberof Buttplug.ServerMessage.Error
             * @instance
             */
            Error.prototype.message = "";

            /**
             * Error backtrace.
             * @member {string} backtrace
             * @memberof Buttplug.ServerMessage.Error
             * @instance
             */
            Error.prototype.backtrace = "";

            /**
             * Creates a new Error instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {Buttplug.ServerMessage.IError=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.Error} Error instance
             */
            Error.create = function create(properties) {
                return new Error(properties);
            };

            /**
             * Encodes the specified Error message. Does not implicitly {@link Buttplug.ServerMessage.Error.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {Buttplug.ServerMessage.IError} message Error message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Error.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.errorType != null && Object.hasOwnProperty.call(message, "errorType"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.errorType);
                if (message.message != null && Object.hasOwnProperty.call(message, "message"))
                    writer.uint32(/* id 2, wireType 2 =*/18).string(message.message);
                if (message.backtrace != null && Object.hasOwnProperty.call(message, "backtrace"))
                    writer.uint32(/* id 3, wireType 2 =*/26).string(message.backtrace);
                return writer;
            };

            /**
             * Encodes the specified Error message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.Error.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {Buttplug.ServerMessage.IError} message Error message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Error.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes an Error message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.Error} Error
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Error.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.Error();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.errorType = reader.int32();
                        break;
                    case 2:
                        message.message = reader.string();
                        break;
                    case 3:
                        message.backtrace = reader.string();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes an Error message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.Error} Error
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Error.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies an Error message.
             * @function verify
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            Error.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.errorType != null && message.hasOwnProperty("errorType"))
                    switch (message.errorType) {
                    default:
                        return "errorType: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                        break;
                    }
                if (message.message != null && message.hasOwnProperty("message"))
                    if (!$util.isString(message.message))
                        return "message: string expected";
                if (message.backtrace != null && message.hasOwnProperty("backtrace"))
                    if (!$util.isString(message.backtrace))
                        return "backtrace: string expected";
                return null;
            };

            /**
             * Creates an Error message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.Error} Error
             */
            Error.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.Error)
                    return object;
                var message = new $root.Buttplug.ServerMessage.Error();
                switch (object.errorType) {
                case "ButtplugConnectorError":
                case 0:
                    message.errorType = 0;
                    break;
                case "ButtplugHandshakeError":
                case 1:
                    message.errorType = 1;
                    break;
                case "ButtplugDeviceError":
                case 2:
                    message.errorType = 2;
                    break;
                case "ButtplugPingError":
                case 3:
                    message.errorType = 3;
                    break;
                case "ButtplugMessageError":
                case 4:
                    message.errorType = 4;
                    break;
                case "ButtplugUnknownError":
                case 5:
                    message.errorType = 5;
                    break;
                }
                if (object.message != null)
                    message.message = String(object.message);
                if (object.backtrace != null)
                    message.backtrace = String(object.backtrace);
                return message;
            };

            /**
             * Creates a plain object from an Error message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.Error
             * @static
             * @param {Buttplug.ServerMessage.Error} message Error
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            Error.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.errorType = options.enums === String ? "ButtplugConnectorError" : 0;
                    object.message = "";
                    object.backtrace = "";
                }
                if (message.errorType != null && message.hasOwnProperty("errorType"))
                    object.errorType = options.enums === String ? $root.Buttplug.ServerMessage.ButtplugErrorType[message.errorType] : message.errorType;
                if (message.message != null && message.hasOwnProperty("message"))
                    object.message = message.message;
                if (message.backtrace != null && message.hasOwnProperty("backtrace"))
                    object.backtrace = message.backtrace;
                return object;
            };

            /**
             * Converts this Error to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.Error
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            Error.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return Error;
        })();

        ServerMessage.ScanningFinished = (function() {

            /**
             * Properties of a ScanningFinished.
             * @memberof Buttplug.ServerMessage
             * @interface IScanningFinished
             */

            /**
             * Constructs a new ScanningFinished.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents a ScanningFinished.
             * @implements IScanningFinished
             * @constructor
             * @param {Buttplug.ServerMessage.IScanningFinished=} [properties] Properties to set
             */
            function ScanningFinished(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new ScanningFinished instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {Buttplug.ServerMessage.IScanningFinished=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.ScanningFinished} ScanningFinished instance
             */
            ScanningFinished.create = function create(properties) {
                return new ScanningFinished(properties);
            };

            /**
             * Encodes the specified ScanningFinished message. Does not implicitly {@link Buttplug.ServerMessage.ScanningFinished.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {Buttplug.ServerMessage.IScanningFinished} message ScanningFinished message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            ScanningFinished.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified ScanningFinished message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.ScanningFinished.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {Buttplug.ServerMessage.IScanningFinished} message ScanningFinished message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            ScanningFinished.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a ScanningFinished message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.ScanningFinished} ScanningFinished
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            ScanningFinished.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.ScanningFinished();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a ScanningFinished message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.ScanningFinished} ScanningFinished
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            ScanningFinished.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a ScanningFinished message.
             * @function verify
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            ScanningFinished.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a ScanningFinished message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.ScanningFinished} ScanningFinished
             */
            ScanningFinished.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.ScanningFinished)
                    return object;
                return new $root.Buttplug.ServerMessage.ScanningFinished();
            };

            /**
             * Creates a plain object from a ScanningFinished message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @static
             * @param {Buttplug.ServerMessage.ScanningFinished} message ScanningFinished
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            ScanningFinished.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this ScanningFinished to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.ScanningFinished
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            ScanningFinished.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return ScanningFinished;
        })();

        ServerMessage.DeviceAdded = (function() {

            /**
             * Properties of a DeviceAdded.
             * @memberof Buttplug.ServerMessage
             * @interface IDeviceAdded
             * @property {string|null} [name] DeviceAdded name
             * @property {number|null} [index] DeviceAdded index
             * @property {Array.<Buttplug.ServerMessage.IMessageAttributes>|null} [messageAttributes] DeviceAdded messageAttributes
             */

            /**
             * Constructs a new DeviceAdded.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents a DeviceAdded.
             * @implements IDeviceAdded
             * @constructor
             * @param {Buttplug.ServerMessage.IDeviceAdded=} [properties] Properties to set
             */
            function DeviceAdded(properties) {
                this.messageAttributes = [];
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * DeviceAdded name.
             * @member {string} name
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @instance
             */
            DeviceAdded.prototype.name = "";

            /**
             * DeviceAdded index.
             * @member {number} index
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @instance
             */
            DeviceAdded.prototype.index = 0;

            /**
             * DeviceAdded messageAttributes.
             * @member {Array.<Buttplug.ServerMessage.IMessageAttributes>} messageAttributes
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @instance
             */
            DeviceAdded.prototype.messageAttributes = $util.emptyArray;

            /**
             * Creates a new DeviceAdded instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {Buttplug.ServerMessage.IDeviceAdded=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.DeviceAdded} DeviceAdded instance
             */
            DeviceAdded.create = function create(properties) {
                return new DeviceAdded(properties);
            };

            /**
             * Encodes the specified DeviceAdded message. Does not implicitly {@link Buttplug.ServerMessage.DeviceAdded.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {Buttplug.ServerMessage.IDeviceAdded} message DeviceAdded message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            DeviceAdded.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.name);
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 2, wireType 0 =*/16).uint32(message.index);
                if (message.messageAttributes != null && message.messageAttributes.length)
                    for (var i = 0; i < message.messageAttributes.length; ++i)
                        $root.Buttplug.ServerMessage.MessageAttributes.encode(message.messageAttributes[i], writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified DeviceAdded message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.DeviceAdded.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {Buttplug.ServerMessage.IDeviceAdded} message DeviceAdded message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            DeviceAdded.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a DeviceAdded message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.DeviceAdded} DeviceAdded
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            DeviceAdded.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.DeviceAdded();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.name = reader.string();
                        break;
                    case 2:
                        message.index = reader.uint32();
                        break;
                    case 3:
                        if (!(message.messageAttributes && message.messageAttributes.length))
                            message.messageAttributes = [];
                        message.messageAttributes.push($root.Buttplug.ServerMessage.MessageAttributes.decode(reader, reader.uint32()));
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a DeviceAdded message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.DeviceAdded} DeviceAdded
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            DeviceAdded.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a DeviceAdded message.
             * @function verify
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            DeviceAdded.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.name != null && message.hasOwnProperty("name"))
                    if (!$util.isString(message.name))
                        return "name: string expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.messageAttributes != null && message.hasOwnProperty("messageAttributes")) {
                    if (!Array.isArray(message.messageAttributes))
                        return "messageAttributes: array expected";
                    for (var i = 0; i < message.messageAttributes.length; ++i) {
                        var error = $root.Buttplug.ServerMessage.MessageAttributes.verify(message.messageAttributes[i]);
                        if (error)
                            return "messageAttributes." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a DeviceAdded message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.DeviceAdded} DeviceAdded
             */
            DeviceAdded.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.DeviceAdded)
                    return object;
                var message = new $root.Buttplug.ServerMessage.DeviceAdded();
                if (object.name != null)
                    message.name = String(object.name);
                if (object.index != null)
                    message.index = object.index >>> 0;
                if (object.messageAttributes) {
                    if (!Array.isArray(object.messageAttributes))
                        throw TypeError(".Buttplug.ServerMessage.DeviceAdded.messageAttributes: array expected");
                    message.messageAttributes = [];
                    for (var i = 0; i < object.messageAttributes.length; ++i) {
                        if (typeof object.messageAttributes[i] !== "object")
                            throw TypeError(".Buttplug.ServerMessage.DeviceAdded.messageAttributes: object expected");
                        message.messageAttributes[i] = $root.Buttplug.ServerMessage.MessageAttributes.fromObject(object.messageAttributes[i]);
                    }
                }
                return message;
            };

            /**
             * Creates a plain object from a DeviceAdded message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @static
             * @param {Buttplug.ServerMessage.DeviceAdded} message DeviceAdded
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            DeviceAdded.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.arrays || options.defaults)
                    object.messageAttributes = [];
                if (options.defaults) {
                    object.name = "";
                    object.index = 0;
                }
                if (message.name != null && message.hasOwnProperty("name"))
                    object.name = message.name;
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.messageAttributes && message.messageAttributes.length) {
                    object.messageAttributes = [];
                    for (var j = 0; j < message.messageAttributes.length; ++j)
                        object.messageAttributes[j] = $root.Buttplug.ServerMessage.MessageAttributes.toObject(message.messageAttributes[j], options);
                }
                return object;
            };

            /**
             * Converts this DeviceAdded to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.DeviceAdded
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            DeviceAdded.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return DeviceAdded;
        })();

        ServerMessage.DeviceRemoved = (function() {

            /**
             * Properties of a DeviceRemoved.
             * @memberof Buttplug.ServerMessage
             * @interface IDeviceRemoved
             * @property {number|null} [index] DeviceRemoved index
             */

            /**
             * Constructs a new DeviceRemoved.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents a DeviceRemoved.
             * @implements IDeviceRemoved
             * @constructor
             * @param {Buttplug.ServerMessage.IDeviceRemoved=} [properties] Properties to set
             */
            function DeviceRemoved(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * DeviceRemoved index.
             * @member {number} index
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @instance
             */
            DeviceRemoved.prototype.index = 0;

            /**
             * Creates a new DeviceRemoved instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {Buttplug.ServerMessage.IDeviceRemoved=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.DeviceRemoved} DeviceRemoved instance
             */
            DeviceRemoved.create = function create(properties) {
                return new DeviceRemoved(properties);
            };

            /**
             * Encodes the specified DeviceRemoved message. Does not implicitly {@link Buttplug.ServerMessage.DeviceRemoved.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {Buttplug.ServerMessage.IDeviceRemoved} message DeviceRemoved message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            DeviceRemoved.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                return writer;
            };

            /**
             * Encodes the specified DeviceRemoved message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.DeviceRemoved.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {Buttplug.ServerMessage.IDeviceRemoved} message DeviceRemoved message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            DeviceRemoved.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a DeviceRemoved message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.DeviceRemoved} DeviceRemoved
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            DeviceRemoved.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.DeviceRemoved();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a DeviceRemoved message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.DeviceRemoved} DeviceRemoved
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            DeviceRemoved.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a DeviceRemoved message.
             * @function verify
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            DeviceRemoved.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                return null;
            };

            /**
             * Creates a DeviceRemoved message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.DeviceRemoved} DeviceRemoved
             */
            DeviceRemoved.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.DeviceRemoved)
                    return object;
                var message = new $root.Buttplug.ServerMessage.DeviceRemoved();
                if (object.index != null)
                    message.index = object.index >>> 0;
                return message;
            };

            /**
             * Creates a plain object from a DeviceRemoved message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @static
             * @param {Buttplug.ServerMessage.DeviceRemoved} message DeviceRemoved
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            DeviceRemoved.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults)
                    object.index = 0;
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                return object;
            };

            /**
             * Converts this DeviceRemoved to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.DeviceRemoved
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            DeviceRemoved.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return DeviceRemoved;
        })();

        ServerMessage.Disconnect = (function() {

            /**
             * Properties of a Disconnect.
             * @memberof Buttplug.ServerMessage
             * @interface IDisconnect
             */

            /**
             * Constructs a new Disconnect.
             * @memberof Buttplug.ServerMessage
             * @classdesc Represents a Disconnect.
             * @implements IDisconnect
             * @constructor
             * @param {Buttplug.ServerMessage.IDisconnect=} [properties] Properties to set
             */
            function Disconnect(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Creates a new Disconnect instance using the specified properties.
             * @function create
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {Buttplug.ServerMessage.IDisconnect=} [properties] Properties to set
             * @returns {Buttplug.ServerMessage.Disconnect} Disconnect instance
             */
            Disconnect.create = function create(properties) {
                return new Disconnect(properties);
            };

            /**
             * Encodes the specified Disconnect message. Does not implicitly {@link Buttplug.ServerMessage.Disconnect.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {Buttplug.ServerMessage.IDisconnect} message Disconnect message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Disconnect.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                return writer;
            };

            /**
             * Encodes the specified Disconnect message, length delimited. Does not implicitly {@link Buttplug.ServerMessage.Disconnect.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {Buttplug.ServerMessage.IDisconnect} message Disconnect message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Disconnect.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a Disconnect message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ServerMessage.Disconnect} Disconnect
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Disconnect.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ServerMessage.Disconnect();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a Disconnect message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ServerMessage.Disconnect} Disconnect
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Disconnect.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a Disconnect message.
             * @function verify
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            Disconnect.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                return null;
            };

            /**
             * Creates a Disconnect message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ServerMessage.Disconnect} Disconnect
             */
            Disconnect.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ServerMessage.Disconnect)
                    return object;
                return new $root.Buttplug.ServerMessage.Disconnect();
            };

            /**
             * Creates a plain object from a Disconnect message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ServerMessage.Disconnect
             * @static
             * @param {Buttplug.ServerMessage.Disconnect} message Disconnect
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            Disconnect.toObject = function toObject() {
                return {};
            };

            /**
             * Converts this Disconnect to JSON.
             * @function toJSON
             * @memberof Buttplug.ServerMessage.Disconnect
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            Disconnect.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return Disconnect;
        })();

        return ServerMessage;
    })();

    Buttplug.DeviceEvent = (function() {

        /**
         * Properties of a DeviceEvent.
         * @memberof Buttplug
         * @interface IDeviceEvent
         * @property {Buttplug.DeviceEvent.IDisconnect|null} [disconnect] DeviceEvent disconnect
         * @property {Buttplug.DeviceEvent.IBatteryLevelReading|null} [batteryLevelReading] DeviceEvent batteryLevelReading
         * @property {Buttplug.DeviceEvent.IRSSILevelReading|null} [rssiLevelReading] DeviceEvent rssiLevelReading
         * @property {Buttplug.DeviceEvent.IRawReading|null} [rawReading] DeviceEvent rawReading
         */

        /**
         * Constructs a new DeviceEvent.
         * @memberof Buttplug
         * @classdesc Represents a DeviceEvent.
         * @implements IDeviceEvent
         * @constructor
         * @param {Buttplug.IDeviceEvent=} [properties] Properties to set
         */
        function DeviceEvent(properties) {
            if (properties)
                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        /**
         * DeviceEvent disconnect.
         * @member {Buttplug.DeviceEvent.IDisconnect|null|undefined} disconnect
         * @memberof Buttplug.DeviceEvent
         * @instance
         */
        DeviceEvent.prototype.disconnect = null;

        /**
         * DeviceEvent batteryLevelReading.
         * @member {Buttplug.DeviceEvent.IBatteryLevelReading|null|undefined} batteryLevelReading
         * @memberof Buttplug.DeviceEvent
         * @instance
         */
        DeviceEvent.prototype.batteryLevelReading = null;

        /**
         * DeviceEvent rssiLevelReading.
         * @member {Buttplug.DeviceEvent.IRSSILevelReading|null|undefined} rssiLevelReading
         * @memberof Buttplug.DeviceEvent
         * @instance
         */
        DeviceEvent.prototype.rssiLevelReading = null;

        /**
         * DeviceEvent rawReading.
         * @member {Buttplug.DeviceEvent.IRawReading|null|undefined} rawReading
         * @memberof Buttplug.DeviceEvent
         * @instance
         */
        DeviceEvent.prototype.rawReading = null;

        // OneOf field names bound to virtual getters and setters
        var $oneOfFields;

        /**
         * DeviceEvent msg.
         * @member {"disconnect"|"batteryLevelReading"|"rssiLevelReading"|"rawReading"|undefined} msg
         * @memberof Buttplug.DeviceEvent
         * @instance
         */
        Object.defineProperty(DeviceEvent.prototype, "msg", {
            get: $util.oneOfGetter($oneOfFields = ["disconnect", "batteryLevelReading", "rssiLevelReading", "rawReading"]),
            set: $util.oneOfSetter($oneOfFields)
        });

        /**
         * Creates a new DeviceEvent instance using the specified properties.
         * @function create
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {Buttplug.IDeviceEvent=} [properties] Properties to set
         * @returns {Buttplug.DeviceEvent} DeviceEvent instance
         */
        DeviceEvent.create = function create(properties) {
            return new DeviceEvent(properties);
        };

        /**
         * Encodes the specified DeviceEvent message. Does not implicitly {@link Buttplug.DeviceEvent.verify|verify} messages.
         * @function encode
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {Buttplug.IDeviceEvent} message DeviceEvent message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        DeviceEvent.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.disconnect != null && Object.hasOwnProperty.call(message, "disconnect"))
                $root.Buttplug.DeviceEvent.Disconnect.encode(message.disconnect, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
            if (message.batteryLevelReading != null && Object.hasOwnProperty.call(message, "batteryLevelReading"))
                $root.Buttplug.DeviceEvent.BatteryLevelReading.encode(message.batteryLevelReading, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
            if (message.rssiLevelReading != null && Object.hasOwnProperty.call(message, "rssiLevelReading"))
                $root.Buttplug.DeviceEvent.RSSILevelReading.encode(message.rssiLevelReading, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
            if (message.rawReading != null && Object.hasOwnProperty.call(message, "rawReading"))
                $root.Buttplug.DeviceEvent.RawReading.encode(message.rawReading, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
            return writer;
        };

        /**
         * Encodes the specified DeviceEvent message, length delimited. Does not implicitly {@link Buttplug.DeviceEvent.verify|verify} messages.
         * @function encodeDelimited
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {Buttplug.IDeviceEvent} message DeviceEvent message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        DeviceEvent.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
        };

        /**
         * Decodes a DeviceEvent message from the specified reader or buffer.
         * @function decode
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @param {number} [length] Message length if known beforehand
         * @returns {Buttplug.DeviceEvent} DeviceEvent
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        DeviceEvent.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceEvent();
            while (reader.pos < end) {
                var tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.disconnect = $root.Buttplug.DeviceEvent.Disconnect.decode(reader, reader.uint32());
                    break;
                case 2:
                    message.batteryLevelReading = $root.Buttplug.DeviceEvent.BatteryLevelReading.decode(reader, reader.uint32());
                    break;
                case 3:
                    message.rssiLevelReading = $root.Buttplug.DeviceEvent.RSSILevelReading.decode(reader, reader.uint32());
                    break;
                case 4:
                    message.rawReading = $root.Buttplug.DeviceEvent.RawReading.decode(reader, reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        /**
         * Decodes a DeviceEvent message from the specified reader or buffer, length delimited.
         * @function decodeDelimited
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @returns {Buttplug.DeviceEvent} DeviceEvent
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        DeviceEvent.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
                reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
        };

        /**
         * Verifies a DeviceEvent message.
         * @function verify
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {Object.<string,*>} message Plain object to verify
         * @returns {string|null} `null` if valid, otherwise the reason why it is not
         */
        DeviceEvent.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
                return "object expected";
            var properties = {};
            if (message.disconnect != null && message.hasOwnProperty("disconnect")) {
                properties.msg = 1;
                {
                    var error = $root.Buttplug.DeviceEvent.Disconnect.verify(message.disconnect);
                    if (error)
                        return "disconnect." + error;
                }
            }
            if (message.batteryLevelReading != null && message.hasOwnProperty("batteryLevelReading")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.DeviceEvent.BatteryLevelReading.verify(message.batteryLevelReading);
                    if (error)
                        return "batteryLevelReading." + error;
                }
            }
            if (message.rssiLevelReading != null && message.hasOwnProperty("rssiLevelReading")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.DeviceEvent.RSSILevelReading.verify(message.rssiLevelReading);
                    if (error)
                        return "rssiLevelReading." + error;
                }
            }
            if (message.rawReading != null && message.hasOwnProperty("rawReading")) {
                if (properties.msg === 1)
                    return "msg: multiple values";
                properties.msg = 1;
                {
                    var error = $root.Buttplug.DeviceEvent.RawReading.verify(message.rawReading);
                    if (error)
                        return "rawReading." + error;
                }
            }
            return null;
        };

        /**
         * Creates a DeviceEvent message from a plain object. Also converts values to their respective internal types.
         * @function fromObject
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {Object.<string,*>} object Plain object
         * @returns {Buttplug.DeviceEvent} DeviceEvent
         */
        DeviceEvent.fromObject = function fromObject(object) {
            if (object instanceof $root.Buttplug.DeviceEvent)
                return object;
            var message = new $root.Buttplug.DeviceEvent();
            if (object.disconnect != null) {
                if (typeof object.disconnect !== "object")
                    throw TypeError(".Buttplug.DeviceEvent.disconnect: object expected");
                message.disconnect = $root.Buttplug.DeviceEvent.Disconnect.fromObject(object.disconnect);
            }
            if (object.batteryLevelReading != null) {
                if (typeof object.batteryLevelReading !== "object")
                    throw TypeError(".Buttplug.DeviceEvent.batteryLevelReading: object expected");
                message.batteryLevelReading = $root.Buttplug.DeviceEvent.BatteryLevelReading.fromObject(object.batteryLevelReading);
            }
            if (object.rssiLevelReading != null) {
                if (typeof object.rssiLevelReading !== "object")
                    throw TypeError(".Buttplug.DeviceEvent.rssiLevelReading: object expected");
                message.rssiLevelReading = $root.Buttplug.DeviceEvent.RSSILevelReading.fromObject(object.rssiLevelReading);
            }
            if (object.rawReading != null) {
                if (typeof object.rawReading !== "object")
                    throw TypeError(".Buttplug.DeviceEvent.rawReading: object expected");
                message.rawReading = $root.Buttplug.DeviceEvent.RawReading.fromObject(object.rawReading);
            }
            return message;
        };

        /**
         * Creates a plain object from a DeviceEvent message. Also converts values to other types if specified.
         * @function toObject
         * @memberof Buttplug.DeviceEvent
         * @static
         * @param {Buttplug.DeviceEvent} message DeviceEvent
         * @param {$protobuf.IConversionOptions} [options] Conversion options
         * @returns {Object.<string,*>} Plain object
         */
        DeviceEvent.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            var object = {};
            if (message.disconnect != null && message.hasOwnProperty("disconnect")) {
                object.disconnect = $root.Buttplug.DeviceEvent.Disconnect.toObject(message.disconnect, options);
                if (options.oneofs)
                    object.msg = "disconnect";
            }
            if (message.batteryLevelReading != null && message.hasOwnProperty("batteryLevelReading")) {
                object.batteryLevelReading = $root.Buttplug.DeviceEvent.BatteryLevelReading.toObject(message.batteryLevelReading, options);
                if (options.oneofs)
                    object.msg = "batteryLevelReading";
            }
            if (message.rssiLevelReading != null && message.hasOwnProperty("rssiLevelReading")) {
                object.rssiLevelReading = $root.Buttplug.DeviceEvent.RSSILevelReading.toObject(message.rssiLevelReading, options);
                if (options.oneofs)
                    object.msg = "rssiLevelReading";
            }
            if (message.rawReading != null && message.hasOwnProperty("rawReading")) {
                object.rawReading = $root.Buttplug.DeviceEvent.RawReading.toObject(message.rawReading, options);
                if (options.oneofs)
                    object.msg = "rawReading";
            }
            return object;
        };

        /**
         * Converts this DeviceEvent to JSON.
         * @function toJSON
         * @memberof Buttplug.DeviceEvent
         * @instance
         * @returns {Object.<string,*>} JSON object
         */
        DeviceEvent.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };

        DeviceEvent.Disconnect = (function() {

            /**
             * Properties of a Disconnect.
             * @memberof Buttplug.DeviceEvent
             * @interface IDisconnect
             * @property {number|null} [index] Disconnect index
             */

            /**
             * Constructs a new Disconnect.
             * @memberof Buttplug.DeviceEvent
             * @classdesc Represents a Disconnect.
             * @implements IDisconnect
             * @constructor
             * @param {Buttplug.DeviceEvent.IDisconnect=} [properties] Properties to set
             */
            function Disconnect(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Disconnect index.
             * @member {number} index
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @instance
             */
            Disconnect.prototype.index = 0;

            /**
             * Creates a new Disconnect instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {Buttplug.DeviceEvent.IDisconnect=} [properties] Properties to set
             * @returns {Buttplug.DeviceEvent.Disconnect} Disconnect instance
             */
            Disconnect.create = function create(properties) {
                return new Disconnect(properties);
            };

            /**
             * Encodes the specified Disconnect message. Does not implicitly {@link Buttplug.DeviceEvent.Disconnect.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {Buttplug.DeviceEvent.IDisconnect} message Disconnect message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Disconnect.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                return writer;
            };

            /**
             * Encodes the specified Disconnect message, length delimited. Does not implicitly {@link Buttplug.DeviceEvent.Disconnect.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {Buttplug.DeviceEvent.IDisconnect} message Disconnect message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Disconnect.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a Disconnect message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceEvent.Disconnect} Disconnect
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Disconnect.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceEvent.Disconnect();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a Disconnect message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceEvent.Disconnect} Disconnect
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Disconnect.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a Disconnect message.
             * @function verify
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            Disconnect.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                return null;
            };

            /**
             * Creates a Disconnect message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceEvent.Disconnect} Disconnect
             */
            Disconnect.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceEvent.Disconnect)
                    return object;
                var message = new $root.Buttplug.DeviceEvent.Disconnect();
                if (object.index != null)
                    message.index = object.index >>> 0;
                return message;
            };

            /**
             * Creates a plain object from a Disconnect message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @static
             * @param {Buttplug.DeviceEvent.Disconnect} message Disconnect
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            Disconnect.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults)
                    object.index = 0;
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                return object;
            };

            /**
             * Converts this Disconnect to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceEvent.Disconnect
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            Disconnect.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return Disconnect;
        })();

        DeviceEvent.RawReading = (function() {

            /**
             * Properties of a RawReading.
             * @memberof Buttplug.DeviceEvent
             * @interface IRawReading
             * @property {number|null} [index] RawReading index
             * @property {Buttplug.Endpoint|null} [endpoint] RawReading endpoint
             * @property {Uint8Array|null} [data] RawReading data
             */

            /**
             * Constructs a new RawReading.
             * @memberof Buttplug.DeviceEvent
             * @classdesc Represents a RawReading.
             * @implements IRawReading
             * @constructor
             * @param {Buttplug.DeviceEvent.IRawReading=} [properties] Properties to set
             */
            function RawReading(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RawReading index.
             * @member {number} index
             * @memberof Buttplug.DeviceEvent.RawReading
             * @instance
             */
            RawReading.prototype.index = 0;

            /**
             * RawReading endpoint.
             * @member {Buttplug.Endpoint} endpoint
             * @memberof Buttplug.DeviceEvent.RawReading
             * @instance
             */
            RawReading.prototype.endpoint = 0;

            /**
             * RawReading data.
             * @member {Uint8Array} data
             * @memberof Buttplug.DeviceEvent.RawReading
             * @instance
             */
            RawReading.prototype.data = $util.newBuffer([]);

            /**
             * Creates a new RawReading instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {Buttplug.DeviceEvent.IRawReading=} [properties] Properties to set
             * @returns {Buttplug.DeviceEvent.RawReading} RawReading instance
             */
            RawReading.create = function create(properties) {
                return new RawReading(properties);
            };

            /**
             * Encodes the specified RawReading message. Does not implicitly {@link Buttplug.DeviceEvent.RawReading.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {Buttplug.DeviceEvent.IRawReading} message RawReading message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawReading.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                if (message.endpoint != null && Object.hasOwnProperty.call(message, "endpoint"))
                    writer.uint32(/* id 2, wireType 0 =*/16).int32(message.endpoint);
                if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                    writer.uint32(/* id 3, wireType 2 =*/26).bytes(message.data);
                return writer;
            };

            /**
             * Encodes the specified RawReading message, length delimited. Does not implicitly {@link Buttplug.DeviceEvent.RawReading.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {Buttplug.DeviceEvent.IRawReading} message RawReading message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RawReading.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RawReading message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceEvent.RawReading} RawReading
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawReading.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceEvent.RawReading();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    case 2:
                        message.endpoint = reader.int32();
                        break;
                    case 3:
                        message.data = reader.bytes();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RawReading message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceEvent.RawReading} RawReading
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RawReading.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RawReading message.
             * @function verify
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RawReading.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    switch (message.endpoint) {
                    default:
                        return "endpoint: enum value expected";
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                    case 13:
                    case 14:
                    case 15:
                    case 16:
                    case 17:
                    case 18:
                    case 19:
                    case 20:
                    case 21:
                    case 22:
                    case 23:
                    case 24:
                    case 25:
                    case 26:
                    case 27:
                    case 28:
                    case 29:
                    case 30:
                    case 31:
                    case 32:
                    case 33:
                    case 34:
                    case 35:
                    case 36:
                    case 37:
                    case 38:
                    case 39:
                    case 40:
                    case 41:
                    case 42:
                    case 43:
                    case 44:
                        break;
                    }
                if (message.data != null && message.hasOwnProperty("data"))
                    if (!(message.data && typeof message.data.length === "number" || $util.isString(message.data)))
                        return "data: buffer expected";
                return null;
            };

            /**
             * Creates a RawReading message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceEvent.RawReading} RawReading
             */
            RawReading.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceEvent.RawReading)
                    return object;
                var message = new $root.Buttplug.DeviceEvent.RawReading();
                if (object.index != null)
                    message.index = object.index >>> 0;
                switch (object.endpoint) {
                case "Command":
                case 0:
                    message.endpoint = 0;
                    break;
                case "Firmware":
                case 1:
                    message.endpoint = 1;
                    break;
                case "Rx":
                case 2:
                    message.endpoint = 2;
                    break;
                case "RxAccel":
                case 3:
                    message.endpoint = 3;
                    break;
                case "RxBLEBattery":
                case 4:
                    message.endpoint = 4;
                    break;
                case "RxPressure":
                case 5:
                    message.endpoint = 5;
                    break;
                case "RxTouch":
                case 6:
                    message.endpoint = 6;
                    break;
                case "Tx":
                case 7:
                    message.endpoint = 7;
                    break;
                case "TxMode":
                case 8:
                    message.endpoint = 8;
                    break;
                case "TxShock":
                case 9:
                    message.endpoint = 9;
                    break;
                case "TxVibrate":
                case 10:
                    message.endpoint = 10;
                    break;
                case "TxVendorControl":
                case 11:
                    message.endpoint = 11;
                    break;
                case "Whitelist":
                case 12:
                    message.endpoint = 12;
                    break;
                case "Generic0":
                case 13:
                    message.endpoint = 13;
                    break;
                case "Generic1":
                case 14:
                    message.endpoint = 14;
                    break;
                case "Generic2":
                case 15:
                    message.endpoint = 15;
                    break;
                case "Generic3":
                case 16:
                    message.endpoint = 16;
                    break;
                case "Generic4":
                case 17:
                    message.endpoint = 17;
                    break;
                case "Generic5":
                case 18:
                    message.endpoint = 18;
                    break;
                case "Generic6":
                case 19:
                    message.endpoint = 19;
                    break;
                case "Generic7":
                case 20:
                    message.endpoint = 20;
                    break;
                case "Generic8":
                case 21:
                    message.endpoint = 21;
                    break;
                case "Generic9":
                case 22:
                    message.endpoint = 22;
                    break;
                case "Generic10":
                case 23:
                    message.endpoint = 23;
                    break;
                case "Generic11":
                case 24:
                    message.endpoint = 24;
                    break;
                case "Generic12":
                case 25:
                    message.endpoint = 25;
                    break;
                case "Generic13":
                case 26:
                    message.endpoint = 26;
                    break;
                case "Generic14":
                case 27:
                    message.endpoint = 27;
                    break;
                case "Generic15":
                case 28:
                    message.endpoint = 28;
                    break;
                case "Generic16":
                case 29:
                    message.endpoint = 29;
                    break;
                case "Generic17":
                case 30:
                    message.endpoint = 30;
                    break;
                case "Generic18":
                case 31:
                    message.endpoint = 31;
                    break;
                case "Generic19":
                case 32:
                    message.endpoint = 32;
                    break;
                case "Generic20":
                case 33:
                    message.endpoint = 33;
                    break;
                case "Generic21":
                case 34:
                    message.endpoint = 34;
                    break;
                case "Generic22":
                case 35:
                    message.endpoint = 35;
                    break;
                case "Generic23":
                case 36:
                    message.endpoint = 36;
                    break;
                case "Generic24":
                case 37:
                    message.endpoint = 37;
                    break;
                case "Generic25":
                case 38:
                    message.endpoint = 38;
                    break;
                case "Generic26":
                case 39:
                    message.endpoint = 39;
                    break;
                case "Generic27":
                case 40:
                    message.endpoint = 40;
                    break;
                case "Generic28":
                case 41:
                    message.endpoint = 41;
                    break;
                case "Generic29":
                case 42:
                    message.endpoint = 42;
                    break;
                case "Generic30":
                case 43:
                    message.endpoint = 43;
                    break;
                case "Generic31":
                case 44:
                    message.endpoint = 44;
                    break;
                }
                if (object.data != null)
                    if (typeof object.data === "string")
                        $util.base64.decode(object.data, message.data = $util.newBuffer($util.base64.length(object.data)), 0);
                    else if (object.data.length)
                        message.data = object.data;
                return message;
            };

            /**
             * Creates a plain object from a RawReading message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceEvent.RawReading
             * @static
             * @param {Buttplug.DeviceEvent.RawReading} message RawReading
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RawReading.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.index = 0;
                    object.endpoint = options.enums === String ? "Command" : 0;
                    if (options.bytes === String)
                        object.data = "";
                    else {
                        object.data = [];
                        if (options.bytes !== Array)
                            object.data = $util.newBuffer(object.data);
                    }
                }
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.endpoint != null && message.hasOwnProperty("endpoint"))
                    object.endpoint = options.enums === String ? $root.Buttplug.Endpoint[message.endpoint] : message.endpoint;
                if (message.data != null && message.hasOwnProperty("data"))
                    object.data = options.bytes === String ? $util.base64.encode(message.data, 0, message.data.length) : options.bytes === Array ? Array.prototype.slice.call(message.data) : message.data;
                return object;
            };

            /**
             * Converts this RawReading to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceEvent.RawReading
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RawReading.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RawReading;
        })();

        DeviceEvent.BatteryLevelReading = (function() {

            /**
             * Properties of a BatteryLevelReading.
             * @memberof Buttplug.DeviceEvent
             * @interface IBatteryLevelReading
             * @property {number|null} [index] BatteryLevelReading index
             * @property {number|null} [reading] BatteryLevelReading reading
             */

            /**
             * Constructs a new BatteryLevelReading.
             * @memberof Buttplug.DeviceEvent
             * @classdesc Represents a BatteryLevelReading.
             * @implements IBatteryLevelReading
             * @constructor
             * @param {Buttplug.DeviceEvent.IBatteryLevelReading=} [properties] Properties to set
             */
            function BatteryLevelReading(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * BatteryLevelReading index.
             * @member {number} index
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @instance
             */
            BatteryLevelReading.prototype.index = 0;

            /**
             * BatteryLevelReading reading.
             * @member {number} reading
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @instance
             */
            BatteryLevelReading.prototype.reading = 0;

            /**
             * Creates a new BatteryLevelReading instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {Buttplug.DeviceEvent.IBatteryLevelReading=} [properties] Properties to set
             * @returns {Buttplug.DeviceEvent.BatteryLevelReading} BatteryLevelReading instance
             */
            BatteryLevelReading.create = function create(properties) {
                return new BatteryLevelReading(properties);
            };

            /**
             * Encodes the specified BatteryLevelReading message. Does not implicitly {@link Buttplug.DeviceEvent.BatteryLevelReading.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {Buttplug.DeviceEvent.IBatteryLevelReading} message BatteryLevelReading message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            BatteryLevelReading.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                if (message.reading != null && Object.hasOwnProperty.call(message, "reading"))
                    writer.uint32(/* id 2, wireType 1 =*/17).double(message.reading);
                return writer;
            };

            /**
             * Encodes the specified BatteryLevelReading message, length delimited. Does not implicitly {@link Buttplug.DeviceEvent.BatteryLevelReading.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {Buttplug.DeviceEvent.IBatteryLevelReading} message BatteryLevelReading message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            BatteryLevelReading.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a BatteryLevelReading message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceEvent.BatteryLevelReading} BatteryLevelReading
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            BatteryLevelReading.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceEvent.BatteryLevelReading();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    case 2:
                        message.reading = reader.double();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a BatteryLevelReading message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceEvent.BatteryLevelReading} BatteryLevelReading
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            BatteryLevelReading.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a BatteryLevelReading message.
             * @function verify
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            BatteryLevelReading.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.reading != null && message.hasOwnProperty("reading"))
                    if (typeof message.reading !== "number")
                        return "reading: number expected";
                return null;
            };

            /**
             * Creates a BatteryLevelReading message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceEvent.BatteryLevelReading} BatteryLevelReading
             */
            BatteryLevelReading.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceEvent.BatteryLevelReading)
                    return object;
                var message = new $root.Buttplug.DeviceEvent.BatteryLevelReading();
                if (object.index != null)
                    message.index = object.index >>> 0;
                if (object.reading != null)
                    message.reading = Number(object.reading);
                return message;
            };

            /**
             * Creates a plain object from a BatteryLevelReading message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @static
             * @param {Buttplug.DeviceEvent.BatteryLevelReading} message BatteryLevelReading
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            BatteryLevelReading.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.index = 0;
                    object.reading = 0;
                }
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.reading != null && message.hasOwnProperty("reading"))
                    object.reading = options.json && !isFinite(message.reading) ? String(message.reading) : message.reading;
                return object;
            };

            /**
             * Converts this BatteryLevelReading to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceEvent.BatteryLevelReading
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            BatteryLevelReading.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return BatteryLevelReading;
        })();

        DeviceEvent.RSSILevelReading = (function() {

            /**
             * Properties of a RSSILevelReading.
             * @memberof Buttplug.DeviceEvent
             * @interface IRSSILevelReading
             * @property {number|null} [index] RSSILevelReading index
             * @property {number|null} [reading] RSSILevelReading reading
             */

            /**
             * Constructs a new RSSILevelReading.
             * @memberof Buttplug.DeviceEvent
             * @classdesc Represents a RSSILevelReading.
             * @implements IRSSILevelReading
             * @constructor
             * @param {Buttplug.DeviceEvent.IRSSILevelReading=} [properties] Properties to set
             */
            function RSSILevelReading(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * RSSILevelReading index.
             * @member {number} index
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @instance
             */
            RSSILevelReading.prototype.index = 0;

            /**
             * RSSILevelReading reading.
             * @member {number} reading
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @instance
             */
            RSSILevelReading.prototype.reading = 0;

            /**
             * Creates a new RSSILevelReading instance using the specified properties.
             * @function create
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {Buttplug.DeviceEvent.IRSSILevelReading=} [properties] Properties to set
             * @returns {Buttplug.DeviceEvent.RSSILevelReading} RSSILevelReading instance
             */
            RSSILevelReading.create = function create(properties) {
                return new RSSILevelReading(properties);
            };

            /**
             * Encodes the specified RSSILevelReading message. Does not implicitly {@link Buttplug.DeviceEvent.RSSILevelReading.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {Buttplug.DeviceEvent.IRSSILevelReading} message RSSILevelReading message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RSSILevelReading.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.index);
                if (message.reading != null && Object.hasOwnProperty.call(message, "reading"))
                    writer.uint32(/* id 2, wireType 0 =*/16).int32(message.reading);
                return writer;
            };

            /**
             * Encodes the specified RSSILevelReading message, length delimited. Does not implicitly {@link Buttplug.DeviceEvent.RSSILevelReading.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {Buttplug.DeviceEvent.IRSSILevelReading} message RSSILevelReading message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            RSSILevelReading.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a RSSILevelReading message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.DeviceEvent.RSSILevelReading} RSSILevelReading
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RSSILevelReading.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.DeviceEvent.RSSILevelReading();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.index = reader.uint32();
                        break;
                    case 2:
                        message.reading = reader.int32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a RSSILevelReading message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.DeviceEvent.RSSILevelReading} RSSILevelReading
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            RSSILevelReading.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a RSSILevelReading message.
             * @function verify
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            RSSILevelReading.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                if (message.index != null && message.hasOwnProperty("index"))
                    if (!$util.isInteger(message.index))
                        return "index: integer expected";
                if (message.reading != null && message.hasOwnProperty("reading"))
                    if (!$util.isInteger(message.reading))
                        return "reading: integer expected";
                return null;
            };

            /**
             * Creates a RSSILevelReading message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.DeviceEvent.RSSILevelReading} RSSILevelReading
             */
            RSSILevelReading.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.DeviceEvent.RSSILevelReading)
                    return object;
                var message = new $root.Buttplug.DeviceEvent.RSSILevelReading();
                if (object.index != null)
                    message.index = object.index >>> 0;
                if (object.reading != null)
                    message.reading = object.reading | 0;
                return message;
            };

            /**
             * Creates a plain object from a RSSILevelReading message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @static
             * @param {Buttplug.DeviceEvent.RSSILevelReading} message RSSILevelReading
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            RSSILevelReading.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (options.defaults) {
                    object.index = 0;
                    object.reading = 0;
                }
                if (message.index != null && message.hasOwnProperty("index"))
                    object.index = message.index;
                if (message.reading != null && message.hasOwnProperty("reading"))
                    object.reading = message.reading;
                return object;
            };

            /**
             * Converts this RSSILevelReading to JSON.
             * @function toJSON
             * @memberof Buttplug.DeviceEvent.RSSILevelReading
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            RSSILevelReading.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return RSSILevelReading;
        })();

        return DeviceEvent;
    })();

    Buttplug.ButtplugFFIServerMessage = (function() {

        /**
         * Properties of a ButtplugFFIServerMessage.
         * @memberof Buttplug
         * @interface IButtplugFFIServerMessage
         * @property {number|null} [id] ButtplugFFIServerMessage id
         * @property {Buttplug.ButtplugFFIServerMessage.IFFIMessage|null} [message] ButtplugFFIServerMessage message
         */

        /**
         * Constructs a new ButtplugFFIServerMessage.
         * @memberof Buttplug
         * @classdesc Represents a ButtplugFFIServerMessage.
         * @implements IButtplugFFIServerMessage
         * @constructor
         * @param {Buttplug.IButtplugFFIServerMessage=} [properties] Properties to set
         */
        function ButtplugFFIServerMessage(properties) {
            if (properties)
                for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                    if (properties[keys[i]] != null)
                        this[keys[i]] = properties[keys[i]];
        }

        /**
         * ButtplugFFIServerMessage id.
         * @member {number} id
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @instance
         */
        ButtplugFFIServerMessage.prototype.id = 0;

        /**
         * ButtplugFFIServerMessage message.
         * @member {Buttplug.ButtplugFFIServerMessage.IFFIMessage|null|undefined} message
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @instance
         */
        ButtplugFFIServerMessage.prototype.message = null;

        /**
         * Creates a new ButtplugFFIServerMessage instance using the specified properties.
         * @function create
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {Buttplug.IButtplugFFIServerMessage=} [properties] Properties to set
         * @returns {Buttplug.ButtplugFFIServerMessage} ButtplugFFIServerMessage instance
         */
        ButtplugFFIServerMessage.create = function create(properties) {
            return new ButtplugFFIServerMessage(properties);
        };

        /**
         * Encodes the specified ButtplugFFIServerMessage message. Does not implicitly {@link Buttplug.ButtplugFFIServerMessage.verify|verify} messages.
         * @function encode
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {Buttplug.IButtplugFFIServerMessage} message ButtplugFFIServerMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        ButtplugFFIServerMessage.encode = function encode(message, writer) {
            if (!writer)
                writer = $Writer.create();
            if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.id);
            if (message.message != null && Object.hasOwnProperty.call(message, "message"))
                $root.Buttplug.ButtplugFFIServerMessage.FFIMessage.encode(message.message, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
            return writer;
        };

        /**
         * Encodes the specified ButtplugFFIServerMessage message, length delimited. Does not implicitly {@link Buttplug.ButtplugFFIServerMessage.verify|verify} messages.
         * @function encodeDelimited
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {Buttplug.IButtplugFFIServerMessage} message ButtplugFFIServerMessage message or plain object to encode
         * @param {$protobuf.Writer} [writer] Writer to encode to
         * @returns {$protobuf.Writer} Writer
         */
        ButtplugFFIServerMessage.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
        };

        /**
         * Decodes a ButtplugFFIServerMessage message from the specified reader or buffer.
         * @function decode
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @param {number} [length] Message length if known beforehand
         * @returns {Buttplug.ButtplugFFIServerMessage} ButtplugFFIServerMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        ButtplugFFIServerMessage.decode = function decode(reader, length) {
            if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
            var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ButtplugFFIServerMessage();
            while (reader.pos < end) {
                var tag = reader.uint32();
                switch (tag >>> 3) {
                case 1:
                    message.id = reader.uint32();
                    break;
                case 2:
                    message.message = $root.Buttplug.ButtplugFFIServerMessage.FFIMessage.decode(reader, reader.uint32());
                    break;
                default:
                    reader.skipType(tag & 7);
                    break;
                }
            }
            return message;
        };

        /**
         * Decodes a ButtplugFFIServerMessage message from the specified reader or buffer, length delimited.
         * @function decodeDelimited
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
         * @returns {Buttplug.ButtplugFFIServerMessage} ButtplugFFIServerMessage
         * @throws {Error} If the payload is not a reader or valid buffer
         * @throws {$protobuf.util.ProtocolError} If required fields are missing
         */
        ButtplugFFIServerMessage.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
                reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
        };

        /**
         * Verifies a ButtplugFFIServerMessage message.
         * @function verify
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {Object.<string,*>} message Plain object to verify
         * @returns {string|null} `null` if valid, otherwise the reason why it is not
         */
        ButtplugFFIServerMessage.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
                return "object expected";
            if (message.id != null && message.hasOwnProperty("id"))
                if (!$util.isInteger(message.id))
                    return "id: integer expected";
            if (message.message != null && message.hasOwnProperty("message")) {
                var error = $root.Buttplug.ButtplugFFIServerMessage.FFIMessage.verify(message.message);
                if (error)
                    return "message." + error;
            }
            return null;
        };

        /**
         * Creates a ButtplugFFIServerMessage message from a plain object. Also converts values to their respective internal types.
         * @function fromObject
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {Object.<string,*>} object Plain object
         * @returns {Buttplug.ButtplugFFIServerMessage} ButtplugFFIServerMessage
         */
        ButtplugFFIServerMessage.fromObject = function fromObject(object) {
            if (object instanceof $root.Buttplug.ButtplugFFIServerMessage)
                return object;
            var message = new $root.Buttplug.ButtplugFFIServerMessage();
            if (object.id != null)
                message.id = object.id >>> 0;
            if (object.message != null) {
                if (typeof object.message !== "object")
                    throw TypeError(".Buttplug.ButtplugFFIServerMessage.message: object expected");
                message.message = $root.Buttplug.ButtplugFFIServerMessage.FFIMessage.fromObject(object.message);
            }
            return message;
        };

        /**
         * Creates a plain object from a ButtplugFFIServerMessage message. Also converts values to other types if specified.
         * @function toObject
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @static
         * @param {Buttplug.ButtplugFFIServerMessage} message ButtplugFFIServerMessage
         * @param {$protobuf.IConversionOptions} [options] Conversion options
         * @returns {Object.<string,*>} Plain object
         */
        ButtplugFFIServerMessage.toObject = function toObject(message, options) {
            if (!options)
                options = {};
            var object = {};
            if (options.defaults) {
                object.id = 0;
                object.message = null;
            }
            if (message.id != null && message.hasOwnProperty("id"))
                object.id = message.id;
            if (message.message != null && message.hasOwnProperty("message"))
                object.message = $root.Buttplug.ButtplugFFIServerMessage.FFIMessage.toObject(message.message, options);
            return object;
        };

        /**
         * Converts this ButtplugFFIServerMessage to JSON.
         * @function toJSON
         * @memberof Buttplug.ButtplugFFIServerMessage
         * @instance
         * @returns {Object.<string,*>} JSON object
         */
        ButtplugFFIServerMessage.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };

        ButtplugFFIServerMessage.FFIMessage = (function() {

            /**
             * Properties of a FFIMessage.
             * @memberof Buttplug.ButtplugFFIServerMessage
             * @interface IFFIMessage
             * @property {Buttplug.IServerMessage|null} [serverMessage] FFIMessage serverMessage
             * @property {Buttplug.IDeviceEvent|null} [deviceEvent] FFIMessage deviceEvent
             */

            /**
             * Constructs a new FFIMessage.
             * @memberof Buttplug.ButtplugFFIServerMessage
             * @classdesc Represents a FFIMessage.
             * @implements IFFIMessage
             * @constructor
             * @param {Buttplug.ButtplugFFIServerMessage.IFFIMessage=} [properties] Properties to set
             */
            function FFIMessage(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * FFIMessage serverMessage.
             * @member {Buttplug.IServerMessage|null|undefined} serverMessage
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.serverMessage = null;

            /**
             * FFIMessage deviceEvent.
             * @member {Buttplug.IDeviceEvent|null|undefined} deviceEvent
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @instance
             */
            FFIMessage.prototype.deviceEvent = null;

            // OneOf field names bound to virtual getters and setters
            var $oneOfFields;

            /**
             * FFIMessage msg.
             * @member {"serverMessage"|"deviceEvent"|undefined} msg
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @instance
             */
            Object.defineProperty(FFIMessage.prototype, "msg", {
                get: $util.oneOfGetter($oneOfFields = ["serverMessage", "deviceEvent"]),
                set: $util.oneOfSetter($oneOfFields)
            });

            /**
             * Creates a new FFIMessage instance using the specified properties.
             * @function create
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {Buttplug.ButtplugFFIServerMessage.IFFIMessage=} [properties] Properties to set
             * @returns {Buttplug.ButtplugFFIServerMessage.FFIMessage} FFIMessage instance
             */
            FFIMessage.create = function create(properties) {
                return new FFIMessage(properties);
            };

            /**
             * Encodes the specified FFIMessage message. Does not implicitly {@link Buttplug.ButtplugFFIServerMessage.FFIMessage.verify|verify} messages.
             * @function encode
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {Buttplug.ButtplugFFIServerMessage.IFFIMessage} message FFIMessage message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FFIMessage.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.serverMessage != null && Object.hasOwnProperty.call(message, "serverMessage"))
                    $root.Buttplug.ServerMessage.encode(message.serverMessage, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                if (message.deviceEvent != null && Object.hasOwnProperty.call(message, "deviceEvent"))
                    $root.Buttplug.DeviceEvent.encode(message.deviceEvent, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                return writer;
            };

            /**
             * Encodes the specified FFIMessage message, length delimited. Does not implicitly {@link Buttplug.ButtplugFFIServerMessage.FFIMessage.verify|verify} messages.
             * @function encodeDelimited
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {Buttplug.ButtplugFFIServerMessage.IFFIMessage} message FFIMessage message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FFIMessage.encodeDelimited = function encodeDelimited(message, writer) {
                return this.encode(message, writer).ldelim();
            };

            /**
             * Decodes a FFIMessage message from the specified reader or buffer.
             * @function decode
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {Buttplug.ButtplugFFIServerMessage.FFIMessage} FFIMessage
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FFIMessage.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Buttplug.ButtplugFFIServerMessage.FFIMessage();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.serverMessage = $root.Buttplug.ServerMessage.decode(reader, reader.uint32());
                        break;
                    case 2:
                        message.deviceEvent = $root.Buttplug.DeviceEvent.decode(reader, reader.uint32());
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            /**
             * Decodes a FFIMessage message from the specified reader or buffer, length delimited.
             * @function decodeDelimited
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @returns {Buttplug.ButtplugFFIServerMessage.FFIMessage} FFIMessage
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FFIMessage.decodeDelimited = function decodeDelimited(reader) {
                if (!(reader instanceof $Reader))
                    reader = new $Reader(reader);
                return this.decode(reader, reader.uint32());
            };

            /**
             * Verifies a FFIMessage message.
             * @function verify
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {Object.<string,*>} message Plain object to verify
             * @returns {string|null} `null` if valid, otherwise the reason why it is not
             */
            FFIMessage.verify = function verify(message) {
                if (typeof message !== "object" || message === null)
                    return "object expected";
                var properties = {};
                if (message.serverMessage != null && message.hasOwnProperty("serverMessage")) {
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.ServerMessage.verify(message.serverMessage);
                        if (error)
                            return "serverMessage." + error;
                    }
                }
                if (message.deviceEvent != null && message.hasOwnProperty("deviceEvent")) {
                    if (properties.msg === 1)
                        return "msg: multiple values";
                    properties.msg = 1;
                    {
                        var error = $root.Buttplug.DeviceEvent.verify(message.deviceEvent);
                        if (error)
                            return "deviceEvent." + error;
                    }
                }
                return null;
            };

            /**
             * Creates a FFIMessage message from a plain object. Also converts values to their respective internal types.
             * @function fromObject
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {Object.<string,*>} object Plain object
             * @returns {Buttplug.ButtplugFFIServerMessage.FFIMessage} FFIMessage
             */
            FFIMessage.fromObject = function fromObject(object) {
                if (object instanceof $root.Buttplug.ButtplugFFIServerMessage.FFIMessage)
                    return object;
                var message = new $root.Buttplug.ButtplugFFIServerMessage.FFIMessage();
                if (object.serverMessage != null) {
                    if (typeof object.serverMessage !== "object")
                        throw TypeError(".Buttplug.ButtplugFFIServerMessage.FFIMessage.serverMessage: object expected");
                    message.serverMessage = $root.Buttplug.ServerMessage.fromObject(object.serverMessage);
                }
                if (object.deviceEvent != null) {
                    if (typeof object.deviceEvent !== "object")
                        throw TypeError(".Buttplug.ButtplugFFIServerMessage.FFIMessage.deviceEvent: object expected");
                    message.deviceEvent = $root.Buttplug.DeviceEvent.fromObject(object.deviceEvent);
                }
                return message;
            };

            /**
             * Creates a plain object from a FFIMessage message. Also converts values to other types if specified.
             * @function toObject
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @static
             * @param {Buttplug.ButtplugFFIServerMessage.FFIMessage} message FFIMessage
             * @param {$protobuf.IConversionOptions} [options] Conversion options
             * @returns {Object.<string,*>} Plain object
             */
            FFIMessage.toObject = function toObject(message, options) {
                if (!options)
                    options = {};
                var object = {};
                if (message.serverMessage != null && message.hasOwnProperty("serverMessage")) {
                    object.serverMessage = $root.Buttplug.ServerMessage.toObject(message.serverMessage, options);
                    if (options.oneofs)
                        object.msg = "serverMessage";
                }
                if (message.deviceEvent != null && message.hasOwnProperty("deviceEvent")) {
                    object.deviceEvent = $root.Buttplug.DeviceEvent.toObject(message.deviceEvent, options);
                    if (options.oneofs)
                        object.msg = "deviceEvent";
                }
                return object;
            };

            /**
             * Converts this FFIMessage to JSON.
             * @function toJSON
             * @memberof Buttplug.ButtplugFFIServerMessage.FFIMessage
             * @instance
             * @returns {Object.<string,*>} JSON object
             */
            FFIMessage.prototype.toJSON = function toJSON() {
                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };

            return FFIMessage;
        })();

        return ButtplugFFIServerMessage;
    })();

    return Buttplug;
})();

module.exports = $root;


/***/ }),

/***/ "./src/client.ts":
/*!***********************!*\
  !*** ./src/client.ts ***!
  \***********************/
/*! exports provided: ButtplugClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugClient", function() { return ButtplugClient; });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buttplug_ffi */ "./src/buttplug_ffi.js");
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors */ "./src/errors.ts");
/* harmony import */ var _ffi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ffi */ "./src/ffi.ts");
/* harmony import */ var _connectors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connectors */ "./src/connectors.ts");
/* harmony import */ var _sorter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sorter */ "./src/sorter.ts");
/* harmony import */ var _device__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./device */ "./src/device.ts");
/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */








class ButtplugClient extends events__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"] {
    constructor(clientName = "Generic Buttplug Client") {
        super();
        this._devices = new Map();
        // This will either be null, or our WASM heap pointer for our connected client object.
        this._clientPtr = undefined;
        this._isScanning = false;
        this._connected = false;
        this._sorter = new _sorter__WEBPACK_IMPORTED_MODULE_5__["ButtplugMessageSorter"]();
        this.connect = async (options) => {
            if (this._connected) {
                throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("Client already connected.");
            }
            if (options instanceof _connectors__WEBPACK_IMPORTED_MODULE_4__["ButtplugEmbeddedConnectorOptions"]) {
                await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["connectEmbedded"])(this._sorter, this._clientPtr, options);
            }
            else if (options instanceof _connectors__WEBPACK_IMPORTED_MODULE_4__["ButtplugWebsocketConnectorOptions"]) {
                await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["connectWebsocket"])(this._sorter, this._clientPtr, options);
            }
            else {
                throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("Invalid connector type.");
            }
            this._connected = true;
        };
        this.disconnect = async () => {
            if (!this._clientPtr) {
                throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("Not connected.");
            }
            await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["disconnect"])(this._sorter, this._clientPtr);
        };
        this.startScanning = async () => {
            if (!this._connected) {
                throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("Not connected.");
            }
            this._isScanning = true;
            await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["startScanning"])(this._sorter, this._clientPtr);
        };
        this.stopScanning = async () => {
            if (!this._connected) {
                throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("Not connected.");
            }
            this._isScanning = false;
            await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["stopScanning"])(this._sorter, this._clientPtr);
        };
        this.stopAllDevices = async () => {
            if (!this._connected) {
                throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("Not connected.");
            }
            await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["stopAllDevices"])(this._sorter, this._clientPtr);
        };
        this.sorterCallback = (buf) => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
            const msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_1__["Buttplug"].ButtplugFFIServerMessage.decode(buf);
            if (msg.id > 0) {
                this._sorter.ParseIncomingMessages(msg);
                return;
            }
            if ((_b = (_a = msg.message) === null || _a === void 0 ? void 0 : _a.serverMessage) === null || _b === void 0 ? void 0 : _b.deviceAdded) {
                const addedMsg = (_d = (_c = msg.message) === null || _c === void 0 ? void 0 : _c.serverMessage) === null || _d === void 0 ? void 0 : _d.deviceAdded;
                const devicePtr = Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["createDevicePtr"])(this._clientPtr, addedMsg.index);
                const device = new _device__WEBPACK_IMPORTED_MODULE_6__["ButtplugClientDevice"](devicePtr, this._sorter, addedMsg.index, addedMsg.name, addedMsg.messageAttributes);
                this._devices.set(addedMsg.index, device);
                this.emit("deviceadded", device);
                return;
            }
            if ((_f = (_e = msg.message) === null || _e === void 0 ? void 0 : _e.serverMessage) === null || _f === void 0 ? void 0 : _f.deviceRemoved) {
                const removedMsg = (_h = (_g = msg.message) === null || _g === void 0 ? void 0 : _g.serverMessage) === null || _h === void 0 ? void 0 : _h.deviceRemoved;
                if (this._devices.has(removedMsg.index)) {
                    const removedDevice = this._devices.get(removedMsg.index);
                    removedDevice === null || removedDevice === void 0 ? void 0 : removedDevice.emitDisconnected();
                    this._devices.delete(removedMsg.index);
                    this.emit("deviceremoved", removedDevice);
                }
                return;
            }
            if ((_k = (_j = msg.message) === null || _j === void 0 ? void 0 : _j.serverMessage) === null || _k === void 0 ? void 0 : _k.scanningFinished) {
                this._isScanning = false;
                this.emit("scanningfinished");
                return;
            }
            if ((_m = (_l = msg.message) === null || _l === void 0 ? void 0 : _l.serverMessage) === null || _m === void 0 ? void 0 : _m.disconnect) {
                this._connected = false;
                this.emit("serverdisconnect");
            }
        };
        this._clientName = clientName;
        this._clientPtr = Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["createClientPtr"])(this.sorterCallback, clientName);
    }
    get Connected() {
        return this._connected;
    }
    get Devices() {
        // While this function doesn't actually send a message, if we don't have a
        // connector, we shouldn't have devices.
        this.CheckConnector();
        const devices = [];
        this._devices.forEach((d, i) => {
            devices.push(d);
        });
        return devices;
    }
    get isScanning() {
        return this._isScanning;
    }
    CheckConnector() {
        if (!this.Connected) {
            throw new _errors__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientConnectorError"]("ButtplugClient not connected");
        }
    }
}


/***/ }),

/***/ "./src/connectors.ts":
/*!***************************!*\
  !*** ./src/connectors.ts ***!
  \***************************/
/*! exports provided: ButtplugEmbeddedConnectorOptions, ButtplugWebsocketConnectorOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugEmbeddedConnectorOptions", function() { return ButtplugEmbeddedConnectorOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugWebsocketConnectorOptions", function() { return ButtplugWebsocketConnectorOptions; });
class ButtplugEmbeddedConnectorOptions {
    constructor() {
        this.ServerName = "Buttplug WASM Embedded Server";
        // Empty string means ignore.
        this.DeviceConfigJSON = "";
        // Empty string means ignore.
        this.UserDeviceConfigJSON = "";
        // 0 here means all device.
        this.DeviceCommunicationManagerTypes = 0;
        // Require opt-in on raw messages.
        this.AllowRawMessages = false;
        this.MaxPingTime = 0;
    }
}
class ButtplugWebsocketConnectorOptions {
    constructor() {
        // Default to the insecure port.
        this.Address = "ws://127.0.0.1:12345";
    }
}


/***/ }),

/***/ "./src/device.ts":
/*!***********************!*\
  !*** ./src/device.ts ***!
  \***********************/
/*! exports provided: ButtplugDeviceMessageType, MessageAttributes, VibrationCmd, RotationCmd, VectorCmd, ButtplugClientDevice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugDeviceMessageType", function() { return ButtplugDeviceMessageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageAttributes", function() { return MessageAttributes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VibrationCmd", function() { return VibrationCmd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotationCmd", function() { return RotationCmd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorCmd", function() { return VectorCmd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugClientDevice", function() { return ButtplugClientDevice; });
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buttplug_ffi */ "./src/buttplug_ffi.js");
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ "./src/errors.ts");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _ffi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ffi */ "./src/ffi.ts");
/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */





// Re-export the protobuf enum, so we don't require users to have to know the
// full resolution path.
var ButtplugDeviceMessageType = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.MessageAttributeType;
class MessageAttributes {
    constructor(attributes) {
        this.featureCount = attributes.featureCount;
        this.stepCount = attributes.stepCount;
        this.maxDuration = attributes.maxDuration;
        this.endpoints = attributes.endpoints;
    }
}
class VibrationCmd {
    constructor(index, speed) {
        this.Index = index;
        this.Speed = speed;
    }
}
class RotationCmd {
    constructor(index, speed, clockwise) {
        this.Index = index;
        this.Speed = speed;
        this.Clockwise = clockwise;
    }
}
class VectorCmd {
    constructor(index, duration, position) {
        this.Index = index;
        this.Duration = duration;
        this.Position = position;
    }
}
/**
 * Represents an abstract device, capable of taking certain kinds of messages.
 */
class ButtplugClientDevice extends events__WEBPACK_IMPORTED_MODULE_2__["EventEmitter"] {
    /**
     * @param _index Index of the device, as created by the device manager.
     * @param _name Name of the device.
     * @param allowedMsgs Buttplug messages the device can receive.
     */
    constructor(devicePtr, sorter, index, name, allowedMsgsObj) {
        super();
        this._messageAttributes = new Map();
        this._devicePtr = devicePtr;
        this._sorter = sorter;
        this._index = index;
        this._name = name;
        for (let attributes of allowedMsgsObj) {
            this._messageAttributes.set(attributes.messageType, new MessageAttributes(attributes));
        }
    }
    /**
     * Return the name of the device.
     */
    get Name() {
        return this._name;
    }
    /**
     * Return the index of the device.
     */
    get Index() {
        return this._index;
    }
    /**
     * Return a list of message types the device accepts.
     */
    get AllowedMessages() {
        return Array.from(this._messageAttributes.keys());
    }
    /**
     * Return the message attributes related to the given message
     */
    messageAttributes(messageName) {
        return this._messageAttributes.get(messageName);
    }
    checkAllowedMessageType(messageType) {
        if (!this._messageAttributes.has(messageType)) {
            throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"](`Message ${ButtplugDeviceMessageType[messageType]} does not exist on device ${this._name}`);
        }
    }
    async vibrate(speeds) {
        this.checkAllowedMessageType(ButtplugDeviceMessageType.VibrateCmd);
        let msgSpeeds;
        if (typeof (speeds) === "number") {
            // We can skip the check here since we're building the command array ourselves.
            const features = this._messageAttributes.get(ButtplugDeviceMessageType.VibrateCmd).featureCount;
            msgSpeeds = Array.from({ length: features }, (_, i) => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.VibrateComponent.create({
                index: i,
                speed: speeds,
            }));
        }
        else if (Array.isArray(speeds) && speeds.every(x => typeof (x) === "number")) {
            msgSpeeds = speeds.map((x, index) => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.VibrateComponent.create({
                index: index,
                speed: x
            }));
        }
        else if (Array.isArray(speeds) && speeds.every(x => x instanceof VibrationCmd)) {
            msgSpeeds = speeds.map(x => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.VibrateComponent.create({
                index: x.Index,
                speed: x.Speed
            }));
        }
        else {
            throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"]("vibrate can only take numbers or arrays of numbers or VibrationCmds.");
        }
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["vibrate"])(this._sorter, this._devicePtr, msgSpeeds);
    }
    async rotate(speeds, clockwise) {
        this.checkAllowedMessageType(ButtplugDeviceMessageType.RotateCmd);
        let msgRotations;
        if (typeof (speeds) === "number" && clockwise !== undefined) {
            // We can skip the check here since we're building the command array ourselves.
            const features = this._messageAttributes.get(ButtplugDeviceMessageType.RotateCmd).featureCount;
            msgRotations = Array.from({ length: features }, (_, i) => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RotateComponent.create({
                index: i,
                speed: speeds,
                clockwise: clockwise
            }));
        }
        else if (Array.isArray(speeds) && speeds.every(x => x instanceof RotationCmd)) {
            msgRotations = speeds.map(x => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RotateComponent.create({
                index: x.Index,
                speed: x.Speed,
                clockwise: x.Clockwise
            }));
        }
        else {
            throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"]("rotate can only take number/boolean or arrays of RotateCmds.");
        }
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["rotate"])(this._sorter, this._devicePtr, msgRotations);
    }
    async linear(position, duration) {
        this.checkAllowedMessageType(ButtplugDeviceMessageType.LinearCmd);
        let msgVectors;
        if (typeof (position) === "number" && duration !== undefined) {
            // We can skip the check here since we're building the command array ourselves.
            const features = this._messageAttributes.get(ButtplugDeviceMessageType.LinearCmd).featureCount;
            msgVectors = Array.from({ length: features }, (_, i) => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.LinearComponent.create({
                index: i,
                position: position,
                duration: duration
            }));
        }
        else if (Array.isArray(position) && position.every(x => x instanceof VectorCmd)) {
            msgVectors = position.map(x => _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.LinearComponent.create({
                index: x.Index,
                position: x.Position,
                duration: x.Duration
            }));
        }
        else {
            throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"]("linear can only take number/number or arrays of VectorCmds.");
        }
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["linear"])(this._sorter, this._devicePtr, msgVectors);
    }
    async batteryLevel() {
        var _a, _b, _c, _d;
        this.checkAllowedMessageType(ButtplugDeviceMessageType.BatteryLevelCmd);
        let batteryMsg = await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["batteryLevel"])(this._sorter, this._devicePtr);
        if ((_b = (_a = batteryMsg.message) === null || _a === void 0 ? void 0 : _a.deviceEvent) === null || _b === void 0 ? void 0 : _b.batteryLevelReading) {
            let reading = (_d = (_c = batteryMsg.message) === null || _c === void 0 ? void 0 : _c.deviceEvent) === null || _d === void 0 ? void 0 : _d.batteryLevelReading;
            return reading.reading;
        }
        throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"]("Wrong reply message received for batteryLevel: " + batteryMsg);
    }
    async rssiLevel() {
        var _a, _b, _c, _d;
        this.checkAllowedMessageType(ButtplugDeviceMessageType.RSSILevelCmd);
        let rssiMsg = await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["rssiLevel"])(this._sorter, this._devicePtr);
        if ((_b = (_a = rssiMsg.message) === null || _a === void 0 ? void 0 : _a.deviceEvent) === null || _b === void 0 ? void 0 : _b.rssiLevelReading) {
            return (_d = (_c = rssiMsg.message) === null || _c === void 0 ? void 0 : _c.deviceEvent) === null || _d === void 0 ? void 0 : _d.rssiLevelReading.reading;
        }
        throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"]("Wrong reply message received for rssiLevel: " + rssiMsg);
    }
    async rawRead(endpoint, expectedLength, timeout) {
        var _a, _b;
        this.checkAllowedMessageType(ButtplugDeviceMessageType.RawReadCmd);
        let readingMsg = await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["rawRead"])(this._sorter, this._devicePtr, endpoint, expectedLength, timeout);
        if ((_b = (_a = readingMsg.message) === null || _a === void 0 ? void 0 : _a.deviceEvent) === null || _b === void 0 ? void 0 : _b.rawReading) {
            return readingMsg.message.deviceEvent.rawReading.data;
        }
        throw new _errors__WEBPACK_IMPORTED_MODULE_1__["ButtplugDeviceError"]("Wrong reply message received for rawRead: " + readingMsg);
    }
    async rawWrite(endpoint, data, writeWithResponse) {
        this.checkAllowedMessageType(ButtplugDeviceMessageType.RawWriteCmd);
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["rawWrite"])(this._sorter, this._devicePtr, endpoint, data, writeWithResponse);
    }
    async rawSubscribe(endpoint) {
        this.checkAllowedMessageType(ButtplugDeviceMessageType.RawSubscribeCmd);
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["rawSubscribe"])(this._sorter, this._devicePtr, endpoint);
    }
    async rawUnsubscribe(endpoint) {
        this.checkAllowedMessageType(ButtplugDeviceMessageType.RawUnsubscribeCmd);
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["rawUnsubscribe"])(this._sorter, this._devicePtr, endpoint);
    }
    async stop() {
        await Object(_ffi__WEBPACK_IMPORTED_MODULE_3__["stopDevice"])(this._sorter, this._devicePtr);
    }
    emitDisconnected() {
        this.emit("deviceremoved");
    }
}


/***/ }),

/***/ "./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ButtplugError, ButtplugHandshakeError, ButtplugDeviceError, ButtplugMessageError, ButtplugPingError, ButtplugUnknownError, ButtplugClientConnectorError, convertPBufError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugError", function() { return ButtplugError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugHandshakeError", function() { return ButtplugHandshakeError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugDeviceError", function() { return ButtplugDeviceError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugMessageError", function() { return ButtplugMessageError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugPingError", function() { return ButtplugPingError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugUnknownError", function() { return ButtplugUnknownError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugClientConnectorError", function() { return ButtplugClientConnectorError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertPBufError", function() { return convertPBufError; });
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buttplug_ffi */ "./src/buttplug_ffi.js");
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__);

class ButtplugError extends Error {
    constructor(aMessage, aId = 0, aInner) {
        super(aMessage);
        this.innerError = aInner;
        this.messageId = aId;
    }
}
class ButtplugHandshakeError extends ButtplugError {
    constructor(aMessage, aId = 0) {
        super(aMessage, aId);
    }
}
class ButtplugDeviceError extends ButtplugError {
    constructor(aMessage, aId = 0) {
        super(aMessage, aId);
    }
}
class ButtplugMessageError extends ButtplugError {
    constructor(aMessage, aId = 0) {
        super(aMessage, aId);
    }
}
class ButtplugPingError extends ButtplugError {
    constructor(aMessage, aId = 0) {
        super(aMessage, aId);
    }
}
class ButtplugUnknownError extends ButtplugError {
    constructor(aMessage, aId = 0) {
        super(aMessage, aId);
    }
}
class ButtplugClientConnectorError extends ButtplugError {
    constructor(aMessage, aId = 0) {
        super(aMessage, aId);
    }
}
function convertPBufError(err, id) {
    if (err.errorType === _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.ButtplugErrorType.ButtplugConnectorError) {
        return new ButtplugClientConnectorError(err.message, id);
    }
    if (err.errorType === _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.ButtplugErrorType.ButtplugDeviceError) {
        return new ButtplugDeviceError(err.message, id);
    }
    if (err.errorType === _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.ButtplugErrorType.ButtplugHandshakeError) {
        return new ButtplugHandshakeError(err.message, id);
    }
    if (err.errorType === _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.ButtplugErrorType.ButtplugMessageError) {
        return new ButtplugMessageError(err.message, id);
    }
    if (err.errorType === _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.ButtplugErrorType.ButtplugPingError) {
        return new ButtplugPingError(err.message, id);
    }
    if (err.errorType === _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ServerMessage.ButtplugErrorType.ButtplugUnknownError) {
        return new ButtplugUnknownError(err.message, id);
    }
    throw new ButtplugUnknownError("Cannot convert error: " + err);
}


/***/ }),

/***/ "./src/ffi.ts":
/*!********************!*\
  !*** ./src/ffi.ts ***!
  \********************/
/*! exports provided: buttplugInit, connectEmbedded, connectWebsocket, disconnect, startScanning, stopScanning, stopAllDevices, vibrate, rotate, linear, stopDevice, batteryLevel, rssiLevel, rawRead, rawWrite, rawSubscribe, rawUnsubscribe, createClientPtr, createDevicePtr, freeClientPtr, freeDevicePtr, activateConsoleLogger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buttplugInit", function() { return buttplugInit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectEmbedded", function() { return connectEmbedded; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectWebsocket", function() { return connectWebsocket; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disconnect", function() { return disconnect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "startScanning", function() { return startScanning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stopScanning", function() { return stopScanning; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stopAllDevices", function() { return stopAllDevices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "vibrate", function() { return vibrate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linear", function() { return linear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stopDevice", function() { return stopDevice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "batteryLevel", function() { return batteryLevel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rssiLevel", function() { return rssiLevel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rawRead", function() { return rawRead; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rawWrite", function() { return rawWrite; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rawSubscribe", function() { return rawSubscribe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rawUnsubscribe", function() { return rawUnsubscribe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createClientPtr", function() { return createClientPtr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createDevicePtr", function() { return createDevicePtr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "freeClientPtr", function() { return freeClientPtr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "freeDevicePtr", function() { return freeDevicePtr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "activateConsoleLogger", function() { return activateConsoleLogger; });
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buttplug_ffi */ "./src/buttplug_ffi.js");
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__);

function must_run_init_1(a) {
    throw new Error("Must run buttplugInit() async before calling any Buttplug methods!");
}
function must_run_init_2(a, b) {
    throw new Error("Must run buttplugInit() async before calling any Buttplug methods!");
}
// import { buttplug_create_client, buttplug_free_client, buttplug_parse_client_message, buttplug_activate_env_logger, buttplug_free_device, buttplug_create_device, buttplug_parse_device_message } from "./buttplug-rs-ffi/buttplug_rs_ffi";
let buttplug_create_client = must_run_init_2;
let buttplug_free_client = must_run_init_1;
let buttplug_parse_client_message = must_run_init_2;
let buttplug_activate_env_logger = must_run_init_1;
let buttplug_free_device = must_run_init_1;
let buttplug_create_device = must_run_init_2;
let buttplug_parse_device_message = must_run_init_2;
let buttplug_has_init_run = false;
async function buttplugInit() {
    if (buttplug_has_init_run) {
        console.log("buttplugInit function has already run successfully. This only needs to be run once, but doesn't affect anything (other than printing this message) if called again.");
        return;
    }
    let index = await __webpack_require__.e(/*! import() */ 0).then(__webpack_require__.bind(null, /*! ./buttplug-rs-ffi/buttplug_rs_ffi */ "./src/buttplug-rs-ffi/buttplug_rs_ffi.js")).catch((e) => {
        console.log(e);
        return Promise.reject(e);
    });
    console.log(index);
    buttplug_create_client = index.buttplug_create_client;
    buttplug_free_client = index.buttplug_free_client;
    buttplug_parse_client_message = index.buttplug_parse_client_message;
    buttplug_activate_env_logger = index.buttplug_activate_env_logger;
    buttplug_free_device = index.buttplug_free_device;
    buttplug_create_device = index.buttplug_create_device;
    buttplug_parse_device_message = index.buttplug_parse_device_message;
    buttplug_has_init_run = true;
}
function sendClientMessage(sorter, clientPtr, message) {
    let promise = sorter.PrepareOutgoingMessage(message);
    let buffer = Buffer.from(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.encode(message).finish());
    buttplug_parse_client_message(clientPtr, buffer);
    return promise;
}
function connectEmbedded(sorter, clientPtr, options) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.FFIMessage.create({
            connectLocal: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.ConnectLocal.create({
                serverName: options.ServerName,
                allowRawMessages: options.AllowRawMessages,
                deviceConfigurationJson: options.DeviceConfigJSON,
                userDeviceConfigurationJson: options.UserDeviceConfigJSON,
                commManagerTypes: options.DeviceCommunicationManagerTypes,
                maxPingTime: options.MaxPingTime
            })
        }),
        id: 1
    });
    return sendClientMessage(sorter, clientPtr, msg);
}
function connectWebsocket(sorter, clientPtr, options) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.FFIMessage.create({
            connectWebsocket: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.ConnectWebsocket.create({
                address: options.Address
            })
        }),
        id: 1
    });
    return sendClientMessage(sorter, clientPtr, msg);
}
function disconnect(sorter, clientPtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.FFIMessage.create({
            disconnect: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.Disconnect.create({})
        })
    });
    return sendClientMessage(sorter, clientPtr, msg);
}
function startScanning(sorter, clientPtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.FFIMessage.create({
            startScanning: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.StartScanning.create({})
        }),
        id: 1
    });
    return sendClientMessage(sorter, clientPtr, msg);
}
function stopScanning(sorter, clientPtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.FFIMessage.create({
            stopScanning: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.StopScanning.create({})
        }),
        id: 1
    });
    return sendClientMessage(sorter, clientPtr, msg);
}
function stopAllDevices(sorter, clientPtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.FFIMessage.create({
            stopAllDevices: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].ClientMessage.StopAllDevices.create({})
        }),
        id: 1
    });
    return sendClientMessage(sorter, clientPtr, msg);
}
function sendDeviceMessage(sorter, devicePtr, message) {
    let promise = sorter.PrepareOutgoingMessage(message);
    let buffer = Buffer.from(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.encode(message).finish());
    buttplug_parse_device_message(devicePtr, buffer);
    return promise;
}
function vibrate(sorter, devicePtr, speeds) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            vibrateCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.VibrateCmd.create({
                speeds: speeds
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function rotate(sorter, devicePtr, rotations) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            rotateCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RotateCmd.create({
                rotations: rotations
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function linear(sorter, devicePtr, vectors) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            linearCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.LinearCmd.create({
                movements: vectors
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function stopDevice(sorter, devicePtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            stopDeviceCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.StopDeviceCmd.create({})
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function batteryLevel(sorter, devicePtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            batteryLevelCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.BatteryLevelCmd.create({})
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function rssiLevel(sorter, devicePtr) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            rssiLevelCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RSSILevelCmd.create({})
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function rawRead(sorter, devicePtr, endpoint, expectedLength, timeout) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            rawReadCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RawReadCmd.create({
                endpoint: endpoint,
                expectedLength: expectedLength,
                timeout: timeout
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function rawWrite(sorter, devicePtr, endpoint, data, writeWithResponse) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            rawWriteCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RawWriteCmd.create({
                endpoint: endpoint,
                data: data,
                writeWithResponse: writeWithResponse
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function rawSubscribe(sorter, devicePtr, endpoint) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            rawSubscribeCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RawSubscribeCmd.create({
                endpoint: endpoint
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function rawUnsubscribe(sorter, devicePtr, endpoint) {
    let msg = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.create({
        message: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.FFIMessage.create({
            rawUnsubscribeCmd: _buttplug_ffi__WEBPACK_IMPORTED_MODULE_0__["Buttplug"].DeviceMessage.RawUnsubscribeCmd.create({
                endpoint: endpoint
            })
        }),
        id: 1
    });
    return sendDeviceMessage(sorter, devicePtr, msg);
}
function createClientPtr(eventCallback, clientName) {
    return buttplug_create_client(eventCallback, clientName);
}
function createDevicePtr(clientPtr, deviceIndex) {
    return buttplug_create_device(clientPtr, deviceIndex);
}
function freeClientPtr(clientPtr) {
    buttplug_free_client(clientPtr);
}
function freeDevicePtr(devicePtr) {
    buttplug_free_device(devicePtr);
}
function activateConsoleLogger(logLevel) {
    buttplug_activate_env_logger(logLevel);
}
/*
export function addLogHandler(logCallback: Function, logLevel: "error" | "warn" | "info" | "debug" | "trace", useJSON: boolean) {
  buttplug_add_log_handler(logCallback, logLevel, useJSON);
}
*/ 

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: ButtplugClient, ButtplugEmbeddedConnectorOptions, ButtplugWebsocketConnectorOptions, ButtplugDeviceMessageType, MessageAttributes, VibrationCmd, RotationCmd, VectorCmd, ButtplugClientDevice, ButtplugError, ButtplugHandshakeError, ButtplugDeviceError, ButtplugMessageError, ButtplugPingError, ButtplugUnknownError, ButtplugClientConnectorError, convertPBufError, buttplugInit, connectEmbedded, connectWebsocket, disconnect, startScanning, stopScanning, stopAllDevices, vibrate, rotate, linear, stopDevice, batteryLevel, rssiLevel, rawRead, rawWrite, rawSubscribe, rawUnsubscribe, createClientPtr, createDevicePtr, freeClientPtr, freeDevicePtr, activateConsoleLogger, ButtplugMessageSorter, Endpoint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Endpoint", function() { return Endpoint; });
/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ "./src/client.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugClient", function() { return _client__WEBPACK_IMPORTED_MODULE_0__["ButtplugClient"]; });

/* harmony import */ var _connectors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./connectors */ "./src/connectors.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugEmbeddedConnectorOptions", function() { return _connectors__WEBPACK_IMPORTED_MODULE_1__["ButtplugEmbeddedConnectorOptions"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugWebsocketConnectorOptions", function() { return _connectors__WEBPACK_IMPORTED_MODULE_1__["ButtplugWebsocketConnectorOptions"]; });

/* harmony import */ var _device__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./device */ "./src/device.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugDeviceMessageType", function() { return _device__WEBPACK_IMPORTED_MODULE_2__["ButtplugDeviceMessageType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MessageAttributes", function() { return _device__WEBPACK_IMPORTED_MODULE_2__["MessageAttributes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VibrationCmd", function() { return _device__WEBPACK_IMPORTED_MODULE_2__["VibrationCmd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RotationCmd", function() { return _device__WEBPACK_IMPORTED_MODULE_2__["RotationCmd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VectorCmd", function() { return _device__WEBPACK_IMPORTED_MODULE_2__["VectorCmd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugClientDevice", function() { return _device__WEBPACK_IMPORTED_MODULE_2__["ButtplugClientDevice"]; });

/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors */ "./src/errors.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugHandshakeError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugHandshakeError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugDeviceError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugDeviceError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugMessageError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugMessageError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugPingError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugPingError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugUnknownError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugUnknownError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugClientConnectorError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["ButtplugClientConnectorError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "convertPBufError", function() { return _errors__WEBPACK_IMPORTED_MODULE_3__["convertPBufError"]; });

/* harmony import */ var _ffi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ffi */ "./src/ffi.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buttplugInit", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["buttplugInit"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectEmbedded", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["connectEmbedded"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectWebsocket", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["connectWebsocket"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "disconnect", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["disconnect"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "startScanning", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["startScanning"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stopScanning", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["stopScanning"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stopAllDevices", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["stopAllDevices"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "vibrate", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["vibrate"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["rotate"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linear", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["linear"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stopDevice", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["stopDevice"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "batteryLevel", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["batteryLevel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rssiLevel", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["rssiLevel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawRead", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["rawRead"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawWrite", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["rawWrite"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawSubscribe", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["rawSubscribe"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawUnsubscribe", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["rawUnsubscribe"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createClientPtr", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["createClientPtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createDevicePtr", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["createDevicePtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "freeClientPtr", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["freeClientPtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "freeDevicePtr", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["freeDevicePtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "activateConsoleLogger", function() { return _ffi__WEBPACK_IMPORTED_MODULE_4__["activateConsoleLogger"]; });

/* harmony import */ var _sorter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sorter */ "./src/sorter.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugMessageSorter", function() { return _sorter__WEBPACK_IMPORTED_MODULE_5__["ButtplugMessageSorter"]; });

/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./buttplug_ffi */ "./src/buttplug_ffi.js");
/* harmony import */ var _buttplug_ffi__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_buttplug_ffi__WEBPACK_IMPORTED_MODULE_6__);
/*!
 * Buttplug WASM Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright 2020-2021 (c) Nonpolynomial Labs LLC. All rights reserved.
 */







var Endpoint = _buttplug_ffi__WEBPACK_IMPORTED_MODULE_6__["Buttplug"].Endpoint;


/***/ }),

/***/ "./src/sorter.ts":
/*!***********************!*\
  !*** ./src/sorter.ts ***!
  \***********************/
/*! exports provided: ButtplugMessageSorter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtplugMessageSorter", function() { return ButtplugMessageSorter; });
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ "./src/errors.ts");
/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */

class ButtplugMessageSorter {
    constructor() {
        this._counter = 1;
        this._waitingMsgs = new Map();
    }
    // One of the places we should actually return a promise, as we need to store
    // them while waiting for them to return across the line.
    // tslint:disable:promise-function-async
    PrepareOutgoingMessage(aMsg) {
        aMsg.id = this._counter;
        // Always increment last, otherwise we might lose sync
        this._counter += 1;
        let res;
        let rej;
        const msgPromise = new Promise((resolve, reject) => { res = resolve; rej = reject; });
        this._waitingMsgs.set(aMsg.id, [res, rej]);
        return msgPromise;
    }
    ParseIncomingMessages(msg) {
        var _a, _b, _c, _d;
        if (msg.id !== 0 && this._waitingMsgs.has(msg.id)) {
            const [res, rej] = this._waitingMsgs.get(msg.id);
            // If we've gotten back an error, reject the related promise using a
            // ButtplugException derived type.
            if ((_b = (_a = msg.message) === null || _a === void 0 ? void 0 : _a.serverMessage) === null || _b === void 0 ? void 0 : _b.error) {
                rej(Object(_errors__WEBPACK_IMPORTED_MODULE_0__["convertPBufError"])((_d = (_c = msg.message) === null || _c === void 0 ? void 0 : _c.serverMessage) === null || _d === void 0 ? void 0 : _d.error, msg.id));
                return null;
            }
            res(msg);
            return null;
        }
        return msg;
    }
}


/***/ }),

/***/ "./src/web_index.ts":
/*!**************************!*\
  !*** ./src/web_index.ts ***!
  \**************************/
/*! exports provided: ButtplugClient, ButtplugEmbeddedConnectorOptions, ButtplugWebsocketConnectorOptions, ButtplugDeviceMessageType, MessageAttributes, VibrationCmd, RotationCmd, VectorCmd, ButtplugClientDevice, ButtplugError, ButtplugHandshakeError, ButtplugDeviceError, ButtplugMessageError, ButtplugPingError, ButtplugUnknownError, ButtplugClientConnectorError, convertPBufError, buttplugInit, connectEmbedded, connectWebsocket, disconnect, startScanning, stopScanning, stopAllDevices, vibrate, rotate, linear, stopDevice, batteryLevel, rssiLevel, rawRead, rawWrite, rawSubscribe, rawUnsubscribe, createClientPtr, createDevicePtr, freeClientPtr, freeDevicePtr, activateConsoleLogger, ButtplugMessageSorter, Endpoint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./src/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugClient", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugEmbeddedConnectorOptions", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugEmbeddedConnectorOptions"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugWebsocketConnectorOptions", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugWebsocketConnectorOptions"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugDeviceMessageType", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugDeviceMessageType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MessageAttributes", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["MessageAttributes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VibrationCmd", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["VibrationCmd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RotationCmd", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["RotationCmd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VectorCmd", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["VectorCmd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugClientDevice", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugClientDevice"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugHandshakeError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugHandshakeError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugDeviceError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugDeviceError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugMessageError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugMessageError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugPingError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugPingError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugUnknownError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugUnknownError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugClientConnectorError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugClientConnectorError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "convertPBufError", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["convertPBufError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buttplugInit", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["buttplugInit"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectEmbedded", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["connectEmbedded"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectWebsocket", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["connectWebsocket"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "disconnect", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["disconnect"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "startScanning", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["startScanning"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stopScanning", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["stopScanning"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stopAllDevices", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["stopAllDevices"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "vibrate", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["vibrate"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["rotate"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linear", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["linear"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stopDevice", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["stopDevice"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "batteryLevel", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["batteryLevel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rssiLevel", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["rssiLevel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawRead", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["rawRead"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawWrite", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["rawWrite"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawSubscribe", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["rawSubscribe"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rawUnsubscribe", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["rawUnsubscribe"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createClientPtr", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["createClientPtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createDevicePtr", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["createDevicePtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "freeClientPtr", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["freeClientPtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "freeDevicePtr", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["freeDevicePtr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "activateConsoleLogger", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["activateConsoleLogger"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtplugMessageSorter", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["ButtplugMessageSorter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Endpoint", function() { return _index__WEBPACK_IMPORTED_MODULE_0__["Endpoint"]; });

/*!
 * Buttplug WASM Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright 2020-2021 (c) Nonpolynomial Labs LLC. All rights reserved.
 */
var scripts = document.getElementsByTagName("script");
var lastScript = 'https://cdn.jsdelivr.net/npm/buttplug@latest/dist/web/buttplug.js';
__webpack_require__.p = lastScript.substr(0, lastScript.lastIndexOf('/') + 1);



/***/ })

/******/ });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9CdXR0cGx1Zy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvQHByb3RvYnVmanMvYXNwcm9taXNlL2luZGV4LmpzIiwid2VicGFjazovL0J1dHRwbHVnLy4vbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2Jhc2U2NC9pbmRleC5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9AcHJvdG9idWZqcy9ldmVudGVtaXR0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvQHByb3RvYnVmanMvZmxvYXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvQHByb3RvYnVmanMvaW5xdWlyZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9AcHJvdG9idWZqcy9wb29sL2luZGV4LmpzIiwid2VicGFjazovL0J1dHRwbHVnLy4vbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL3V0ZjgvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvYmFzZTY0LWpzL2luZGV4LmpzIiwid2VicGFjazovL0J1dHRwbHVnLy4vbm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwid2VicGFjazovL0J1dHRwbHVnLy4vbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL21pbmltYWwuanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvcHJvdG9idWZqcy9zcmMvaW5kZXgtbWluaW1hbC5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy9yZWFkZXIuanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvcHJvdG9idWZqcy9zcmMvcmVhZGVyX2J1ZmZlci5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy9yb290cy5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy9ycGMuanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvcHJvdG9idWZqcy9zcmMvcnBjL3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvcHJvdG9idWZqcy9zcmMvdXRpbC9sb25nYml0cy5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy91dGlsL21pbmltYWwuanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9ub2RlX21vZHVsZXMvcHJvdG9idWZqcy9zcmMvd3JpdGVyLmpzIiwid2VicGFjazovL0J1dHRwbHVnLy4vbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvc3JjL3dyaXRlcl9idWZmZXIuanMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovL0J1dHRwbHVnLy4vc3JjL2J1dHRwbHVnX2ZmaS5qcyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL3NyYy9jbGllbnQudHMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9zcmMvY29ubmVjdG9ycy50cyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL3NyYy9kZXZpY2UudHMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9zcmMvZXJyb3JzLnRzIiwid2VicGFjazovL0J1dHRwbHVnLy4vc3JjL2ZmaS50cyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9CdXR0cGx1Zy8uL3NyYy9zb3J0ZXIudHMiLCJ3ZWJwYWNrOi8vQnV0dHBsdWcvLi9zcmMvd2ViX2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO1FDVkE7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQSxRQUFRLG9CQUFvQjtRQUM1QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSxJQUFJO1FBQ0o7UUFDQTtRQUNBOztRQUVBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7OztRQUlBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUEsNkJBQTZCLDBCQUEwQjs7UUFFdkQ7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFDQTtRQUNBLE9BQU87UUFDUDtRQUNBO1FBQ0EsT0FBTztRQUNQO1FBQ0E7UUFDQSxPQUFPO1FBQ1A7UUFD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bUJBQW1CLG1CQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN4R1k7O0FBRVo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQyxTQUFTO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFNBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEMsVUFBVTtBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVZOztBQUVaLGFBQWEsbUJBQU8sQ0FBQyxvREFBVztBQUNoQyxjQUFjLG1CQUFPLENBQUMsZ0RBQVM7QUFDL0IsY0FBYyxtQkFBTyxDQUFDLGdEQUFTOztBQUUvQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1EQUFtRDtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx1Q0FBdUMsU0FBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxFQUFFO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0EscUJBQXFCLGVBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVELE9BQU87QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDNXZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFD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VUFBVTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxtQkFBbUI7QUFDOUIsYUFBYSxjQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLEtBQUs7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtCQUFrQjtBQUN6Qyx5QkFBeUIsbUNBQW1DO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBeUM7QUFDaEUsdUJBQXVCLDZCQUE2QjtBQUNwRCx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7O0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQkFBa0I7QUFDekMseUJBQXlCLGtDQUFrQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQ0FBa0M7QUFDekQsdUJBQXVCLDZCQUE2QjtBQUNwRCx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdDQUFnQztBQUN0RCxzQkFBc0IsbUNBQW1DO0FBQ3pELHNCQUFzQiw4Q0FBOEM7QUFDcEUsc0JBQXNCLHlDQUF5QztBQUMvRCxzQkFBc0IsMkNBQTJDO0FBQ2pFLHNCQUFzQix3Q0FBd0M7QUFDOUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlCQUF5QjtBQUM1QztBQUNBO0FBQ0E7QUFDQSwrREFBK0QsaUJBQWlCO0FBQ2hGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLDBDQUEwQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLDZDQUE2QztBQUNqRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLHdEQUF3RDtBQUM1RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFtRDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFxRDtBQUN6RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFrRDtBQUN0RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IscUZBQXFGO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUMscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZFQUE2RSwyQ0FBMkM7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHdCQUF3QjtBQUMzQyxtQkFBbUIsaUJBQWlCO0FBQ3BDLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0ZBQStGLDJDQUEyQztBQUMxSTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsd0JBQXdCO0FBQzNDLG1CQUFtQixpQkFBaUI7QUFDcEMscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRCQUE0QjtBQUMvQyxtQkFBbUIsT0FBTztBQUMxQixxQkFBcUIsdUJBQXVCO0FBQzVDLG9CQUFvQixNQUFNO0FBQzFCLG9CQUFvQiw2QkFBNkI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEJBQTRCO0FBQy9DLHFCQUFxQix1QkFBdUI7QUFDNUMsb0JBQW9CLE1BQU07QUFDMUIsb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckMscUJBQXFCLFlBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQyxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDLG1CQUFtQiw2QkFBNkI7QUFDaEQscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsc0JB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNkJBQTZCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw2QkFBNkI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0M7QUFDdkQsdUJBQXVCLDZCQUE2QjtBQUNwRCx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFD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cyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImJ1dHRwbHVnLWNvbW1vbmpzXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkJ1dHRwbHVnXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcblxuIFx0XHR2YXIgcHJlZmV0Y2hDaHVua3MgPSBkYXRhWzNdIHx8IFtdO1xuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcbiBcdFx0Ly8gY2h1bmsgcHJlZmV0Y2hpbmcgZm9yIGphdmFzY3JpcHRcbiBcdFx0cHJlZmV0Y2hDaHVua3MuZm9yRWFjaChmdW5jdGlvbihjaHVua0lkKSB7XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSB1bmRlZmluZWQpIHtcbiBcdFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IG51bGw7XG4gXHRcdFx0XHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcblxuIFx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcbiBcdFx0XHRcdFx0bGluay5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGxpbmsucmVsID0gXCJwcmVmZXRjaFwiO1xuIFx0XHRcdFx0bGluay5hcyA9IFwic2NyaXB0XCI7XG4gXHRcdFx0XHRsaW5rLmhyZWYgPSBqc29ucFNjcmlwdFNyYyhjaHVua0lkKTtcbiBcdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gXHRcdFx0fVxuIFx0XHR9KTtcbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdH07XG5cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdFwibWFpblwiOiAwXG4gXHR9O1xuXG5cblxuIFx0Ly8gc2NyaXB0IHBhdGggZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIGpzb25wU2NyaXB0U3JjKGNodW5rSWQpIHtcbiBcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYnV0dHBsdWcuanNcIlxuIFx0fVxuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIHdhc20gbW9kdWxlc1xuIFx0dmFyIGluc3RhbGxlZFdhc21Nb2R1bGVzID0ge307XG5cbiBcdGZ1bmN0aW9uIHByb21pc2VSZXNvbHZlKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH1cblxuIFx0dmFyIHdhc21JbXBvcnRPYmplY3RzID0ge1xuIFx0XHRcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcud2FzbVwiOiBmdW5jdGlvbigpIHtcbiBcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XCIuL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiOiB7XG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9vYmplY3RfZHJvcF9yZWZcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX29iamVjdF9jbG9uZV9yZWZcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fb2JqZWN0X2Nsb25lX3JlZlwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbG9nX2U2YmJjZmRmZjgzMzc1NzNcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2xvZ19lNmJiY2ZkZmY4MzM3NTczXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX3N0cmluZ19uZXdcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fc3RyaW5nX25ld1wiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9jYl9kcm9wXCI6IGZ1bmN0aW9uKHAwaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diaW5kZ2VuX2NiX2Ryb3BcIl0ocDBpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX25ld181OWNiNzRlNDIzNzU4ZWRlXCI6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfbmV3XzU5Y2I3NGU0MjM3NThlZGVcIl0oKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zdGFja181NThiYTU5MTdiNDY2ZWRkXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19zdGFja181NThiYTU5MTdiNDY2ZWRkXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19lcnJvcl80YmI2YzJhOTc0MDcxMjlhXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19lcnJvcl80YmI2YzJhOTc0MDcxMjlhXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19sb2dfYjdkY2IzZmFjYzczMTY2ZFwiOiBmdW5jdGlvbihwMGkzMixwMWkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfbG9nX2I3ZGNiM2ZhY2M3MzE2NmRcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX2xvZ185NjI5NWQ2OGFiODMzOGRmXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyLHAzaTMyLHA0aTMyLHA1aTMyLHA2aTMyLHA3aTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19sb2dfOTYyOTVkNjhhYjgzMzhkZlwiXShwMGkzMixwMWkzMixwMmkzMixwM2kzMixwNGkzMixwNWkzMixwNmkzMixwN2kzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbWFya181NWM1ZWNmZTUwOWRlYjZhXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19tYXJrXzU1YzVlY2ZlNTA5ZGViNmFcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX21lYXN1cmVfNjA4NTYzMTA2ZDcwZDQ4YVwiOiBmdW5jdGlvbihwMGkzMixwMWkzMixwMmkzMixwM2kzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfbWVhc3VyZV82MDg1NjMxMDZkNzBkNDhhXCJdKHAwaTMyLHAxaTMyLHAyaTMyLHAzaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19XaW5kb3dfZjgyNmExZGVjMTYzYmFjYlwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfV2luZG93X2Y4MjZhMWRlYzE2M2JhY2JcIl0ocDBpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JpbmRnZW5faXNfdW5kZWZpbmVkXCI6IGZ1bmN0aW9uKHAwaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diaW5kZ2VuX2lzX3VuZGVmaW5lZFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfV29ya2VyR2xvYmFsU2NvcGVfOTY3ZDE4NjE1NTE4M2QzOFwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfV29ya2VyR2xvYmFsU2NvcGVfOTY3ZDE4NjE1NTE4M2QzOFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfaW5zdGFuY2VvZl9XaW5kb3dfNTk5MzIzMGU3MzMxZjA5OFwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfaW5zdGFuY2VvZl9XaW5kb3dfNTk5MzIzMGU3MzMxZjA5OFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbmF2aWdhdG9yX2RhNTAxZTBiYWFiNzdkNjRcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX25hdmlnYXRvcl9kYTUwMWUwYmFhYjc3ZDY0XCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19jbGVhclRpbWVvdXRfNGZlNzFmNzIxZDA2MDZhZlwiOiBmdW5jdGlvbihwMGkzMixwMWkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfY2xlYXJUaW1lb3V0XzRmZTcxZjcyMWQwNjA2YWZcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3NldFRpbWVvdXRfZDc1MjQ2ZTc3ZTk5M2M1ZFwiOiBmdW5jdGlvbihwMGkzMixwMWkzMixwMmkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc2V0VGltZW91dF9kNzUyNDZlNzdlOTkzYzVkXCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19nZXRDaGFyYWN0ZXJpc3RpY19jN2Y5ZGNjNzJmN2E4NmY2XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19nZXRDaGFyYWN0ZXJpc3RpY19jN2Y5ZGNjNzJmN2E4NmY2XCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ192YWx1ZV9jZTVlNGZlNzQyZDM2YTFjXCI6IGZ1bmN0aW9uKHAwaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ192YWx1ZV9jZTVlNGZlNzQyZDM2YTFjXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zZXRvbmNoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkX2VjZTYwZWRhODI4Y2IwZWZcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3NldG9uY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWRfZWNlNjBlZGE4MjhjYjBlZlwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfcmVhZFZhbHVlXzk4ODQ0MDAzNGEwZTEyY2VcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3JlYWRWYWx1ZV85ODg0NDAwMzRhMGUxMmNlXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zdGFydE5vdGlmaWNhdGlvbnNfYzg4ZWViOTIwZDFlYjQ1Y1wiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc3RhcnROb3RpZmljYXRpb25zX2M4OGVlYjkyMGQxZWI0NWNcIl0ocDBpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3dyaXRlVmFsdWVfMWM0NTFlMGRhOGM1NmNhOVwiOiBmdW5jdGlvbihwMGkzMixwMWkzMixwMmkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfd3JpdGVWYWx1ZV8xYzQ1MWUwZGE4YzU2Y2E5XCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ190YXJnZXRfOTBiMTZmYWNjMTIyMDYyZlwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfdGFyZ2V0XzkwYjE2ZmFjYzEyMjA2MmZcIl0ocDBpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3JlcXVlc3REZXZpY2VfMmQxYjcxY2MyOGE2N2E1YVwiOiBmdW5jdGlvbihwMGkzMixwMWkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfcmVxdWVzdERldmljZV8yZDFiNzFjYzI4YTY3YTVhXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19pZF80NWVjZjMyNThjOWY3ZGQ3XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19pZF80NWVjZjMyNThjOWY3ZGQ3XCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19uYW1lX2ZlOWVlMTdlODIxZWNlYTVcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX25hbWVfZmU5ZWUxN2U4MjFlY2VhNVwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfZ2F0dF85OWRmMmU1MzgwMDk3NDg0XCI6IGZ1bmN0aW9uKHAwaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19nYXR0Xzk5ZGYyZTUzODAwOTc0ODRcIl0ocDBpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3NldG9uZ2F0dHNlcnZlcmRpc2Nvbm5lY3RlZF84MGU3OGE5ZDg2YWJkZjdiXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19zZXRvbmdhdHRzZXJ2ZXJkaXNjb25uZWN0ZWRfODBlNzhhOWQ4NmFiZGY3YlwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfY2xlYXJUaW1lb3V0X2FmNTRhYzM0ZWZlMDA3NzBcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2NsZWFyVGltZW91dF9hZjU0YWMzNGVmZTAwNzcwXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zZXRUaW1lb3V0X2M1YmU0YzA1NGM0ZDdkYTVcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIscDJpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3NldFRpbWVvdXRfYzViZTRjMDU0YzRkN2RhNVwiXShwMGkzMixwMWkzMixwMmkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfYmx1ZXRvb3RoXzE4ZWUwNWRmMDNhZjIzNTJcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2JsdWV0b290aF8xOGVlMDVkZjAzYWYyMzUyXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zZXRvbm9wZW5fYzM5NzVhNGY4OTVhMDUyYVwiOiBmdW5jdGlvbihwMGkzMixwMWkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc2V0b25vcGVuX2MzOTc1YTRmODk1YTA1MmFcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3NldG9uZXJyb3JfYWRkMGEyOTMxNTgwMTJmY1wiOiBmdW5jdGlvbihwMGkzMixwMWkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc2V0b25lcnJvcl9hZGQwYTI5MzE1ODAxMmZjXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zZXRvbm1lc3NhZ2VfMGQ0MmM3OWJlMDZkZTg0ZlwiOiBmdW5jdGlvbihwMGkzMixwMWkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc2V0b25tZXNzYWdlXzBkNDJjNzliZTA2ZGU4NGZcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX25ld19mZDlmM2JmYjg5ZDk2MzYyXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19uZXdfZmQ5ZjNiZmI4OWQ5NjM2MlwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfY2xvc2VfMzc5N2Q0ZmFlOTMyYzliOVwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfY2xvc2VfMzc5N2Q0ZmFlOTMyYzliOVwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193Ymdfc2VuZF9jYTg1YjBlNjc5OTgwM2VmXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19zZW5kX2NhODViMGU2Nzk5ODAzZWZcIl0ocDBpMzIscDFpMzIscDJpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX2Nvbm5lY3RfZDMxYWZhMDc2MGUyMjk0ZVwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfY29ubmVjdF9kMzFhZmEwNzYwZTIyOTRlXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19nZXRQcmltYXJ5U2VydmljZV85MDNlMTk4ZTYwMDk3YjRhXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19nZXRQcmltYXJ5U2VydmljZV85MDNlMTk4ZTYwMDk3YjRhXCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19kYXRhXzQzN2U3NGI4MzUyNDFlNzBcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2RhdGFfNDM3ZTc0YjgzNTI0MWU3MFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfY2FsbF9lNTg0N2QxNWNjMjI4ZTRmXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19jYWxsX2U1ODQ3ZDE1Y2MyMjhlNGZcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX25ld183Yzk5NWYyYWRlYmE2ZmI1XCI6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfbmV3XzdjOTk1ZjJhZGViYTZmYjVcIl0oKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19wdXNoXzNmN2M3NmI1ODkxOWNlMGRcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3B1c2hfM2Y3Yzc2YjU4OTE5Y2UwZFwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfYnVmZmVyXzMyMjk2YzY3ODI4ZmVlNmNcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2J1ZmZlcl8zMjI5NmM2NzgyOGZlZTZjXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19ieXRlTGVuZ3RoX2RhOTQ4ZTFhZmQ4M2M4ZjhcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2J5dGVMZW5ndGhfZGE5NDhlMWFmZDgzYzhmOFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbmV3bm9hcmdzXzIzNDliYTZhZWZlNzIzNzZcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX25ld25vYXJnc18yMzQ5YmE2YWVmZTcyMzc2XCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19jYWxsX2Q2M2VkYjg1N2VkZjE2ZjZcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIscDJpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2NhbGxfZDYzZWRiODU3ZWRmMTZmNlwiXShwMGkzMixwMWkzMixwMmkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbmV3XzU5OTg2Yzg3MzFiZWJhYTFcIjogZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19uZXdfNTk5ODZjODczMWJlYmFhMVwiXSgpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3Jlc29sdmVfZTA2OTAxNDM0MDZjODhjYlwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfcmVzb2x2ZV9lMDY5MDE0MzQwNmM4OGNiXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ190aGVuXzljYWYyMzEyMmU0ZmQ1ZDNcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3RoZW5fOWNhZjIzMTIyZTRmZDVkM1wiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfdGhlbl8xNjY2M2ZhZjYwZmZiZTk1XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ190aGVuXzE2NjYzZmFmNjBmZmJlOTVcIl0ocDBpMzIscDFpMzIscDJpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3NlbGZfMzVhMGZkYTNlYjk2NWFiZVwiOiBmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3NlbGZfMzVhMGZkYTNlYjk2NWFiZVwiXSgpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX3dpbmRvd184OGE2Zjg4ZGQzYTQ3NGYxXCI6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfd2luZG93Xzg4YTZmODhkZDNhNDc0ZjFcIl0oKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19nbG9iYWxUaGlzXzFkODQzYzRhZDdiNmExZjVcIjogZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19nbG9iYWxUaGlzXzFkODQzYzRhZDdiNmExZjVcIl0oKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19nbG9iYWxfMjk0Y2U3MDQ0OGU4ZmJiZlwiOiBmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2dsb2JhbF8yOTRjZTcwNDQ4ZThmYmJmXCJdKCk7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfYnVmZmVyXzBiZTlmYjQyNmYyZGQ4MmJcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX2J1ZmZlcl8wYmU5ZmI0MjZmMmRkODJiXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19uZXd3aXRoYnl0ZW9mZnNldGFuZGxlbmd0aF84NWI3Y2U4MmIwMDFlYTA4XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19uZXd3aXRoYnl0ZW9mZnNldGFuZGxlbmd0aF84NWI3Y2U4MmIwMDFlYTA4XCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19sZW5ndGhfM2E1MTM4ZjQ2NWI5NzFhZFwiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfbGVuZ3RoXzNhNTEzOGY0NjViOTcxYWRcIl0ocDBpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX25ld180ZThkMThkYmY5Y2Q1MjQwXCI6IGZ1bmN0aW9uKHAwaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19uZXdfNGU4ZDE4ZGJmOWNkNTI0MFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193Ymdfc2V0XzQ3NjlkZTMwMWViNTIxZDdcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIscDJpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JnX3NldF80NzY5ZGUzMDFlYjUyMWQ3XCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19uZXd3aXRoYnl0ZW9mZnNldF8wYTZiMGNlOWQ0NTI3MGMzXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19uZXd3aXRoYnl0ZW9mZnNldF8wYTZiMGNlOWQ0NTI3MGMzXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diZ19zZXRfN2UxNWQzNjU2MzA3MmIxOVwiOiBmdW5jdGlvbihwMGkzMixwMWkzMixwMmkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc2V0XzdlMTVkMzY1NjMwNzJiMTlcIl0ocDBpMzIscDFpMzIscDJpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX2dldFJhbmRvbVZhbHVlc18xMTExNWE4NTI3MjlmNGU4XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19nZXRSYW5kb21WYWx1ZXNfMTExMTVhODUyNzI5ZjRlOFwiXShwMGkzMixwMWkzMixwMmkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfcmFuZG9tRmlsbFN5bmNfYTJkMDAyZmMzYjhlMzBmN1wiOiBmdW5jdGlvbihwMGkzMixwMWkzMixwMmkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfcmFuZG9tRmlsbFN5bmNfYTJkMDAyZmMzYjhlMzBmN1wiXShwMGkzMixwMWkzMixwMmkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193Ymdfc2VsZl9hNWYwZmU1NTY0NzgyNzg3XCI6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc2VsZl9hNWYwZmU1NTY0NzgyNzg3XCJdKCk7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193Ymdfc3RhdGljX2FjY2Vzc29yX01PRFVMRV83ZjI3OGM1NDQ2YzEyNmM4XCI6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193Ymdfc3RhdGljX2FjY2Vzc29yX01PRFVMRV83ZjI3OGM1NDQ2YzEyNmM4XCJdKCk7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfcmVxdWlyZV8yOWU1OGI1ZjZmMTMzNTYzXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19yZXF1aXJlXzI5ZTU4YjVmNmYxMzM1NjNcIl0ocDBpMzIscDFpMzIscDJpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JnX2NyeXB0b19kOTE0MjllYTFhMDg3ZjcwXCI6IGZ1bmN0aW9uKHAwaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diZ19jcnlwdG9fZDkxNDI5ZWExYTA4N2Y3MFwiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbXNDcnlwdG9fYzhiZTJiYjRmYzdkOGNkM1wiOiBmdW5jdGlvbihwMGkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmdfbXNDcnlwdG9fYzhiZTJiYjRmYzdkOGNkM1wiXShwMGkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9pc19zdHJpbmdcIjogZnVuY3Rpb24ocDBpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5faXNfc3RyaW5nXCJdKHAwaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX3N0cmluZ19nZXRcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fc3RyaW5nX2dldFwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9kZWJ1Z19zdHJpbmdcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fZGVidWdfc3RyaW5nXCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX3Rocm93XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diaW5kZ2VuX3Rocm93XCJdKHAwaTMyLHAxaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX21lbW9yeVwiOiBmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fbWVtb3J5XCJdKCk7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9jbG9zdXJlX3dyYXBwZXI2NzdcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIscDJpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fY2xvc3VyZV93cmFwcGVyNjc3XCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX2Nsb3N1cmVfd3JhcHBlcjY3OVwiOiBmdW5jdGlvbihwMGkzMixwMWkzMixwMmkzMikge1xuIFx0XHRcdFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy5qc1wiXS5leHBvcnRzW1wiX193YmluZGdlbl9jbG9zdXJlX3dyYXBwZXI2NzlcIl0ocDBpMzIscDFpMzIscDJpMzIpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcIl9fd2JpbmRnZW5fY2xvc3VyZV93cmFwcGVyNjgxXCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diaW5kZ2VuX2Nsb3N1cmVfd3JhcHBlcjY4MVwiXShwMGkzMixwMWkzMixwMmkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9jbG9zdXJlX3dyYXBwZXI2ODNcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIscDJpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fY2xvc3VyZV93cmFwcGVyNjgzXCJdKHAwaTMyLHAxaTMyLHAyaTMyKTtcbiBcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX2Nsb3N1cmVfd3JhcHBlcjI0OTNcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIscDJpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1tcIi4vc3JjL2J1dHRwbHVnLXJzLWZmaS9idXR0cGx1Z19yc19mZmlfYmcuanNcIl0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fY2xvc3VyZV93cmFwcGVyMjQ5M1wiXShwMGkzMixwMWkzMixwMmkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmluZGdlbl9jbG9zdXJlX3dyYXBwZXI0MjY4XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyLHAyaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbXCIuL3NyYy9idXR0cGx1Zy1ycy1mZmkvYnV0dHBsdWdfcnNfZmZpX2JnLmpzXCJdLmV4cG9ydHNbXCJfX3diaW5kZ2VuX2Nsb3N1cmVfd3JhcHBlcjQyNjhcIl0ocDBpMzIscDFpMzIscDJpMzIpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fTtcbiBcdFx0fSxcbiBcdH07XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQpIHtcbiBcdFx0dmFyIHByb21pc2VzID0gW107XG5cblxuIFx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cbiBcdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG4gXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuIFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF07XG4gXHRcdFx0XHR9KTtcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cbiBcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcbiBcdFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRcdHZhciBvblNjcmlwdENvbXBsZXRlO1xuXG4gXHRcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4gXHRcdFx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcbiBcdFx0XHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG4gXHRcdFx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdHNjcmlwdC5zcmMgPSBqc29ucFNjcmlwdFNyYyhjaHVua0lkKTtcblxuIFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuIFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG4gXHRcdFx0XHRvblNjcmlwdENvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gXHRcdFx0XHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cbiBcdFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcbiBcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuIFx0XHRcdFx0XHR2YXIgY2h1bmsgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHRcdFx0XHRcdGlmKGNodW5rICE9PSAwKSB7XG4gXHRcdFx0XHRcdFx0aWYoY2h1bmspIHtcbiBcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG4gXHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IubWVzc2FnZSA9ICdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJztcbiBcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcbiBcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuIFx0XHRcdFx0XHRcdFx0Y2h1bmtbMV0oZXJyb3IpO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH07XG4gXHRcdFx0XHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiBcdFx0XHRcdFx0b25TY3JpcHRDb21wbGV0ZSh7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSk7XG4gXHRcdFx0XHR9LCAxMjAwMDApO1xuIFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZTtcbiBcdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBGZXRjaCArIGNvbXBpbGUgY2h1bmsgbG9hZGluZyBmb3Igd2ViYXNzZW1ibHlcblxuIFx0XHR2YXIgd2FzbU1vZHVsZXMgPSB7XCIwXCI6W1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy53YXNtXCJdfVtjaHVua0lkXSB8fCBbXTtcblxuIFx0XHR3YXNtTW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uKHdhc21Nb2R1bGVJZCkge1xuIFx0XHRcdHZhciBpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSA9IGluc3RhbGxlZFdhc21Nb2R1bGVzW3dhc21Nb2R1bGVJZF07XG5cbiBcdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiIG9yIFwiYWxyZWFkeSBsb2FkZWRcIi5cbiBcdFx0XHRpZihpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSlcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkV2FzbU1vZHVsZURhdGEpO1xuIFx0XHRcdGVsc2Uge1xuIFx0XHRcdFx0dmFyIGltcG9ydE9iamVjdCA9IHdhc21JbXBvcnRPYmplY3RzW3dhc21Nb2R1bGVJZF0oKTtcbiBcdFx0XHRcdHZhciByZXEgPSBmZXRjaChfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsge1wiLi9zcmMvYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaV9iZy53YXNtXCI6XCIxN2E1ZGMxZGIxMWQ3NGI3OTVkN1wifVt3YXNtTW9kdWxlSWRdICsgXCIubW9kdWxlLndhc21cIik7XG4gXHRcdFx0XHR2YXIgcHJvbWlzZTtcbiBcdFx0XHRcdGlmKGltcG9ydE9iamVjdCBpbnN0YW5jZW9mIFByb21pc2UgJiYgdHlwZW9mIFdlYkFzc2VtYmx5LmNvbXBpbGVTdHJlYW1pbmcgPT09ICdmdW5jdGlvbicpIHtcbiBcdFx0XHRcdFx0cHJvbWlzZSA9IFByb21pc2UuYWxsKFtXZWJBc3NlbWJseS5jb21waWxlU3RyZWFtaW5nKHJlcSksIGltcG9ydE9iamVjdF0pLnRoZW4oZnVuY3Rpb24oaXRlbXMpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoaXRlbXNbMF0sIGl0ZW1zWzFdKTtcbiBcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHR9IGVsc2UgaWYodHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gXHRcdFx0XHRcdHByb21pc2UgPSBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhyZXEsIGltcG9ydE9iamVjdCk7XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHR2YXIgYnl0ZXNQcm9taXNlID0gcmVxLnRoZW4oZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hcnJheUJ1ZmZlcigpOyB9KTtcbiBcdFx0XHRcdFx0cHJvbWlzZSA9IGJ5dGVzUHJvbWlzZS50aGVuKGZ1bmN0aW9uKGJ5dGVzKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGJ5dGVzLCBpbXBvcnRPYmplY3QpO1xuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkV2FzbU1vZHVsZXNbd2FzbU1vZHVsZUlkXSA9IHByb21pc2UudGhlbihmdW5jdGlvbihyZXMpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ud1t3YXNtTW9kdWxlSWRdID0gKHJlcy5pbnN0YW5jZSB8fCByZXMpLmV4cG9ydHM7XG4gXHRcdFx0XHR9KSk7XG4gXHRcdFx0fVxuIFx0XHR9KTtcbiBcdFx0cmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiBcdH07XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gb24gZXJyb3IgZnVuY3Rpb24gZm9yIGFzeW5jIGxvYWRpbmdcbiBcdF9fd2VicGFja19yZXF1aXJlX18ub2UgPSBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyB0aHJvdyBlcnI7IH07XG5cbiBcdC8vIG9iamVjdCB3aXRoIGFsbCBXZWJBc3NlbWJseS5pbnN0YW5jZSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLncgPSB7fTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdHZhciBzdGFydHVwUmVzdWx0ID0gKGZ1bmN0aW9uKCkge1xuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL3dlYl9pbmRleC50c1wiKTtcbiBcdH0pKCk7XG5cbiBcdHdlYnBhY2tKc29ucENhbGxiYWNrKFtbXSwge30sIDAsIFswXV0pO1xuIFx0cmV0dXJuIHN0YXJ0dXBSZXN1bHQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSBhc1Byb21pc2U7XHJcblxyXG4vKipcclxuICogQ2FsbGJhY2sgYXMgdXNlZCBieSB7QGxpbmsgdXRpbC5hc1Byb21pc2V9LlxyXG4gKiBAdHlwZWRlZiBhc1Byb21pc2VDYWxsYmFja1xyXG4gKiBAdHlwZSB7ZnVuY3Rpb259XHJcbiAqIEBwYXJhbSB7RXJyb3J8bnVsbH0gZXJyb3IgRXJyb3IsIGlmIGFueVxyXG4gKiBAcGFyYW0gey4uLip9IHBhcmFtcyBBZGRpdGlvbmFsIGFyZ3VtZW50c1xyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmcm9tIGEgbm9kZS1zdHlsZSBjYWxsYmFjayBmdW5jdGlvbi5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQHBhcmFtIHthc1Byb21pc2VDYWxsYmFja30gZm4gRnVuY3Rpb24gdG8gY2FsbFxyXG4gKiBAcGFyYW0geyp9IGN0eCBGdW5jdGlvbiBjb250ZXh0XHJcbiAqIEBwYXJhbSB7Li4uKn0gcGFyYW1zIEZ1bmN0aW9uIGFyZ3VtZW50c1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTwqPn0gUHJvbWlzaWZpZWQgZnVuY3Rpb25cclxuICovXHJcbmZ1bmN0aW9uIGFzUHJvbWlzZShmbiwgY3R4LyosIHZhcmFyZ3MgKi8pIHtcclxuICAgIHZhciBwYXJhbXMgID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKSxcclxuICAgICAgICBvZmZzZXQgID0gMCxcclxuICAgICAgICBpbmRleCAgID0gMixcclxuICAgICAgICBwZW5kaW5nID0gdHJ1ZTtcclxuICAgIHdoaWxlIChpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGgpXHJcbiAgICAgICAgcGFyYW1zW29mZnNldCsrXSA9IGFyZ3VtZW50c1tpbmRleCsrXTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvcihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBwYXJhbXNbb2Zmc2V0XSA9IGZ1bmN0aW9uIGNhbGxiYWNrKGVyci8qLCB2YXJhcmdzICovKSB7XHJcbiAgICAgICAgICAgIGlmIChwZW5kaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IHBhcmFtcy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1tvZmZzZXQrK10gPSBhcmd1bWVudHNbb2Zmc2V0XTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlLmFwcGx5KG51bGwsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGZuLmFwcGx5KGN0eCB8fCBudWxsLCBwYXJhbXMpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgcGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgYmFzZTY0IGltcGxlbWVudGF0aW9uIGZvciBudW1iZXIgYXJyYXlzLlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAbmFtZXNwYWNlXHJcbiAqL1xyXG52YXIgYmFzZTY0ID0gZXhwb3J0cztcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBieXRlIGxlbmd0aCBvZiBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBCYXNlNjQgZW5jb2RlZCBzdHJpbmdcclxuICogQHJldHVybnMge251bWJlcn0gQnl0ZSBsZW5ndGhcclxuICovXHJcbmJhc2U2NC5sZW5ndGggPSBmdW5jdGlvbiBsZW5ndGgoc3RyaW5nKSB7XHJcbiAgICB2YXIgcCA9IHN0cmluZy5sZW5ndGg7XHJcbiAgICBpZiAoIXApXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB2YXIgbiA9IDA7XHJcbiAgICB3aGlsZSAoLS1wICUgNCA+IDEgJiYgc3RyaW5nLmNoYXJBdChwKSA9PT0gXCI9XCIpXHJcbiAgICAgICAgKytuO1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbChzdHJpbmcubGVuZ3RoICogMykgLyA0IC0gbjtcclxufTtcclxuXHJcbi8vIEJhc2U2NCBlbmNvZGluZyB0YWJsZVxyXG52YXIgYjY0ID0gbmV3IEFycmF5KDY0KTtcclxuXHJcbi8vIEJhc2U2NCBkZWNvZGluZyB0YWJsZVxyXG52YXIgczY0ID0gbmV3IEFycmF5KDEyMyk7XHJcblxyXG4vLyA2NS4uOTAsIDk3Li4xMjIsIDQ4Li41NywgNDMsIDQ3XHJcbmZvciAodmFyIGkgPSAwOyBpIDwgNjQ7KVxyXG4gICAgczY0W2I2NFtpXSA9IGkgPCAyNiA/IGkgKyA2NSA6IGkgPCA1MiA/IGkgKyA3MSA6IGkgPCA2MiA/IGkgLSA0IDogaSAtIDU5IHwgNDNdID0gaSsrO1xyXG5cclxuLyoqXHJcbiAqIEVuY29kZXMgYSBidWZmZXIgdG8gYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmZmVyIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFNvdXJjZSBzdGFydFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIFNvdXJjZSBlbmRcclxuICogQHJldHVybnMge3N0cmluZ30gQmFzZTY0IGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5iYXNlNjQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGJ1ZmZlciwgc3RhcnQsIGVuZCkge1xyXG4gICAgdmFyIHBhcnRzID0gbnVsbCxcclxuICAgICAgICBjaHVuayA9IFtdO1xyXG4gICAgdmFyIGkgPSAwLCAvLyBvdXRwdXQgaW5kZXhcclxuICAgICAgICBqID0gMCwgLy8gZ290byBpbmRleFxyXG4gICAgICAgIHQ7ICAgICAvLyB0ZW1wb3JhcnlcclxuICAgIHdoaWxlIChzdGFydCA8IGVuZCkge1xyXG4gICAgICAgIHZhciBiID0gYnVmZmVyW3N0YXJ0KytdO1xyXG4gICAgICAgIHN3aXRjaCAoaikge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBjaHVua1tpKytdID0gYjY0W2IgPj4gMl07XHJcbiAgICAgICAgICAgICAgICB0ID0gKGIgJiAzKSA8PCA0O1xyXG4gICAgICAgICAgICAgICAgaiA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtbaSsrXSA9IGI2NFt0IHwgYiA+PiA0XTtcclxuICAgICAgICAgICAgICAgIHQgPSAoYiAmIDE1KSA8PCAyO1xyXG4gICAgICAgICAgICAgICAgaiA9IDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtbaSsrXSA9IGI2NFt0IHwgYiA+PiA2XTtcclxuICAgICAgICAgICAgICAgIGNodW5rW2krK10gPSBiNjRbYiAmIDYzXTtcclxuICAgICAgICAgICAgICAgIGogPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpID4gODE5MSkge1xyXG4gICAgICAgICAgICAocGFydHMgfHwgKHBhcnRzID0gW10pKS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjaHVuaykpO1xyXG4gICAgICAgICAgICBpID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaikge1xyXG4gICAgICAgIGNodW5rW2krK10gPSBiNjRbdF07XHJcbiAgICAgICAgY2h1bmtbaSsrXSA9IDYxO1xyXG4gICAgICAgIGlmIChqID09PSAxKVxyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gNjE7XHJcbiAgICB9XHJcbiAgICBpZiAocGFydHMpIHtcclxuICAgICAgICBpZiAoaSlcclxuICAgICAgICAgICAgcGFydHMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY2h1bmsuc2xpY2UoMCwgaSkpKTtcclxuICAgICAgICByZXR1cm4gcGFydHMuam9pbihcIlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY2h1bmsuc2xpY2UoMCwgaSkpO1xyXG59O1xyXG5cclxudmFyIGludmFsaWRFbmNvZGluZyA9IFwiaW52YWxpZCBlbmNvZGluZ1wiO1xyXG5cclxuLyoqXHJcbiAqIERlY29kZXMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBidWZmZXIuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU291cmNlIHN0cmluZ1xyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBEZXN0aW5hdGlvbiBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBEZXN0aW5hdGlvbiBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gTnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW5cclxuICogQHRocm93cyB7RXJyb3J9IElmIGVuY29kaW5nIGlzIGludmFsaWRcclxuICovXHJcbmJhc2U2NC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUoc3RyaW5nLCBidWZmZXIsIG9mZnNldCkge1xyXG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0O1xyXG4gICAgdmFyIGogPSAwLCAvLyBnb3RvIGluZGV4XHJcbiAgICAgICAgdDsgICAgIC8vIHRlbXBvcmFyeVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOykge1xyXG4gICAgICAgIHZhciBjID0gc3RyaW5nLmNoYXJDb2RlQXQoaSsrKTtcclxuICAgICAgICBpZiAoYyA9PT0gNjEgJiYgaiA+IDEpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGlmICgoYyA9IHM2NFtjXSkgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoaW52YWxpZEVuY29kaW5nKTtcclxuICAgICAgICBzd2l0Y2ggKGopIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgdCA9IGM7XHJcbiAgICAgICAgICAgICAgICBqID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gdCA8PCAyIHwgKGMgJiA0OCkgPj4gNDtcclxuICAgICAgICAgICAgICAgIHQgPSBjO1xyXG4gICAgICAgICAgICAgICAgaiA9IDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9ICh0ICYgMTUpIDw8IDQgfCAoYyAmIDYwKSA+PiAyO1xyXG4gICAgICAgICAgICAgICAgdCA9IGM7XHJcbiAgICAgICAgICAgICAgICBqID0gMztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gKHQgJiAzKSA8PCA2IHwgYztcclxuICAgICAgICAgICAgICAgIGogPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGogPT09IDEpXHJcbiAgICAgICAgdGhyb3cgRXJyb3IoaW52YWxpZEVuY29kaW5nKTtcclxuICAgIHJldHVybiBvZmZzZXQgLSBzdGFydDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBUZXN0cyBpZiB0aGUgc3BlY2lmaWVkIHN0cmluZyBhcHBlYXJzIHRvIGJlIGJhc2U2NCBlbmNvZGVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byB0ZXN0XHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgcHJvYmFibHkgYmFzZTY0IGVuY29kZWQsIG90aGVyd2lzZSBmYWxzZVxyXG4gKi9cclxuYmFzZTY0LnRlc3QgPSBmdW5jdGlvbiB0ZXN0KHN0cmluZykge1xyXG4gICAgcmV0dXJuIC9eKD86W0EtWmEtejAtOSsvXXs0fSkqKD86W0EtWmEtejAtOSsvXXsyfT09fFtBLVphLXowLTkrL117M309KT8kLy50ZXN0KHN0cmluZyk7XHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGV2ZW50IGVtaXR0ZXIgaW5zdGFuY2UuXHJcbiAqIEBjbGFzc2Rlc2MgQSBtaW5pbWFsIGV2ZW50IGVtaXR0ZXIuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXHJcbiAgICAgKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsKj59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhbiBldmVudCBsaXN0ZW5lci5cclxuICogQHBhcmFtIHtzdHJpbmd9IGV2dCBFdmVudCBuYW1lXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIExpc3RlbmVyXHJcbiAqIEBwYXJhbSB7Kn0gW2N0eF0gTGlzdGVuZXIgY29udGV4dFxyXG4gKiBAcmV0dXJucyB7dXRpbC5FdmVudEVtaXR0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2dCwgZm4sIGN0eCkge1xyXG4gICAgKHRoaXMuX2xpc3RlbmVyc1tldnRdIHx8ICh0aGlzLl9saXN0ZW5lcnNbZXZ0XSA9IFtdKSkucHVzaCh7XHJcbiAgICAgICAgZm4gIDogZm4sXHJcbiAgICAgICAgY3R4IDogY3R4IHx8IHRoaXNcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciBvciBhbnkgbWF0Y2hpbmcgbGlzdGVuZXJzIGlmIGFyZ3VtZW50cyBhcmUgb21pdHRlZC5cclxuICogQHBhcmFtIHtzdHJpbmd9IFtldnRdIEV2ZW50IG5hbWUuIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBpZiBvbWl0dGVkLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBbZm5dIExpc3RlbmVyIHRvIHJlbW92ZS4gUmVtb3ZlcyBhbGwgbGlzdGVuZXJzIG9mIGBldnRgIGlmIG9taXR0ZWQuXHJcbiAqIEByZXR1cm5zIHt1dGlsLkV2ZW50RW1pdHRlcn0gYHRoaXNgXHJcbiAqL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIG9mZihldnQsIGZuKSB7XHJcbiAgICBpZiAoZXZ0ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0ge307XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAoZm4gPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2dF0gPSBbXTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1tldnRdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7KVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5mbiA9PT0gZm4pXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICArK2k7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogRW1pdHMgYW4gZXZlbnQgYnkgY2FsbGluZyBpdHMgbGlzdGVuZXJzIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBldnQgRXZlbnQgbmFtZVxyXG4gKiBAcGFyYW0gey4uLip9IGFyZ3MgQXJndW1lbnRzXHJcbiAqIEByZXR1cm5zIHt1dGlsLkV2ZW50RW1pdHRlcn0gYHRoaXNgXHJcbiAqL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2dCkge1xyXG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1tldnRdO1xyXG4gICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgIHZhciBhcmdzID0gW10sXHJcbiAgICAgICAgICAgIGkgPSAxO1xyXG4gICAgICAgIGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDspXHJcbiAgICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7KVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2krK10uY3R4LCBhcmdzKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShmYWN0b3J5KTtcclxuXHJcbi8qKlxyXG4gKiBSZWFkcyAvIHdyaXRlcyBmbG9hdHMgLyBkb3VibGVzIGZyb20gLyB0byBidWZmZXJzLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0XHJcbiAqIEBuYW1lc3BhY2VcclxuICovXHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgMzIgYml0IGZsb2F0IHRvIGEgYnVmZmVyIHVzaW5nIGxpdHRsZSBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC53cml0ZUZsb2F0TEVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgVmFsdWUgdG8gd3JpdGVcclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgVGFyZ2V0IGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFRhcmdldCBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhIDMyIGJpdCBmbG9hdCB0byBhIGJ1ZmZlciB1c2luZyBiaWcgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQud3JpdGVGbG9hdEJFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFRhcmdldCBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBUYXJnZXQgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIDMyIGJpdCBmbG9hdCBmcm9tIGEgYnVmZmVyIHVzaW5nIGxpdHRsZSBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC5yZWFkRmxvYXRMRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgU291cmNlIGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFNvdXJjZSBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblxyXG4vKipcclxuICogUmVhZHMgYSAzMiBiaXQgZmxvYXQgZnJvbSBhIGJ1ZmZlciB1c2luZyBiaWcgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQucmVhZEZsb2F0QkVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBTb3VyY2UgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhIDY0IGJpdCBkb3VibGUgdG8gYSBidWZmZXIgdXNpbmcgbGl0dGxlIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LndyaXRlRG91YmxlTEVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgVmFsdWUgdG8gd3JpdGVcclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgVGFyZ2V0IGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFRhcmdldCBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhIDY0IGJpdCBkb3VibGUgdG8gYSBidWZmZXIgdXNpbmcgYmlnIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LndyaXRlRG91YmxlQkVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgVmFsdWUgdG8gd3JpdGVcclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgVGFyZ2V0IGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFRhcmdldCBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgNjQgYml0IGRvdWJsZSBmcm9tIGEgYnVmZmVyIHVzaW5nIGxpdHRsZSBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC5yZWFkRG91YmxlTEVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBTb3VyY2UgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgNjQgYml0IGRvdWJsZSBmcm9tIGEgYnVmZmVyIHVzaW5nIGJpZyBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC5yZWFkRG91YmxlQkVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBTb3VyY2UgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuLy8gRmFjdG9yeSBmdW5jdGlvbiBmb3IgdGhlIHB1cnBvc2Ugb2Ygbm9kZS1iYXNlZCB0ZXN0aW5nIGluIG1vZGlmaWVkIGdsb2JhbCBlbnZpcm9ubWVudHNcclxuZnVuY3Rpb24gZmFjdG9yeShleHBvcnRzKSB7XHJcblxyXG4gICAgLy8gZmxvYXQ6IHR5cGVkIGFycmF5XHJcbiAgICBpZiAodHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gXCJ1bmRlZmluZWRcIikgKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgZjMyID0gbmV3IEZsb2F0MzJBcnJheShbIC0wIF0pLFxyXG4gICAgICAgICAgICBmOGIgPSBuZXcgVWludDhBcnJheShmMzIuYnVmZmVyKSxcclxuICAgICAgICAgICAgbGUgID0gZjhiWzNdID09PSAxMjg7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyaXRlRmxvYXRfZjMyX2NweSh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGYzMlswXSA9IHZhbDtcclxuICAgICAgICAgICAgYnVmW3BvcyAgICBdID0gZjhiWzBdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMV0gPSBmOGJbMV07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAyXSA9IGY4YlsyXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDNdID0gZjhiWzNdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVGbG9hdF9mMzJfcmV2KHZhbCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjMyWzBdID0gdmFsO1xyXG4gICAgICAgICAgICBidWZbcG9zICAgIF0gPSBmOGJbM107XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAxXSA9IGY4YlsyXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDJdID0gZjhiWzFdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgM10gPSBmOGJbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMud3JpdGVGbG9hdExFID0gbGUgPyB3cml0ZUZsb2F0X2YzMl9jcHkgOiB3cml0ZUZsb2F0X2YzMl9yZXY7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLndyaXRlRmxvYXRCRSA9IGxlID8gd3JpdGVGbG9hdF9mMzJfcmV2IDogd3JpdGVGbG9hdF9mMzJfY3B5O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkRmxvYXRfZjMyX2NweShidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmOGJbMF0gPSBidWZbcG9zICAgIF07XHJcbiAgICAgICAgICAgIGY4YlsxXSA9IGJ1Zltwb3MgKyAxXTtcclxuICAgICAgICAgICAgZjhiWzJdID0gYnVmW3BvcyArIDJdO1xyXG4gICAgICAgICAgICBmOGJbM10gPSBidWZbcG9zICsgM107XHJcbiAgICAgICAgICAgIHJldHVybiBmMzJbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkRmxvYXRfZjMyX3JldihidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmOGJbM10gPSBidWZbcG9zICAgIF07XHJcbiAgICAgICAgICAgIGY4YlsyXSA9IGJ1Zltwb3MgKyAxXTtcclxuICAgICAgICAgICAgZjhiWzFdID0gYnVmW3BvcyArIDJdO1xyXG4gICAgICAgICAgICBmOGJbMF0gPSBidWZbcG9zICsgM107XHJcbiAgICAgICAgICAgIHJldHVybiBmMzJbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMucmVhZEZsb2F0TEUgPSBsZSA/IHJlYWRGbG9hdF9mMzJfY3B5IDogcmVhZEZsb2F0X2YzMl9yZXY7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLnJlYWRGbG9hdEJFID0gbGUgPyByZWFkRmxvYXRfZjMyX3JldiA6IHJlYWRGbG9hdF9mMzJfY3B5O1xyXG5cclxuICAgIC8vIGZsb2F0OiBpZWVlNzU0XHJcbiAgICB9KSgpOyBlbHNlIChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVGbG9hdF9pZWVlNzU0KHdyaXRlVWludCwgdmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IHZhbCA8IDAgPyAxIDogMDtcclxuICAgICAgICAgICAgaWYgKHNpZ24pXHJcbiAgICAgICAgICAgICAgICB2YWwgPSAtdmFsO1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSAwKVxyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDEgLyB2YWwgPiAwID8gLyogcG9zaXRpdmUgKi8gMCA6IC8qIG5lZ2F0aXZlIDAgKi8gMjE0NzQ4MzY0OCwgYnVmLCBwb3MpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChpc05hTih2YWwpKVxyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDIxNDMyODkzNDQsIGJ1ZiwgcG9zKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAodmFsID4gMy40MDI4MjM0NjYzODUyODg2ZSszOCkgLy8gKy1JbmZpbml0eVxyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KChzaWduIDw8IDMxIHwgMjEzOTA5NTA0MCkgPj4+IDAsIGJ1ZiwgcG9zKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAodmFsIDwgMS4xNzU0OTQzNTA4MjIyODc1ZS0zOCkgLy8gZGVub3JtYWxcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgoc2lnbiA8PCAzMSB8IE1hdGgucm91bmQodmFsIC8gMS40MDEyOTg0NjQzMjQ4MTdlLTQ1KSkgPj4+IDAsIGJ1ZiwgcG9zKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwb25lbnQgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbCkgLyBNYXRoLkxOMiksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFudGlzc2EgPSBNYXRoLnJvdW5kKHZhbCAqIE1hdGgucG93KDIsIC1leHBvbmVudCkgKiA4Mzg4NjA4KSAmIDgzODg2MDc7XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoKHNpZ24gPDwgMzEgfCBleHBvbmVudCArIDEyNyA8PCAyMyB8IG1hbnRpc3NhKSA+Pj4gMCwgYnVmLCBwb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnRzLndyaXRlRmxvYXRMRSA9IHdyaXRlRmxvYXRfaWVlZTc1NC5iaW5kKG51bGwsIHdyaXRlVWludExFKTtcclxuICAgICAgICBleHBvcnRzLndyaXRlRmxvYXRCRSA9IHdyaXRlRmxvYXRfaWVlZTc1NC5iaW5kKG51bGwsIHdyaXRlVWludEJFKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZEZsb2F0X2llZWU3NTQocmVhZFVpbnQsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIHZhciB1aW50ID0gcmVhZFVpbnQoYnVmLCBwb3MpLFxyXG4gICAgICAgICAgICAgICAgc2lnbiA9ICh1aW50ID4+IDMxKSAqIDIgKyAxLFxyXG4gICAgICAgICAgICAgICAgZXhwb25lbnQgPSB1aW50ID4+PiAyMyAmIDI1NSxcclxuICAgICAgICAgICAgICAgIG1hbnRpc3NhID0gdWludCAmIDgzODg2MDc7XHJcbiAgICAgICAgICAgIHJldHVybiBleHBvbmVudCA9PT0gMjU1XHJcbiAgICAgICAgICAgICAgICA/IG1hbnRpc3NhXHJcbiAgICAgICAgICAgICAgICA/IE5hTlxyXG4gICAgICAgICAgICAgICAgOiBzaWduICogSW5maW5pdHlcclxuICAgICAgICAgICAgICAgIDogZXhwb25lbnQgPT09IDAgLy8gZGVub3JtYWxcclxuICAgICAgICAgICAgICAgID8gc2lnbiAqIDEuNDAxMjk4NDY0MzI0ODE3ZS00NSAqIG1hbnRpc3NhXHJcbiAgICAgICAgICAgICAgICA6IHNpZ24gKiBNYXRoLnBvdygyLCBleHBvbmVudCAtIDE1MCkgKiAobWFudGlzc2EgKyA4Mzg4NjA4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydHMucmVhZEZsb2F0TEUgPSByZWFkRmxvYXRfaWVlZTc1NC5iaW5kKG51bGwsIHJlYWRVaW50TEUpO1xyXG4gICAgICAgIGV4cG9ydHMucmVhZEZsb2F0QkUgPSByZWFkRmxvYXRfaWVlZTc1NC5iaW5kKG51bGwsIHJlYWRVaW50QkUpO1xyXG5cclxuICAgIH0pKCk7XHJcblxyXG4gICAgLy8gZG91YmxlOiB0eXBlZCBhcnJheVxyXG4gICAgaWYgKHR5cGVvZiBGbG9hdDY0QXJyYXkgIT09IFwidW5kZWZpbmVkXCIpIChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIGY2NCA9IG5ldyBGbG9hdDY0QXJyYXkoWy0wXSksXHJcbiAgICAgICAgICAgIGY4YiA9IG5ldyBVaW50OEFycmF5KGY2NC5idWZmZXIpLFxyXG4gICAgICAgICAgICBsZSAgPSBmOGJbN10gPT09IDEyODtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVEb3VibGVfZjY0X2NweSh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGY2NFswXSA9IHZhbDtcclxuICAgICAgICAgICAgYnVmW3BvcyAgICBdID0gZjhiWzBdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMV0gPSBmOGJbMV07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAyXSA9IGY4YlsyXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDNdID0gZjhiWzNdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgNF0gPSBmOGJbNF07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA1XSA9IGY4Yls1XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDZdID0gZjhiWzZdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgN10gPSBmOGJbN107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cml0ZURvdWJsZV9mNjRfcmV2KHZhbCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjY0WzBdID0gdmFsO1xyXG4gICAgICAgICAgICBidWZbcG9zICAgIF0gPSBmOGJbN107XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAxXSA9IGY4Yls2XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDJdID0gZjhiWzVdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgM10gPSBmOGJbNF07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA0XSA9IGY4YlszXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDVdID0gZjhiWzJdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgNl0gPSBmOGJbMV07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA3XSA9IGY4YlswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy53cml0ZURvdWJsZUxFID0gbGUgPyB3cml0ZURvdWJsZV9mNjRfY3B5IDogd3JpdGVEb3VibGVfZjY0X3JldjtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMud3JpdGVEb3VibGVCRSA9IGxlID8gd3JpdGVEb3VibGVfZjY0X3JldiA6IHdyaXRlRG91YmxlX2Y2NF9jcHk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWREb3VibGVfZjY0X2NweShidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmOGJbMF0gPSBidWZbcG9zICAgIF07XHJcbiAgICAgICAgICAgIGY4YlsxXSA9IGJ1Zltwb3MgKyAxXTtcclxuICAgICAgICAgICAgZjhiWzJdID0gYnVmW3BvcyArIDJdO1xyXG4gICAgICAgICAgICBmOGJbM10gPSBidWZbcG9zICsgM107XHJcbiAgICAgICAgICAgIGY4Yls0XSA9IGJ1Zltwb3MgKyA0XTtcclxuICAgICAgICAgICAgZjhiWzVdID0gYnVmW3BvcyArIDVdO1xyXG4gICAgICAgICAgICBmOGJbNl0gPSBidWZbcG9zICsgNl07XHJcbiAgICAgICAgICAgIGY4Yls3XSA9IGJ1Zltwb3MgKyA3XTtcclxuICAgICAgICAgICAgcmV0dXJuIGY2NFswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWREb3VibGVfZjY0X3JldihidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmOGJbN10gPSBidWZbcG9zICAgIF07XHJcbiAgICAgICAgICAgIGY4Yls2XSA9IGJ1Zltwb3MgKyAxXTtcclxuICAgICAgICAgICAgZjhiWzVdID0gYnVmW3BvcyArIDJdO1xyXG4gICAgICAgICAgICBmOGJbNF0gPSBidWZbcG9zICsgM107XHJcbiAgICAgICAgICAgIGY4YlszXSA9IGJ1Zltwb3MgKyA0XTtcclxuICAgICAgICAgICAgZjhiWzJdID0gYnVmW3BvcyArIDVdO1xyXG4gICAgICAgICAgICBmOGJbMV0gPSBidWZbcG9zICsgNl07XHJcbiAgICAgICAgICAgIGY4YlswXSA9IGJ1Zltwb3MgKyA3XTtcclxuICAgICAgICAgICAgcmV0dXJuIGY2NFswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRG91YmxlTEUgPSBsZSA/IHJlYWREb3VibGVfZjY0X2NweSA6IHJlYWREb3VibGVfZjY0X3JldjtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMucmVhZERvdWJsZUJFID0gbGUgPyByZWFkRG91YmxlX2Y2NF9yZXYgOiByZWFkRG91YmxlX2Y2NF9jcHk7XHJcblxyXG4gICAgLy8gZG91YmxlOiBpZWVlNzU0XHJcbiAgICB9KSgpOyBlbHNlIChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVEb3VibGVfaWVlZTc1NCh3cml0ZVVpbnQsIG9mZjAsIG9mZjEsIHZhbCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgdmFyIHNpZ24gPSB2YWwgPCAwID8gMSA6IDA7XHJcbiAgICAgICAgICAgIGlmIChzaWduKVxyXG4gICAgICAgICAgICAgICAgdmFsID0gLXZhbDtcclxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDAsIGJ1ZiwgcG9zICsgb2ZmMCk7XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMSAvIHZhbCA+IDAgPyAvKiBwb3NpdGl2ZSAqLyAwIDogLyogbmVnYXRpdmUgMCAqLyAyMTQ3NDgzNjQ4LCBidWYsIHBvcyArIG9mZjEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTmFOKHZhbCkpIHtcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgwLCBidWYsIHBvcyArIG9mZjApO1xyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDIxNDY5NTkzNjAsIGJ1ZiwgcG9zICsgb2ZmMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsID4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDgpIHsgLy8gKy1JbmZpbml0eVxyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDAsIGJ1ZiwgcG9zICsgb2ZmMCk7XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoKHNpZ24gPDwgMzEgfCAyMTQ2NDM1MDcyKSA+Pj4gMCwgYnVmLCBwb3MgKyBvZmYxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYW50aXNzYTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgPCAyLjIyNTA3Mzg1ODUwNzIwMTRlLTMwOCkgeyAvLyBkZW5vcm1hbFxyXG4gICAgICAgICAgICAgICAgICAgIG1hbnRpc3NhID0gdmFsIC8gNWUtMzI0O1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlVWludChtYW50aXNzYSA+Pj4gMCwgYnVmLCBwb3MgKyBvZmYwKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVVpbnQoKHNpZ24gPDwgMzEgfCBtYW50aXNzYSAvIDQyOTQ5NjcyOTYpID4+PiAwLCBidWYsIHBvcyArIG9mZjEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhwb25lbnQgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbCkgLyBNYXRoLkxOMik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9uZW50ID09PSAxMDI0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvbmVudCA9IDEwMjM7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFudGlzc2EgPSB2YWwgKiBNYXRoLnBvdygyLCAtZXhwb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlVWludChtYW50aXNzYSAqIDQ1MDM1OTk2MjczNzA0OTYgPj4+IDAsIGJ1ZiwgcG9zICsgb2ZmMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVVaW50KChzaWduIDw8IDMxIHwgZXhwb25lbnQgKyAxMDIzIDw8IDIwIHwgbWFudGlzc2EgKiAxMDQ4NTc2ICYgMTA0ODU3NSkgPj4+IDAsIGJ1ZiwgcG9zICsgb2ZmMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydHMud3JpdGVEb3VibGVMRSA9IHdyaXRlRG91YmxlX2llZWU3NTQuYmluZChudWxsLCB3cml0ZVVpbnRMRSwgMCwgNCk7XHJcbiAgICAgICAgZXhwb3J0cy53cml0ZURvdWJsZUJFID0gd3JpdGVEb3VibGVfaWVlZTc1NC5iaW5kKG51bGwsIHdyaXRlVWludEJFLCA0LCAwKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZERvdWJsZV9pZWVlNzU0KHJlYWRVaW50LCBvZmYwLCBvZmYxLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICB2YXIgbG8gPSByZWFkVWludChidWYsIHBvcyArIG9mZjApLFxyXG4gICAgICAgICAgICAgICAgaGkgPSByZWFkVWludChidWYsIHBvcyArIG9mZjEpO1xyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IChoaSA+PiAzMSkgKiAyICsgMSxcclxuICAgICAgICAgICAgICAgIGV4cG9uZW50ID0gaGkgPj4+IDIwICYgMjA0NyxcclxuICAgICAgICAgICAgICAgIG1hbnRpc3NhID0gNDI5NDk2NzI5NiAqIChoaSAmIDEwNDg1NzUpICsgbG87XHJcbiAgICAgICAgICAgIHJldHVybiBleHBvbmVudCA9PT0gMjA0N1xyXG4gICAgICAgICAgICAgICAgPyBtYW50aXNzYVxyXG4gICAgICAgICAgICAgICAgPyBOYU5cclxuICAgICAgICAgICAgICAgIDogc2lnbiAqIEluZmluaXR5XHJcbiAgICAgICAgICAgICAgICA6IGV4cG9uZW50ID09PSAwIC8vIGRlbm9ybWFsXHJcbiAgICAgICAgICAgICAgICA/IHNpZ24gKiA1ZS0zMjQgKiBtYW50aXNzYVxyXG4gICAgICAgICAgICAgICAgOiBzaWduICogTWF0aC5wb3coMiwgZXhwb25lbnQgLSAxMDc1KSAqIChtYW50aXNzYSArIDQ1MDM1OTk2MjczNzA0OTYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRG91YmxlTEUgPSByZWFkRG91YmxlX2llZWU3NTQuYmluZChudWxsLCByZWFkVWludExFLCAwLCA0KTtcclxuICAgICAgICBleHBvcnRzLnJlYWREb3VibGVCRSA9IHJlYWREb3VibGVfaWVlZTc1NC5iaW5kKG51bGwsIHJlYWRVaW50QkUsIDQsIDApO1xyXG5cclxuICAgIH0pKCk7XHJcblxyXG4gICAgcmV0dXJuIGV4cG9ydHM7XHJcbn1cclxuXHJcbi8vIHVpbnQgaGVscGVyc1xyXG5cclxuZnVuY3Rpb24gd3JpdGVVaW50TEUodmFsLCBidWYsIHBvcykge1xyXG4gICAgYnVmW3BvcyAgICBdID0gIHZhbCAgICAgICAgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgMV0gPSAgdmFsID4+PiA4ICAmIDI1NTtcclxuICAgIGJ1Zltwb3MgKyAyXSA9ICB2YWwgPj4+IDE2ICYgMjU1O1xyXG4gICAgYnVmW3BvcyArIDNdID0gIHZhbCA+Pj4gMjQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlVWludEJFKHZhbCwgYnVmLCBwb3MpIHtcclxuICAgIGJ1Zltwb3MgICAgXSA9ICB2YWwgPj4+IDI0O1xyXG4gICAgYnVmW3BvcyArIDFdID0gIHZhbCA+Pj4gMTYgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgMl0gPSAgdmFsID4+PiA4ICAmIDI1NTtcclxuICAgIGJ1Zltwb3MgKyAzXSA9ICB2YWwgICAgICAgICYgMjU1O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkVWludExFKGJ1ZiwgcG9zKSB7XHJcbiAgICByZXR1cm4gKGJ1Zltwb3MgICAgXVxyXG4gICAgICAgICAgfCBidWZbcG9zICsgMV0gPDwgOFxyXG4gICAgICAgICAgfCBidWZbcG9zICsgMl0gPDwgMTZcclxuICAgICAgICAgIHwgYnVmW3BvcyArIDNdIDw8IDI0KSA+Pj4gMDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFVpbnRCRShidWYsIHBvcykge1xyXG4gICAgcmV0dXJuIChidWZbcG9zICAgIF0gPDwgMjRcclxuICAgICAgICAgIHwgYnVmW3BvcyArIDFdIDw8IDE2XHJcbiAgICAgICAgICB8IGJ1Zltwb3MgKyAyXSA8PCA4XHJcbiAgICAgICAgICB8IGJ1Zltwb3MgKyAzXSkgPj4+IDA7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbm1vZHVsZS5leHBvcnRzID0gaW5xdWlyZTtcclxuXHJcbi8qKlxyXG4gKiBSZXF1aXJlcyBhIG1vZHVsZSBvbmx5IGlmIGF2YWlsYWJsZS5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZU5hbWUgTW9kdWxlIHRvIHJlcXVpcmVcclxuICogQHJldHVybnMgez9PYmplY3R9IFJlcXVpcmVkIG1vZHVsZSBpZiBhdmFpbGFibGUgYW5kIG5vdCBlbXB0eSwgb3RoZXJ3aXNlIGBudWxsYFxyXG4gKi9cclxuZnVuY3Rpb24gaW5xdWlyZShtb2R1bGVOYW1lKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBtb2QgPSBldmFsKFwicXVpcmVcIi5yZXBsYWNlKC9eLyxcInJlXCIpKShtb2R1bGVOYW1lKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1ldmFsXHJcbiAgICAgICAgaWYgKG1vZCAmJiAobW9kLmxlbmd0aCB8fCBPYmplY3Qua2V5cyhtb2QpLmxlbmd0aCkpXHJcbiAgICAgICAgICAgIHJldHVybiBtb2Q7XHJcbiAgICB9IGNhdGNoIChlKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSBwb29sO1xyXG5cclxuLyoqXHJcbiAqIEFuIGFsbG9jYXRvciBhcyB1c2VkIGJ5IHtAbGluayB1dGlsLnBvb2x9LlxyXG4gKiBAdHlwZWRlZiBQb29sQWxsb2NhdG9yXHJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cclxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQnVmZmVyIHNpemVcclxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEJ1ZmZlclxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBBIHNsaWNlciBhcyB1c2VkIGJ5IHtAbGluayB1dGlsLnBvb2x9LlxyXG4gKiBAdHlwZWRlZiBQb29sU2xpY2VyXHJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFN0YXJ0IG9mZnNldFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZCBvZmZzZXRcclxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEJ1ZmZlciBzbGljZVxyXG4gKiBAdGhpcyB7VWludDhBcnJheX1cclxuICovXHJcblxyXG4vKipcclxuICogQSBnZW5lcmFsIHB1cnBvc2UgYnVmZmVyIHBvb2wuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1Bvb2xBbGxvY2F0b3J9IGFsbG9jIEFsbG9jYXRvclxyXG4gKiBAcGFyYW0ge1Bvb2xTbGljZXJ9IHNsaWNlIFNsaWNlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpemU9ODE5Ml0gU2xhYiBzaXplXHJcbiAqIEByZXR1cm5zIHtQb29sQWxsb2NhdG9yfSBQb29sZWQgYWxsb2NhdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBwb29sKGFsbG9jLCBzbGljZSwgc2l6ZSkge1xyXG4gICAgdmFyIFNJWkUgICA9IHNpemUgfHwgODE5MjtcclxuICAgIHZhciBNQVggICAgPSBTSVpFID4+PiAxO1xyXG4gICAgdmFyIHNsYWIgICA9IG51bGw7XHJcbiAgICB2YXIgb2Zmc2V0ID0gU0laRTtcclxuICAgIHJldHVybiBmdW5jdGlvbiBwb29sX2FsbG9jKHNpemUpIHtcclxuICAgICAgICBpZiAoc2l6ZSA8IDEgfHwgc2l6ZSA+IE1BWClcclxuICAgICAgICAgICAgcmV0dXJuIGFsbG9jKHNpemUpO1xyXG4gICAgICAgIGlmIChvZmZzZXQgKyBzaXplID4gU0laRSkge1xyXG4gICAgICAgICAgICBzbGFiID0gYWxsb2MoU0laRSk7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBidWYgPSBzbGljZS5jYWxsKHNsYWIsIG9mZnNldCwgb2Zmc2V0ICs9IHNpemUpO1xyXG4gICAgICAgIGlmIChvZmZzZXQgJiA3KSAvLyBhbGlnbiB0byAzMiBiaXRcclxuICAgICAgICAgICAgb2Zmc2V0ID0gKG9mZnNldCB8IDcpICsgMTtcclxuICAgICAgICByZXR1cm4gYnVmO1xyXG4gICAgfTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgVVRGOCBpbXBsZW1lbnRhdGlvbiBmb3IgbnVtYmVyIGFycmF5cy5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQG5hbWVzcGFjZVxyXG4gKi9cclxudmFyIHV0ZjggPSBleHBvcnRzO1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIFVURjggYnl0ZSBsZW5ndGggb2YgYSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IEJ5dGUgbGVuZ3RoXHJcbiAqL1xyXG51dGY4Lmxlbmd0aCA9IGZ1bmN0aW9uIHV0ZjhfbGVuZ3RoKHN0cmluZykge1xyXG4gICAgdmFyIGxlbiA9IDAsXHJcbiAgICAgICAgYyA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGMgPSBzdHJpbmcuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOClcclxuICAgICAgICAgICAgbGVuICs9IDE7XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpXHJcbiAgICAgICAgICAgIGxlbiArPSAyO1xyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhGQzAwKSA9PT0gMHhEODAwICYmIChzdHJpbmcuY2hhckNvZGVBdChpICsgMSkgJiAweEZDMDApID09PSAweERDMDApIHtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBsZW4gKz0gNDtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgbGVuICs9IDM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIFVURjggYnl0ZXMgYXMgYSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmZmVyIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFNvdXJjZSBzdGFydFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIFNvdXJjZSBlbmRcclxuICogQHJldHVybnMge3N0cmluZ30gU3RyaW5nIHJlYWRcclxuICovXHJcbnV0ZjgucmVhZCA9IGZ1bmN0aW9uIHV0ZjhfcmVhZChidWZmZXIsIHN0YXJ0LCBlbmQpIHtcclxuICAgIHZhciBsZW4gPSBlbmQgLSBzdGFydDtcclxuICAgIGlmIChsZW4gPCAxKVxyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgdmFyIHBhcnRzID0gbnVsbCxcclxuICAgICAgICBjaHVuayA9IFtdLFxyXG4gICAgICAgIGkgPSAwLCAvLyBjaGFyIG9mZnNldFxyXG4gICAgICAgIHQ7ICAgICAvLyB0ZW1wb3JhcnlcclxuICAgIHdoaWxlIChzdGFydCA8IGVuZCkge1xyXG4gICAgICAgIHQgPSBidWZmZXJbc3RhcnQrK107XHJcbiAgICAgICAgaWYgKHQgPCAxMjgpXHJcbiAgICAgICAgICAgIGNodW5rW2krK10gPSB0O1xyXG4gICAgICAgIGVsc2UgaWYgKHQgPiAxOTEgJiYgdCA8IDIyNClcclxuICAgICAgICAgICAgY2h1bmtbaSsrXSA9ICh0ICYgMzEpIDw8IDYgfCBidWZmZXJbc3RhcnQrK10gJiA2MztcclxuICAgICAgICBlbHNlIGlmICh0ID4gMjM5ICYmIHQgPCAzNjUpIHtcclxuICAgICAgICAgICAgdCA9ICgodCAmIDcpIDw8IDE4IHwgKGJ1ZmZlcltzdGFydCsrXSAmIDYzKSA8PCAxMiB8IChidWZmZXJbc3RhcnQrK10gJiA2MykgPDwgNiB8IGJ1ZmZlcltzdGFydCsrXSAmIDYzKSAtIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIGNodW5rW2krK10gPSAweEQ4MDAgKyAodCA+PiAxMCk7XHJcbiAgICAgICAgICAgIGNodW5rW2krK10gPSAweERDMDAgKyAodCAmIDEwMjMpO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gKHQgJiAxNSkgPDwgMTIgfCAoYnVmZmVyW3N0YXJ0KytdICYgNjMpIDw8IDYgfCBidWZmZXJbc3RhcnQrK10gJiA2MztcclxuICAgICAgICBpZiAoaSA+IDgxOTEpIHtcclxuICAgICAgICAgICAgKHBhcnRzIHx8IChwYXJ0cyA9IFtdKSkucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY2h1bmspKTtcclxuICAgICAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHBhcnRzKSB7XHJcbiAgICAgICAgaWYgKGkpXHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNodW5rLnNsaWNlKDAsIGkpKSk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCJcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNodW5rLnNsaWNlKDAsIGkpKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSBzdHJpbmcgYXMgVVRGOCBieXRlcy5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBTb3VyY2Ugc3RyaW5nXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmZmVyIERlc3RpbmF0aW9uIGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IERlc3RpbmF0aW9uIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBCeXRlcyB3cml0dGVuXHJcbiAqL1xyXG51dGY4LndyaXRlID0gZnVuY3Rpb24gdXRmOF93cml0ZShzdHJpbmcsIGJ1ZmZlciwgb2Zmc2V0KSB7XHJcbiAgICB2YXIgc3RhcnQgPSBvZmZzZXQsXHJcbiAgICAgICAgYzEsIC8vIGNoYXJhY3RlciAxXHJcbiAgICAgICAgYzI7IC8vIGNoYXJhY3RlciAyXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGMxID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMTtcclxuICAgICAgICB9IGVsc2UgaWYgKGMxIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgPj4gNiAgICAgICB8IDE5MjtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxICAgICAgICYgNjMgfCAxMjg7XHJcbiAgICAgICAgfSBlbHNlIGlmICgoYzEgJiAweEZDMDApID09PSAweEQ4MDAgJiYgKChjMiA9IHN0cmluZy5jaGFyQ29kZUF0KGkgKyAxKSkgJiAweEZDMDApID09PSAweERDMDApIHtcclxuICAgICAgICAgICAgYzEgPSAweDEwMDAwICsgKChjMSAmIDB4MDNGRikgPDwgMTApICsgKGMyICYgMHgwM0ZGKTtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgPj4gMTggICAgICB8IDI0MDtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDEyICYgNjMgfCAxMjg7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSA+PiA2ICAmIDYzIHwgMTI4O1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgICAgICAgJiA2MyB8IDEyODtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgPj4gMTIgICAgICB8IDIyNDtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDYgICYgNjMgfCAxMjg7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSAgICAgICAmIDYzIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvZmZzZXQgLSBzdGFydDtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgdmFyIGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG4gICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPVxuICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgK1xuICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICtcbiAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCcgPyBSZWZsZWN0IDogbnVsbFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbidcbiAgPyBSLmFwcGx5XG4gIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gIH1cblxudmFyIFJlZmxlY3RPd25LZXlzXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gUi5vd25LZXlzXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xuICB9O1xufSBlbHNlIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XG59XG5cbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbm1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuZnVuY3Rpb24gY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9IF9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgaWYgKCF0aGlzLmZpcmVkKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcigpIHtcbiAgICAgIGlmIChlcnJvckxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICB9O1xuICAgIHZhciBlcnJvckxpc3RlbmVyO1xuXG4gICAgLy8gQWRkaW5nIGFuIGVycm9yIGxpc3RlbmVyIGlzIG5vdCBvcHRpb25hbCBiZWNhdXNlXG4gICAgLy8gaWYgYW4gZXJyb3IgaXMgdGhyb3duIG9uIGFuIGV2ZW50IGVtaXR0ZXIgd2UgY2Fubm90XG4gICAgLy8gZ3VhcmFudGVlIHRoYXQgdGhlIGFjdHVhbCBldmVudCB3ZSBhcmUgd2FpdGluZyB3aWxsXG4gICAgLy8gYmUgZmlyZWQuIFRoZSByZXN1bHQgY291bGQgYmUgYSBzaWxlbnQgd2F5IHRvIGNyZWF0ZVxuICAgIC8vIG1lbW9yeSBvciBmaWxlIGRlc2NyaXB0b3IgbGVha3MsIHdoaWNoIGlzIHNvbWV0aGluZ1xuICAgIC8vIHdlIHNob3VsZCBhdm9pZC5cbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgZXJyb3JMaXN0ZW5lciA9IGZ1bmN0aW9uIGVycm9yTGlzdGVuZXIoZXJyKSB7XG4gICAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSwgZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfTtcblxuICAgICAgZW1pdHRlci5vbmNlKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgIH1cblxuICAgIGVtaXR0ZXIub25jZShuYW1lLCBldmVudExpc3RlbmVyKTtcbiAgfSk7XG59XG4iLCIvKiEgaWVlZTc1NC4gQlNELTMtQ2xhdXNlIExpY2Vuc2UuIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZy9vcGVuc291cmNlPiAqL1xuZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIG5CaXRzID0gLTdcbiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblxuICBpICs9IGRcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBzID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBlTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSAoZSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSAobSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcbiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICgodmFsdWUgKiBjKSAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIvLyBtaW5pbWFsIGxpYnJhcnkgZW50cnkgcG9pbnQuXG5cblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9zcmMvaW5kZXgtbWluaW1hbFwiKTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIHByb3RvYnVmID0gZXhwb3J0cztcblxuLyoqXG4gKiBCdWlsZCB0eXBlLCBvbmUgb2YgYFwiZnVsbFwiYCwgYFwibGlnaHRcImAgb3IgYFwibWluaW1hbFwiYC5cbiAqIEBuYW1lIGJ1aWxkXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbnByb3RvYnVmLmJ1aWxkID0gXCJtaW5pbWFsXCI7XG5cbi8vIFNlcmlhbGl6YXRpb25cbnByb3RvYnVmLldyaXRlciAgICAgICA9IHJlcXVpcmUoXCIuL3dyaXRlclwiKTtcbnByb3RvYnVmLkJ1ZmZlcldyaXRlciA9IHJlcXVpcmUoXCIuL3dyaXRlcl9idWZmZXJcIik7XG5wcm90b2J1Zi5SZWFkZXIgICAgICAgPSByZXF1aXJlKFwiLi9yZWFkZXJcIik7XG5wcm90b2J1Zi5CdWZmZXJSZWFkZXIgPSByZXF1aXJlKFwiLi9yZWFkZXJfYnVmZmVyXCIpO1xuXG4vLyBVdGlsaXR5XG5wcm90b2J1Zi51dGlsICAgICAgICAgPSByZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIik7XG5wcm90b2J1Zi5ycGMgICAgICAgICAgPSByZXF1aXJlKFwiLi9ycGNcIik7XG5wcm90b2J1Zi5yb290cyAgICAgICAgPSByZXF1aXJlKFwiLi9yb290c1wiKTtcbnByb3RvYnVmLmNvbmZpZ3VyZSAgICA9IGNvbmZpZ3VyZTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbi8qKlxuICogUmVjb25maWd1cmVzIHRoZSBsaWJyYXJ5IGFjY29yZGluZyB0byB0aGUgZW52aXJvbm1lbnQuXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5mdW5jdGlvbiBjb25maWd1cmUoKSB7XG4gICAgcHJvdG9idWYudXRpbC5fY29uZmlndXJlKCk7XG4gICAgcHJvdG9idWYuV3JpdGVyLl9jb25maWd1cmUocHJvdG9idWYuQnVmZmVyV3JpdGVyKTtcbiAgICBwcm90b2J1Zi5SZWFkZXIuX2NvbmZpZ3VyZShwcm90b2J1Zi5CdWZmZXJSZWFkZXIpO1xufVxuXG4vLyBTZXQgdXAgYnVmZmVyIHV0aWxpdHkgYWNjb3JkaW5nIHRvIHRoZSBlbnZpcm9ubWVudFxuY29uZmlndXJlKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gUmVhZGVyO1xuXG52YXIgdXRpbCAgICAgID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xuXG52YXIgQnVmZmVyUmVhZGVyOyAvLyBjeWNsaWNcblxudmFyIExvbmdCaXRzICA9IHV0aWwuTG9uZ0JpdHMsXG4gICAgdXRmOCAgICAgID0gdXRpbC51dGY4O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gaW5kZXhPdXRPZlJhbmdlKHJlYWRlciwgd3JpdGVMZW5ndGgpIHtcbiAgICByZXR1cm4gUmFuZ2VFcnJvcihcImluZGV4IG91dCBvZiByYW5nZTogXCIgKyByZWFkZXIucG9zICsgXCIgKyBcIiArICh3cml0ZUxlbmd0aCB8fCAxKSArIFwiID4gXCIgKyByZWFkZXIubGVuKTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHJlYWRlciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIGJ1ZmZlci5cbiAqIEBjbGFzc2Rlc2MgV2lyZSBmb3JtYXQgcmVhZGVyIHVzaW5nIGBVaW50OEFycmF5YCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBgQXJyYXlgLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBCdWZmZXIgdG8gcmVhZCBmcm9tXG4gKi9cbmZ1bmN0aW9uIFJlYWRlcihidWZmZXIpIHtcblxuICAgIC8qKlxuICAgICAqIFJlYWQgYnVmZmVyLlxuICAgICAqIEB0eXBlIHtVaW50OEFycmF5fVxuICAgICAqL1xuICAgIHRoaXMuYnVmID0gYnVmZmVyO1xuXG4gICAgLyoqXG4gICAgICogUmVhZCBidWZmZXIgcG9zaXRpb24uXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBvcyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBSZWFkIGJ1ZmZlciBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxlbiA9IGJ1ZmZlci5sZW5ndGg7XG59XG5cbnZhciBjcmVhdGVfYXJyYXkgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIlxuICAgID8gZnVuY3Rpb24gY3JlYXRlX3R5cGVkX2FycmF5KGJ1ZmZlcikge1xuICAgICAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBBcnJheS5pc0FycmF5KGJ1ZmZlcikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRlcihidWZmZXIpO1xuICAgICAgICB0aHJvdyBFcnJvcihcImlsbGVnYWwgYnVmZmVyXCIpO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIDogZnVuY3Rpb24gY3JlYXRlX2FycmF5KGJ1ZmZlcikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidWZmZXIpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkZXIoYnVmZmVyKTtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGJ1ZmZlclwiKTtcbiAgICB9O1xuXG52YXIgY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHJldHVybiB1dGlsLkJ1ZmZlclxuICAgICAgICA/IGZ1bmN0aW9uIGNyZWF0ZV9idWZmZXJfc2V0dXAoYnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKFJlYWRlci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLkJ1ZmZlci5pc0J1ZmZlcihidWZmZXIpXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IEJ1ZmZlclJlYWRlcihidWZmZXIpXG4gICAgICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAgICAgICAgIDogY3JlYXRlX2FycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICB9KShidWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIDogY3JlYXRlX2FycmF5O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHJlYWRlciB1c2luZyB0aGUgc3BlY2lmaWVkIGJ1ZmZlci5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtVaW50OEFycmF5fEJ1ZmZlcn0gYnVmZmVyIEJ1ZmZlciB0byByZWFkIGZyb21cbiAqIEByZXR1cm5zIHtSZWFkZXJ8QnVmZmVyUmVhZGVyfSBBIHtAbGluayBCdWZmZXJSZWFkZXJ9IGlmIGBidWZmZXJgIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgYSB7QGxpbmsgUmVhZGVyfVxuICogQHRocm93cyB7RXJyb3J9IElmIGBidWZmZXJgIGlzIG5vdCBhIHZhbGlkIGJ1ZmZlclxuICovXG5SZWFkZXIuY3JlYXRlID0gY3JlYXRlKCk7XG5cblJlYWRlci5wcm90b3R5cGUuX3NsaWNlID0gdXRpbC5BcnJheS5wcm90b3R5cGUuc3ViYXJyYXkgfHwgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gdXRpbC5BcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYW4gdW5zaWduZWQgMzIgYml0IHZhbHVlLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUudWludDMyID0gKGZ1bmN0aW9uIHJlYWRfdWludDMyX3NldHVwKCkge1xuICAgIHZhciB2YWx1ZSA9IDQyOTQ5NjcyOTU7IC8vIG9wdGltaXplciB0eXBlLWhpbnQsIHRlbmRzIHRvIGRlb3B0IG90aGVyd2lzZSAoPyEpXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlYWRfdWludDMyKCkge1xuICAgICAgICB2YWx1ZSA9ICggICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcgICAgICAgKSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgIDcpID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCAxNCkgPj4+IDA7IGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOCkgcmV0dXJuIHZhbHVlO1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IDIxKSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmICAxNSkgPDwgMjgpID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCh0aGlzLnBvcyArPSA1KSA+IHRoaXMubGVuKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMubGVuO1xuICAgICAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKCk7XG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYSBzaWduZWQgMzIgYml0IHZhbHVlLlxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmludDMyID0gZnVuY3Rpb24gcmVhZF9pbnQzMigpIHtcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKSB8IDA7XG59O1xuXG4vKipcbiAqIFJlYWRzIGEgemlnLXphZyBlbmNvZGVkIHZhcmludCBhcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuc2ludDMyID0gZnVuY3Rpb24gcmVhZF9zaW50MzIoKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy51aW50MzIoKTtcbiAgICByZXR1cm4gdmFsdWUgPj4+IDEgXiAtKHZhbHVlICYgMSkgfCAwO1xufTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8taW52YWxpZC10aGlzICovXG5cbmZ1bmN0aW9uIHJlYWRMb25nVmFyaW50KCkge1xuICAgIC8vIHRlbmRzIHRvIGRlb3B0IHdpdGggbG9jYWwgdmFycyBmb3Igb2N0ZXQgZXRjLlxuICAgIHZhciBiaXRzID0gbmV3IExvbmdCaXRzKDAsIDApO1xuICAgIHZhciBpID0gMDtcbiAgICBpZiAodGhpcy5sZW4gLSB0aGlzLnBvcyA+IDQpIHsgLy8gZmFzdCByb3V0ZSAobG8pXG4gICAgICAgIGZvciAoOyBpIDwgNDsgKytpKSB7XG4gICAgICAgICAgICAvLyAxc3QuLjR0aFxuICAgICAgICAgICAgYml0cy5sbyA9IChiaXRzLmxvIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcpID4+PiAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vIDV0aFxuICAgICAgICBiaXRzLmxvID0gKGJpdHMubG8gfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCAyOCkgPj4+IDA7XG4gICAgICAgIGJpdHMuaGkgPSAoYml0cy5oaSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpID4+ICA0KSA+Pj4gMDtcbiAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIGkgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoOyBpIDwgMzsgKytpKSB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbilcbiAgICAgICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyk7XG4gICAgICAgICAgICAvLyAxc3QuLjN0aFxuICAgICAgICAgICAgYml0cy5sbyA9IChiaXRzLmxvIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcpID4+PiAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vIDR0aFxuICAgICAgICBiaXRzLmxvID0gKGJpdHMubG8gfCAodGhpcy5idWZbdGhpcy5wb3MrK10gJiAxMjcpIDw8IGkgKiA3KSA+Pj4gMDtcbiAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgfVxuICAgIGlmICh0aGlzLmxlbiAtIHRoaXMucG9zID4gNCkgeyAvLyBmYXN0IHJvdXRlIChoaSlcbiAgICAgICAgZm9yICg7IGkgPCA1OyArK2kpIHtcbiAgICAgICAgICAgIC8vIDZ0aC4uMTB0aFxuICAgICAgICAgICAgYml0cy5oaSA9IChiaXRzLmhpIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcgKyAzKSA+Pj4gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOClcbiAgICAgICAgICAgICAgICByZXR1cm4gYml0cztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoOyBpIDwgNTsgKytpKSB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbilcbiAgICAgICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyk7XG4gICAgICAgICAgICAvLyA2dGguLjEwdGhcbiAgICAgICAgICAgIGJpdHMuaGkgPSAoYml0cy5oaSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IGkgKiA3ICsgMykgPj4+IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aHJvdyBFcnJvcihcImludmFsaWQgdmFyaW50IGVuY29kaW5nXCIpO1xufVxuXG4vKiBlc2xpbnQtZW5hYmxlIG5vLWludmFsaWQtdGhpcyAqL1xuXG4vKipcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZS5cbiAqIEBuYW1lIFJlYWRlciNpbnQ2NFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxuICovXG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYW4gdW5zaWduZWQgNjQgYml0IHZhbHVlLlxuICogQG5hbWUgUmVhZGVyI3VpbnQ2NFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxuICovXG5cbi8qKlxuICogUmVhZHMgYSB6aWctemFnIGVuY29kZWQgdmFyaW50IGFzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZS5cbiAqIEBuYW1lIFJlYWRlciNzaW50NjRcbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge0xvbmd9IFZhbHVlIHJlYWRcbiAqL1xuXG4vKipcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGEgYm9vbGVhbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuYm9vbCA9IGZ1bmN0aW9uIHJlYWRfYm9vbCgpIHtcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKSAhPT0gMDtcbn07XG5cbmZ1bmN0aW9uIHJlYWRGaXhlZDMyX2VuZChidWYsIGVuZCkgeyAvLyBub3RlIHRoYXQgdGhpcyB1c2VzIGBlbmRgLCBub3QgYHBvc2BcbiAgICByZXR1cm4gKGJ1ZltlbmQgLSA0XVxuICAgICAgICAgIHwgYnVmW2VuZCAtIDNdIDw8IDhcbiAgICAgICAgICB8IGJ1ZltlbmQgLSAyXSA8PCAxNlxuICAgICAgICAgIHwgYnVmW2VuZCAtIDFdIDw8IDI0KSA+Pj4gMDtcbn1cblxuLyoqXG4gKiBSZWFkcyBmaXhlZCAzMiBiaXRzIGFzIGFuIHVuc2lnbmVkIDMyIGJpdCBpbnRlZ2VyLlxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmZpeGVkMzIgPSBmdW5jdGlvbiByZWFkX2ZpeGVkMzIoKSB7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodGhpcy5wb3MgKyA0ID4gdGhpcy5sZW4pXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA0KTtcblxuICAgIHJldHVybiByZWFkRml4ZWQzMl9lbmQodGhpcy5idWYsIHRoaXMucG9zICs9IDQpO1xufTtcblxuLyoqXG4gKiBSZWFkcyBmaXhlZCAzMiBiaXRzIGFzIGEgc2lnbmVkIDMyIGJpdCBpbnRlZ2VyLlxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLnNmaXhlZDMyID0gZnVuY3Rpb24gcmVhZF9zZml4ZWQzMigpIHtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnBvcyArIDQgPiB0aGlzLmxlbilcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xuXG4gICAgcmV0dXJuIHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCkgfCAwO1xufTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8taW52YWxpZC10aGlzICovXG5cbmZ1bmN0aW9uIHJlYWRGaXhlZDY0KC8qIHRoaXM6IFJlYWRlciAqLykge1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMucG9zICsgOCA+IHRoaXMubGVuKVxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgOCk7XG5cbiAgICByZXR1cm4gbmV3IExvbmdCaXRzKHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCksIHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCkpO1xufVxuXG4vKiBlc2xpbnQtZW5hYmxlIG5vLWludmFsaWQtdGhpcyAqL1xuXG4vKipcbiAqIFJlYWRzIGZpeGVkIDY0IGJpdHMuXG4gKiBAbmFtZSBSZWFkZXIjZml4ZWQ2NFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxuICovXG5cbi8qKlxuICogUmVhZHMgemlnLXphZyBlbmNvZGVkIGZpeGVkIDY0IGJpdHMuXG4gKiBAbmFtZSBSZWFkZXIjc2ZpeGVkNjRcbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge0xvbmd9IFZhbHVlIHJlYWRcbiAqL1xuXG4vKipcbiAqIFJlYWRzIGEgZmxvYXQgKDMyIGJpdCkgYXMgYSBudW1iZXIuXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5mbG9hdCA9IGZ1bmN0aW9uIHJlYWRfZmxvYXQoKSB7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodGhpcy5wb3MgKyA0ID4gdGhpcy5sZW4pXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA0KTtcblxuICAgIHZhciB2YWx1ZSA9IHV0aWwuZmxvYXQucmVhZEZsb2F0TEUodGhpcy5idWYsIHRoaXMucG9zKTtcbiAgICB0aGlzLnBvcyArPSA0O1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogUmVhZHMgYSBkb3VibGUgKDY0IGJpdCBmbG9hdCkgYXMgYSBudW1iZXIuXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5kb3VibGUgPSBmdW5jdGlvbiByZWFkX2RvdWJsZSgpIHtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnBvcyArIDggPiB0aGlzLmxlbilcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xuXG4gICAgdmFyIHZhbHVlID0gdXRpbC5mbG9hdC5yZWFkRG91YmxlTEUodGhpcy5idWYsIHRoaXMucG9zKTtcbiAgICB0aGlzLnBvcyArPSA4O1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogUmVhZHMgYSBzZXF1ZW5jZSBvZiBieXRlcyBwcmVjZWVkZWQgYnkgaXRzIGxlbmd0aCBhcyBhIHZhcmludC5cbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuYnl0ZXMgPSBmdW5jdGlvbiByZWFkX2J5dGVzKCkge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLnVpbnQzMigpLFxuICAgICAgICBzdGFydCAgPSB0aGlzLnBvcyxcbiAgICAgICAgZW5kICAgID0gdGhpcy5wb3MgKyBsZW5ndGg7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoZW5kID4gdGhpcy5sZW4pXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCBsZW5ndGgpO1xuXG4gICAgdGhpcy5wb3MgKz0gbGVuZ3RoO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuYnVmKSkgLy8gcGxhaW4gYXJyYXlcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgIHJldHVybiBzdGFydCA9PT0gZW5kIC8vIGZpeCBmb3IgSUUgMTAvV2luOCBhbmQgb3RoZXJzJyBzdWJhcnJheSByZXR1cm5pbmcgYXJyYXkgb2Ygc2l6ZSAxXG4gICAgICAgID8gbmV3IHRoaXMuYnVmLmNvbnN0cnVjdG9yKDApXG4gICAgICAgIDogdGhpcy5fc2xpY2UuY2FsbCh0aGlzLmJ1Ziwgc3RhcnQsIGVuZCk7XG59O1xuXG4vKipcbiAqIFJlYWRzIGEgc3RyaW5nIHByZWNlZWRlZCBieSBpdHMgYnl0ZSBsZW5ndGggYXMgYSB2YXJpbnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuc3RyaW5nID0gZnVuY3Rpb24gcmVhZF9zdHJpbmcoKSB7XG4gICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlcygpO1xuICAgIHJldHVybiB1dGY4LnJlYWQoYnl0ZXMsIDAsIGJ5dGVzLmxlbmd0aCk7XG59O1xuXG4vKipcbiAqIFNraXBzIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGJ5dGVzIGlmIHNwZWNpZmllZCwgb3RoZXJ3aXNlIHNraXBzIGEgdmFyaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIExlbmd0aCBpZiBrbm93biwgb3RoZXJ3aXNlIGEgdmFyaW50IGlzIGFzc3VtZWRcbiAqIEByZXR1cm5zIHtSZWFkZXJ9IGB0aGlzYFxuICovXG5SZWFkZXIucHJvdG90eXBlLnNraXAgPSBmdW5jdGlvbiBza2lwKGxlbmd0aCkge1xuICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5wb3MgKyBsZW5ndGggPiB0aGlzLmxlbilcbiAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCBsZW5ndGgpO1xuICAgICAgICB0aGlzLnBvcyArPSBsZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5sZW4pXG4gICAgICAgICAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMpO1xuICAgICAgICB9IHdoaWxlICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSAmIDEyOCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTa2lwcyB0aGUgbmV4dCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgd2lyZSB0eXBlLlxuICogQHBhcmFtIHtudW1iZXJ9IHdpcmVUeXBlIFdpcmUgdHlwZSByZWNlaXZlZFxuICogQHJldHVybnMge1JlYWRlcn0gYHRoaXNgXG4gKi9cblJlYWRlci5wcm90b3R5cGUuc2tpcFR5cGUgPSBmdW5jdGlvbih3aXJlVHlwZSkge1xuICAgIHN3aXRjaCAod2lyZVR5cGUpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5za2lwKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5za2lwKDgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuc2tpcCh0aGlzLnVpbnQzMigpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB3aGlsZSAoKHdpcmVUeXBlID0gdGhpcy51aW50MzIoKSAmIDcpICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5za2lwVHlwZSh3aXJlVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgdGhpcy5za2lwKDQpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiaW52YWxpZCB3aXJlIHR5cGUgXCIgKyB3aXJlVHlwZSArIFwiIGF0IG9mZnNldCBcIiArIHRoaXMucG9zKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5SZWFkZXIuX2NvbmZpZ3VyZSA9IGZ1bmN0aW9uKEJ1ZmZlclJlYWRlcl8pIHtcbiAgICBCdWZmZXJSZWFkZXIgPSBCdWZmZXJSZWFkZXJfO1xuICAgIFJlYWRlci5jcmVhdGUgPSBjcmVhdGUoKTtcbiAgICBCdWZmZXJSZWFkZXIuX2NvbmZpZ3VyZSgpO1xuXG4gICAgdmFyIGZuID0gdXRpbC5Mb25nID8gXCJ0b0xvbmdcIiA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFwidG9OdW1iZXJcIjtcbiAgICB1dGlsLm1lcmdlKFJlYWRlci5wcm90b3R5cGUsIHtcblxuICAgICAgICBpbnQ2NDogZnVuY3Rpb24gcmVhZF9pbnQ2NCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkTG9uZ1ZhcmludC5jYWxsKHRoaXMpW2ZuXShmYWxzZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdWludDY0OiBmdW5jdGlvbiByZWFkX3VpbnQ2NCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkTG9uZ1ZhcmludC5jYWxsKHRoaXMpW2ZuXSh0cnVlKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaW50NjQ6IGZ1bmN0aW9uIHJlYWRfc2ludDY0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRMb25nVmFyaW50LmNhbGwodGhpcykuenpEZWNvZGUoKVtmbl0oZmFsc2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZpeGVkNjQ6IGZ1bmN0aW9uIHJlYWRfZml4ZWQ2NCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkRml4ZWQ2NC5jYWxsKHRoaXMpW2ZuXSh0cnVlKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZml4ZWQ2NDogZnVuY3Rpb24gcmVhZF9zZml4ZWQ2NCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkRml4ZWQ2NC5jYWxsKHRoaXMpW2ZuXShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBCdWZmZXJSZWFkZXI7XG5cbi8vIGV4dGVuZHMgUmVhZGVyXG52YXIgUmVhZGVyID0gcmVxdWlyZShcIi4vcmVhZGVyXCIpO1xuKEJ1ZmZlclJlYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlYWRlci5wcm90b3R5cGUpKS5jb25zdHJ1Y3RvciA9IEJ1ZmZlclJlYWRlcjtcblxudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIik7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyBidWZmZXIgcmVhZGVyIGluc3RhbmNlLlxuICogQGNsYXNzZGVzYyBXaXJlIGZvcm1hdCByZWFkZXIgdXNpbmcgbm9kZSBidWZmZXJzLlxuICogQGV4dGVuZHMgUmVhZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgQnVmZmVyIHRvIHJlYWQgZnJvbVxuICovXG5mdW5jdGlvbiBCdWZmZXJSZWFkZXIoYnVmZmVyKSB7XG4gICAgUmVhZGVyLmNhbGwodGhpcywgYnVmZmVyKTtcblxuICAgIC8qKlxuICAgICAqIFJlYWQgYnVmZmVyLlxuICAgICAqIEBuYW1lIEJ1ZmZlclJlYWRlciNidWZcbiAgICAgKiBAdHlwZSB7QnVmZmVyfVxuICAgICAqL1xufVxuXG5CdWZmZXJSZWFkZXIuX2NvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICh1dGlsLkJ1ZmZlcilcbiAgICAgICAgQnVmZmVyUmVhZGVyLnByb3RvdHlwZS5fc2xpY2UgPSB1dGlsLkJ1ZmZlci5wcm90b3R5cGUuc2xpY2U7XG59O1xuXG5cbi8qKlxuICogQG92ZXJyaWRlXG4gKi9cbkJ1ZmZlclJlYWRlci5wcm90b3R5cGUuc3RyaW5nID0gZnVuY3Rpb24gcmVhZF9zdHJpbmdfYnVmZmVyKCkge1xuICAgIHZhciBsZW4gPSB0aGlzLnVpbnQzMigpOyAvLyBtb2RpZmllcyBwb3NcbiAgICByZXR1cm4gdGhpcy5idWYudXRmOFNsaWNlXG4gICAgICAgID8gdGhpcy5idWYudXRmOFNsaWNlKHRoaXMucG9zLCB0aGlzLnBvcyA9IE1hdGgubWluKHRoaXMucG9zICsgbGVuLCB0aGlzLmxlbikpXG4gICAgICAgIDogdGhpcy5idWYudG9TdHJpbmcoXCJ1dGYtOFwiLCB0aGlzLnBvcywgdGhpcy5wb3MgPSBNYXRoLm1pbih0aGlzLnBvcyArIGxlbiwgdGhpcy5sZW4pKTtcbn07XG5cbi8qKlxuICogUmVhZHMgYSBzZXF1ZW5jZSBvZiBieXRlcyBwcmVjZWVkZWQgYnkgaXRzIGxlbmd0aCBhcyBhIHZhcmludC5cbiAqIEBuYW1lIEJ1ZmZlclJlYWRlciNieXRlc1xuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBWYWx1ZSByZWFkXG4gKi9cblxuQnVmZmVyUmVhZGVyLl9jb25maWd1cmUoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLyoqXG4gKiBOYW1lZCByb290cy5cbiAqIFRoaXMgaXMgd2hlcmUgcGJqcyBzdG9yZXMgZ2VuZXJhdGVkIHN0cnVjdHVyZXMgKHRoZSBvcHRpb24gYC1yLCAtLXJvb3RgIHNwZWNpZmllcyBhIG5hbWUpLlxuICogQ2FuIGFsc28gYmUgdXNlZCBtYW51YWxseSB0byBtYWtlIHJvb3RzIGF2YWlsYWJsZSBhY2Nyb3NzIG1vZHVsZXMuXG4gKiBAbmFtZSByb290c1xuICogQHR5cGUge09iamVjdC48c3RyaW5nLFJvb3Q+fVxuICogQGV4YW1wbGVcbiAqIC8vIHBianMgLXIgbXlyb290IC1vIGNvbXBpbGVkLmpzIC4uLlxuICpcbiAqIC8vIGluIGFub3RoZXIgbW9kdWxlOlxuICogcmVxdWlyZShcIi4vY29tcGlsZWQuanNcIik7XG4gKlxuICogLy8gaW4gYW55IHN1YnNlcXVlbnQgbW9kdWxlOlxuICogdmFyIHJvb3QgPSBwcm90b2J1Zi5yb290c1tcIm15cm9vdFwiXTtcbiAqL1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogU3RyZWFtaW5nIFJQQyBoZWxwZXJzLlxuICogQG5hbWVzcGFjZVxuICovXG52YXIgcnBjID0gZXhwb3J0cztcblxuLyoqXG4gKiBSUEMgaW1wbGVtZW50YXRpb24gcGFzc2VkIHRvIHtAbGluayBTZXJ2aWNlI2NyZWF0ZX0gcGVyZm9ybWluZyBhIHNlcnZpY2UgcmVxdWVzdCBvbiBuZXR3b3JrIGxldmVsLCBpLmUuIGJ5IHV0aWxpemluZyBodHRwIHJlcXVlc3RzIG9yIHdlYnNvY2tldHMuXG4gKiBAdHlwZWRlZiBSUENJbXBsXG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKiBAcGFyYW0ge01ldGhvZHxycGMuU2VydmljZU1ldGhvZDxNZXNzYWdlPHt9PixNZXNzYWdlPHt9Pj59IG1ldGhvZCBSZWZsZWN0ZWQgb3Igc3RhdGljIG1ldGhvZCBiZWluZyBjYWxsZWRcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gcmVxdWVzdERhdGEgUmVxdWVzdCBkYXRhXG4gKiBAcGFyYW0ge1JQQ0ltcGxDYWxsYmFja30gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKiBAZXhhbXBsZVxuICogZnVuY3Rpb24gcnBjSW1wbChtZXRob2QsIHJlcXVlc3REYXRhLCBjYWxsYmFjaykge1xuICogICAgIGlmIChwcm90b2J1Zi51dGlsLmxjRmlyc3QobWV0aG9kLm5hbWUpICE9PSBcIm15TWV0aG9kXCIpIC8vIGNvbXBhdGlibGUgd2l0aCBzdGF0aWMgY29kZVxuICogICAgICAgICB0aHJvdyBFcnJvcihcIm5vIHN1Y2ggbWV0aG9kXCIpO1xuICogICAgIGFzeW5jaHJvbm91c2x5T2J0YWluQVJlc3BvbnNlKHJlcXVlc3REYXRhLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlRGF0YSkge1xuICogICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3BvbnNlRGF0YSk7XG4gKiAgICAgfSk7XG4gKiB9XG4gKi9cblxuLyoqXG4gKiBOb2RlLXN0eWxlIGNhbGxiYWNrIGFzIHVzZWQgYnkge0BsaW5rIFJQQ0ltcGx9LlxuICogQHR5cGVkZWYgUlBDSW1wbENhbGxiYWNrXG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKiBAcGFyYW0ge0Vycm9yfG51bGx9IGVycm9yIEVycm9yLCBpZiBhbnksIG90aGVyd2lzZSBgbnVsbGBcbiAqIEBwYXJhbSB7VWludDhBcnJheXxudWxsfSBbcmVzcG9uc2VdIFJlc3BvbnNlIGRhdGEgb3IgYG51bGxgIHRvIHNpZ25hbCBlbmQgb2Ygc3RyZWFtLCBpZiB0aGVyZSBoYXNuJ3QgYmVlbiBhbiBlcnJvclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuXG5ycGMuU2VydmljZSA9IHJlcXVpcmUoXCIuL3JwYy9zZXJ2aWNlXCIpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZpY2U7XG5cbnZhciB1dGlsID0gcmVxdWlyZShcIi4uL3V0aWwvbWluaW1hbFwiKTtcblxuLy8gRXh0ZW5kcyBFdmVudEVtaXR0ZXJcbihTZXJ2aWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodXRpbC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3IgPSBTZXJ2aWNlO1xuXG4vKipcbiAqIEEgc2VydmljZSBtZXRob2QgY2FsbGJhY2sgYXMgdXNlZCBieSB7QGxpbmsgcnBjLlNlcnZpY2VNZXRob2R8U2VydmljZU1ldGhvZH0uXG4gKlxuICogRGlmZmVycyBmcm9tIHtAbGluayBSUENJbXBsQ2FsbGJhY2t9IGluIHRoYXQgaXQgaXMgYW4gYWN0dWFsIGNhbGxiYWNrIG9mIGEgc2VydmljZSBtZXRob2Qgd2hpY2ggbWF5IG5vdCByZXR1cm4gYHJlc3BvbnNlID0gbnVsbGAuXG4gKiBAdHlwZWRlZiBycGMuU2VydmljZU1ldGhvZENhbGxiYWNrXG4gKiBAdGVtcGxhdGUgVFJlcyBleHRlbmRzIE1lc3NhZ2U8VFJlcz5cbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7RXJyb3J8bnVsbH0gZXJyb3IgRXJyb3IsIGlmIGFueVxuICogQHBhcmFtIHtUUmVzfSBbcmVzcG9uc2VdIFJlc3BvbnNlIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cblxuLyoqXG4gKiBBIHNlcnZpY2UgbWV0aG9kIHBhcnQgb2YgYSB7QGxpbmsgcnBjLlNlcnZpY2V9IGFzIGNyZWF0ZWQgYnkge0BsaW5rIFNlcnZpY2UuY3JlYXRlfS5cbiAqIEB0eXBlZGVmIHJwYy5TZXJ2aWNlTWV0aG9kXG4gKiBAdGVtcGxhdGUgVFJlcSBleHRlbmRzIE1lc3NhZ2U8VFJlcT5cbiAqIEB0ZW1wbGF0ZSBUUmVzIGV4dGVuZHMgTWVzc2FnZTxUUmVzPlxuICogQHR5cGUge2Z1bmN0aW9ufVxuICogQHBhcmFtIHtUUmVxfFByb3BlcnRpZXM8VFJlcT59IHJlcXVlc3QgUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdFxuICogQHBhcmFtIHtycGMuU2VydmljZU1ldGhvZENhbGxiYWNrPFRSZXM+fSBbY2FsbGJhY2tdIE5vZGUtc3R5bGUgY2FsbGJhY2sgY2FsbGVkIHdpdGggdGhlIGVycm9yLCBpZiBhbnksIGFuZCB0aGUgcmVzcG9uc2UgbWVzc2FnZVxuICogQHJldHVybnMge1Byb21pc2U8TWVzc2FnZTxUUmVzPj59IFByb21pc2UgaWYgYGNhbGxiYWNrYCBoYXMgYmVlbiBvbWl0dGVkLCBvdGhlcndpc2UgYHVuZGVmaW5lZGBcbiAqL1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgUlBDIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIEFuIFJQQyBzZXJ2aWNlIGFzIHJldHVybmVkIGJ5IHtAbGluayBTZXJ2aWNlI2NyZWF0ZX0uXG4gKiBAZXhwb3J0cyBycGMuU2VydmljZVxuICogQGV4dGVuZHMgdXRpbC5FdmVudEVtaXR0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtSUENJbXBsfSBycGNJbXBsIFJQQyBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbcmVxdWVzdERlbGltaXRlZD1mYWxzZV0gV2hldGhlciByZXF1ZXN0cyBhcmUgbGVuZ3RoLWRlbGltaXRlZFxuICogQHBhcmFtIHtib29sZWFufSBbcmVzcG9uc2VEZWxpbWl0ZWQ9ZmFsc2VdIFdoZXRoZXIgcmVzcG9uc2VzIGFyZSBsZW5ndGgtZGVsaW1pdGVkXG4gKi9cbmZ1bmN0aW9uIFNlcnZpY2UocnBjSW1wbCwgcmVxdWVzdERlbGltaXRlZCwgcmVzcG9uc2VEZWxpbWl0ZWQpIHtcblxuICAgIGlmICh0eXBlb2YgcnBjSW1wbCAhPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCJycGNJbXBsIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcblxuICAgIHV0aWwuRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBSUEMgaW1wbGVtZW50YXRpb24uIEJlY29tZXMgYG51bGxgIG9uY2UgdGhlIHNlcnZpY2UgaXMgZW5kZWQuXG4gICAgICogQHR5cGUge1JQQ0ltcGx8bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLnJwY0ltcGwgPSBycGNJbXBsO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciByZXF1ZXN0cyBhcmUgbGVuZ3RoLWRlbGltaXRlZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcXVlc3REZWxpbWl0ZWQgPSBCb29sZWFuKHJlcXVlc3REZWxpbWl0ZWQpO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciByZXNwb25zZXMgYXJlIGxlbmd0aC1kZWxpbWl0ZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZXNwb25zZURlbGltaXRlZCA9IEJvb2xlYW4ocmVzcG9uc2VEZWxpbWl0ZWQpO1xufVxuXG4vKipcbiAqIENhbGxzIGEgc2VydmljZSBtZXRob2QgdGhyb3VnaCB7QGxpbmsgcnBjLlNlcnZpY2UjcnBjSW1wbHxycGNJbXBsfS5cbiAqIEBwYXJhbSB7TWV0aG9kfHJwYy5TZXJ2aWNlTWV0aG9kPFRSZXEsVFJlcz59IG1ldGhvZCBSZWZsZWN0ZWQgb3Igc3RhdGljIG1ldGhvZFxuICogQHBhcmFtIHtDb25zdHJ1Y3RvcjxUUmVxPn0gcmVxdWVzdEN0b3IgUmVxdWVzdCBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtDb25zdHJ1Y3RvcjxUUmVzPn0gcmVzcG9uc2VDdG9yIFJlc3BvbnNlIGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1RSZXF8UHJvcGVydGllczxUUmVxPn0gcmVxdWVzdCBSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0XG4gKiBAcGFyYW0ge3JwYy5TZXJ2aWNlTWV0aG9kQ2FsbGJhY2s8VFJlcz59IGNhbGxiYWNrIFNlcnZpY2UgY2FsbGJhY2tcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKiBAdGVtcGxhdGUgVFJlcSBleHRlbmRzIE1lc3NhZ2U8VFJlcT5cbiAqIEB0ZW1wbGF0ZSBUUmVzIGV4dGVuZHMgTWVzc2FnZTxUUmVzPlxuICovXG5TZXJ2aWNlLnByb3RvdHlwZS5ycGNDYWxsID0gZnVuY3Rpb24gcnBjQ2FsbChtZXRob2QsIHJlcXVlc3RDdG9yLCByZXNwb25zZUN0b3IsIHJlcXVlc3QsIGNhbGxiYWNrKSB7XG5cbiAgICBpZiAoIXJlcXVlc3QpXG4gICAgICAgIHRocm93IFR5cGVFcnJvcihcInJlcXVlc3QgbXVzdCBiZSBzcGVjaWZpZWRcIik7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCFjYWxsYmFjaylcbiAgICAgICAgcmV0dXJuIHV0aWwuYXNQcm9taXNlKHJwY0NhbGwsIHNlbGYsIG1ldGhvZCwgcmVxdWVzdEN0b3IsIHJlc3BvbnNlQ3RvciwgcmVxdWVzdCk7XG5cbiAgICBpZiAoIXNlbGYucnBjSW1wbCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayhFcnJvcihcImFscmVhZHkgZW5kZWRcIikpOyB9LCAwKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gc2VsZi5ycGNJbXBsKFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgcmVxdWVzdEN0b3Jbc2VsZi5yZXF1ZXN0RGVsaW1pdGVkID8gXCJlbmNvZGVEZWxpbWl0ZWRcIiA6IFwiZW5jb2RlXCJdKHJlcXVlc3QpLmZpbmlzaCgpLFxuICAgICAgICAgICAgZnVuY3Rpb24gcnBjQ2FsbGJhY2soZXJyLCByZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIsIG1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmVuZCgvKiBlbmRlZEJ5UlBDICovIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlIGluc3RhbmNlb2YgcmVzcG9uc2VDdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZUN0b3Jbc2VsZi5yZXNwb25zZURlbGltaXRlZCA/IFwiZGVjb2RlRGVsaW1pdGVkXCIgOiBcImRlY29kZVwiXShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgZXJyLCBtZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJkYXRhXCIsIHJlc3BvbnNlLCBtZXRob2QpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIGVyciwgbWV0aG9kKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soZXJyKTsgfSwgMCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufTtcblxuLyoqXG4gKiBFbmRzIHRoaXMgc2VydmljZSBhbmQgZW1pdHMgdGhlIGBlbmRgIGV2ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbZW5kZWRCeVJQQz1mYWxzZV0gV2hldGhlciB0aGUgc2VydmljZSBoYXMgYmVlbiBlbmRlZCBieSB0aGUgUlBDIGltcGxlbWVudGF0aW9uLlxuICogQHJldHVybnMge3JwYy5TZXJ2aWNlfSBgdGhpc2BcbiAqL1xuU2VydmljZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gZW5kKGVuZGVkQnlSUEMpIHtcbiAgICBpZiAodGhpcy5ycGNJbXBsKSB7XG4gICAgICAgIGlmICghZW5kZWRCeVJQQykgLy8gc2lnbmFsIGVuZCB0byBycGNJbXBsXG4gICAgICAgICAgICB0aGlzLnJwY0ltcGwobnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHRoaXMucnBjSW1wbCA9IG51bGw7XG4gICAgICAgIHRoaXMuZW1pdChcImVuZFwiKS5vZmYoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IExvbmdCaXRzO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuLi91dGlsL21pbmltYWxcIik7XG5cbi8qKlxuICogQ29uc3RydWN0cyBuZXcgbG9uZyBiaXRzLlxuICogQGNsYXNzZGVzYyBIZWxwZXIgY2xhc3MgZm9yIHdvcmtpbmcgd2l0aCB0aGUgbG93IGFuZCBoaWdoIGJpdHMgb2YgYSA2NCBiaXQgdmFsdWUuXG4gKiBAbWVtYmVyb2YgdXRpbFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge251bWJlcn0gbG8gTG93IDMyIGJpdHMsIHVuc2lnbmVkXG4gKiBAcGFyYW0ge251bWJlcn0gaGkgSGlnaCAzMiBiaXRzLCB1bnNpZ25lZFxuICovXG5mdW5jdGlvbiBMb25nQml0cyhsbywgaGkpIHtcblxuICAgIC8vIG5vdGUgdGhhdCB0aGUgY2FzdHMgYmVsb3cgYXJlIHRoZW9yZXRpY2FsbHkgdW5uZWNlc3NhcnkgYXMgb2YgdG9kYXksIGJ1dCBvbGRlciBzdGF0aWNhbGx5XG4gICAgLy8gZ2VuZXJhdGVkIGNvbnZlcnRlciBjb2RlIG1pZ2h0IHN0aWxsIGNhbGwgdGhlIGN0b3Igd2l0aCBzaWduZWQgMzJiaXRzLiBrZXB0IGZvciBjb21wYXQuXG5cbiAgICAvKipcbiAgICAgKiBMb3cgYml0cy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubG8gPSBsbyA+Pj4gMDtcblxuICAgIC8qKlxuICAgICAqIEhpZ2ggYml0cy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaGkgPSBoaSA+Pj4gMDtcbn1cblxuLyoqXG4gKiBaZXJvIGJpdHMuXG4gKiBAbWVtYmVyb2YgdXRpbC5Mb25nQml0c1xuICogQHR5cGUge3V0aWwuTG9uZ0JpdHN9XG4gKi9cbnZhciB6ZXJvID0gTG9uZ0JpdHMuemVybyA9IG5ldyBMb25nQml0cygwLCAwKTtcblxuemVyby50b051bWJlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbnplcm8uenpFbmNvZGUgPSB6ZXJvLnp6RGVjb2RlID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9O1xuemVyby5sZW5ndGggPSBmdW5jdGlvbigpIHsgcmV0dXJuIDE7IH07XG5cbi8qKlxuICogWmVybyBoYXNoLlxuICogQG1lbWJlcm9mIHV0aWwuTG9uZ0JpdHNcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciB6ZXJvSGFzaCA9IExvbmdCaXRzLnplcm9IYXNoID0gXCJcXDBcXDBcXDBcXDBcXDBcXDBcXDBcXDBcIjtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIG5ldyBsb25nIGJpdHMgZnJvbSB0aGUgc3BlY2lmaWVkIG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZVxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IEluc3RhbmNlXG4gKi9cbkxvbmdCaXRzLmZyb21OdW1iZXIgPSBmdW5jdGlvbiBmcm9tTnVtYmVyKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSAwKVxuICAgICAgICByZXR1cm4gemVybztcbiAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMDtcbiAgICBpZiAoc2lnbilcbiAgICAgICAgdmFsdWUgPSAtdmFsdWU7XG4gICAgdmFyIGxvID0gdmFsdWUgPj4+IDAsXG4gICAgICAgIGhpID0gKHZhbHVlIC0gbG8pIC8gNDI5NDk2NzI5NiA+Pj4gMDtcbiAgICBpZiAoc2lnbikge1xuICAgICAgICBoaSA9IH5oaSA+Pj4gMDtcbiAgICAgICAgbG8gPSB+bG8gPj4+IDA7XG4gICAgICAgIGlmICgrK2xvID4gNDI5NDk2NzI5NSkge1xuICAgICAgICAgICAgbG8gPSAwO1xuICAgICAgICAgICAgaWYgKCsraGkgPiA0Mjk0OTY3Mjk1KVxuICAgICAgICAgICAgICAgIGhpID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IExvbmdCaXRzKGxvLCBoaSk7XG59O1xuXG4vKipcbiAqIENvbnN0cnVjdHMgbmV3IGxvbmcgYml0cyBmcm9tIGEgbnVtYmVyLCBsb25nIG9yIHN0cmluZy5cbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZVxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IEluc3RhbmNlXG4gKi9cbkxvbmdCaXRzLmZyb20gPSBmdW5jdGlvbiBmcm9tKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgcmV0dXJuIExvbmdCaXRzLmZyb21OdW1iZXIodmFsdWUpO1xuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICBpZiAodXRpbC5Mb25nKVxuICAgICAgICAgICAgdmFsdWUgPSB1dGlsLkxvbmcuZnJvbVN0cmluZyh2YWx1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBMb25nQml0cy5mcm9tTnVtYmVyKHBhcnNlSW50KHZhbHVlLCAxMCkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUubG93IHx8IHZhbHVlLmhpZ2ggPyBuZXcgTG9uZ0JpdHModmFsdWUubG93ID4+PiAwLCB2YWx1ZS5oaWdoID4+PiAwKSA6IHplcm87XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgcG9zc2libHkgdW5zYWZlIEphdmFTY3JpcHQgbnVtYmVyLlxuICogQHBhcmFtIHtib29sZWFufSBbdW5zaWduZWQ9ZmFsc2VdIFdoZXRoZXIgdW5zaWduZWQgb3Igbm90XG4gKiBAcmV0dXJucyB7bnVtYmVyfSBQb3NzaWJseSB1bnNhZmUgbnVtYmVyXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyKHVuc2lnbmVkKSB7XG4gICAgaWYgKCF1bnNpZ25lZCAmJiB0aGlzLmhpID4+PiAzMSkge1xuICAgICAgICB2YXIgbG8gPSB+dGhpcy5sbyArIDEgPj4+IDAsXG4gICAgICAgICAgICBoaSA9IH50aGlzLmhpICAgICA+Pj4gMDtcbiAgICAgICAgaWYgKCFsbylcbiAgICAgICAgICAgIGhpID0gaGkgKyAxID4+PiAwO1xuICAgICAgICByZXR1cm4gLShsbyArIGhpICogNDI5NDk2NzI5Nik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxvICsgdGhpcy5oaSAqIDQyOTQ5NjcyOTY7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgbG9uZy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Vuc2lnbmVkPWZhbHNlXSBXaGV0aGVyIHVuc2lnbmVkIG9yIG5vdFxuICogQHJldHVybnMge0xvbmd9IExvbmdcbiAqL1xuTG9uZ0JpdHMucHJvdG90eXBlLnRvTG9uZyA9IGZ1bmN0aW9uIHRvTG9uZyh1bnNpZ25lZCkge1xuICAgIHJldHVybiB1dGlsLkxvbmdcbiAgICAgICAgPyBuZXcgdXRpbC5Mb25nKHRoaXMubG8gfCAwLCB0aGlzLmhpIHwgMCwgQm9vbGVhbih1bnNpZ25lZCkpXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIDogeyBsb3c6IHRoaXMubG8gfCAwLCBoaWdoOiB0aGlzLmhpIHwgMCwgdW5zaWduZWQ6IEJvb2xlYW4odW5zaWduZWQpIH07XG59O1xuXG52YXIgY2hhckNvZGVBdCA9IFN0cmluZy5wcm90b3R5cGUuY2hhckNvZGVBdDtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIG5ldyBsb25nIGJpdHMgZnJvbSB0aGUgc3BlY2lmaWVkIDggY2hhcmFjdGVycyBsb25nIGhhc2guXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBIYXNoXG4gKiBAcmV0dXJucyB7dXRpbC5Mb25nQml0c30gQml0c1xuICovXG5Mb25nQml0cy5mcm9tSGFzaCA9IGZ1bmN0aW9uIGZyb21IYXNoKGhhc2gpIHtcbiAgICBpZiAoaGFzaCA9PT0gemVyb0hhc2gpXG4gICAgICAgIHJldHVybiB6ZXJvO1xuICAgIHJldHVybiBuZXcgTG9uZ0JpdHMoXG4gICAgICAgICggY2hhckNvZGVBdC5jYWxsKGhhc2gsIDApXG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDEpIDw8IDhcbiAgICAgICAgfCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgMikgPDwgMTZcbiAgICAgICAgfCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgMykgPDwgMjQpID4+PiAwXG4gICAgLFxuICAgICAgICAoIGNoYXJDb2RlQXQuY2FsbChoYXNoLCA0KVxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCA1KSA8PCA4XG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDYpIDw8IDE2XG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDcpIDw8IDI0KSA+Pj4gMFxuICAgICk7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgOCBjaGFyYWN0ZXJzIGxvbmcgaGFzaC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEhhc2hcbiAqL1xuTG9uZ0JpdHMucHJvdG90eXBlLnRvSGFzaCA9IGZ1bmN0aW9uIHRvSGFzaCgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAgICAgdGhpcy5sbyAgICAgICAgJiAyNTUsXG4gICAgICAgIHRoaXMubG8gPj4+IDggICYgMjU1LFxuICAgICAgICB0aGlzLmxvID4+PiAxNiAmIDI1NSxcbiAgICAgICAgdGhpcy5sbyA+Pj4gMjQgICAgICAsXG4gICAgICAgIHRoaXMuaGkgICAgICAgICYgMjU1LFxuICAgICAgICB0aGlzLmhpID4+PiA4ICAmIDI1NSxcbiAgICAgICAgdGhpcy5oaSA+Pj4gMTYgJiAyNTUsXG4gICAgICAgIHRoaXMuaGkgPj4+IDI0XG4gICAgKTtcbn07XG5cbi8qKlxuICogWmlnLXphZyBlbmNvZGVzIHRoaXMgbG9uZyBiaXRzLlxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IGB0aGlzYFxuICovXG5Mb25nQml0cy5wcm90b3R5cGUuenpFbmNvZGUgPSBmdW5jdGlvbiB6ekVuY29kZSgpIHtcbiAgICB2YXIgbWFzayA9ICAgdGhpcy5oaSA+PiAzMTtcbiAgICB0aGlzLmhpICA9ICgodGhpcy5oaSA8PCAxIHwgdGhpcy5sbyA+Pj4gMzEpIF4gbWFzaykgPj4+IDA7XG4gICAgdGhpcy5sbyAgPSAoIHRoaXMubG8gPDwgMSAgICAgICAgICAgICAgICAgICBeIG1hc2spID4+PiAwO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBaaWctemFnIGRlY29kZXMgdGhpcyBsb25nIGJpdHMuXG4gKiBAcmV0dXJucyB7dXRpbC5Mb25nQml0c30gYHRoaXNgXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS56ekRlY29kZSA9IGZ1bmN0aW9uIHp6RGVjb2RlKCkge1xuICAgIHZhciBtYXNrID0gLSh0aGlzLmxvICYgMSk7XG4gICAgdGhpcy5sbyAgPSAoKHRoaXMubG8gPj4+IDEgfCB0aGlzLmhpIDw8IDMxKSBeIG1hc2spID4+PiAwO1xuICAgIHRoaXMuaGkgID0gKCB0aGlzLmhpID4+PiAxICAgICAgICAgICAgICAgICAgXiBtYXNrKSA+Pj4gMDtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIHRoaXMgbG9uZ2JpdHMgd2hlbiBlbmNvZGVkIGFzIGEgdmFyaW50LlxuICogQHJldHVybnMge251bWJlcn0gTGVuZ3RoXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiBsZW5ndGgoKSB7XG4gICAgdmFyIHBhcnQwID0gIHRoaXMubG8sXG4gICAgICAgIHBhcnQxID0gKHRoaXMubG8gPj4+IDI4IHwgdGhpcy5oaSA8PCA0KSA+Pj4gMCxcbiAgICAgICAgcGFydDIgPSAgdGhpcy5oaSA+Pj4gMjQ7XG4gICAgcmV0dXJuIHBhcnQyID09PSAwXG4gICAgICAgICA/IHBhcnQxID09PSAwXG4gICAgICAgICAgID8gcGFydDAgPCAxNjM4NFxuICAgICAgICAgICAgID8gcGFydDAgPCAxMjggPyAxIDogMlxuICAgICAgICAgICAgIDogcGFydDAgPCAyMDk3MTUyID8gMyA6IDRcbiAgICAgICAgICAgOiBwYXJ0MSA8IDE2Mzg0XG4gICAgICAgICAgICAgPyBwYXJ0MSA8IDEyOCA/IDUgOiA2XG4gICAgICAgICAgICAgOiBwYXJ0MSA8IDIwOTcxNTIgPyA3IDogOFxuICAgICAgICAgOiBwYXJ0MiA8IDEyOCA/IDkgOiAxMDtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gZXhwb3J0cztcblxuLy8gdXNlZCB0byByZXR1cm4gYSBQcm9taXNlIHdoZXJlIGNhbGxiYWNrIGlzIG9taXR0ZWRcbnV0aWwuYXNQcm9taXNlID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2FzcHJvbWlzZVwiKTtcblxuLy8gY29udmVydHMgdG8gLyBmcm9tIGJhc2U2NCBlbmNvZGVkIHN0cmluZ3NcbnV0aWwuYmFzZTY0ID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2Jhc2U2NFwiKTtcblxuLy8gYmFzZSBjbGFzcyBvZiBycGMuU2VydmljZVxudXRpbC5FdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvZXZlbnRlbWl0dGVyXCIpO1xuXG4vLyBmbG9hdCBoYW5kbGluZyBhY2Nyb3NzIGJyb3dzZXJzXG51dGlsLmZsb2F0ID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2Zsb2F0XCIpO1xuXG4vLyByZXF1aXJlcyBtb2R1bGVzIG9wdGlvbmFsbHkgYW5kIGhpZGVzIHRoZSBjYWxsIGZyb20gYnVuZGxlcnNcbnV0aWwuaW5xdWlyZSA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9pbnF1aXJlXCIpO1xuXG4vLyBjb252ZXJ0cyB0byAvIGZyb20gdXRmOCBlbmNvZGVkIHN0cmluZ3NcbnV0aWwudXRmOCA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy91dGY4XCIpO1xuXG4vLyBwcm92aWRlcyBhIG5vZGUtbGlrZSBidWZmZXIgcG9vbCBpbiB0aGUgYnJvd3NlclxudXRpbC5wb29sID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL3Bvb2xcIik7XG5cbi8vIHV0aWxpdHkgdG8gd29yayB3aXRoIHRoZSBsb3cgYW5kIGhpZ2ggYml0cyBvZiBhIDY0IGJpdCB2YWx1ZVxudXRpbC5Mb25nQml0cyA9IHJlcXVpcmUoXCIuL2xvbmdiaXRzXCIpO1xuXG4vKipcbiAqIFdoZXRoZXIgcnVubmluZyB3aXRoaW4gbm9kZSBvciBub3QuXG4gKiBAbWVtYmVyb2YgdXRpbFxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbnV0aWwuaXNOb2RlID0gQm9vbGVhbih0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgJiYgZ2xvYmFsXG4gICAgICAgICAgICAgICAgICAgJiYgZ2xvYmFsLnByb2Nlc3NcbiAgICAgICAgICAgICAgICAgICAmJiBnbG9iYWwucHJvY2Vzcy52ZXJzaW9uc1xuICAgICAgICAgICAgICAgICAgICYmIGdsb2JhbC5wcm9jZXNzLnZlcnNpb25zLm5vZGUpO1xuXG4vKipcbiAqIEdsb2JhbCBvYmplY3QgcmVmZXJlbmNlLlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbnV0aWwuZ2xvYmFsID0gdXRpbC5pc05vZGUgJiYgZ2xvYmFsXG4gICAgICAgICAgIHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93XG4gICAgICAgICAgIHx8IHR5cGVvZiBzZWxmICAgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZlxuICAgICAgICAgICB8fCB0aGlzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xuXG4vKipcbiAqIEFuIGltbXVhYmxlIGVtcHR5IGFycmF5LlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEB0eXBlIHtBcnJheS48Kj59XG4gKiBAY29uc3RcbiAqL1xudXRpbC5lbXB0eUFycmF5ID0gT2JqZWN0LmZyZWV6ZSA/IE9iamVjdC5mcmVlemUoW10pIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gW107IC8vIHVzZWQgb24gcHJvdG90eXBlc1xuXG4vKipcbiAqIEFuIGltbXV0YWJsZSBlbXB0eSBvYmplY3QuXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQGNvbnN0XG4gKi9cbnV0aWwuZW1wdHlPYmplY3QgPSBPYmplY3QuZnJlZXplID8gT2JqZWN0LmZyZWV6ZSh7fSkgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB7fTsgLy8gdXNlZCBvbiBwcm90b3R5cGVzXG5cbi8qKlxuICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhbiBpbnRlZ2VyLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGFuIGludGVnZXJcbiAqL1xudXRpbC5pc0ludGVnZXIgPSBOdW1iZXIuaXNJbnRlZ2VyIHx8IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZTtcbn07XG5cbi8qKlxuICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhIHN0cmluZy5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmdcbiAqL1xudXRpbC5pc1N0cmluZyA9IGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZztcbn07XG5cbi8qKlxuICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhIG5vbi1udWxsIG9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYSBub24tbnVsbCBvYmplY3RcbiAqL1xudXRpbC5pc09iamVjdCA9IGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIjtcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgcHJvcGVydHkgb24gYSBtZXNzYWdlIGlzIGNvbnNpZGVyZWQgdG8gYmUgcHJlc2VudC5cbiAqIFRoaXMgaXMgYW4gYWxpYXMgb2Yge0BsaW5rIHV0aWwuaXNTZXR9LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFBsYWluIG9iamVjdCBvciBtZXNzYWdlIGluc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIGNvbnNpZGVyZWQgdG8gYmUgcHJlc2VudCwgb3RoZXJ3aXNlIGBmYWxzZWBcbiAqL1xudXRpbC5pc3NldCA9XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgcHJvcGVydHkgb24gYSBtZXNzYWdlIGlzIGNvbnNpZGVyZWQgdG8gYmUgcHJlc2VudC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogUGxhaW4gb2JqZWN0IG9yIG1lc3NhZ2UgaW5zdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFByb3BlcnR5IG5hbWVcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgY29uc2lkZXJlZCB0byBiZSBwcmVzZW50LCBvdGhlcndpc2UgYGZhbHNlYFxuICovXG51dGlsLmlzU2V0ID0gZnVuY3Rpb24gaXNTZXQob2JqLCBwcm9wKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqW3Byb3BdO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXEsIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8IChBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmxlbmd0aCA6IE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGgpID4gMDtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIEFueSBjb21wYXRpYmxlIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIFRoaXMgaXMgYSBtaW5pbWFsIHN0YW5kLWFsb25lIGRlZmluaXRpb24gb2YgYSBCdWZmZXIgaW5zdGFuY2UuIFRoZSBhY3R1YWwgdHlwZSBpcyB0aGF0IGV4cG9ydGVkIGJ5IG5vZGUncyB0eXBpbmdzLlxuICogQGludGVyZmFjZSBCdWZmZXJcbiAqIEBleHRlbmRzIFVpbnQ4QXJyYXlcbiAqL1xuXG4vKipcbiAqIE5vZGUncyBCdWZmZXIgY2xhc3MgaWYgYXZhaWxhYmxlLlxuICogQHR5cGUge0NvbnN0cnVjdG9yPEJ1ZmZlcj59XG4gKi9cbnV0aWwuQnVmZmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBCdWZmZXIgPSB1dGlsLmlucXVpcmUoXCJidWZmZXJcIikuQnVmZmVyO1xuICAgICAgICAvLyByZWZ1c2UgdG8gdXNlIG5vbi1ub2RlIGJ1ZmZlcnMgaWYgbm90IGV4cGxpY2l0bHkgYXNzaWduZWQgKHBlcmYgcmVhc29ucyk6XG4gICAgICAgIHJldHVybiBCdWZmZXIucHJvdG90eXBlLnV0ZjhXcml0ZSA/IEJ1ZmZlciA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIG51bGw7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59KSgpO1xuXG4vLyBJbnRlcm5hbCBhbGlhcyBvZiBvciBwb2x5ZnVsbCBmb3IgQnVmZmVyLmZyb20uXG51dGlsLl9CdWZmZXJfZnJvbSA9IG51bGw7XG5cbi8vIEludGVybmFsIGFsaWFzIG9mIG9yIHBvbHlmaWxsIGZvciBCdWZmZXIuYWxsb2NVbnNhZmUuXG51dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmUgPSBudWxsO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYnVmZmVyIG9mIHdoYXRldmVyIHR5cGUgc3VwcG9ydGVkIGJ5IHRoZSBlbnZpcm9ubWVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfG51bWJlcltdfSBbc2l6ZU9yQXJyYXk9MF0gQnVmZmVyIHNpemUgb3IgbnVtYmVyIGFycmF5XG4gKiBAcmV0dXJucyB7VWludDhBcnJheXxCdWZmZXJ9IEJ1ZmZlclxuICovXG51dGlsLm5ld0J1ZmZlciA9IGZ1bmN0aW9uIG5ld0J1ZmZlcihzaXplT3JBcnJheSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIHR5cGVvZiBzaXplT3JBcnJheSA9PT0gXCJudW1iZXJcIlxuICAgICAgICA/IHV0aWwuQnVmZmVyXG4gICAgICAgICAgICA/IHV0aWwuX0J1ZmZlcl9hbGxvY1Vuc2FmZShzaXplT3JBcnJheSlcbiAgICAgICAgICAgIDogbmV3IHV0aWwuQXJyYXkoc2l6ZU9yQXJyYXkpXG4gICAgICAgIDogdXRpbC5CdWZmZXJcbiAgICAgICAgICAgID8gdXRpbC5fQnVmZmVyX2Zyb20oc2l6ZU9yQXJyYXkpXG4gICAgICAgICAgICA6IHR5cGVvZiBVaW50OEFycmF5ID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgPyBzaXplT3JBcnJheVxuICAgICAgICAgICAgICAgIDogbmV3IFVpbnQ4QXJyYXkoc2l6ZU9yQXJyYXkpO1xufTtcblxuLyoqXG4gKiBBcnJheSBpbXBsZW1lbnRhdGlvbiB1c2VkIGluIHRoZSBicm93c2VyLiBgVWludDhBcnJheWAgaWYgc3VwcG9ydGVkLCBvdGhlcndpc2UgYEFycmF5YC5cbiAqIEB0eXBlIHtDb25zdHJ1Y3RvcjxVaW50OEFycmF5Pn1cbiAqL1xudXRpbC5BcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSBcInVuZGVmaW5lZFwiID8gVWludDhBcnJheSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyA6IEFycmF5O1xuXG4vKipcbiAqIEFueSBjb21wYXRpYmxlIExvbmcgaW5zdGFuY2UuXG4gKiBUaGlzIGlzIGEgbWluaW1hbCBzdGFuZC1hbG9uZSBkZWZpbml0aW9uIG9mIGEgTG9uZyBpbnN0YW5jZS4gVGhlIGFjdHVhbCB0eXBlIGlzIHRoYXQgZXhwb3J0ZWQgYnkgbG9uZy5qcy5cbiAqIEBpbnRlcmZhY2UgTG9uZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IGxvdyBMb3cgYml0c1xuICogQHByb3BlcnR5IHtudW1iZXJ9IGhpZ2ggSGlnaCBiaXRzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHVuc2lnbmVkIFdoZXRoZXIgdW5zaWduZWQgb3Igbm90XG4gKi9cblxuLyoqXG4gKiBMb25nLmpzJ3MgTG9uZyBjbGFzcyBpZiBhdmFpbGFibGUuXG4gKiBAdHlwZSB7Q29uc3RydWN0b3I8TG9uZz59XG4gKi9cbnV0aWwuTG9uZyA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHV0aWwuZ2xvYmFsLmRjb2RlSU8gJiYgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gdXRpbC5nbG9iYWwuZGNvZGVJTy5Mb25nXG4gICAgICAgICB8fCAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB1dGlsLmdsb2JhbC5Mb25nXG4gICAgICAgICB8fCB1dGlsLmlucXVpcmUoXCJsb25nXCIpO1xuXG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHZlcmlmeSAyIGJpdCAoYGJvb2xgKSBtYXAga2V5cy5cbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAY29uc3RcbiAqL1xudXRpbC5rZXkyUmUgPSAvXnRydWV8ZmFsc2V8MHwxJC87XG5cbi8qKlxuICogUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gdmVyaWZ5IDMyIGJpdCAoYGludDMyYCBldGMuKSBtYXAga2V5cy5cbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAY29uc3RcbiAqL1xudXRpbC5rZXkzMlJlID0gL14tPyg/OjB8WzEtOV1bMC05XSopJC87XG5cbi8qKlxuICogUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gdmVyaWZ5IDY0IGJpdCAoYGludDY0YCBldGMuKSBtYXAga2V5cy5cbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAY29uc3RcbiAqL1xudXRpbC5rZXk2NFJlID0gL14oPzpbXFxcXHgwMC1cXFxceGZmXXs4fXwtPyg/OjB8WzEtOV1bMC05XSopKSQvO1xuXG4vKipcbiAqIENvbnZlcnRzIGEgbnVtYmVyIG9yIGxvbmcgdG8gYW4gOCBjaGFyYWN0ZXJzIGxvbmcgaGFzaCBzdHJpbmcuXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBIYXNoXG4gKi9cbnV0aWwubG9uZ1RvSGFzaCA9IGZ1bmN0aW9uIGxvbmdUb0hhc2godmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgPyB1dGlsLkxvbmdCaXRzLmZyb20odmFsdWUpLnRvSGFzaCgpXG4gICAgICAgIDogdXRpbC5Mb25nQml0cy56ZXJvSGFzaDtcbn07XG5cbi8qKlxuICogQ29udmVydHMgYW4gOCBjaGFyYWN0ZXJzIGxvbmcgaGFzaCBzdHJpbmcgdG8gYSBsb25nIG9yIG51bWJlci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEhhc2hcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Vuc2lnbmVkPWZhbHNlXSBXaGV0aGVyIHVuc2lnbmVkIG9yIG5vdFxuICogQHJldHVybnMge0xvbmd8bnVtYmVyfSBPcmlnaW5hbCB2YWx1ZVxuICovXG51dGlsLmxvbmdGcm9tSGFzaCA9IGZ1bmN0aW9uIGxvbmdGcm9tSGFzaChoYXNoLCB1bnNpZ25lZCkge1xuICAgIHZhciBiaXRzID0gdXRpbC5Mb25nQml0cy5mcm9tSGFzaChoYXNoKTtcbiAgICBpZiAodXRpbC5Mb25nKVxuICAgICAgICByZXR1cm4gdXRpbC5Mb25nLmZyb21CaXRzKGJpdHMubG8sIGJpdHMuaGksIHVuc2lnbmVkKTtcbiAgICByZXR1cm4gYml0cy50b051bWJlcihCb29sZWFuKHVuc2lnbmVkKSk7XG59O1xuXG4vKipcbiAqIE1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiB0aGUgc291cmNlIG9iamVjdCBpbnRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAbWVtYmVyb2YgdXRpbFxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gZHN0IERlc3RpbmF0aW9uIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gc3JjIFNvdXJjZSBvYmplY3RcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lmTm90U2V0PWZhbHNlXSBNZXJnZXMgb25seSBpZiB0aGUga2V5IGlzIG5vdCBhbHJlYWR5IHNldFxuICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBEZXN0aW5hdGlvbiBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoZHN0LCBzcmMsIGlmTm90U2V0KSB7IC8vIHVzZWQgYnkgY29udmVydGVyc1xuICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhzcmMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgIGlmIChkc3Rba2V5c1tpXV0gPT09IHVuZGVmaW5lZCB8fCAhaWZOb3RTZXQpXG4gICAgICAgICAgICBkc3Rba2V5c1tpXV0gPSBzcmNba2V5c1tpXV07XG4gICAgcmV0dXJuIGRzdDtcbn1cblxudXRpbC5tZXJnZSA9IG1lcmdlO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzdHJpbmcgdG8gbG93ZXIgY2FzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgU3RyaW5nIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IENvbnZlcnRlZCBzdHJpbmdcbiAqL1xudXRpbC5sY0ZpcnN0ID0gZnVuY3Rpb24gbGNGaXJzdChzdHIpIHtcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyLnN1YnN0cmluZygxKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBlcnJvciBjb25zdHJ1Y3Rvci5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFcnJvciBuYW1lXG4gKiBAcmV0dXJucyB7Q29uc3RydWN0b3I8RXJyb3I+fSBDdXN0b20gZXJyb3IgY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gbmV3RXJyb3IobmFtZSkge1xuXG4gICAgZnVuY3Rpb24gQ3VzdG9tRXJyb3IobWVzc2FnZSwgcHJvcGVydGllcykge1xuXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBDdXN0b21FcnJvcikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUVycm9yKG1lc3NhZ2UsIHByb3BlcnRpZXMpO1xuXG4gICAgICAgIC8vIEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG4gICAgICAgIC8vIF4ganVzdCByZXR1cm5zIGEgbmV3IGVycm9yIGluc3RhbmNlIGJlY2F1c2UgdGhlIGN0b3IgY2FuIGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWVzc2FnZVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtZXNzYWdlOyB9IH0pO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkgLy8gbm9kZVxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgQ3VzdG9tRXJyb3IpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGFja1wiLCB7IHZhbHVlOiBuZXcgRXJyb3IoKS5zdGFjayB8fCBcIlwiIH0pO1xuXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgbWVyZ2UodGhpcywgcHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgKEN1c3RvbUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSkuY29uc3RydWN0b3IgPSBDdXN0b21FcnJvcjtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDdXN0b21FcnJvci5wcm90b3R5cGUsIFwibmFtZVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBuYW1lOyB9IH0pO1xuXG4gICAgQ3VzdG9tRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyBcIjogXCIgKyB0aGlzLm1lc3NhZ2U7XG4gICAgfTtcblxuICAgIHJldHVybiBDdXN0b21FcnJvcjtcbn1cblxudXRpbC5uZXdFcnJvciA9IG5ld0Vycm9yO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgcHJvdG9jb2wgZXJyb3IuXG4gKiBAY2xhc3NkZXNjIEVycm9yIHN1YmNsYXNzIGluZGljYXRpbmcgYSBwcm90b2NvbCBzcGVjaWZjIGVycm9yLlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEBleHRlbmRzIEVycm9yXG4gKiBAdGVtcGxhdGUgVCBleHRlbmRzIE1lc3NhZ2U8VD5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZVxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gW3Byb3BlcnRpZXNdIEFkZGl0aW9uYWwgcHJvcGVydGllc1xuICogQGV4YW1wbGVcbiAqIHRyeSB7XG4gKiAgICAgTXlNZXNzYWdlLmRlY29kZShzb21lQnVmZmVyKTsgLy8gdGhyb3dzIGlmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICogfSBjYXRjaCAoZSkge1xuICogICAgIGlmIChlIGluc3RhbmNlb2YgUHJvdG9jb2xFcnJvciAmJiBlLmluc3RhbmNlKVxuICogICAgICAgICBjb25zb2xlLmxvZyhcImRlY29kZWQgc28gZmFyOiBcIiArIEpTT04uc3RyaW5naWZ5KGUuaW5zdGFuY2UpKTtcbiAqIH1cbiAqL1xudXRpbC5Qcm90b2NvbEVycm9yID0gbmV3RXJyb3IoXCJQcm90b2NvbEVycm9yXCIpO1xuXG4vKipcbiAqIFNvIGZhciBkZWNvZGVkIG1lc3NhZ2UgaW5zdGFuY2UuXG4gKiBAbmFtZSB1dGlsLlByb3RvY29sRXJyb3IjaW5zdGFuY2VcbiAqIEB0eXBlIHtNZXNzYWdlPFQ+fVxuICovXG5cbi8qKlxuICogQSBPbmVPZiBnZXR0ZXIgYXMgcmV0dXJuZWQgYnkge0BsaW5rIHV0aWwub25lT2ZHZXR0ZXJ9LlxuICogQHR5cGVkZWYgT25lT2ZHZXR0ZXJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBTZXQgZmllbGQgbmFtZSwgaWYgYW55XG4gKi9cblxuLyoqXG4gKiBCdWlsZHMgYSBnZXR0ZXIgZm9yIGEgb25lb2YncyBwcmVzZW50IGZpZWxkIG5hbWUuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBmaWVsZE5hbWVzIEZpZWxkIG5hbWVzXG4gKiBAcmV0dXJucyB7T25lT2ZHZXR0ZXJ9IFVuYm91bmQgZ2V0dGVyXG4gKi9cbnV0aWwub25lT2ZHZXR0ZXIgPSBmdW5jdGlvbiBnZXRPbmVPZihmaWVsZE5hbWVzKSB7XG4gICAgdmFyIGZpZWxkTWFwID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgKytpKVxuICAgICAgICBmaWVsZE1hcFtmaWVsZE5hbWVzW2ldXSA9IDE7XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gU2V0IGZpZWxkIG5hbWUsIGlmIGFueVxuICAgICAqIEB0aGlzIE9iamVjdFxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMpLCBpID0ga2V5cy5sZW5ndGggLSAxOyBpID4gLTE7IC0taSlcbiAgICAgICAgICAgIGlmIChmaWVsZE1hcFtrZXlzW2ldXSA9PT0gMSAmJiB0aGlzW2tleXNbaV1dICE9PSB1bmRlZmluZWQgJiYgdGhpc1trZXlzW2ldXSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5c1tpXTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBBIE9uZU9mIHNldHRlciBhcyByZXR1cm5lZCBieSB7QGxpbmsgdXRpbC5vbmVPZlNldHRlcn0uXG4gKiBAdHlwZWRlZiBPbmVPZlNldHRlclxuICogQHR5cGUge2Z1bmN0aW9ufVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSB2YWx1ZSBGaWVsZCBuYW1lXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5cbi8qKlxuICogQnVpbGRzIGEgc2V0dGVyIGZvciBhIG9uZW9mJ3MgcHJlc2VudCBmaWVsZCBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gZmllbGROYW1lcyBGaWVsZCBuYW1lc1xuICogQHJldHVybnMge09uZU9mU2V0dGVyfSBVbmJvdW5kIHNldHRlclxuICovXG51dGlsLm9uZU9mU2V0dGVyID0gZnVuY3Rpb24gc2V0T25lT2YoZmllbGROYW1lcykge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRmllbGQgbmFtZVxuICAgICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAgICogQHRoaXMgT2JqZWN0XG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzW2ldICE9PSBuYW1lKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW2ZpZWxkTmFtZXNbaV1dO1xuICAgIH07XG59O1xuXG4vKipcbiAqIERlZmF1bHQgY29udmVyc2lvbiBvcHRpb25zIHVzZWQgZm9yIHtAbGluayBNZXNzYWdlI3RvSlNPTn0gaW1wbGVtZW50YXRpb25zLlxuICpcbiAqIFRoZXNlIG9wdGlvbnMgYXJlIGNsb3NlIHRvIHByb3RvMydzIEpTT04gbWFwcGluZyB3aXRoIHRoZSBleGNlcHRpb24gdGhhdCBpbnRlcm5hbCB0eXBlcyBsaWtlIEFueSBhcmUgaGFuZGxlZCBqdXN0IGxpa2UgbWVzc2FnZXMuIE1vcmUgcHJlY2lzZWx5OlxuICpcbiAqIC0gTG9uZ3MgYmVjb21lIHN0cmluZ3NcbiAqIC0gRW51bXMgYmVjb21lIHN0cmluZyBrZXlzXG4gKiAtIEJ5dGVzIGJlY29tZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmdzXG4gKiAtIChTdWItKU1lc3NhZ2VzIGJlY29tZSBwbGFpbiBvYmplY3RzXG4gKiAtIE1hcHMgYmVjb21lIHBsYWluIG9iamVjdHMgd2l0aCBhbGwgc3RyaW5nIGtleXNcbiAqIC0gUmVwZWF0ZWQgZmllbGRzIGJlY29tZSBhcnJheXNcbiAqIC0gTmFOIGFuZCBJbmZpbml0eSBmb3IgZmxvYXQgYW5kIGRvdWJsZSBmaWVsZHMgYmVjb21lIHN0cmluZ3NcbiAqXG4gKiBAdHlwZSB7SUNvbnZlcnNpb25PcHRpb25zfVxuICogQHNlZSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zP2hsPWVuI2pzb25cbiAqL1xudXRpbC50b0pTT05PcHRpb25zID0ge1xuICAgIGxvbmdzOiBTdHJpbmcsXG4gICAgZW51bXM6IFN0cmluZyxcbiAgICBieXRlczogU3RyaW5nLFxuICAgIGpzb246IHRydWVcbn07XG5cbi8vIFNldHMgdXAgYnVmZmVyIHV0aWxpdHkgYWNjb3JkaW5nIHRvIHRoZSBlbnZpcm9ubWVudCAoY2FsbGVkIGluIGluZGV4LW1pbmltYWwpXG51dGlsLl9jb25maWd1cmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgQnVmZmVyID0gdXRpbC5CdWZmZXI7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFCdWZmZXIpIHtcbiAgICAgICAgdXRpbC5fQnVmZmVyX2Zyb20gPSB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmUgPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGJlY2F1c2Ugbm9kZSA0LnggYnVmZmVycyBhcmUgaW5jb21wYXRpYmxlICYgaW1tdXRhYmxlXG4gICAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGNvZGVJTy9wcm90b2J1Zi5qcy9wdWxsLzY2NVxuICAgIHV0aWwuX0J1ZmZlcl9mcm9tID0gQnVmZmVyLmZyb20gIT09IFVpbnQ4QXJyYXkuZnJvbSAmJiBCdWZmZXIuZnJvbSB8fFxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBmdW5jdGlvbiBCdWZmZXJfZnJvbSh2YWx1ZSwgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlLCBlbmNvZGluZyk7XG4gICAgICAgIH07XG4gICAgdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gQnVmZmVyLmFsbG9jVW5zYWZlIHx8XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGZ1bmN0aW9uIEJ1ZmZlcl9hbGxvY1Vuc2FmZShzaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcihzaXplKTtcbiAgICAgICAgfTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gV3JpdGVyO1xuXG52YXIgdXRpbCAgICAgID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xuXG52YXIgQnVmZmVyV3JpdGVyOyAvLyBjeWNsaWNcblxudmFyIExvbmdCaXRzICA9IHV0aWwuTG9uZ0JpdHMsXG4gICAgYmFzZTY0ICAgID0gdXRpbC5iYXNlNjQsXG4gICAgdXRmOCAgICAgID0gdXRpbC51dGY4O1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgd3JpdGVyIG9wZXJhdGlvbiBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgU2NoZWR1bGVkIHdyaXRlciBvcGVyYXRpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgVWludDhBcnJheSwgbnVtYmVyKX0gZm4gRnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIHtudW1iZXJ9IGxlbiBWYWx1ZSBieXRlIGxlbmd0aFxuICogQHBhcmFtIHsqfSB2YWwgVmFsdWUgdG8gd3JpdGVcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gT3AoZm4sIGxlbiwgdmFsKSB7XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBjYWxsLlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihVaW50OEFycmF5LCBudW1iZXIsICopfVxuICAgICAqL1xuICAgIHRoaXMuZm4gPSBmbjtcblxuICAgIC8qKlxuICAgICAqIFZhbHVlIGJ5dGUgbGVuZ3RoLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sZW4gPSBsZW47XG5cbiAgICAvKipcbiAgICAgKiBOZXh0IG9wZXJhdGlvbi5cbiAgICAgKiBAdHlwZSB7V3JpdGVyLk9wfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLm5leHQgPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBWYWx1ZSB0byB3cml0ZS5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLnZhbCA9IHZhbDsgLy8gdHlwZSB2YXJpZXNcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIG5vb3AoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5LWZ1bmN0aW9uXG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyB3cml0ZXIgc3RhdGUgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIENvcGllZCB3cml0ZXIgc3RhdGUuXG4gKiBAbWVtYmVyb2YgV3JpdGVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7V3JpdGVyfSB3cml0ZXIgV3JpdGVyIHRvIGNvcHkgc3RhdGUgZnJvbVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBTdGF0ZSh3cml0ZXIpIHtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgaGVhZC5cbiAgICAgKiBAdHlwZSB7V3JpdGVyLk9wfVxuICAgICAqL1xuICAgIHRoaXMuaGVhZCA9IHdyaXRlci5oZWFkO1xuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0YWlsLlxuICAgICAqIEB0eXBlIHtXcml0ZXIuT3B9XG4gICAgICovXG4gICAgdGhpcy50YWlsID0gd3JpdGVyLnRhaWw7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IGJ1ZmZlciBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxlbiA9IHdyaXRlci5sZW47XG5cbiAgICAvKipcbiAgICAgKiBOZXh0IHN0YXRlLlxuICAgICAqIEB0eXBlIHtTdGF0ZXxudWxsfVxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IHdyaXRlci5zdGF0ZXM7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyB3cml0ZXIgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIFdpcmUgZm9ybWF0IHdyaXRlciB1c2luZyBgVWludDhBcnJheWAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgYEFycmF5YC5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBXcml0ZXIoKSB7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IGxlbmd0aC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubGVuID0gMDtcblxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbnMgaGVhZC5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHRoaXMuaGVhZCA9IG5ldyBPcChub29wLCAwLCAwKTtcblxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbnMgdGFpbFxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdGhpcy50YWlsID0gdGhpcy5oZWFkO1xuXG4gICAgLyoqXG4gICAgICogTGlua2VkIGZvcmtlZCBzdGF0ZXMuXG4gICAgICogQHR5cGUge09iamVjdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGVzID0gbnVsbDtcblxuICAgIC8vIFdoZW4gYSB2YWx1ZSBpcyB3cml0dGVuLCB0aGUgd3JpdGVyIGNhbGN1bGF0ZXMgaXRzIGJ5dGUgbGVuZ3RoIGFuZCBwdXRzIGl0IGludG8gYSBsaW5rZWRcbiAgICAvLyBsaXN0IG9mIG9wZXJhdGlvbnMgdG8gcGVyZm9ybSB3aGVuIGZpbmlzaCgpIGlzIGNhbGxlZC4gVGhpcyBib3RoIGFsbG93cyB1cyB0byBhbGxvY2F0ZVxuICAgIC8vIGJ1ZmZlcnMgb2YgdGhlIGV4YWN0IHJlcXVpcmVkIHNpemUgYW5kIHJlZHVjZXMgdGhlIGFtb3VudCBvZiB3b3JrIHdlIGhhdmUgdG8gZG8gY29tcGFyZWRcbiAgICAvLyB0byBmaXJzdCBjYWxjdWxhdGluZyBvdmVyIG9iamVjdHMgYW5kIHRoZW4gZW5jb2Rpbmcgb3ZlciBvYmplY3RzLiBJbiBvdXIgY2FzZSwgdGhlIGVuY29kaW5nXG4gICAgLy8gcGFydCBpcyBqdXN0IGEgbGlua2VkIGxpc3Qgd2FsayBjYWxsaW5nIG9wZXJhdGlvbnMgd2l0aCBhbHJlYWR5IHByZXBhcmVkIHZhbHVlcy5cbn1cblxudmFyIGNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4gdXRpbC5CdWZmZXJcbiAgICAgICAgPyBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyX3NldHVwKCkge1xuICAgICAgICAgICAgcmV0dXJuIChXcml0ZXIuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlX2J1ZmZlcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcldyaXRlcigpO1xuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICA6IGZ1bmN0aW9uIGNyZWF0ZV9hcnJheSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgV3JpdGVyKCk7XG4gICAgICAgIH07XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgd3JpdGVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyV3JpdGVyfFdyaXRlcn0gQSB7QGxpbmsgQnVmZmVyV3JpdGVyfSB3aGVuIEJ1ZmZlcnMgYXJlIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIGEge0BsaW5rIFdyaXRlcn1cbiAqL1xuV3JpdGVyLmNyZWF0ZSA9IGNyZWF0ZSgpO1xuXG4vKipcbiAqIEFsbG9jYXRlcyBhIGJ1ZmZlciBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBCdWZmZXIgc2l6ZVxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEJ1ZmZlclxuICovXG5Xcml0ZXIuYWxsb2MgPSBmdW5jdGlvbiBhbGxvYyhzaXplKSB7XG4gICAgcmV0dXJuIG5ldyB1dGlsLkFycmF5KHNpemUpO1xufTtcblxuLy8gVXNlIFVpbnQ4QXJyYXkgYnVmZmVyIHBvb2wgaW4gdGhlIGJyb3dzZXIsIGp1c3QgbGlrZSBub2RlIGRvZXMgd2l0aCBidWZmZXJzXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuaWYgKHV0aWwuQXJyYXkgIT09IEFycmF5KVxuICAgIFdyaXRlci5hbGxvYyA9IHV0aWwucG9vbChXcml0ZXIuYWxsb2MsIHV0aWwuQXJyYXkucHJvdG90eXBlLnN1YmFycmF5KTtcblxuLyoqXG4gKiBQdXNoZXMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVWludDhBcnJheSwgbnVtYmVyLCAqKX0gZm4gRnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIHtudW1iZXJ9IGxlbiBWYWx1ZSBieXRlIGxlbmd0aFxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAcHJpdmF0ZVxuICovXG5Xcml0ZXIucHJvdG90eXBlLl9wdXNoID0gZnVuY3Rpb24gcHVzaChmbiwgbGVuLCB2YWwpIHtcbiAgICB0aGlzLnRhaWwgPSB0aGlzLnRhaWwubmV4dCA9IG5ldyBPcChmbiwgbGVuLCB2YWwpO1xuICAgIHRoaXMubGVuICs9IGxlbjtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIHdyaXRlQnl0ZSh2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgYnVmW3Bvc10gPSB2YWwgJiAyNTU7XG59XG5cbmZ1bmN0aW9uIHdyaXRlVmFyaW50MzIodmFsLCBidWYsIHBvcykge1xuICAgIHdoaWxlICh2YWwgPiAxMjcpIHtcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbCAmIDEyNyB8IDEyODtcbiAgICAgICAgdmFsID4+Pj0gNztcbiAgICB9XG4gICAgYnVmW3Bvc10gPSB2YWw7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyB2YXJpbnQgd3JpdGVyIG9wZXJhdGlvbiBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgU2NoZWR1bGVkIHZhcmludCB3cml0ZXIgb3BlcmF0aW9uLlxuICogQGV4dGVuZHMgT3BcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtudW1iZXJ9IGxlbiBWYWx1ZSBieXRlIGxlbmd0aFxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBWYXJpbnRPcChsZW4sIHZhbCkge1xuICAgIHRoaXMubGVuID0gbGVuO1xuICAgIHRoaXMubmV4dCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnZhbCA9IHZhbDtcbn1cblxuVmFyaW50T3AucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPcC5wcm90b3R5cGUpO1xuVmFyaW50T3AucHJvdG90eXBlLmZuID0gd3JpdGVWYXJpbnQzMjtcblxuLyoqXG4gKiBXcml0ZXMgYW4gdW5zaWduZWQgMzIgYml0IHZhbHVlIGFzIGEgdmFyaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS51aW50MzIgPSBmdW5jdGlvbiB3cml0ZV91aW50MzIodmFsdWUpIHtcbiAgICAvLyBoZXJlLCB0aGUgY2FsbCB0byB0aGlzLnB1c2ggaGFzIGJlZW4gaW5saW5lZCBhbmQgYSB2YXJpbnQgc3BlY2lmaWMgT3Agc3ViY2xhc3MgaXMgdXNlZC5cbiAgICAvLyB1aW50MzIgaXMgYnkgZmFyIHRoZSBtb3N0IGZyZXF1ZW50bHkgdXNlZCBvcGVyYXRpb24gYW5kIGJlbmVmaXRzIHNpZ25pZmljYW50bHkgZnJvbSB0aGlzLlxuICAgIHRoaXMubGVuICs9ICh0aGlzLnRhaWwgPSB0aGlzLnRhaWwubmV4dCA9IG5ldyBWYXJpbnRPcChcbiAgICAgICAgKHZhbHVlID0gdmFsdWUgPj4+IDApXG4gICAgICAgICAgICAgICAgPCAxMjggICAgICAgPyAxXG4gICAgICAgIDogdmFsdWUgPCAxNjM4NCAgICAgPyAyXG4gICAgICAgIDogdmFsdWUgPCAyMDk3MTUyICAgPyAzXG4gICAgICAgIDogdmFsdWUgPCAyNjg0MzU0NTYgPyA0XG4gICAgICAgIDogICAgICAgICAgICAgICAgICAgICA1LFxuICAgIHZhbHVlKSkubGVuO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBzaWduZWQgMzIgYml0IHZhbHVlIGFzIGEgdmFyaW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmludDMyID0gZnVuY3Rpb24gd3JpdGVfaW50MzIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPCAwXG4gICAgICAgID8gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCAxMCwgTG9uZ0JpdHMuZnJvbU51bWJlcih2YWx1ZSkpIC8vIDEwIGJ5dGVzIHBlciBzcGVjXG4gICAgICAgIDogdGhpcy51aW50MzIodmFsdWUpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSAzMiBiaXQgdmFsdWUgYXMgYSB2YXJpbnQsIHppZy16YWcgZW5jb2RlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuc2ludDMyID0gZnVuY3Rpb24gd3JpdGVfc2ludDMyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMudWludDMyKCh2YWx1ZSA8PCAxIF4gdmFsdWUgPj4gMzEpID4+PiAwKTtcbn07XG5cbmZ1bmN0aW9uIHdyaXRlVmFyaW50NjQodmFsLCBidWYsIHBvcykge1xuICAgIHdoaWxlICh2YWwuaGkpIHtcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbC5sbyAmIDEyNyB8IDEyODtcbiAgICAgICAgdmFsLmxvID0gKHZhbC5sbyA+Pj4gNyB8IHZhbC5oaSA8PCAyNSkgPj4+IDA7XG4gICAgICAgIHZhbC5oaSA+Pj49IDc7XG4gICAgfVxuICAgIHdoaWxlICh2YWwubG8gPiAxMjcpIHtcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbC5sbyAmIDEyNyB8IDEyODtcbiAgICAgICAgdmFsLmxvID0gdmFsLmxvID4+PiA3O1xuICAgIH1cbiAgICBidWZbcG9zKytdID0gdmFsLmxvO1xufVxuXG4vKipcbiAqIFdyaXRlcyBhbiB1bnNpZ25lZCA2NCBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfHN0cmluZ30gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cbiAqL1xuV3JpdGVyLnByb3RvdHlwZS51aW50NjQgPSBmdW5jdGlvbiB3cml0ZV91aW50NjQodmFsdWUpIHtcbiAgICB2YXIgYml0cyA9IExvbmdCaXRzLmZyb20odmFsdWUpO1xuICAgIHJldHVybiB0aGlzLl9wdXNoKHdyaXRlVmFyaW50NjQsIGJpdHMubGVuZ3RoKCksIGJpdHMpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBzaWduZWQgNjQgYml0IHZhbHVlIGFzIGEgdmFyaW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfHN0cmluZ30gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5pbnQ2NCA9IFdyaXRlci5wcm90b3R5cGUudWludDY0O1xuXG4vKipcbiAqIFdyaXRlcyBhIHNpZ25lZCA2NCBiaXQgdmFsdWUgYXMgYSB2YXJpbnQsIHppZy16YWcgZW5jb2RlZC5cbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLnNpbnQ2NCA9IGZ1bmN0aW9uIHdyaXRlX3NpbnQ2NCh2YWx1ZSkge1xuICAgIHZhciBiaXRzID0gTG9uZ0JpdHMuZnJvbSh2YWx1ZSkuenpFbmNvZGUoKTtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCBiaXRzLmxlbmd0aCgpLCBiaXRzKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgYm9vbGlzaCB2YWx1ZSBhcyBhIHZhcmludC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmJvb2wgPSBmdW5jdGlvbiB3cml0ZV9ib29sKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCB2YWx1ZSA/IDEgOiAwKTtcbn07XG5cbmZ1bmN0aW9uIHdyaXRlRml4ZWQzMih2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgYnVmW3BvcyAgICBdID0gIHZhbCAgICAgICAgICYgMjU1O1xuICAgIGJ1Zltwb3MgKyAxXSA9ICB2YWwgPj4+IDggICAmIDI1NTtcbiAgICBidWZbcG9zICsgMl0gPSAgdmFsID4+PiAxNiAgJiAyNTU7XG4gICAgYnVmW3BvcyArIDNdID0gIHZhbCA+Pj4gMjQ7XG59XG5cbi8qKlxuICogV3JpdGVzIGFuIHVuc2lnbmVkIDMyIGJpdCB2YWx1ZSBhcyBmaXhlZCAzMiBiaXRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5maXhlZDMyID0gZnVuY3Rpb24gd3JpdGVfZml4ZWQzMih2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9wdXNoKHdyaXRlRml4ZWQzMiwgNCwgdmFsdWUgPj4+IDApO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBzaWduZWQgMzIgYml0IHZhbHVlIGFzIGZpeGVkIDMyIGJpdHMuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuc2ZpeGVkMzIgPSBXcml0ZXIucHJvdG90eXBlLmZpeGVkMzI7XG5cbi8qKlxuICogV3JpdGVzIGFuIHVuc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBmaXhlZCA2NCBiaXRzLlxuICogQHBhcmFtIHtMb25nfG51bWJlcnxzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgYHZhbHVlYCBpcyBhIHN0cmluZyBhbmQgbm8gbG9uZyBsaWJyYXJ5IGlzIHByZXNlbnQuXG4gKi9cbldyaXRlci5wcm90b3R5cGUuZml4ZWQ2NCA9IGZ1bmN0aW9uIHdyaXRlX2ZpeGVkNjQodmFsdWUpIHtcbiAgICB2YXIgYml0cyA9IExvbmdCaXRzLmZyb20odmFsdWUpO1xuICAgIHJldHVybiB0aGlzLl9wdXNoKHdyaXRlRml4ZWQzMiwgNCwgYml0cy5sbykuX3B1c2god3JpdGVGaXhlZDMyLCA0LCBiaXRzLmhpKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBmaXhlZCA2NCBiaXRzLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfHN0cmluZ30gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5zZml4ZWQ2NCA9IFdyaXRlci5wcm90b3R5cGUuZml4ZWQ2NDtcblxuLyoqXG4gKiBXcml0ZXMgYSBmbG9hdCAoMzIgYml0KS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5mbG9hdCA9IGZ1bmN0aW9uIHdyaXRlX2Zsb2F0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2godXRpbC5mbG9hdC53cml0ZUZsb2F0TEUsIDQsIHZhbHVlKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgZG91YmxlICg2NCBiaXQgZmxvYXQpLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmRvdWJsZSA9IGZ1bmN0aW9uIHdyaXRlX2RvdWJsZSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9wdXNoKHV0aWwuZmxvYXQud3JpdGVEb3VibGVMRSwgOCwgdmFsdWUpO1xufTtcblxudmFyIHdyaXRlQnl0ZXMgPSB1dGlsLkFycmF5LnByb3RvdHlwZS5zZXRcbiAgICA/IGZ1bmN0aW9uIHdyaXRlQnl0ZXNfc2V0KHZhbCwgYnVmLCBwb3MpIHtcbiAgICAgICAgYnVmLnNldCh2YWwsIHBvcyk7IC8vIGFsc28gd29ya3MgZm9yIHBsYWluIGFycmF5IHZhbHVlc1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIDogZnVuY3Rpb24gd3JpdGVCeXRlc19mb3IodmFsLCBidWYsIHBvcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIGJ1Zltwb3MgKyBpXSA9IHZhbFtpXTtcbiAgICB9O1xuXG4vKipcbiAqIFdyaXRlcyBhIHNlcXVlbmNlIG9mIGJ5dGVzLlxuICogQHBhcmFtIHtVaW50OEFycmF5fHN0cmluZ30gdmFsdWUgQnVmZmVyIG9yIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuYnl0ZXMgPSBmdW5jdGlvbiB3cml0ZV9ieXRlcyh2YWx1ZSkge1xuICAgIHZhciBsZW4gPSB2YWx1ZS5sZW5ndGggPj4+IDA7XG4gICAgaWYgKCFsZW4pXG4gICAgICAgIHJldHVybiB0aGlzLl9wdXNoKHdyaXRlQnl0ZSwgMSwgMCk7XG4gICAgaWYgKHV0aWwuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHZhciBidWYgPSBXcml0ZXIuYWxsb2MobGVuID0gYmFzZTY0Lmxlbmd0aCh2YWx1ZSkpO1xuICAgICAgICBiYXNlNjQuZGVjb2RlKHZhbHVlLCBidWYsIDApO1xuICAgICAgICB2YWx1ZSA9IGJ1ZjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudWludDMyKGxlbikuX3B1c2god3JpdGVCeXRlcywgbGVuLCB2YWx1ZSk7XG59O1xuXG4vKipcbiAqIFdyaXRlcyBhIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuc3RyaW5nID0gZnVuY3Rpb24gd3JpdGVfc3RyaW5nKHZhbHVlKSB7XG4gICAgdmFyIGxlbiA9IHV0ZjgubGVuZ3RoKHZhbHVlKTtcbiAgICByZXR1cm4gbGVuXG4gICAgICAgID8gdGhpcy51aW50MzIobGVuKS5fcHVzaCh1dGY4LndyaXRlLCBsZW4sIHZhbHVlKVxuICAgICAgICA6IHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCAwKTtcbn07XG5cbi8qKlxuICogRm9ya3MgdGhpcyB3cml0ZXIncyBzdGF0ZSBieSBwdXNoaW5nIGl0IHRvIGEgc3RhY2suXG4gKiBDYWxsaW5nIHtAbGluayBXcml0ZXIjcmVzZXR8cmVzZXR9IG9yIHtAbGluayBXcml0ZXIjbGRlbGltfGxkZWxpbX0gcmVzZXRzIHRoZSB3cml0ZXIgdG8gdGhlIHByZXZpb3VzIHN0YXRlLlxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uIGZvcmsoKSB7XG4gICAgdGhpcy5zdGF0ZXMgPSBuZXcgU3RhdGUodGhpcyk7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbmV3IE9wKG5vb3AsIDAsIDApO1xuICAgIHRoaXMubGVuID0gMDtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVzZXRzIHRoaXMgaW5zdGFuY2UgdG8gdGhlIGxhc3Qgc3RhdGUuXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLnN0YXRlcykge1xuICAgICAgICB0aGlzLmhlYWQgICA9IHRoaXMuc3RhdGVzLmhlYWQ7XG4gICAgICAgIHRoaXMudGFpbCAgID0gdGhpcy5zdGF0ZXMudGFpbDtcbiAgICAgICAgdGhpcy5sZW4gICAgPSB0aGlzLnN0YXRlcy5sZW47XG4gICAgICAgIHRoaXMuc3RhdGVzID0gdGhpcy5zdGF0ZXMubmV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBuZXcgT3Aobm9vcCwgMCwgMCk7XG4gICAgICAgIHRoaXMubGVuICA9IDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXNldHMgdG8gdGhlIGxhc3Qgc3RhdGUgYW5kIGFwcGVuZHMgdGhlIGZvcmsgc3RhdGUncyBjdXJyZW50IHdyaXRlIGxlbmd0aCBhcyBhIHZhcmludCBmb2xsb3dlZCBieSBpdHMgb3BlcmF0aW9ucy5cbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmxkZWxpbSA9IGZ1bmN0aW9uIGxkZWxpbSgpIHtcbiAgICB2YXIgaGVhZCA9IHRoaXMuaGVhZCxcbiAgICAgICAgdGFpbCA9IHRoaXMudGFpbCxcbiAgICAgICAgbGVuICA9IHRoaXMubGVuO1xuICAgIHRoaXMucmVzZXQoKS51aW50MzIobGVuKTtcbiAgICBpZiAobGVuKSB7XG4gICAgICAgIHRoaXMudGFpbC5uZXh0ID0gaGVhZC5uZXh0OyAvLyBza2lwIG5vb3BcbiAgICAgICAgdGhpcy50YWlsID0gdGFpbDtcbiAgICAgICAgdGhpcy5sZW4gKz0gbGVuO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRmluaXNoZXMgdGhlIHdyaXRlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBGaW5pc2hlZCBidWZmZXJcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2goKSB7XG4gICAgdmFyIGhlYWQgPSB0aGlzLmhlYWQubmV4dCwgLy8gc2tpcCBub29wXG4gICAgICAgIGJ1ZiAgPSB0aGlzLmNvbnN0cnVjdG9yLmFsbG9jKHRoaXMubGVuKSxcbiAgICAgICAgcG9zICA9IDA7XG4gICAgd2hpbGUgKGhlYWQpIHtcbiAgICAgICAgaGVhZC5mbihoZWFkLnZhbCwgYnVmLCBwb3MpO1xuICAgICAgICBwb3MgKz0gaGVhZC5sZW47XG4gICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG4gICAgfVxuICAgIC8vIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7XG4gICAgcmV0dXJuIGJ1Zjtcbn07XG5cbldyaXRlci5fY29uZmlndXJlID0gZnVuY3Rpb24oQnVmZmVyV3JpdGVyXykge1xuICAgIEJ1ZmZlcldyaXRlciA9IEJ1ZmZlcldyaXRlcl87XG4gICAgV3JpdGVyLmNyZWF0ZSA9IGNyZWF0ZSgpO1xuICAgIEJ1ZmZlcldyaXRlci5fY29uZmlndXJlKCk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlcldyaXRlcjtcblxuLy8gZXh0ZW5kcyBXcml0ZXJcbnZhciBXcml0ZXIgPSByZXF1aXJlKFwiLi93cml0ZXJcIik7XG4oQnVmZmVyV3JpdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoV3JpdGVyLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gQnVmZmVyV3JpdGVyO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGJ1ZmZlciB3cml0ZXIgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIFdpcmUgZm9ybWF0IHdyaXRlciB1c2luZyBub2RlIGJ1ZmZlcnMuXG4gKiBAZXh0ZW5kcyBXcml0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBCdWZmZXJXcml0ZXIoKSB7XG4gICAgV3JpdGVyLmNhbGwodGhpcyk7XG59XG5cbkJ1ZmZlcldyaXRlci5fY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlcyBhIGJ1ZmZlciBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQnVmZmVyIHNpemVcbiAgICAgKiBAcmV0dXJucyB7QnVmZmVyfSBCdWZmZXJcbiAgICAgKi9cbiAgICBCdWZmZXJXcml0ZXIuYWxsb2MgPSB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmU7XG5cbiAgICBCdWZmZXJXcml0ZXIud3JpdGVCeXRlc0J1ZmZlciA9IHV0aWwuQnVmZmVyICYmIHV0aWwuQnVmZmVyLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgdXRpbC5CdWZmZXIucHJvdG90eXBlLnNldC5uYW1lID09PSBcInNldFwiXG4gICAgICAgID8gZnVuY3Rpb24gd3JpdGVCeXRlc0J1ZmZlcl9zZXQodmFsLCBidWYsIHBvcykge1xuICAgICAgICAgIGJ1Zi5zZXQodmFsLCBwb3MpOyAvLyBmYXN0ZXIgdGhhbiBjb3B5IChyZXF1aXJlcyBub2RlID49IDQgd2hlcmUgQnVmZmVycyBleHRlbmQgVWludDhBcnJheSBhbmQgc2V0IGlzIHByb3Blcmx5IGluaGVyaXRlZClcbiAgICAgICAgICAvLyBhbHNvIHdvcmtzIGZvciBwbGFpbiBhcnJheSB2YWx1ZXNcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICA6IGZ1bmN0aW9uIHdyaXRlQnl0ZXNCdWZmZXJfY29weSh2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgICAgICAgaWYgKHZhbC5jb3B5KSAvLyBCdWZmZXIgdmFsdWVzXG4gICAgICAgICAgICB2YWwuY29weShidWYsIHBvcywgMCwgdmFsLmxlbmd0aCk7XG4gICAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5sZW5ndGg7KSAvLyBwbGFpbiBhcnJheSB2YWx1ZXNcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSB2YWxbaSsrXTtcbiAgICAgICAgfTtcbn07XG5cblxuLyoqXG4gKiBAb3ZlcnJpZGVcbiAqL1xuQnVmZmVyV3JpdGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHdyaXRlX2J5dGVzX2J1ZmZlcih2YWx1ZSkge1xuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSlcbiAgICAgICAgdmFsdWUgPSB1dGlsLl9CdWZmZXJfZnJvbSh2YWx1ZSwgXCJiYXNlNjRcIik7XG4gICAgdmFyIGxlbiA9IHZhbHVlLmxlbmd0aCA+Pj4gMDtcbiAgICB0aGlzLnVpbnQzMihsZW4pO1xuICAgIGlmIChsZW4pXG4gICAgICAgIHRoaXMuX3B1c2goQnVmZmVyV3JpdGVyLndyaXRlQnl0ZXNCdWZmZXIsIGxlbiwgdmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gd3JpdGVTdHJpbmdCdWZmZXIodmFsLCBidWYsIHBvcykge1xuICAgIGlmICh2YWwubGVuZ3RoIDwgNDApIC8vIHBsYWluIGpzIGlzIGZhc3RlciBmb3Igc2hvcnQgc3RyaW5ncyAocHJvYmFibHkgZHVlIHRvIHJlZHVuZGFudCBhc3NlcnRpb25zKVxuICAgICAgICB1dGlsLnV0Zjgud3JpdGUodmFsLCBidWYsIHBvcyk7XG4gICAgZWxzZSBpZiAoYnVmLnV0ZjhXcml0ZSlcbiAgICAgICAgYnVmLnV0ZjhXcml0ZSh2YWwsIHBvcyk7XG4gICAgZWxzZVxuICAgICAgICBidWYud3JpdGUodmFsLCBwb3MpO1xufVxuXG4vKipcbiAqIEBvdmVycmlkZVxuICovXG5CdWZmZXJXcml0ZXIucHJvdG90eXBlLnN0cmluZyA9IGZ1bmN0aW9uIHdyaXRlX3N0cmluZ19idWZmZXIodmFsdWUpIHtcbiAgICB2YXIgbGVuID0gdXRpbC5CdWZmZXIuYnl0ZUxlbmd0aCh2YWx1ZSk7XG4gICAgdGhpcy51aW50MzIobGVuKTtcbiAgICBpZiAobGVuKVxuICAgICAgICB0aGlzLl9wdXNoKHdyaXRlU3RyaW5nQnVmZmVyLCBsZW4sIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cblxuLyoqXG4gKiBGaW5pc2hlcyB0aGUgd3JpdGUgb3BlcmF0aW9uLlxuICogQG5hbWUgQnVmZmVyV3JpdGVyI2ZpbmlzaFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBGaW5pc2hlZCBidWZmZXJcbiAqL1xuXG5CdWZmZXJXcml0ZXIuX2NvbmZpZ3VyZSgpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLyplc2xpbnQtZGlzYWJsZSBibG9jay1zY29wZWQtdmFyLCBpZC1sZW5ndGgsIG5vLWNvbnRyb2wtcmVnZXgsIG5vLW1hZ2ljLW51bWJlcnMsIG5vLXByb3RvdHlwZS1idWlsdGlucywgbm8tcmVkZWNsYXJlLCBuby1zaGFkb3csIG5vLXZhciwgc29ydC12YXJzKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJHByb3RvYnVmID0gcmVxdWlyZShcInByb3RvYnVmanMvbWluaW1hbFwiKTtcclxuXHJcbi8vIENvbW1vbiBhbGlhc2VzXHJcbnZhciAkUmVhZGVyID0gJHByb3RvYnVmLlJlYWRlciwgJFdyaXRlciA9ICRwcm90b2J1Zi5Xcml0ZXIsICR1dGlsID0gJHByb3RvYnVmLnV0aWw7XHJcblxyXG4vLyBFeHBvcnRlZCByb290IG5hbWVzcGFjZVxyXG52YXIgJHJvb3QgPSAkcHJvdG9idWYucm9vdHNbXCJkZWZhdWx0XCJdIHx8ICgkcHJvdG9idWYucm9vdHNbXCJkZWZhdWx0XCJdID0ge30pO1xyXG5cclxuJHJvb3QuQnV0dHBsdWcgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOYW1lc3BhY2UgQnV0dHBsdWcuXHJcbiAgICAgKiBAZXhwb3J0cyBCdXR0cGx1Z1xyXG4gICAgICogQG5hbWVzcGFjZVxyXG4gICAgICovXHJcbiAgICB2YXIgQnV0dHBsdWcgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuZHBvaW50IGVudW0uXHJcbiAgICAgKiBAbmFtZSBCdXR0cGx1Zy5FbmRwb2ludFxyXG4gICAgICogQGVudW0ge251bWJlcn1cclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDb21tYW5kPTAgQ29tbWFuZCB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEZpcm13YXJlPTEgRmlybXdhcmUgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSeD0yIFJ4IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUnhBY2NlbD0zIFJ4QWNjZWwgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSeEJMRUJhdHRlcnk9NCBSeEJMRUJhdHRlcnkgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSeFByZXNzdXJlPTUgUnhQcmVzc3VyZSB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFJ4VG91Y2g9NiBSeFRvdWNoIHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gVHg9NyBUeCB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFR4TW9kZT04IFR4TW9kZSB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFR4U2hvY2s9OSBUeFNob2NrIHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gVHhWaWJyYXRlPTEwIFR4VmlicmF0ZSB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFR4VmVuZG9yQ29udHJvbD0xMSBUeFZlbmRvckNvbnRyb2wgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBXaGl0ZWxpc3Q9MTIgV2hpdGVsaXN0IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzA9MTMgR2VuZXJpYzAgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMT0xNCBHZW5lcmljMSB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMyPTE1IEdlbmVyaWMyIHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzM9MTYgR2VuZXJpYzMgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljND0xNyBHZW5lcmljNCB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWM1PTE4IEdlbmVyaWM1IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzY9MTkgR2VuZXJpYzYgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljNz0yMCBHZW5lcmljNyB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWM4PTIxIEdlbmVyaWM4IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzk9MjIgR2VuZXJpYzkgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMTA9MjMgR2VuZXJpYzEwIHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzExPTI0IEdlbmVyaWMxMSB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMxMj0yNSBHZW5lcmljMTIgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMTM9MjYgR2VuZXJpYzEzIHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzE0PTI3IEdlbmVyaWMxNCB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMxNT0yOCBHZW5lcmljMTUgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMTY9MjkgR2VuZXJpYzE2IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzE3PTMwIEdlbmVyaWMxNyB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMxOD0zMSBHZW5lcmljMTggdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMTk9MzIgR2VuZXJpYzE5IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzIwPTMzIEdlbmVyaWMyMCB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMyMT0zNCBHZW5lcmljMjEgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMjI9MzUgR2VuZXJpYzIyIHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzIzPTM2IEdlbmVyaWMyMyB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMyND0zNyBHZW5lcmljMjQgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMjU9MzggR2VuZXJpYzI1IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzI2PTM5IEdlbmVyaWMyNiB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMyNz00MCBHZW5lcmljMjcgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMjg9NDEgR2VuZXJpYzI4IHZhbHVlXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gR2VuZXJpYzI5PTQyIEdlbmVyaWMyOSB2YWx1ZVxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdlbmVyaWMzMD00MyBHZW5lcmljMzAgdmFsdWVcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHZW5lcmljMzE9NDQgR2VuZXJpYzMxIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIEJ1dHRwbHVnLkVuZHBvaW50ID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIkNvbW1hbmRcIl0gPSAwO1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJGaXJtd2FyZVwiXSA9IDE7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIlJ4XCJdID0gMjtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiUnhBY2NlbFwiXSA9IDM7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNF0gPSBcIlJ4QkxFQmF0dGVyeVwiXSA9IDQ7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNV0gPSBcIlJ4UHJlc3N1cmVcIl0gPSA1O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzZdID0gXCJSeFRvdWNoXCJdID0gNjtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs3XSA9IFwiVHhcIl0gPSA3O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzhdID0gXCJUeE1vZGVcIl0gPSA4O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzldID0gXCJUeFNob2NrXCJdID0gOTtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxMF0gPSBcIlR4VmlicmF0ZVwiXSA9IDEwO1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzExXSA9IFwiVHhWZW5kb3JDb250cm9sXCJdID0gMTE7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMTJdID0gXCJXaGl0ZWxpc3RcIl0gPSAxMjtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxM10gPSBcIkdlbmVyaWMwXCJdID0gMTM7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMTRdID0gXCJHZW5lcmljMVwiXSA9IDE0O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzE1XSA9IFwiR2VuZXJpYzJcIl0gPSAxNTtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxNl0gPSBcIkdlbmVyaWMzXCJdID0gMTY7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMTddID0gXCJHZW5lcmljNFwiXSA9IDE3O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzE4XSA9IFwiR2VuZXJpYzVcIl0gPSAxODtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxOV0gPSBcIkdlbmVyaWM2XCJdID0gMTk7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMjBdID0gXCJHZW5lcmljN1wiXSA9IDIwO1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzIxXSA9IFwiR2VuZXJpYzhcIl0gPSAyMTtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyMl0gPSBcIkdlbmVyaWM5XCJdID0gMjI7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMjNdID0gXCJHZW5lcmljMTBcIl0gPSAyMztcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyNF0gPSBcIkdlbmVyaWMxMVwiXSA9IDI0O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzI1XSA9IFwiR2VuZXJpYzEyXCJdID0gMjU7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMjZdID0gXCJHZW5lcmljMTNcIl0gPSAyNjtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyN10gPSBcIkdlbmVyaWMxNFwiXSA9IDI3O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzI4XSA9IFwiR2VuZXJpYzE1XCJdID0gMjg7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMjldID0gXCJHZW5lcmljMTZcIl0gPSAyOTtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszMF0gPSBcIkdlbmVyaWMxN1wiXSA9IDMwO1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzMxXSA9IFwiR2VuZXJpYzE4XCJdID0gMzE7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMzJdID0gXCJHZW5lcmljMTlcIl0gPSAzMjtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszM10gPSBcIkdlbmVyaWMyMFwiXSA9IDMzO1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzM0XSA9IFwiR2VuZXJpYzIxXCJdID0gMzQ7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMzVdID0gXCJHZW5lcmljMjJcIl0gPSAzNTtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszNl0gPSBcIkdlbmVyaWMyM1wiXSA9IDM2O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzM3XSA9IFwiR2VuZXJpYzI0XCJdID0gMzc7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMzhdID0gXCJHZW5lcmljMjVcIl0gPSAzODtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszOV0gPSBcIkdlbmVyaWMyNlwiXSA9IDM5O1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzQwXSA9IFwiR2VuZXJpYzI3XCJdID0gNDA7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNDFdID0gXCJHZW5lcmljMjhcIl0gPSA0MTtcclxuICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0Ml0gPSBcIkdlbmVyaWMyOVwiXSA9IDQyO1xyXG4gICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzQzXSA9IFwiR2VuZXJpYzMwXCJdID0gNDM7XHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNDRdID0gXCJHZW5lcmljMzFcIl0gPSA0NDtcclxuICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ2xpZW50TWVzc2FnZS5cclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWdcclxuICAgICAgICAgKiBAaW50ZXJmYWNlIElDbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2lkXSBDbGllbnRNZXNzYWdlIGlkXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklGRklNZXNzYWdlfG51bGx9IFttZXNzYWdlXSBDbGllbnRNZXNzYWdlIG1lc3NhZ2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDbGllbnRNZXNzYWdlLlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Z1xyXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENsaWVudE1lc3NhZ2UuXHJcbiAgICAgICAgICogQGltcGxlbWVudHMgSUNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklDbGllbnRNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gQ2xpZW50TWVzc2FnZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDbGllbnRNZXNzYWdlIGlkLlxyXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gaWRcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIENsaWVudE1lc3NhZ2UucHJvdG90eXBlLmlkID0gMDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xpZW50TWVzc2FnZSBtZXNzYWdlLlxyXG4gICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSUZGSU1lc3NhZ2V8bnVsbHx1bmRlZmluZWR9IG1lc3NhZ2VcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIENsaWVudE1lc3NhZ2UucHJvdG90eXBlLm1lc3NhZ2UgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IENsaWVudE1lc3NhZ2UgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklDbGllbnRNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2V9IENsaWVudE1lc3NhZ2UgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBDbGllbnRNZXNzYWdlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2xpZW50TWVzc2FnZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ2xpZW50TWVzc2FnZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklDbGllbnRNZXNzYWdlfSBtZXNzYWdlIENsaWVudE1lc3NhZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIENsaWVudE1lc3NhZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS51aW50MzIobWVzc2FnZS5pZCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1lc3NhZ2VcIikpXHJcbiAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UuZW5jb2RlKG1lc3NhZ2UubWVzc2FnZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDbGllbnRNZXNzYWdlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuSUNsaWVudE1lc3NhZ2V9IG1lc3NhZ2UgQ2xpZW50TWVzc2FnZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlY29kZXMgYSBDbGllbnRNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2V9IENsaWVudE1lc3NhZ2VcclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIENsaWVudE1lc3NhZ2UuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZSgpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2UgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlY29kZXMgYSBDbGllbnRNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlfSBDbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBDbGllbnRNZXNzYWdlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFZlcmlmaWVzIGEgQ2xpZW50TWVzc2FnZSBtZXNzYWdlLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIENsaWVudE1lc3NhZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaWRcIikpXHJcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmlkKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpZDogaW50ZWdlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZS52ZXJpZnkobWVzc2FnZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtZXNzYWdlLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIENsaWVudE1lc3NhZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlfSBDbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QuaWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSBvYmplY3QuaWQgPj4+IDA7XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QubWVzc2FnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5tZXNzYWdlICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLm1lc3NhZ2U6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZS5mcm9tT2JqZWN0KG9iamVjdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDbGllbnRNZXNzYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2V9IG1lc3NhZ2UgQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gbWVzc2FnZS5pZDtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtZXNzYWdlXCIpKVxyXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2UgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UudG9PYmplY3QobWVzc2FnZS5tZXNzYWdlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENsaWVudE1lc3NhZ2UgdG8gSlNPTi5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXZpY2VDb21tdW5pY2F0aW9uTWFuYWdlclR5cGVzIGVudW0uXHJcbiAgICAgICAgICogQG5hbWUgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EZXZpY2VDb21tdW5pY2F0aW9uTWFuYWdlclR5cGVzXHJcbiAgICAgICAgICogQGVudW0ge251bWJlcn1cclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQWxsPTAgQWxsIHZhbHVlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEJ0bGVwbHVnPTEgQnRsZXBsdWcgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gWElucHV0PTIgWElucHV0IHZhbHVlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFNlcmlhbFBvcnQ9NCBTZXJpYWxQb3J0IHZhbHVlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IExvdmVuc2VISUREb25nbGU9OCBMb3ZlbnNlSElERG9uZ2xlIHZhbHVlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IExvdmVuc2VTZXJpYWxEb25nbGU9MTYgTG92ZW5zZVNlcmlhbERvbmdsZSB2YWx1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIENsaWVudE1lc3NhZ2UuRGV2aWNlQ29tbXVuaWNhdGlvbk1hbmFnZXJUeXBlcyA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIkFsbFwiXSA9IDA7XHJcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJCdGxlcGx1Z1wiXSA9IDE7XHJcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzJdID0gXCJYSW5wdXRcIl0gPSAyO1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0XSA9IFwiU2VyaWFsUG9ydFwiXSA9IDQ7XHJcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzhdID0gXCJMb3ZlbnNlSElERG9uZ2xlXCJdID0gODtcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMTZdID0gXCJMb3ZlbnNlU2VyaWFsRG9uZ2xlXCJdID0gMTY7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENvbm5lY3RMb2NhbC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtzZXJ2ZXJOYW1lXSBDb25uZWN0TG9jYWwgc2VydmVyTmFtZVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbWF4UGluZ1RpbWVdIENvbm5lY3RMb2NhbCBtYXhQaW5nVGltZVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2FsbG93UmF3TWVzc2FnZXNdIENvbm5lY3RMb2NhbCBhbGxvd1Jhd01lc3NhZ2VzXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtkZXZpY2VDb25maWd1cmF0aW9uSnNvbl0gQ29ubmVjdExvY2FsIGRldmljZUNvbmZpZ3VyYXRpb25Kc29uXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb25dIENvbm5lY3RMb2NhbCB1c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb25cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2NvbW1NYW5hZ2VyVHlwZXNdIENvbm5lY3RMb2NhbCBjb21tTWFuYWdlclR5cGVzXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29ubmVjdExvY2FsLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBDb25uZWN0TG9jYWwuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDb25uZWN0TG9jYWxcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JQ29ubmVjdExvY2FsPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBDb25uZWN0TG9jYWwocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbm5lY3RMb2NhbCBzZXJ2ZXJOYW1lLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHNlcnZlck5hbWVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdExvY2FsLnByb3RvdHlwZS5zZXJ2ZXJOYW1lID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25uZWN0TG9jYWwgbWF4UGluZ1RpbWUuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbWF4UGluZ1RpbWVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdExvY2FsLnByb3RvdHlwZS5tYXhQaW5nVGltZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29ubmVjdExvY2FsIGFsbG93UmF3TWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IGFsbG93UmF3TWVzc2FnZXNcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdExvY2FsLnByb3RvdHlwZS5hbGxvd1Jhd01lc3NhZ2VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29ubmVjdExvY2FsIGRldmljZUNvbmZpZ3VyYXRpb25Kc29uLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGRldmljZUNvbmZpZ3VyYXRpb25Kc29uXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RMb2NhbC5wcm90b3R5cGUuZGV2aWNlQ29uZmlndXJhdGlvbkpzb24gPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbm5lY3RMb2NhbCB1c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24uXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdXNlckRldmljZUNvbmZpZ3VyYXRpb25Kc29uXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RMb2NhbC5wcm90b3R5cGUudXNlckRldmljZUNvbmZpZ3VyYXRpb25Kc29uID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25uZWN0TG9jYWwgY29tbU1hbmFnZXJUeXBlcy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBjb21tTWFuYWdlclR5cGVzXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RMb2NhbC5wcm90b3R5cGUuY29tbU1hbmFnZXJUeXBlcyA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBDb25uZWN0TG9jYWwgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JQ29ubmVjdExvY2FsPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbH0gQ29ubmVjdExvY2FsIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0TG9jYWwuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdExvY2FsKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb25uZWN0TG9jYWwgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklDb25uZWN0TG9jYWx9IG1lc3NhZ2UgQ29ubmVjdExvY2FsIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdExvY2FsLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZXJ2ZXJOYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzZXJ2ZXJOYW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2Uuc2VydmVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tYXhQaW5nVGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWF4UGluZ1RpbWVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS51aW50MzIobWVzc2FnZS5tYXhQaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hbGxvd1Jhd01lc3NhZ2VzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhbGxvd1Jhd01lc3NhZ2VzXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMCA9Ki8yNCkuYm9vbChtZXNzYWdlLmFsbG93UmF3TWVzc2FnZXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGV2aWNlQ29uZmlndXJhdGlvbkpzb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRldmljZUNvbmZpZ3VyYXRpb25Kc29uXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuc3RyaW5nKG1lc3NhZ2UuZGV2aWNlQ29uZmlndXJhdGlvbkpzb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlckRldmljZUNvbmZpZ3VyYXRpb25Kc29uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb25cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5zdHJpbmcobWVzc2FnZS51c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29tbU1hbmFnZXJUeXBlcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29tbU1hbmFnZXJUeXBlc1wiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDAgPSovNDgpLnVpbnQzMihtZXNzYWdlLmNvbW1NYW5hZ2VyVHlwZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29ubmVjdExvY2FsIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JQ29ubmVjdExvY2FsfSBtZXNzYWdlIENvbm5lY3RMb2NhbCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RMb2NhbC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ29ubmVjdExvY2FsIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbH0gQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdExvY2FsLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VydmVyTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1heFBpbmdUaW1lID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWxsb3dSYXdNZXNzYWdlcyA9IHJlYWRlci5ib29sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXZpY2VDb25maWd1cmF0aW9uSnNvbiA9IHJlYWRlci5zdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJEZXZpY2VDb25maWd1cmF0aW9uSnNvbiA9IHJlYWRlci5zdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbW1NYW5hZ2VyVHlwZXMgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIENvbm5lY3RMb2NhbCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWx9IENvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RMb2NhbC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIENvbm5lY3RMb2NhbCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdExvY2FsLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZlck5hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmVyTmFtZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc2VydmVyTmFtZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZlck5hbWU6IHN0cmluZyBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWF4UGluZ1RpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWF4UGluZ1RpbWVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5tYXhQaW5nVGltZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1heFBpbmdUaW1lOiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hbGxvd1Jhd01lc3NhZ2VzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFsbG93UmF3TWVzc2FnZXNcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmFsbG93UmF3TWVzc2FnZXMgIT09IFwiYm9vbGVhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhbGxvd1Jhd01lc3NhZ2VzOiBib29sZWFuIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXZpY2VDb25maWd1cmF0aW9uSnNvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXZpY2VDb25maWd1cmF0aW9uSnNvblwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuZGV2aWNlQ29uZmlndXJhdGlvbkpzb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXZpY2VDb25maWd1cmF0aW9uSnNvbjogc3RyaW5nIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidXNlckRldmljZUNvbmZpZ3VyYXRpb25Kc29uXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS51c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb246IHN0cmluZyBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29tbU1hbmFnZXJUeXBlcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb21tTWFuYWdlclR5cGVzXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuY29tbU1hbmFnZXJUeXBlcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbW1NYW5hZ2VyVHlwZXM6IGludGVnZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBDb25uZWN0TG9jYWwgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWxcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbH0gQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0TG9jYWwuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnNlcnZlck5hbWUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlcnZlck5hbWUgPSBTdHJpbmcob2JqZWN0LnNlcnZlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tYXhQaW5nVGltZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4UGluZ1RpbWUgPSBvYmplY3QubWF4UGluZ1RpbWUgPj4+IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmFsbG93UmF3TWVzc2FnZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFsbG93UmF3TWVzc2FnZXMgPSBCb29sZWFuKG9iamVjdC5hbGxvd1Jhd01lc3NhZ2VzKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuZGV2aWNlQ29uZmlndXJhdGlvbkpzb24gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRldmljZUNvbmZpZ3VyYXRpb25Kc29uID0gU3RyaW5nKG9iamVjdC5kZXZpY2VDb25maWd1cmF0aW9uSnNvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnVzZXJEZXZpY2VDb25maWd1cmF0aW9uSnNvbiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlckRldmljZUNvbmZpZ3VyYXRpb25Kc29uID0gU3RyaW5nKG9iamVjdC51c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5jb21tTWFuYWdlclR5cGVzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb21tTWFuYWdlclR5cGVzID0gb2JqZWN0LmNvbW1NYW5hZ2VyVHlwZXMgPj4+IDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb25uZWN0TG9jYWwgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbH0gbWVzc2FnZSBDb25uZWN0TG9jYWxcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0TG9jYWwudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2VydmVyTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1heFBpbmdUaW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWxsb3dSYXdNZXNzYWdlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZXZpY2VDb25maWd1cmF0aW9uSnNvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnVzZXJEZXZpY2VDb25maWd1cmF0aW9uSnNvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNvbW1NYW5hZ2VyVHlwZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmVyTmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXJ2ZXJOYW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZXJ2ZXJOYW1lID0gbWVzc2FnZS5zZXJ2ZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWF4UGluZ1RpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWF4UGluZ1RpbWVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1heFBpbmdUaW1lID0gbWVzc2FnZS5tYXhQaW5nVGltZTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFsbG93UmF3TWVzc2FnZXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYWxsb3dSYXdNZXNzYWdlc1wiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWxsb3dSYXdNZXNzYWdlcyA9IG1lc3NhZ2UuYWxsb3dSYXdNZXNzYWdlcztcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRldmljZUNvbmZpZ3VyYXRpb25Kc29uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRldmljZUNvbmZpZ3VyYXRpb25Kc29uXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZXZpY2VDb25maWd1cmF0aW9uSnNvbiA9IG1lc3NhZ2UuZGV2aWNlQ29uZmlndXJhdGlvbkpzb247XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidXNlckRldmljZUNvbmZpZ3VyYXRpb25Kc29uXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC51c2VyRGV2aWNlQ29uZmlndXJhdGlvbkpzb24gPSBtZXNzYWdlLnVzZXJEZXZpY2VDb25maWd1cmF0aW9uSnNvbjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbW1NYW5hZ2VyVHlwZXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29tbU1hbmFnZXJUeXBlc1wiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuY29tbU1hbmFnZXJUeXBlcyA9IG1lc3NhZ2UuY29tbU1hbmFnZXJUeXBlcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBDb25uZWN0TG9jYWwgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWxcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RMb2NhbC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdExvY2FsO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIENsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ29ubmVjdFdlYnNvY2tldC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ29ubmVjdFdlYnNvY2tldFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbYWRkcmVzc10gQ29ubmVjdFdlYnNvY2tldCBhZGRyZXNzXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudWxsfSBbYnlwYXNzQ2VydFZlcmlmaWNhdGlvbl0gQ29ubmVjdFdlYnNvY2tldCBieXBhc3NDZXJ0VmVyaWZpY2F0aW9uXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29ubmVjdFdlYnNvY2tldC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ29ubmVjdFdlYnNvY2tldC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUNvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JQ29ubmVjdFdlYnNvY2tldD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gQ29ubmVjdFdlYnNvY2tldChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29ubmVjdFdlYnNvY2tldCBhZGRyZXNzLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGFkZHJlc3NcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RXZWJzb2NrZXQucHJvdG90eXBlLmFkZHJlc3MgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbm5lY3RXZWJzb2NrZXQgYnlwYXNzQ2VydFZlcmlmaWNhdGlvbi5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn0gYnlwYXNzQ2VydFZlcmlmaWNhdGlvblxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0XHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdFdlYnNvY2tldC5wcm90b3R5cGUuYnlwYXNzQ2VydFZlcmlmaWNhdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQ29ubmVjdFdlYnNvY2tldCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JQ29ubmVjdFdlYnNvY2tldD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0fSBDb25uZWN0V2Vic29ja2V0IGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0V2Vic29ja2V0LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbm5lY3RXZWJzb2NrZXQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbm5lY3RXZWJzb2NrZXQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSUNvbm5lY3RXZWJzb2NrZXR9IG1lc3NhZ2UgQ29ubmVjdFdlYnNvY2tldCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RXZWJzb2NrZXQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFkZHJlc3MgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFkZHJlc3NcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5hZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmJ5cGFzc0NlcnRWZXJpZmljYXRpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImJ5cGFzc0NlcnRWZXJpZmljYXRpb25cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5ib29sKG1lc3NhZ2UuYnlwYXNzQ2VydFZlcmlmaWNhdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb25uZWN0V2Vic29ja2V0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklDb25uZWN0V2Vic29ja2V0fSBtZXNzYWdlIENvbm5lY3RXZWJzb2NrZXQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0V2Vic29ja2V0LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBDb25uZWN0V2Vic29ja2V0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0fSBDb25uZWN0V2Vic29ja2V0XHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQ29ubmVjdFdlYnNvY2tldC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRyZXNzID0gcmVhZGVyLnN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnlwYXNzQ2VydFZlcmlmaWNhdGlvbiA9IHJlYWRlci5ib29sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIENvbm5lY3RXZWJzb2NrZXQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXR9IENvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0V2Vic29ja2V0LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgQ29ubmVjdFdlYnNvY2tldCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RXZWJzb2NrZXQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWRkcmVzcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJhZGRyZXNzXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5hZGRyZXNzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYWRkcmVzczogc3RyaW5nIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ieXBhc3NDZXJ0VmVyaWZpY2F0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImJ5cGFzc0NlcnRWZXJpZmljYXRpb25cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmJ5cGFzc0NlcnRWZXJpZmljYXRpb24gIT09IFwiYm9vbGVhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJieXBhc3NDZXJ0VmVyaWZpY2F0aW9uOiBib29sZWFuIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgQ29ubmVjdFdlYnNvY2tldCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXR9IENvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RXZWJzb2NrZXQuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuYWRkcmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9IFN0cmluZyhvYmplY3QuYWRkcmVzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmJ5cGFzc0NlcnRWZXJpZmljYXRpb24gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ5cGFzc0NlcnRWZXJpZmljYXRpb24gPSBCb29sZWFuKG9iamVjdC5ieXBhc3NDZXJ0VmVyaWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIENvbm5lY3RXZWJzb2NrZXQgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0fSBtZXNzYWdlIENvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBDb25uZWN0V2Vic29ja2V0LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFkZHJlc3MgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5ieXBhc3NDZXJ0VmVyaWZpY2F0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hZGRyZXNzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFkZHJlc3NcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFkZHJlc3MgPSBtZXNzYWdlLmFkZHJlc3M7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ieXBhc3NDZXJ0VmVyaWZpY2F0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImJ5cGFzc0NlcnRWZXJpZmljYXRpb25cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmJ5cGFzc0NlcnRWZXJpZmljYXRpb24gPSBtZXNzYWdlLmJ5cGFzc0NlcnRWZXJpZmljYXRpb247XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgQ29ubmVjdFdlYnNvY2tldCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIENvbm5lY3RXZWJzb2NrZXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3RXZWJzb2NrZXQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBTdGFydFNjYW5uaW5nLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElTdGFydFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU3RhcnRTY2FubmluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU3RhcnRTY2FubmluZy5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVN0YXJ0U2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JU3RhcnRTY2FubmluZz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gU3RhcnRTY2FubmluZyhwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBTdGFydFNjYW5uaW5nIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdGFydFNjYW5uaW5nPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmd9IFN0YXJ0U2Nhbm5pbmcgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0YXJ0U2Nhbm5pbmcuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3RhcnRTY2FubmluZyhwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU3RhcnRTY2FubmluZyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JU3RhcnRTY2FubmluZ30gbWVzc2FnZSBTdGFydFNjYW5uaW5nIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RhcnRTY2FubmluZy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU3RhcnRTY2FubmluZyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JU3RhcnRTY2FubmluZ30gbWVzc2FnZSBTdGFydFNjYW5uaW5nIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RhcnRTY2FubmluZy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU3RhcnRTY2FubmluZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZ30gU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0YXJ0U2Nhbm5pbmcuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBTdGFydFNjYW5uaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nfSBTdGFydFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RhcnRTY2FubmluZy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFN0YXJ0U2Nhbm5pbmcgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdGFydFNjYW5uaW5nLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBTdGFydFNjYW5uaW5nIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZ30gU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RhcnRTY2FubmluZy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU3RhcnRTY2FubmluZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmd9IG1lc3NhZ2UgU3RhcnRTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0YXJ0U2Nhbm5pbmcudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFN0YXJ0U2Nhbm5pbmcgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdGFydFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdGFydFNjYW5uaW5nLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTdGFydFNjYW5uaW5nO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIENsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBTdG9wU2Nhbm5pbmcuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVN0b3BTY2FubmluZ1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFN0b3BTY2FubmluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU3RvcFNjYW5uaW5nLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJU3RvcFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVN0b3BTY2FubmluZz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gU3RvcFNjYW5uaW5nKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFN0b3BTY2FubmluZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wU2Nhbm5pbmc9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nfSBTdG9wU2Nhbm5pbmcgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BTY2FubmluZy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdG9wU2Nhbm5pbmcocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0b3BTY2FubmluZyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVN0b3BTY2FubmluZ30gbWVzc2FnZSBTdG9wU2Nhbm5pbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wU2Nhbm5pbmcuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0b3BTY2FubmluZyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVN0b3BTY2FubmluZ30gbWVzc2FnZSBTdG9wU2Nhbm5pbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wU2Nhbm5pbmcuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFN0b3BTY2FubmluZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmd9IFN0b3BTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BTY2FubmluZy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZygpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcFNjYW5uaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZ30gU3RvcFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RvcFNjYW5uaW5nLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgU3RvcFNjYW5uaW5nIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wU2Nhbm5pbmcudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFN0b3BTY2FubmluZyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nfSBTdG9wU2Nhbm5pbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BTY2FubmluZy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZygpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFN0b3BTY2FubmluZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nfSBtZXNzYWdlIFN0b3BTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BTY2FubmluZy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgU3RvcFNjYW5uaW5nIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wU2Nhbm5pbmcucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN0b3BTY2FubmluZztcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBDbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBTdG9wQWxsRGV2aWNlcy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJU3RvcEFsbERldmljZXNcclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTdG9wQWxsRGV2aWNlcy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU3RvcEFsbERldmljZXMuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElTdG9wQWxsRGV2aWNlc1xyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wQWxsRGV2aWNlcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gU3RvcEFsbERldmljZXMocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgU3RvcEFsbERldmljZXMgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wQWxsRGV2aWNlcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wQWxsRGV2aWNlc30gU3RvcEFsbERldmljZXMgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BBbGxEZXZpY2VzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN0b3BBbGxEZXZpY2VzKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wQWxsRGV2aWNlc30gbWVzc2FnZSBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BBbGxEZXZpY2VzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wQWxsRGV2aWNlc30gbWVzc2FnZSBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BBbGxEZXZpY2VzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzfSBTdG9wQWxsRGV2aWNlc1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BBbGxEZXZpY2VzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXMoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFN0b3BBbGxEZXZpY2VzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXNcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXN9IFN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RvcEFsbERldmljZXMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wQWxsRGV2aWNlcy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgU3RvcEFsbERldmljZXMgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wQWxsRGV2aWNlc1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXN9IFN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wQWxsRGV2aWNlcy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXMoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBTdG9wQWxsRGV2aWNlcyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wQWxsRGV2aWNlc1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wQWxsRGV2aWNlc30gbWVzc2FnZSBTdG9wQWxsRGV2aWNlc1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BBbGxEZXZpY2VzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBTdG9wQWxsRGV2aWNlcyB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wQWxsRGV2aWNlcy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3RvcEFsbERldmljZXM7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0ID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEaXNjb25uZWN0LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGlzY29ubmVjdC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGlzY29ubmVjdC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JRGlzY29ubmVjdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gRGlzY29ubmVjdChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEaXNjb25uZWN0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklEaXNjb25uZWN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3R9IERpc2Nvbm5lY3QgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGlzY29ubmVjdChwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGlzY29ubmVjdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JRGlzY29ubmVjdH0gbWVzc2FnZSBEaXNjb25uZWN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGlzY29ubmVjdCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JRGlzY29ubmVjdH0gbWVzc2FnZSBEaXNjb25uZWN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGlzY29ubmVjdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdH0gRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEaXNjb25uZWN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0fSBEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIERpc2Nvbm5lY3QgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBEaXNjb25uZWN0IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdH0gRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGlzY29ubmVjdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3R9IG1lc3NhZ2UgRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERpc2Nvbm5lY3QgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0O1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIENsaWVudE1lc3NhZ2UuUGluZyA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUGluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJUGluZ1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFBpbmcuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFBpbmcuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElQaW5nXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVBpbmc9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFBpbmcocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUGluZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JUGluZz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nfSBQaW5nIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBQaW5nLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBpbmcocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFBpbmcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlBpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVBpbmd9IG1lc3NhZ2UgUGluZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFBpbmcuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFBpbmcgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlBpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVBpbmd9IG1lc3NhZ2UgUGluZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFBpbmcuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFBpbmcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlBpbmd9IFBpbmdcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBQaW5nLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZygpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUGluZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlBpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZ30gUGluZ1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFBpbmcuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBQaW5nIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUGluZy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgUGluZyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlBpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlBpbmd9IFBpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFBpbmcuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZygpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFBpbmcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nfSBtZXNzYWdlIFBpbmdcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBQaW5nLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBQaW5nIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZ1xyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUGluZy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUGluZztcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBDbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZGSU1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklDb25uZWN0TG9jYWx8bnVsbH0gW2Nvbm5lY3RMb2NhbF0gRkZJTWVzc2FnZSBjb25uZWN0TG9jYWxcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklDb25uZWN0V2Vic29ja2V0fG51bGx9IFtjb25uZWN0V2Vic29ja2V0XSBGRklNZXNzYWdlIGNvbm5lY3RXZWJzb2NrZXRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdGFydFNjYW5uaW5nfG51bGx9IFtzdGFydFNjYW5uaW5nXSBGRklNZXNzYWdlIHN0YXJ0U2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wU2Nhbm5pbmd8bnVsbH0gW3N0b3BTY2FubmluZ10gRkZJTWVzc2FnZSBzdG9wU2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wQWxsRGV2aWNlc3xudWxsfSBbc3RvcEFsbERldmljZXNdIEZGSU1lc3NhZ2Ugc3RvcEFsbERldmljZXNcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklEaXNjb25uZWN0fG51bGx9IFtkaXNjb25uZWN0XSBGRklNZXNzYWdlIGRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklQaW5nfG51bGx9IFtwaW5nXSBGRklNZXNzYWdlIHBpbmdcclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGRklNZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGRklNZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklGRklNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBGRklNZXNzYWdlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIGNvbm5lY3RMb2NhbC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JQ29ubmVjdExvY2FsfG51bGx8dW5kZWZpbmVkfSBjb25uZWN0TG9jYWxcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLmNvbm5lY3RMb2NhbCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRkZJTWVzc2FnZSBjb25uZWN0V2Vic29ja2V0LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklDb25uZWN0V2Vic29ja2V0fG51bGx8dW5kZWZpbmVkfSBjb25uZWN0V2Vic29ja2V0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnByb3RvdHlwZS5jb25uZWN0V2Vic29ja2V0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIHN0YXJ0U2Nhbm5pbmcuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSVN0YXJ0U2Nhbm5pbmd8bnVsbHx1bmRlZmluZWR9IHN0YXJ0U2Nhbm5pbmdcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLnN0YXJ0U2Nhbm5pbmcgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZGSU1lc3NhZ2Ugc3RvcFNjYW5uaW5nLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wU2Nhbm5pbmd8bnVsbHx1bmRlZmluZWR9IHN0b3BTY2FubmluZ1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5wcm90b3R5cGUuc3RvcFNjYW5uaW5nID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIHN0b3BBbGxEZXZpY2VzLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklTdG9wQWxsRGV2aWNlc3xudWxsfHVuZGVmaW5lZH0gc3RvcEFsbERldmljZXNcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLnN0b3BBbGxEZXZpY2VzID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIGRpc2Nvbm5lY3QuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkNsaWVudE1lc3NhZ2UuSURpc2Nvbm5lY3R8bnVsbHx1bmRlZmluZWR9IGRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZGSU1lc3NhZ2UgcGluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JUGluZ3xudWxsfHVuZGVmaW5lZH0gcGluZ1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5wcm90b3R5cGUucGluZyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyBPbmVPZiBmaWVsZCBuYW1lcyBib3VuZCB0byB2aXJ0dWFsIGdldHRlcnMgYW5kIHNldHRlcnNcclxuICAgICAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIG1zZy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7XCJjb25uZWN0TG9jYWxcInxcImNvbm5lY3RXZWJzb2NrZXRcInxcInN0YXJ0U2Nhbm5pbmdcInxcInN0b3BTY2FubmluZ1wifFwic3RvcEFsbERldmljZXNcInxcImRpc2Nvbm5lY3RcInxcInBpbmdcInx1bmRlZmluZWR9IG1zZ1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZGSU1lc3NhZ2UucHJvdG90eXBlLCBcIm1zZ1wiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6ICR1dGlsLm9uZU9mR2V0dGVyKCRvbmVPZkZpZWxkcyA9IFtcImNvbm5lY3RMb2NhbFwiLCBcImNvbm5lY3RXZWJzb2NrZXRcIiwgXCJzdGFydFNjYW5uaW5nXCIsIFwic3RvcFNjYW5uaW5nXCIsIFwic3RvcEFsbERldmljZXNcIiwgXCJkaXNjb25uZWN0XCIsIFwicGluZ1wiXSksXHJcbiAgICAgICAgICAgICAgICBzZXQ6ICR1dGlsLm9uZU9mU2V0dGVyKCRvbmVPZkZpZWxkcylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBGRklNZXNzYWdlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklGRklNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2V9IEZGSU1lc3NhZ2UgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRkZJTWVzc2FnZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRkZJTWVzc2FnZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5JRkZJTWVzc2FnZX0gbWVzc2FnZSBGRklNZXNzYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29ubmVjdExvY2FsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb25uZWN0TG9jYWxcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwuZW5jb2RlKG1lc3NhZ2UuY29ubmVjdExvY2FsLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb25uZWN0V2Vic29ja2V0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb25uZWN0V2Vic29ja2V0XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldC5lbmNvZGUobWVzc2FnZS5jb25uZWN0V2Vic29ja2V0LCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydFNjYW5uaW5nICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydFNjYW5uaW5nXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZy5lbmNvZGUobWVzc2FnZS5zdGFydFNjYW5uaW5nLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wU2Nhbm5pbmcgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0b3BTY2FubmluZ1wiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BTY2FubmluZy5lbmNvZGUobWVzc2FnZS5zdG9wU2Nhbm5pbmcsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BBbGxEZXZpY2VzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wQWxsRGV2aWNlc1wiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0b3BBbGxEZXZpY2VzLmVuY29kZShtZXNzYWdlLnN0b3BBbGxEZXZpY2VzLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kaXNjb25uZWN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkaXNjb25uZWN0XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdC5lbmNvZGUobWVzc2FnZS5kaXNjb25uZWN0LCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5waW5nICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwaW5nXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZy5lbmNvZGUobWVzc2FnZS5waW5nLCB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBGRklNZXNzYWdlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLklGRklNZXNzYWdlfSBtZXNzYWdlIEZGSU1lc3NhZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBGRklNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlfSBGRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb25uZWN0TG9jYWwgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkNvbm5lY3RMb2NhbC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29ubmVjdFdlYnNvY2tldCA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRTY2FubmluZyA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcFNjYW5uaW5nID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmcuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BBbGxEZXZpY2VzID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wQWxsRGV2aWNlcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzY29ubmVjdCA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGluZyA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBGRklNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlfSBGRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb25uZWN0TG9jYWwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY29ubmVjdExvY2FsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwudmVyaWZ5KG1lc3NhZ2UuY29ubmVjdExvY2FsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29ubmVjdExvY2FsLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29ubmVjdFdlYnNvY2tldCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25uZWN0V2Vic29ja2V0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldC52ZXJpZnkobWVzc2FnZS5jb25uZWN0V2Vic29ja2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29ubmVjdFdlYnNvY2tldC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0U2Nhbm5pbmcgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRTY2FubmluZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXNnOiBtdWx0aXBsZSB2YWx1ZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmcudmVyaWZ5KG1lc3NhZ2Uuc3RhcnRTY2FubmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0U2Nhbm5pbmcuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wU2Nhbm5pbmcgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcFNjYW5uaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nLnZlcmlmeShtZXNzYWdlLnN0b3BTY2FubmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BTY2FubmluZy5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BBbGxEZXZpY2VzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BBbGxEZXZpY2VzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXMudmVyaWZ5KG1lc3NhZ2Uuc3RvcEFsbERldmljZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdG9wQWxsRGV2aWNlcy5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRpc2Nvbm5lY3QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGlzY29ubmVjdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXNnOiBtdWx0aXBsZSB2YWx1ZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3QudmVyaWZ5KG1lc3NhZ2UuZGlzY29ubmVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRpc2Nvbm5lY3QuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5waW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBpbmdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5tc2cgPT09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nLnZlcmlmeShtZXNzYWdlLnBpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwaW5nLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlfSBGRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmNvbm5lY3RMb2NhbCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuY29ubmVjdExvY2FsICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLmNvbm5lY3RMb2NhbDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29ubmVjdExvY2FsID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwuZnJvbU9iamVjdChvYmplY3QuY29ubmVjdExvY2FsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuY29ubmVjdFdlYnNvY2tldCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuY29ubmVjdFdlYnNvY2tldCAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZS5jb25uZWN0V2Vic29ja2V0OiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb25uZWN0V2Vic29ja2V0ID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0V2Vic29ja2V0LmZyb21PYmplY3Qob2JqZWN0LmNvbm5lY3RXZWJzb2NrZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zdGFydFNjYW5uaW5nICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zdGFydFNjYW5uaW5nICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLnN0YXJ0U2Nhbm5pbmc6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0U2Nhbm5pbmcgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmcuZnJvbU9iamVjdChvYmplY3Quc3RhcnRTY2FubmluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BTY2FubmluZyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Quc3RvcFNjYW5uaW5nICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLnN0b3BTY2FubmluZzogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcFNjYW5uaW5nID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmcuZnJvbU9iamVjdChvYmplY3Quc3RvcFNjYW5uaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcEFsbERldmljZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnN0b3BBbGxEZXZpY2VzICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLnN0b3BBbGxEZXZpY2VzOiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wQWxsRGV2aWNlcyA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXMuZnJvbU9iamVjdChvYmplY3Quc3RvcEFsbERldmljZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kaXNjb25uZWN0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5kaXNjb25uZWN0ICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLmRpc2Nvbm5lY3Q6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2Nvbm5lY3QgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3QuZnJvbU9iamVjdChvYmplY3QuZGlzY29ubmVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnBpbmcgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnBpbmcgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UucGluZzogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGluZyA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuUGluZy5mcm9tT2JqZWN0KG9iamVjdC5waW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEZGSU1lc3NhZ2UgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlfSBtZXNzYWdlIEZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbm5lY3RMb2NhbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25uZWN0TG9jYWxcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuY29ubmVjdExvY2FsID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5Db25uZWN0TG9jYWwudG9PYmplY3QobWVzc2FnZS5jb25uZWN0TG9jYWwsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwiY29ubmVjdExvY2FsXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb25uZWN0V2Vic29ja2V0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbm5lY3RXZWJzb2NrZXRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuY29ubmVjdFdlYnNvY2tldCA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldC50b09iamVjdChtZXNzYWdlLmNvbm5lY3RXZWJzb2NrZXQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwiY29ubmVjdFdlYnNvY2tldFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRTY2FubmluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydFNjYW5uaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0U2Nhbm5pbmcgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLlN0YXJ0U2Nhbm5pbmcudG9PYmplY3QobWVzc2FnZS5zdGFydFNjYW5uaW5nLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcInN0YXJ0U2Nhbm5pbmdcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BTY2FubmluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wU2Nhbm5pbmdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RvcFNjYW5uaW5nID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5TdG9wU2Nhbm5pbmcudG9PYmplY3QobWVzc2FnZS5zdG9wU2Nhbm5pbmcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwic3RvcFNjYW5uaW5nXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wQWxsRGV2aWNlcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wQWxsRGV2aWNlc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wQWxsRGV2aWNlcyA9ICRyb290LkJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXMudG9PYmplY3QobWVzc2FnZS5zdG9wQWxsRGV2aWNlcywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJzdG9wQWxsRGV2aWNlc1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlzY29ubmVjdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkaXNjb25uZWN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRpc2Nvbm5lY3QgPSAkcm9vdC5CdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkRpc2Nvbm5lY3QudG9PYmplY3QobWVzc2FnZS5kaXNjb25uZWN0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcImRpc2Nvbm5lY3RcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBpbmcgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGluZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5waW5nID0gJHJvb3QuQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5QaW5nLnRvT2JqZWN0KG1lc3NhZ2UucGluZywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJwaW5nXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRkZJTWVzc2FnZSB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEZGSU1lc3NhZ2U7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIENsaWVudE1lc3NhZ2U7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZXZpY2VNZXNzYWdlLlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Z1xyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSURldmljZU1lc3NhZ2VcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaWRdIERldmljZU1lc3NhZ2UgaWRcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIERldmljZU1lc3NhZ2UgaW5kZXhcclxuICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUZGSU1lc3NhZ2V8bnVsbH0gW21lc3NhZ2VdIERldmljZU1lc3NhZ2UgbWVzc2FnZVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERldmljZU1lc3NhZ2UuXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnXHJcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGV2aWNlTWVzc2FnZS5cclxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuSURldmljZU1lc3NhZ2U9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBEZXZpY2VNZXNzYWdlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldmljZU1lc3NhZ2UgaWQuXHJcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBpZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5wcm90b3R5cGUuaWQgPSAwO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXZpY2VNZXNzYWdlIGluZGV4LlxyXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gaW5kZXhcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZU1lc3NhZ2UucHJvdG90eXBlLmluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV2aWNlTWVzc2FnZSBtZXNzYWdlLlxyXG4gICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUZGSU1lc3NhZ2V8bnVsbHx1bmRlZmluZWR9IG1lc3NhZ2VcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZU1lc3NhZ2UucHJvdG90eXBlLm1lc3NhZ2UgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERldmljZU1lc3NhZ2UgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklEZXZpY2VNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2V9IERldmljZU1lc3NhZ2UgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV2aWNlTWVzc2FnZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGV2aWNlTWVzc2FnZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklEZXZpY2VNZXNzYWdlfSBtZXNzYWdlIERldmljZU1lc3NhZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZU1lc3NhZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS51aW50MzIobWVzc2FnZS5pZCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikudWludDMyKG1lc3NhZ2UuaW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtZXNzYWdlXCIpKVxyXG4gICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmVuY29kZShtZXNzYWdlLm1lc3NhZ2UsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGV2aWNlTWVzc2FnZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklEZXZpY2VNZXNzYWdlfSBtZXNzYWdlIERldmljZU1lc3NhZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZU1lc3NhZ2UuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWNvZGVzIGEgRGV2aWNlTWVzc2FnZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlfSBEZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2UgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlY29kZXMgYSBEZXZpY2VNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlfSBEZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFZlcmlmaWVzIGEgRGV2aWNlTWVzc2FnZSBtZXNzYWdlLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZU1lc3NhZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaWRcIikpXHJcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmlkKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpZDogaW50ZWdlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuaW5kZXgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWVzc2FnZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLnZlcmlmeShtZXNzYWdlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1lc3NhZ2UuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgRGV2aWNlTWVzc2FnZSBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2V9IERldmljZU1lc3NhZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgaWYgKG9iamVjdC5pZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pZCA9IG9iamVjdC5pZCA+Pj4gMDtcclxuICAgICAgICAgICAgaWYgKG9iamVjdC5pbmRleCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IG9iamVjdC5pbmRleCA+Pj4gMDtcclxuICAgICAgICAgICAgaWYgKG9iamVjdC5tZXNzYWdlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0Lm1lc3NhZ2UgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UubWVzc2FnZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmZyb21PYmplY3Qob2JqZWN0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIERldmljZU1lc3NhZ2UgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZX0gbWVzc2FnZSBEZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IDA7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gbWVzc2FnZS5pZDtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSBtZXNzYWdlLmluZGV4O1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikpXHJcbiAgICAgICAgICAgICAgICBvYmplY3QubWVzc2FnZSA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS50b09iamVjdChtZXNzYWdlLm1lc3NhZ2UsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGV2aWNlTWVzc2FnZSB0byBKU09OLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIERldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVmlicmF0ZUNvbXBvbmVudC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJVmlicmF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIFZpYnJhdGVDb21wb25lbnQgaW5kZXhcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3NwZWVkXSBWaWJyYXRlQ29tcG9uZW50IHNwZWVkXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVmlicmF0ZUNvbXBvbmVudC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVmlicmF0ZUNvbXBvbmVudC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JVmlicmF0ZUNvbXBvbmVudD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gVmlicmF0ZUNvbXBvbmVudChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmlicmF0ZUNvbXBvbmVudCBpbmRleC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBpbmRleFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNvbXBvbmVudC5wcm90b3R5cGUuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZpYnJhdGVDb21wb25lbnQgc3BlZWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc3BlZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDb21wb25lbnQucHJvdG90eXBlLnNwZWVkID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFZpYnJhdGVDb21wb25lbnQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVZpYnJhdGVDb21wb25lbnQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudH0gVmlicmF0ZUNvbXBvbmVudCBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNvbXBvbmVudC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWaWJyYXRlQ29tcG9uZW50KHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBWaWJyYXRlQ29tcG9uZW50IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklWaWJyYXRlQ29tcG9uZW50fSBtZXNzYWdlIFZpYnJhdGVDb21wb25lbnQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBWaWJyYXRlQ29tcG9uZW50LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNwZWVkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzcGVlZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDEgPSovMTcpLmRvdWJsZShtZXNzYWdlLnNwZWVkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFZpYnJhdGVDb21wb25lbnQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVZpYnJhdGVDb21wb25lbnR9IG1lc3NhZ2UgVmlicmF0ZUNvbXBvbmVudCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDb21wb25lbnQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFZpYnJhdGVDb21wb25lbnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnR9IFZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBWaWJyYXRlQ29tcG9uZW50LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3BlZWQgPSByZWFkZXIuZG91YmxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFZpYnJhdGVDb21wb25lbnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnR9IFZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBWaWJyYXRlQ29tcG9uZW50LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgVmlicmF0ZUNvbXBvbmVudCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDb21wb25lbnQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zcGVlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzcGVlZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uuc3BlZWQgIT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNwZWVkOiBudW1iZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBWaWJyYXRlQ29tcG9uZW50IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudH0gVmlicmF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNvbXBvbmVudC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pbmRleCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSBvYmplY3QuaW5kZXggPj4+IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnNwZWVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zcGVlZCA9IE51bWJlcihvYmplY3Quc3BlZWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVmlicmF0ZUNvbXBvbmVudCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnR9IG1lc3NhZ2UgVmlicmF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDb21wb25lbnQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zcGVlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSBtZXNzYWdlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3BlZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3BlZWRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNwZWVkID0gb3B0aW9ucy5qc29uICYmICFpc0Zpbml0ZShtZXNzYWdlLnNwZWVkKSA/IFN0cmluZyhtZXNzYWdlLnNwZWVkKSA6IG1lc3NhZ2Uuc3BlZWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmlicmF0ZUNvbXBvbmVudCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDb21wb25lbnQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFZpYnJhdGVDb21wb25lbnQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ21kID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBWaWJyYXRlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElWaWJyYXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVZpYnJhdGVDb21wb25lbnQ+fG51bGx9IFtzcGVlZHNdIFZpYnJhdGVDbWQgc3BlZWRzXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVmlicmF0ZUNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVmlicmF0ZUNtZC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JVmlicmF0ZUNtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gVmlicmF0ZUNtZChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwZWVkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZpYnJhdGVDbWQgc3BlZWRzLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JVmlicmF0ZUNvbXBvbmVudD59IHNwZWVkc1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNtZC5wcm90b3R5cGUuc3BlZWRzID0gJHV0aWwuZW1wdHlBcnJheTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFZpYnJhdGVDbWQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVZpYnJhdGVDbWQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZH0gVmlicmF0ZUNtZCBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNtZC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWaWJyYXRlQ21kKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBWaWJyYXRlQ21kIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklWaWJyYXRlQ21kfSBtZXNzYWdlIFZpYnJhdGVDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBWaWJyYXRlQ21kLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zcGVlZHMgIT0gbnVsbCAmJiBtZXNzYWdlLnNwZWVkcy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnNwZWVkcy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50LmVuY29kZShtZXNzYWdlLnNwZWVkc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVmlicmF0ZUNtZCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JVmlicmF0ZUNtZH0gbWVzc2FnZSBWaWJyYXRlQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNtZC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgVmlicmF0ZUNtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZH0gVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDbWQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ21kKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2Uuc3BlZWRzICYmIG1lc3NhZ2Uuc3BlZWRzLmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWVkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWVkcy5wdXNoKCRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgVmlicmF0ZUNtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZH0gVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDbWQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBWaWJyYXRlQ21kIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNtZC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zcGVlZHMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3BlZWRzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2Uuc3BlZWRzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3BlZWRzOiBhcnJheSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5zcGVlZHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50LnZlcmlmeShtZXNzYWdlLnNwZWVkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNwZWVkcy5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBWaWJyYXRlQ21kIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZH0gVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgVmlicmF0ZUNtZC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zcGVlZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0LnNwZWVkcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQuc3BlZWRzOiBhcnJheSBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWVkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0LnNwZWVkcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zcGVlZHNbaV0gIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ21kLnNwZWVkczogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWVkc1tpXSA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudC5mcm9tT2JqZWN0KG9iamVjdC5zcGVlZHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFZpYnJhdGVDbWQgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ21kfSBtZXNzYWdlIFZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBWaWJyYXRlQ21kLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zcGVlZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNwZWVkcyAmJiBtZXNzYWdlLnNwZWVkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3BlZWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnNwZWVkcy5sZW5ndGg7ICsrailcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNwZWVkc1tqXSA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudC50b09iamVjdChtZXNzYWdlLnNwZWVkc1tqXSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmlicmF0ZUNtZCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFZpYnJhdGVDbWQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFZpYnJhdGVDbWQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFJvdGF0ZUNvbXBvbmVudC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtpbmRleF0gUm90YXRlQ29tcG9uZW50IGluZGV4XHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtzcGVlZF0gUm90YXRlQ29tcG9uZW50IHNwZWVkXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudWxsfSBbY2xvY2t3aXNlXSBSb3RhdGVDb21wb25lbnQgY2xvY2t3aXNlXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUm90YXRlQ29tcG9uZW50LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSb3RhdGVDb21wb25lbnQuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElSb3RhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUm90YXRlQ29tcG9uZW50PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBSb3RhdGVDb21wb25lbnQocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFJvdGF0ZUNvbXBvbmVudCBpbmRleC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBpbmRleFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDb21wb25lbnQucHJvdG90eXBlLmluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSb3RhdGVDb21wb25lbnQgc3BlZWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc3BlZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ29tcG9uZW50LnByb3RvdHlwZS5zcGVlZCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUm90YXRlQ29tcG9uZW50IGNsb2Nrd2lzZS5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn0gY2xvY2t3aXNlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJvdGF0ZUNvbXBvbmVudC5wcm90b3R5cGUuY2xvY2t3aXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBSb3RhdGVDb21wb25lbnQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUm90YXRlQ29tcG9uZW50PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudH0gUm90YXRlQ29tcG9uZW50IGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDb21wb25lbnQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUm90YXRlQ29tcG9uZW50KHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSb3RhdGVDb21wb25lbnQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSb3RhdGVDb21wb25lbnR9IG1lc3NhZ2UgUm90YXRlQ29tcG9uZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ29tcG9uZW50LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNwZWVkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzcGVlZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDEgPSovMTcpLmRvdWJsZShtZXNzYWdlLnNwZWVkKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNsb2Nrd2lzZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY2xvY2t3aXNlXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMCA9Ki8yNCkuYm9vbChtZXNzYWdlLmNsb2Nrd2lzZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSb3RhdGVDb21wb25lbnQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSb3RhdGVDb21wb25lbnR9IG1lc3NhZ2UgUm90YXRlQ29tcG9uZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ29tcG9uZW50LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSb3RhdGVDb21wb25lbnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50fSBSb3RhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDb21wb25lbnQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWVkID0gcmVhZGVyLmRvdWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2xvY2t3aXNlID0gcmVhZGVyLmJvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUm90YXRlQ29tcG9uZW50IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudH0gUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ29tcG9uZW50LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgUm90YXRlQ29tcG9uZW50IG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDb21wb25lbnQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zcGVlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzcGVlZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uuc3BlZWQgIT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNwZWVkOiBudW1iZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNsb2Nrd2lzZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbG9ja3dpc2VcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNsb2Nrd2lzZSAhPT0gXCJib29sZWFuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNsb2Nrd2lzZTogYm9vbGVhbiBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFJvdGF0ZUNvbXBvbmVudCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50fSBSb3RhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJvdGF0ZUNvbXBvbmVudC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaW5kZXggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4ID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zcGVlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3BlZWQgPSBOdW1iZXIob2JqZWN0LnNwZWVkKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuY2xvY2t3aXNlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jbG9ja3dpc2UgPSBCb29sZWFuKG9iamVjdC5jbG9ja3dpc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUm90YXRlQ29tcG9uZW50IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnR9IG1lc3NhZ2UgUm90YXRlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ29tcG9uZW50LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3BlZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jbG9ja3dpc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IG1lc3NhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zcGVlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzcGVlZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3BlZWQgPSBvcHRpb25zLmpzb24gJiYgIWlzRmluaXRlKG1lc3NhZ2Uuc3BlZWQpID8gU3RyaW5nKG1lc3NhZ2Uuc3BlZWQpIDogbWVzc2FnZS5zcGVlZDtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNsb2Nrd2lzZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjbG9ja3dpc2VcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNsb2Nrd2lzZSA9IG1lc3NhZ2UuY2xvY2t3aXNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFJvdGF0ZUNvbXBvbmVudCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ29tcG9uZW50LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSb3RhdGVDb21wb25lbnQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFJvdGF0ZUNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJUm90YXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJvdGF0ZUNvbXBvbmVudD58bnVsbH0gW3JvdGF0aW9uc10gUm90YXRlQ21kIHJvdGF0aW9uc1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJvdGF0ZUNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUm90YXRlQ21kLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUm90YXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJvdGF0ZUNtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gUm90YXRlQ21kKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUm90YXRlQ21kIHJvdGF0aW9ucy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJvdGF0ZUNvbXBvbmVudD59IHJvdGF0aW9uc1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDbWQucHJvdG90eXBlLnJvdGF0aW9ucyA9ICR1dGlsLmVtcHR5QXJyYXk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBSb3RhdGVDbWQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUm90YXRlQ21kPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZH0gUm90YXRlQ21kIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDbWQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUm90YXRlQ21kKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSb3RhdGVDbWQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSb3RhdGVDbWR9IG1lc3NhZ2UgUm90YXRlQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ21kLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yb3RhdGlvbnMgIT0gbnVsbCAmJiBtZXNzYWdlLnJvdGF0aW9ucy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnJvdGF0aW9ucy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQuZW5jb2RlKG1lc3NhZ2Uucm90YXRpb25zW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSb3RhdGVDbWQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSb3RhdGVDbWR9IG1lc3NhZ2UgUm90YXRlQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ21kLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSb3RhdGVDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kfSBSb3RhdGVDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDbWQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5yb3RhdGlvbnMgJiYgbWVzc2FnZS5yb3RhdGlvbnMubGVuZ3RoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm90YXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm90YXRpb25zLnB1c2goJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJvdGF0ZUNtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWR9IFJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJvdGF0ZUNtZC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFJvdGF0ZUNtZCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ21kLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJvdGF0aW9ucyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb3RhdGlvbnNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5yb3RhdGlvbnMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyb3RhdGlvbnM6IGFycmF5IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnJvdGF0aW9ucy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudC52ZXJpZnkobWVzc2FnZS5yb3RhdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyb3RhdGlvbnMuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgUm90YXRlQ21kIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWR9IFJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUm90YXRlQ21kLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5yb3RhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0LnJvdGF0aW9ucykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZC5yb3RhdGlvbnM6IGFycmF5IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm90YXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3Qucm90YXRpb25zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnJvdGF0aW9uc1tpXSAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZC5yb3RhdGlvbnM6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb3RhdGlvbnNbaV0gPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudC5mcm9tT2JqZWN0KG9iamVjdC5yb3RhdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFJvdGF0ZUNtZCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kfSBtZXNzYWdlIFJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJvdGF0ZUNtZC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qucm90YXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yb3RhdGlvbnMgJiYgbWVzc2FnZS5yb3RhdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJvdGF0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5yb3RhdGlvbnMubGVuZ3RoOyArK2opXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5yb3RhdGlvbnNbal0gPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNvbXBvbmVudC50b09iamVjdChtZXNzYWdlLnJvdGF0aW9uc1tqXSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgUm90YXRlQ21kIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSb3RhdGVDbWQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFJvdGF0ZUNtZDtcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgTGluZWFyQ29tcG9uZW50LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElMaW5lYXJDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2luZGV4XSBMaW5lYXJDb21wb25lbnQgaW5kZXhcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2R1cmF0aW9uXSBMaW5lYXJDb21wb25lbnQgZHVyYXRpb25cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3Bvc2l0aW9uXSBMaW5lYXJDb21wb25lbnQgcG9zaXRpb25cclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBMaW5lYXJDb21wb25lbnQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIExpbmVhckNvbXBvbmVudC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklMaW5lYXJDb21wb25lbnQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIExpbmVhckNvbXBvbmVudChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTGluZWFyQ29tcG9uZW50IGluZGV4LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGluZGV4XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIExpbmVhckNvbXBvbmVudC5wcm90b3R5cGUuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIExpbmVhckNvbXBvbmVudCBkdXJhdGlvbi5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBkdXJhdGlvblxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDb21wb25lbnQucHJvdG90eXBlLmR1cmF0aW9uID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBMaW5lYXJDb21wb25lbnQgcG9zaXRpb24uXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gcG9zaXRpb25cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ29tcG9uZW50LnByb3RvdHlwZS5wb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBMaW5lYXJDb21wb25lbnQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JTGluZWFyQ29tcG9uZW50PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudH0gTGluZWFyQ29tcG9uZW50IGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDb21wb25lbnQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGluZWFyQ29tcG9uZW50KHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBMaW5lYXJDb21wb25lbnQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklMaW5lYXJDb21wb25lbnR9IG1lc3NhZ2UgTGluZWFyQ29tcG9uZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ29tcG9uZW50LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmR1cmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkdXJhdGlvblwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLnVpbnQzMihtZXNzYWdlLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBvc2l0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwb3NpdGlvblwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDEgPSovMjUpLmRvdWJsZShtZXNzYWdlLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIExpbmVhckNvbXBvbmVudCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUxpbmVhckNvbXBvbmVudH0gbWVzc2FnZSBMaW5lYXJDb21wb25lbnQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDb21wb25lbnQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIExpbmVhckNvbXBvbmVudCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnR9IExpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIExpbmVhckNvbXBvbmVudC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudCgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wb3NpdGlvbiA9IHJlYWRlci5kb3VibGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgTGluZWFyQ29tcG9uZW50IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudH0gTGluZWFyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ29tcG9uZW50LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgTGluZWFyQ29tcG9uZW50IG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDb21wb25lbnQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkdXJhdGlvblwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmR1cmF0aW9uKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZHVyYXRpb246IGludGVnZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBvc2l0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBvc2l0aW9uXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5wb3NpdGlvbiAhPT0gXCJudW1iZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicG9zaXRpb246IG51bWJlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIExpbmVhckNvbXBvbmVudCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50fSBMaW5lYXJDb21wb25lbnRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIExpbmVhckNvbXBvbmVudC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaW5kZXggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4ID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kdXJhdGlvbiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSBvYmplY3QuZHVyYXRpb24gPj4+IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnBvc2l0aW9uICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wb3NpdGlvbiA9IE51bWJlcihvYmplY3QucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgTGluZWFyQ29tcG9uZW50IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnR9IG1lc3NhZ2UgTGluZWFyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ29tcG9uZW50LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHVyYXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSBtZXNzYWdlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZHVyYXRpb25cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmR1cmF0aW9uID0gbWVzc2FnZS5kdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBvc2l0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBvc2l0aW9uXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wb3NpdGlvbiA9IG9wdGlvbnMuanNvbiAmJiAhaXNGaW5pdGUobWVzc2FnZS5wb3NpdGlvbikgPyBTdHJpbmcobWVzc2FnZS5wb3NpdGlvbikgOiBtZXNzYWdlLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIExpbmVhckNvbXBvbmVudCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ29tcG9uZW50LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBMaW5lYXJDb21wb25lbnQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIExpbmVhckNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJTGluZWFyQ21kXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUxpbmVhckNvbXBvbmVudD58bnVsbH0gW21vdmVtZW50c10gTGluZWFyQ21kIG1vdmVtZW50c1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IExpbmVhckNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgTGluZWFyQ21kLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJTGluZWFyQ21kXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUxpbmVhckNtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gTGluZWFyQ21kKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTGluZWFyQ21kIG1vdmVtZW50cy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUxpbmVhckNvbXBvbmVudD59IG1vdmVtZW50c1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDbWQucHJvdG90eXBlLm1vdmVtZW50cyA9ICR1dGlsLmVtcHR5QXJyYXk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBMaW5lYXJDbWQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JTGluZWFyQ21kPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZH0gTGluZWFyQ21kIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDbWQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGluZWFyQ21kKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBMaW5lYXJDbWQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklMaW5lYXJDbWR9IG1lc3NhZ2UgTGluZWFyQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ21kLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tb3ZlbWVudHMgIT0gbnVsbCAmJiBtZXNzYWdlLm1vdmVtZW50cy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLm1vdmVtZW50cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnQuZW5jb2RlKG1lc3NhZ2UubW92ZW1lbnRzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBMaW5lYXJDbWQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklMaW5lYXJDbWR9IG1lc3NhZ2UgTGluZWFyQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ21kLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBMaW5lYXJDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kfSBMaW5lYXJDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDbWQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5tb3ZlbWVudHMgJiYgbWVzc2FnZS5tb3ZlbWVudHMubGVuZ3RoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubW92ZW1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubW92ZW1lbnRzLnB1c2goJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDb21wb25lbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIExpbmVhckNtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWR9IExpbmVhckNtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIExpbmVhckNtZC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIExpbmVhckNtZCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ21kLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1vdmVtZW50cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtb3ZlbWVudHNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5tb3ZlbWVudHMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtb3ZlbWVudHM6IGFycmF5IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLm1vdmVtZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudC52ZXJpZnkobWVzc2FnZS5tb3ZlbWVudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtb3ZlbWVudHMuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgTGluZWFyQ21kIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWR9IExpbmVhckNtZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTGluZWFyQ21kLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tb3ZlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0Lm1vdmVtZW50cykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZC5tb3ZlbWVudHM6IGFycmF5IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubW92ZW1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3QubW92ZW1lbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0Lm1vdmVtZW50c1tpXSAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZC5tb3ZlbWVudHM6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tb3ZlbWVudHNbaV0gPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudC5mcm9tT2JqZWN0KG9iamVjdC5tb3ZlbWVudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIExpbmVhckNtZCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kfSBtZXNzYWdlIExpbmVhckNtZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIExpbmVhckNtZC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubW92ZW1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tb3ZlbWVudHMgJiYgbWVzc2FnZS5tb3ZlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1vdmVtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5tb3ZlbWVudHMubGVuZ3RoOyArK2opXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb3ZlbWVudHNbal0gPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudC50b09iamVjdChtZXNzYWdlLm1vdmVtZW50c1tqXSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgTGluZWFyQ21kIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBMaW5lYXJDbWQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIExpbmVhckNtZDtcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFN0b3BEZXZpY2VDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTdG9wRGV2aWNlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBTdG9wRGV2aWNlQ21kLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJU3RvcERldmljZUNtZFxyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklTdG9wRGV2aWNlQ21kPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBTdG9wRGV2aWNlQ21kKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFN0b3BEZXZpY2VDbWQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVN0b3BEZXZpY2VDbWQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZH0gU3RvcERldmljZUNtZCBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RvcERldmljZUNtZC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdG9wRGV2aWNlQ21kKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wRGV2aWNlQ21kIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklTdG9wRGV2aWNlQ21kfSBtZXNzYWdlIFN0b3BEZXZpY2VDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wRGV2aWNlQ21kLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wRGV2aWNlQ21kIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklTdG9wRGV2aWNlQ21kfSBtZXNzYWdlIFN0b3BEZXZpY2VDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wRGV2aWNlQ21kLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBTdG9wRGV2aWNlQ21kIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kfSBTdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RvcERldmljZUNtZC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFN0b3BEZXZpY2VDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWR9IFN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wRGV2aWNlQ21kLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgU3RvcERldmljZUNtZCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BEZXZpY2VDbWQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFN0b3BEZXZpY2VDbWQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kfSBTdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTdG9wRGV2aWNlQ21kLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBTdG9wRGV2aWNlQ21kIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZH0gbWVzc2FnZSBTdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU3RvcERldmljZUNtZC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgU3RvcERldmljZUNtZCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFN0b3BEZXZpY2VDbWQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN0b3BEZXZpY2VDbWQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBSYXdSZWFkQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElSYXdSZWFkQ21kXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuRW5kcG9pbnR8bnVsbH0gW2VuZHBvaW50XSBSYXdSZWFkQ21kIGVuZHBvaW50XHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7VWludDhBcnJheXxudWxsfSBbZGF0YV0gUmF3UmVhZENtZCBkYXRhXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtleHBlY3RlZExlbmd0aF0gUmF3UmVhZENtZCBleHBlY3RlZExlbmd0aFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbdGltZW91dF0gUmF3UmVhZENtZCB0aW1lb3V0XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUmF3UmVhZENtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUmF3UmVhZENtZC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUmF3UmVhZENtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gUmF3UmVhZENtZChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmF3UmVhZENtZCBlbmRwb2ludC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuRW5kcG9pbnR9IGVuZHBvaW50XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLnByb3RvdHlwZS5lbmRwb2ludCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmF3UmVhZENtZCBkYXRhLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtVaW50OEFycmF5fSBkYXRhXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLnByb3RvdHlwZS5kYXRhID0gJHV0aWwubmV3QnVmZmVyKFtdKTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSYXdSZWFkQ21kIGV4cGVjdGVkTGVuZ3RoLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGV4cGVjdGVkTGVuZ3RoXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLnByb3RvdHlwZS5leHBlY3RlZExlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmF3UmVhZENtZCB0aW1lb3V0LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHRpbWVvdXRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRDbWQucHJvdG90eXBlLnRpbWVvdXQgPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUmF3UmVhZENtZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUmF3UmVhZENtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kfSBSYXdSZWFkQ21kIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJhd1JlYWRDbWQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJhd1JlYWRDbWQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1JlYWRDbWR9IG1lc3NhZ2UgUmF3UmVhZENtZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRDbWQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5lbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkYXRhXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuYnl0ZXMobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmV4cGVjdGVkTGVuZ3RoICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJleHBlY3RlZExlbmd0aFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDAgPSovMjQpLnVpbnQzMihtZXNzYWdlLmV4cGVjdGVkTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWVvdXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRpbWVvdXRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS51aW50MzIobWVzc2FnZS50aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJhd1JlYWRDbWQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1JlYWRDbWR9IG1lc3NhZ2UgUmF3UmVhZENtZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRDbWQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJhd1JlYWRDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWR9IFJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZCgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gcmVhZGVyLmludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gcmVhZGVyLmJ5dGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5leHBlY3RlZExlbmd0aCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVvdXQgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJhd1JlYWRDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWR9IFJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgUmF3UmVhZENtZCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRDbWQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kcG9pbnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kcG9pbnRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmVuZHBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5kcG9pbnQ6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5kYXRhICYmIHR5cGVvZiBtZXNzYWdlLmRhdGEubGVuZ3RoID09PSBcIm51bWJlclwiIHx8ICR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuZGF0YSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkYXRhOiBidWZmZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmV4cGVjdGVkTGVuZ3RoICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImV4cGVjdGVkTGVuZ3RoXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuZXhwZWN0ZWRMZW5ndGgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJleHBlY3RlZExlbmd0aDogaW50ZWdlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZW91dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lb3V0XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UudGltZW91dCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRpbWVvdXQ6IGludGVnZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBSYXdSZWFkQ21kIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZH0gUmF3UmVhZENtZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3UmVhZENtZC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZCgpO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvYmplY3QuZW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJDb21tYW5kXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiRmlybXdhcmVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4QWNjZWxcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeEJMRUJhdHRlcnlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFByZXNzdXJlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUnhUb3VjaFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlR4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhNb2RlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhTaG9ja1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlR4VmlicmF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhWZW5kb3JDb250cm9sXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJXaGl0ZWxpc3RcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDEyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMzXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljNFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM2XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxOTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljN1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM5XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDIyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzEyXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI1OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxNFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE1XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI4OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyODtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTZcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxN1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDMyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyMFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIxXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyM1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzNjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyNlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyOVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0MjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzMwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMzFcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQ0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kYXRhICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZGF0YSA9PT0gXCJzdHJpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHV0aWwuYmFzZTY0LmRlY29kZShvYmplY3QuZGF0YSwgbWVzc2FnZS5kYXRhID0gJHV0aWwubmV3QnVmZmVyKCR1dGlsLmJhc2U2NC5sZW5ndGgob2JqZWN0LmRhdGEpKSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqZWN0LmRhdGEubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSBvYmplY3QuZGF0YTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuZXhwZWN0ZWRMZW5ndGggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmV4cGVjdGVkTGVuZ3RoID0gb2JqZWN0LmV4cGVjdGVkTGVuZ3RoID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC50aW1lb3V0ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50aW1lb3V0ID0gb2JqZWN0LnRpbWVvdXQgPj4+IDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSYXdSZWFkQ21kIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZH0gbWVzc2FnZSBSYXdSZWFkQ21kXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3UmVhZENtZC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRwb2ludCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiQ29tbWFuZFwiIDogMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ieXRlcyA9PT0gU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGF0YSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmJ5dGVzICE9PSBBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kYXRhID0gJHV0aWwubmV3QnVmZmVyKG9iamVjdC5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmV4cGVjdGVkTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZW91dCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kcG9pbnQgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC5CdXR0cGx1Zy5FbmRwb2ludFttZXNzYWdlLmVuZHBvaW50XSA6IG1lc3NhZ2UuZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRhdGEgPSBvcHRpb25zLmJ5dGVzID09PSBTdHJpbmcgPyAkdXRpbC5iYXNlNjQuZW5jb2RlKG1lc3NhZ2UuZGF0YSwgMCwgbWVzc2FnZS5kYXRhLmxlbmd0aCkgOiBvcHRpb25zLmJ5dGVzID09PSBBcnJheSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG1lc3NhZ2UuZGF0YSkgOiBtZXNzYWdlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5leHBlY3RlZExlbmd0aCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJleHBlY3RlZExlbmd0aFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZXhwZWN0ZWRMZW5ndGggPSBtZXNzYWdlLmV4cGVjdGVkTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZW91dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lb3V0XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lb3V0ID0gbWVzc2FnZS50aW1lb3V0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFJhd1JlYWRDbWQgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkQ21kLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSYXdSZWFkQ21kO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIERldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFJhd1dyaXRlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElSYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLkVuZHBvaW50fG51bGx9IFtlbmRwb2ludF0gUmF3V3JpdGVDbWQgZW5kcG9pbnRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtVaW50OEFycmF5fG51bGx9IFtkYXRhXSBSYXdXcml0ZUNtZCBkYXRhXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudWxsfSBbd3JpdGVXaXRoUmVzcG9uc2VdIFJhd1dyaXRlQ21kIHdyaXRlV2l0aFJlc3BvbnNlXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUmF3V3JpdGVDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFJhd1dyaXRlQ21kLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUmF3V3JpdGVDbWQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFJhd1dyaXRlQ21kKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSYXdXcml0ZUNtZCBlbmRwb2ludC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuRW5kcG9pbnR9IGVuZHBvaW50XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3V3JpdGVDbWQucHJvdG90eXBlLmVuZHBvaW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSYXdXcml0ZUNtZCBkYXRhLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtVaW50OEFycmF5fSBkYXRhXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3V3JpdGVDbWQucHJvdG90eXBlLmRhdGEgPSAkdXRpbC5uZXdCdWZmZXIoW10pO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFJhd1dyaXRlQ21kIHdyaXRlV2l0aFJlc3BvbnNlLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufSB3cml0ZVdpdGhSZXNwb25zZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1dyaXRlQ21kLnByb3RvdHlwZS53cml0ZVdpdGhSZXNwb25zZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUmF3V3JpdGVDbWQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdXcml0ZUNtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZH0gUmF3V3JpdGVDbWQgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1dyaXRlQ21kLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJhd1dyaXRlQ21kKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSYXdXcml0ZUNtZCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdXcml0ZUNtZH0gbWVzc2FnZSBSYXdXcml0ZUNtZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1dyaXRlQ21kLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZW5kcG9pbnRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDMyKG1lc3NhZ2UuZW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGF0YVwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS53cml0ZVdpdGhSZXNwb25zZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwid3JpdGVXaXRoUmVzcG9uc2VcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS5ib29sKG1lc3NhZ2Uud3JpdGVXaXRoUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmF3V3JpdGVDbWQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JUmF3V3JpdGVDbWR9IG1lc3NhZ2UgUmF3V3JpdGVDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdXcml0ZUNtZC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUmF3V3JpdGVDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZH0gUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdXcml0ZUNtZC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSByZWFkZXIuaW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSByZWFkZXIuYnl0ZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndyaXRlV2l0aFJlc3BvbnNlID0gcmVhZGVyLmJvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUmF3V3JpdGVDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZH0gUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdXcml0ZUNtZC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFJhd1dyaXRlQ21kIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1dyaXRlQ21kLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZHBvaW50XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5lbmRwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVuZHBvaW50OiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM2OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0NDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkYXRhXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuZGF0YSAmJiB0eXBlb2YgbWVzc2FnZS5kYXRhLmxlbmd0aCA9PT0gXCJudW1iZXJcIiB8fCAkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmRhdGEpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGF0YTogYnVmZmVyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS53cml0ZVdpdGhSZXNwb25zZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ3cml0ZVdpdGhSZXNwb25zZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uud3JpdGVXaXRoUmVzcG9uc2UgIT09IFwiYm9vbGVhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ3cml0ZVdpdGhSZXNwb25zZTogYm9vbGVhbiBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFJhd1dyaXRlQ21kIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kfSBSYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3V3JpdGVDbWQuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZCgpO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvYmplY3QuZW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJDb21tYW5kXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiRmlybXdhcmVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4QWNjZWxcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeEJMRUJhdHRlcnlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFByZXNzdXJlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUnhUb3VjaFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlR4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhNb2RlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhTaG9ja1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlR4VmlicmF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhWZW5kb3JDb250cm9sXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJXaGl0ZWxpc3RcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDEyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMzXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljNFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM2XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxOTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljN1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM5XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDIyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzEyXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI1OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxNFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE1XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI4OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyODtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTZcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxN1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDMyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyMFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIxXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyM1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzNjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyNlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyOVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0MjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzMwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMzFcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQ0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kYXRhICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZGF0YSA9PT0gXCJzdHJpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHV0aWwuYmFzZTY0LmRlY29kZShvYmplY3QuZGF0YSwgbWVzc2FnZS5kYXRhID0gJHV0aWwubmV3QnVmZmVyKCR1dGlsLmJhc2U2NC5sZW5ndGgob2JqZWN0LmRhdGEpKSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqZWN0LmRhdGEubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSBvYmplY3QuZGF0YTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3Qud3JpdGVXaXRoUmVzcG9uc2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndyaXRlV2l0aFJlc3BvbnNlID0gQm9vbGVhbihvYmplY3Qud3JpdGVXaXRoUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUmF3V3JpdGVDbWQgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWR9IG1lc3NhZ2UgUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdXcml0ZUNtZC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRwb2ludCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiQ29tbWFuZFwiIDogMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ieXRlcyA9PT0gU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGF0YSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmJ5dGVzICE9PSBBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kYXRhID0gJHV0aWwubmV3QnVmZmVyKG9iamVjdC5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LndyaXRlV2l0aFJlc3BvbnNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kcG9pbnQgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC5CdXR0cGx1Zy5FbmRwb2ludFttZXNzYWdlLmVuZHBvaW50XSA6IG1lc3NhZ2UuZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRhdGEgPSBvcHRpb25zLmJ5dGVzID09PSBTdHJpbmcgPyAkdXRpbC5iYXNlNjQuZW5jb2RlKG1lc3NhZ2UuZGF0YSwgMCwgbWVzc2FnZS5kYXRhLmxlbmd0aCkgOiBvcHRpb25zLmJ5dGVzID09PSBBcnJheSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG1lc3NhZ2UuZGF0YSkgOiBtZXNzYWdlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS53cml0ZVdpdGhSZXNwb25zZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ3cml0ZVdpdGhSZXNwb25zZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Qud3JpdGVXaXRoUmVzcG9uc2UgPSBtZXNzYWdlLndyaXRlV2l0aFJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFJhd1dyaXRlQ21kIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1dyaXRlQ21kLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSYXdXcml0ZUNtZDtcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUmF3U3Vic2NyaWJlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElSYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5FbmRwb2ludHxudWxsfSBbZW5kcG9pbnRdIFJhd1N1YnNjcmliZUNtZCBlbmRwb2ludFxyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJhd1N1YnNjcmliZUNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUmF3U3Vic2NyaWJlQ21kLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUmF3U3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1N1YnNjcmliZUNtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gUmF3U3Vic2NyaWJlQ21kKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSYXdTdWJzY3JpYmVDbWQgZW5kcG9pbnQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkVuZHBvaW50fSBlbmRwb2ludFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdTdWJzY3JpYmVDbWQucHJvdG90eXBlLmVuZHBvaW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJhd1N1YnNjcmliZUNtZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdTdWJzY3JpYmVDbWQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kfSBSYXdTdWJzY3JpYmVDbWQgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1N1YnNjcmliZUNtZC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSYXdTdWJzY3JpYmVDbWQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJhd1N1YnNjcmliZUNtZCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1N1YnNjcmliZUNtZH0gbWVzc2FnZSBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdTdWJzY3JpYmVDbWQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5lbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdTdWJzY3JpYmVDbWR9IG1lc3NhZ2UgUmF3U3Vic2NyaWJlQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3U3Vic2NyaWJlQ21kLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kfSBSYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdTdWJzY3JpYmVDbWQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IHJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kfSBSYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdTdWJzY3JpYmVDbWQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1N1YnNjcmliZUNtZC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuZW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmRwb2ludDogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZH0gUmF3U3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdTdWJzY3JpYmVDbWQuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kKCk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5lbmRwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkNvbW1hbmRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJGaXJtd2FyZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUnhBY2NlbFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4QkxFQmF0dGVyeVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4UHJlc3N1cmVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFRvdWNoXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeE1vZGVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gODtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFNob2NrXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhWaWJyYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFZlbmRvckNvbnRyb2xcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDExO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIldoaXRlbGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljNVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzZcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDIwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljOFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxMFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzExXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxM1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxNlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMThcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDMxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxOVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjFcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyMlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIzXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM3O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyNVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI2XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzOTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjdcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyOFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0MTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI5XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMzBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMzMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0NDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSYXdTdWJzY3JpYmVDbWQgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZH0gbWVzc2FnZSBSYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdTdWJzY3JpYmVDbWQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVuZHBvaW50ID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJDb21tYW5kXCIgOiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kcG9pbnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kcG9pbnRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVuZHBvaW50ID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QuQnV0dHBsdWcuRW5kcG9pbnRbbWVzc2FnZS5lbmRwb2ludF0gOiBtZXNzYWdlLmVuZHBvaW50O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFJhd1N1YnNjcmliZUNtZCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3U3Vic2NyaWJlQ21kLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSYXdTdWJzY3JpYmVDbWQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUmF3VW5zdWJzY3JpYmVDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuRW5kcG9pbnR8bnVsbH0gW2VuZHBvaW50XSBSYXdVbnN1YnNjcmliZUNtZCBlbmRwb2ludFxyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJhd1Vuc3Vic2NyaWJlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSYXdVbnN1YnNjcmliZUNtZC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1Vuc3Vic2NyaWJlQ21kPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBSYXdVbnN1YnNjcmliZUNtZChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmF3VW5zdWJzY3JpYmVDbWQgZW5kcG9pbnQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkVuZHBvaW50fSBlbmRwb2ludFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1Vuc3Vic2NyaWJlQ21kLnByb3RvdHlwZS5lbmRwb2ludCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBSYXdVbnN1YnNjcmliZUNtZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3VW5zdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1Vuc3Vic2NyaWJlQ21kPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kfSBSYXdVbnN1YnNjcmliZUNtZCBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3VW5zdWJzY3JpYmVDbWQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmF3VW5zdWJzY3JpYmVDbWQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJhd1Vuc3Vic2NyaWJlQ21kIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3VW5zdWJzY3JpYmVDbWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3VW5zdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1Vuc3Vic2NyaWJlQ21kfSBtZXNzYWdlIFJhd1Vuc3Vic2NyaWJlQ21kIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3VW5zdWJzY3JpYmVDbWQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5lbmRwb2ludCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSYXdVbnN1YnNjcmliZUNtZCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdVbnN1YnNjcmliZUNtZH0gbWVzc2FnZSBSYXdVbnN1YnNjcmliZUNtZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1Vuc3Vic2NyaWJlQ21kLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSYXdVbnN1YnNjcmliZUNtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kfSBSYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1Vuc3Vic2NyaWJlQ21kLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3VW5zdWJzY3JpYmVDbWQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IHJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSYXdVbnN1YnNjcmliZUNtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kfSBSYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1Vuc3Vic2NyaWJlQ21kLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgUmF3VW5zdWJzY3JpYmVDbWQgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3VW5zdWJzY3JpYmVDbWQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kcG9pbnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kcG9pbnRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmVuZHBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5kcG9pbnQ6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgUmF3VW5zdWJzY3JpYmVDbWQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3VW5zdWJzY3JpYmVDbWR9IFJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdVbnN1YnNjcmliZUNtZC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kKCk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5lbmRwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkNvbW1hbmRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJGaXJtd2FyZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUnhBY2NlbFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4QkxFQmF0dGVyeVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4UHJlc3N1cmVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFRvdWNoXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeE1vZGVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gODtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFNob2NrXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhWaWJyYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFZlbmRvckNvbnRyb2xcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDExO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIldoaXRlbGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljNVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzZcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDIwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljOFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxMFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzExXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxM1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxNlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMThcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDMxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxOVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjFcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyMlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIzXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM3O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyNVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI2XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzOTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjdcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyOFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0MTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI5XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMzBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMzMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0NDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBSYXdVbnN1YnNjcmliZUNtZCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZH0gbWVzc2FnZSBSYXdVbnN1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1Vuc3Vic2NyaWJlQ21kLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRwb2ludCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiQ29tbWFuZFwiIDogMDtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZHBvaW50XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRwb2ludCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LkJ1dHRwbHVnLkVuZHBvaW50W21lc3NhZ2UuZW5kcG9pbnRdIDogbWVzc2FnZS5lbmRwb2ludDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBSYXdVbnN1YnNjcmliZUNtZCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdVbnN1YnNjcmliZUNtZC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUmF3VW5zdWJzY3JpYmVDbWQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEJhdHRlcnlMZXZlbENtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJQmF0dGVyeUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQmF0dGVyeUxldmVsQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBCYXR0ZXJ5TGV2ZWxDbWQuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElCYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JQmF0dGVyeUxldmVsQ21kPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBCYXR0ZXJ5TGV2ZWxDbWQocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQmF0dGVyeUxldmVsQ21kIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUJhdHRlcnlMZXZlbENtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWR9IEJhdHRlcnlMZXZlbENtZCBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsQ21kLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJhdHRlcnlMZXZlbENtZChwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQmF0dGVyeUxldmVsQ21kIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JQmF0dGVyeUxldmVsQ21kfSBtZXNzYWdlIEJhdHRlcnlMZXZlbENtZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbENtZC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQmF0dGVyeUxldmVsQ21kIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JQmF0dGVyeUxldmVsQ21kfSBtZXNzYWdlIEJhdHRlcnlMZXZlbENtZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbENtZC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgQmF0dGVyeUxldmVsQ21kIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZH0gQmF0dGVyeUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsQ21kLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBCYXR0ZXJ5TGV2ZWxDbWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kfSBCYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBCYXR0ZXJ5TGV2ZWxDbWQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBCYXR0ZXJ5TGV2ZWxDbWQgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbENtZC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgQmF0dGVyeUxldmVsQ21kIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWR9IEJhdHRlcnlMZXZlbENtZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsQ21kLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuQmF0dGVyeUxldmVsQ21kKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQmF0dGVyeUxldmVsQ21kIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWR9IG1lc3NhZ2UgQmF0dGVyeUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsQ21kLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBCYXR0ZXJ5TGV2ZWxDbWQgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbENtZC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQmF0dGVyeUxldmVsQ21kO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIERldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBSU1NJTGV2ZWxDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVJTU0lMZXZlbENtZFxyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJTU0lMZXZlbENtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUlNTSUxldmVsQ21kLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUlNTSUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJTU0lMZXZlbENtZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gUlNTSUxldmVsQ21kKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJTU0lMZXZlbENtZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSU1NJTGV2ZWxDbWQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kfSBSU1NJTGV2ZWxDbWQgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbENtZC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSU1NJTGV2ZWxDbWQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJTU0lMZXZlbENtZCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SU1NJTGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJTU0lMZXZlbENtZH0gbWVzc2FnZSBSU1NJTGV2ZWxDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxDbWQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJTU0lMZXZlbENtZCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SU1NJTGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJTU0lMZXZlbENtZH0gbWVzc2FnZSBSU1NJTGV2ZWxDbWQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxDbWQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJTU0lMZXZlbENtZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SU1NJTGV2ZWxDbWR9IFJTU0lMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbENtZC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZCgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUlNTSUxldmVsQ21kIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZH0gUlNTSUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUlNTSUxldmVsQ21kLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgUlNTSUxldmVsQ21kIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxDbWQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFJTU0lMZXZlbENtZCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kfSBSU1NJTGV2ZWxDbWRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbENtZC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJTU0lMZXZlbENtZCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFJTU0lMZXZlbENtZCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SU1NJTGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kfSBtZXNzYWdlIFJTU0lMZXZlbENtZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbENtZC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgUlNTSUxldmVsQ21kIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxDbWQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFJTU0lMZXZlbENtZDtcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBEZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZGSU1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklWaWJyYXRlQ21kfG51bGx9IFt2aWJyYXRlQ21kXSBGRklNZXNzYWdlIHZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSb3RhdGVDbWR8bnVsbH0gW3JvdGF0ZUNtZF0gRkZJTWVzc2FnZSByb3RhdGVDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklMaW5lYXJDbWR8bnVsbH0gW2xpbmVhckNtZF0gRkZJTWVzc2FnZSBsaW5lYXJDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklTdG9wRGV2aWNlQ21kfG51bGx9IFtzdG9wRGV2aWNlQ21kXSBGRklNZXNzYWdlIHN0b3BEZXZpY2VDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdSZWFkQ21kfG51bGx9IFtyYXdSZWFkQ21kXSBGRklNZXNzYWdlIHJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdXcml0ZUNtZHxudWxsfSBbcmF3V3JpdGVDbWRdIEZGSU1lc3NhZ2UgcmF3V3JpdGVDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdTdWJzY3JpYmVDbWR8bnVsbH0gW3Jhd1N1YnNjcmliZUNtZF0gRkZJTWVzc2FnZSByYXdTdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdVbnN1YnNjcmliZUNtZHxudWxsfSBbcmF3VW5zdWJzY3JpYmVDbWRdIEZGSU1lc3NhZ2UgcmF3VW5zdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklCYXR0ZXJ5TGV2ZWxDbWR8bnVsbH0gW2JhdHRlcnlMZXZlbENtZF0gRkZJTWVzc2FnZSBiYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSU1NJTGV2ZWxDbWR8bnVsbH0gW3Jzc2lMZXZlbENtZF0gRkZJTWVzc2FnZSByc3NpTGV2ZWxDbWRcclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGRklNZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGRklNZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklGRklNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBGRklNZXNzYWdlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIHZpYnJhdGVDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVZpYnJhdGVDbWR8bnVsbHx1bmRlZmluZWR9IHZpYnJhdGVDbWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLnZpYnJhdGVDbWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZGSU1lc3NhZ2Ugcm90YXRlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSb3RhdGVDbWR8bnVsbHx1bmRlZmluZWR9IHJvdGF0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5wcm90b3R5cGUucm90YXRlQ21kID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIGxpbmVhckNtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JTGluZWFyQ21kfG51bGx8dW5kZWZpbmVkfSBsaW5lYXJDbWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLmxpbmVhckNtZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRkZJTWVzc2FnZSBzdG9wRGV2aWNlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklTdG9wRGV2aWNlQ21kfG51bGx8dW5kZWZpbmVkfSBzdG9wRGV2aWNlQ21kXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnByb3RvdHlwZS5zdG9wRGV2aWNlQ21kID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIHJhd1JlYWRDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1JlYWRDbWR8bnVsbHx1bmRlZmluZWR9IHJhd1JlYWRDbWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLnJhd1JlYWRDbWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZGSU1lc3NhZ2UgcmF3V3JpdGVDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJhd1dyaXRlQ21kfG51bGx8dW5kZWZpbmVkfSByYXdXcml0ZUNtZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5wcm90b3R5cGUucmF3V3JpdGVDbWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZGSU1lc3NhZ2UgcmF3U3Vic2NyaWJlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdTdWJzY3JpYmVDbWR8bnVsbHx1bmRlZmluZWR9IHJhd1N1YnNjcmliZUNtZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5wcm90b3R5cGUucmF3U3Vic2NyaWJlQ21kID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIHJhd1Vuc3Vic2NyaWJlQ21kLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklSYXdVbnN1YnNjcmliZUNtZHxudWxsfHVuZGVmaW5lZH0gcmF3VW5zdWJzY3JpYmVDbWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLnJhd1Vuc3Vic2NyaWJlQ21kID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIGJhdHRlcnlMZXZlbENtZC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JQmF0dGVyeUxldmVsQ21kfG51bGx8dW5kZWZpbmVkfSBiYXR0ZXJ5TGV2ZWxDbWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UucHJvdG90eXBlLmJhdHRlcnlMZXZlbENtZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRkZJTWVzc2FnZSByc3NpTGV2ZWxDbWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSVJTU0lMZXZlbENtZHxudWxsfHVuZGVmaW5lZH0gcnNzaUxldmVsQ21kXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnByb3RvdHlwZS5yc3NpTGV2ZWxDbWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gT25lT2YgZmllbGQgbmFtZXMgYm91bmQgdG8gdmlydHVhbCBnZXR0ZXJzIGFuZCBzZXR0ZXJzXHJcbiAgICAgICAgICAgIHZhciAkb25lT2ZGaWVsZHM7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRkZJTWVzc2FnZSBtc2cuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge1widmlicmF0ZUNtZFwifFwicm90YXRlQ21kXCJ8XCJsaW5lYXJDbWRcInxcInN0b3BEZXZpY2VDbWRcInxcInJhd1JlYWRDbWRcInxcInJhd1dyaXRlQ21kXCJ8XCJyYXdTdWJzY3JpYmVDbWRcInxcInJhd1Vuc3Vic2NyaWJlQ21kXCJ8XCJiYXR0ZXJ5TGV2ZWxDbWRcInxcInJzc2lMZXZlbENtZFwifHVuZGVmaW5lZH0gbXNnXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRkZJTWVzc2FnZS5wcm90b3R5cGUsIFwibXNnXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogJHV0aWwub25lT2ZHZXR0ZXIoJG9uZU9mRmllbGRzID0gW1widmlicmF0ZUNtZFwiLCBcInJvdGF0ZUNtZFwiLCBcImxpbmVhckNtZFwiLCBcInN0b3BEZXZpY2VDbWRcIiwgXCJyYXdSZWFkQ21kXCIsIFwicmF3V3JpdGVDbWRcIiwgXCJyYXdTdWJzY3JpYmVDbWRcIiwgXCJyYXdVbnN1YnNjcmliZUNtZFwiLCBcImJhdHRlcnlMZXZlbENtZFwiLCBcInJzc2lMZXZlbENtZFwiXSksXHJcbiAgICAgICAgICAgICAgICBzZXQ6ICR1dGlsLm9uZU9mU2V0dGVyKCRvbmVPZkZpZWxkcylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBGRklNZXNzYWdlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLklGRklNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2V9IEZGSU1lc3NhZ2UgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRkZJTWVzc2FnZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRkZJTWVzc2FnZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5JRkZJTWVzc2FnZX0gbWVzc2FnZSBGRklNZXNzYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmlicmF0ZUNtZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidmlicmF0ZUNtZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQuZW5jb2RlKG1lc3NhZ2UudmlicmF0ZUNtZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uucm90YXRlQ21kICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyb3RhdGVDbWRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQuZW5jb2RlKG1lc3NhZ2Uucm90YXRlQ21kLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5saW5lYXJDbWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxpbmVhckNtZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZC5lbmNvZGUobWVzc2FnZS5saW5lYXJDbWQsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BEZXZpY2VDbWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0b3BEZXZpY2VDbWRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kLmVuY29kZShtZXNzYWdlLnN0b3BEZXZpY2VDbWQsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJhd1JlYWRDbWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJhd1JlYWRDbWRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kLmVuY29kZShtZXNzYWdlLnJhd1JlYWRDbWQsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJhd1dyaXRlQ21kICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyYXdXcml0ZUNtZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kLmVuY29kZShtZXNzYWdlLnJhd1dyaXRlQ21kLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yYXdTdWJzY3JpYmVDbWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJhd1N1YnNjcmliZUNtZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZC5lbmNvZGUobWVzc2FnZS5yYXdTdWJzY3JpYmVDbWQsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJhd1Vuc3Vic2NyaWJlQ21kICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyYXdVbnN1YnNjcmliZUNtZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kLmVuY29kZShtZXNzYWdlLnJhd1Vuc3Vic2NyaWJlQ21kLCB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxDbWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImJhdHRlcnlMZXZlbENtZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZC5lbmNvZGUobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxDbWQsIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJzc2lMZXZlbENtZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicnNzaUxldmVsQ21kXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kLmVuY29kZShtZXNzYWdlLnJzc2lMZXZlbENtZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMCwgd2lyZVR5cGUgMiA9Ki84MikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZGSU1lc3NhZ2UgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuSUZGSU1lc3NhZ2V9IG1lc3NhZ2UgRkZJTWVzc2FnZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2V9IEZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpYnJhdGVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvdGF0ZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5saW5lYXJDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcERldmljZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmF3UmVhZENtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmF3V3JpdGVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yYXdTdWJzY3JpYmVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1N1YnNjcmliZUNtZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmF3VW5zdWJzY3JpYmVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5iYXR0ZXJ5TGV2ZWxDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJzc2lMZXZlbENtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2V9IEZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgRkZJTWVzc2FnZSBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnZpYnJhdGVDbWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidmlicmF0ZUNtZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZC52ZXJpZnkobWVzc2FnZS52aWJyYXRlQ21kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidmlicmF0ZUNtZC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJvdGF0ZUNtZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb3RhdGVDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5tc2cgPT09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQudmVyaWZ5KG1lc3NhZ2Uucm90YXRlQ21kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicm90YXRlQ21kLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGluZWFyQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxpbmVhckNtZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXNnOiBtdWx0aXBsZSB2YWx1ZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZC52ZXJpZnkobWVzc2FnZS5saW5lYXJDbWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsaW5lYXJDbWQuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wRGV2aWNlQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BEZXZpY2VDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5tc2cgPT09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5TdG9wRGV2aWNlQ21kLnZlcmlmeShtZXNzYWdlLnN0b3BEZXZpY2VDbWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdG9wRGV2aWNlQ21kLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmF3UmVhZENtZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyYXdSZWFkQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZC52ZXJpZnkobWVzc2FnZS5yYXdSZWFkQ21kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmF3UmVhZENtZC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJhd1dyaXRlQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJhd1dyaXRlQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWQudmVyaWZ5KG1lc3NhZ2UucmF3V3JpdGVDbWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyYXdXcml0ZUNtZC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJhd1N1YnNjcmliZUNtZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyYXdTdWJzY3JpYmVDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5tc2cgPT09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWQudmVyaWZ5KG1lc3NhZ2UucmF3U3Vic2NyaWJlQ21kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmF3U3Vic2NyaWJlQ21kLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmF3VW5zdWJzY3JpYmVDbWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmF3VW5zdWJzY3JpYmVDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5tc2cgPT09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZC52ZXJpZnkobWVzc2FnZS5yYXdVbnN1YnNjcmliZUNtZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJhd1Vuc3Vic2NyaWJlQ21kLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmF0dGVyeUxldmVsQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImJhdHRlcnlMZXZlbENtZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXNnOiBtdWx0aXBsZSB2YWx1ZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZC52ZXJpZnkobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxDbWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJiYXR0ZXJ5TGV2ZWxDbWQuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yc3NpTGV2ZWxDbWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicnNzaUxldmVsQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kLnZlcmlmeShtZXNzYWdlLnJzc2lMZXZlbENtZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJzc2lMZXZlbENtZC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBGRklNZXNzYWdlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZX0gRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aWJyYXRlQ21kICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC52aWJyYXRlQ21kICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLnZpYnJhdGVDbWQ6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpYnJhdGVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQuZnJvbU9iamVjdChvYmplY3QudmlicmF0ZUNtZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnJvdGF0ZUNtZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Qucm90YXRlQ21kICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLnJvdGF0ZUNtZDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm90YXRlQ21kID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDbWQuZnJvbU9iamVjdChvYmplY3Qucm90YXRlQ21kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QubGluZWFyQ21kICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5saW5lYXJDbWQgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UubGluZWFyQ21kOiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5saW5lYXJDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNtZC5mcm9tT2JqZWN0KG9iamVjdC5saW5lYXJDbWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zdG9wRGV2aWNlQ21kICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zdG9wRGV2aWNlQ21kICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLnN0b3BEZXZpY2VDbWQ6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BEZXZpY2VDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWQuZnJvbU9iamVjdChvYmplY3Quc3RvcERldmljZUNtZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnJhd1JlYWRDbWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnJhd1JlYWRDbWQgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UucmF3UmVhZENtZDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmF3UmVhZENtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3UmVhZENtZC5mcm9tT2JqZWN0KG9iamVjdC5yYXdSZWFkQ21kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QucmF3V3JpdGVDbWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnJhd1dyaXRlQ21kICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLnJhd1dyaXRlQ21kOiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yYXdXcml0ZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3V3JpdGVDbWQuZnJvbU9iamVjdChvYmplY3QucmF3V3JpdGVDbWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5yYXdTdWJzY3JpYmVDbWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnJhd1N1YnNjcmliZUNtZCAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5yYXdTdWJzY3JpYmVDbWQ6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJhd1N1YnNjcmliZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kLmZyb21PYmplY3Qob2JqZWN0LnJhd1N1YnNjcmliZUNtZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnJhd1Vuc3Vic2NyaWJlQ21kICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5yYXdVbnN1YnNjcmliZUNtZCAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5yYXdVbnN1YnNjcmliZUNtZDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmF3VW5zdWJzY3JpYmVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kLmZyb21PYmplY3Qob2JqZWN0LnJhd1Vuc3Vic2NyaWJlQ21kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuYmF0dGVyeUxldmVsQ21kICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5iYXR0ZXJ5TGV2ZWxDbWQgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UuYmF0dGVyeUxldmVsQ21kOiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5iYXR0ZXJ5TGV2ZWxDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkJhdHRlcnlMZXZlbENtZC5mcm9tT2JqZWN0KG9iamVjdC5iYXR0ZXJ5TGV2ZWxDbWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5yc3NpTGV2ZWxDbWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnJzc2lMZXZlbENtZCAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5yc3NpTGV2ZWxDbWQ6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJzc2lMZXZlbENtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kLmZyb21PYmplY3Qob2JqZWN0LnJzc2lMZXZlbENtZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBGRklNZXNzYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZX0gbWVzc2FnZSBGRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS52aWJyYXRlQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInZpYnJhdGVDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudmlicmF0ZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNtZC50b09iamVjdChtZXNzYWdlLnZpYnJhdGVDbWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwidmlicmF0ZUNtZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uucm90YXRlQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJvdGF0ZUNtZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yb3RhdGVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJvdGF0ZUNtZC50b09iamVjdChtZXNzYWdlLnJvdGF0ZUNtZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJyb3RhdGVDbWRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxpbmVhckNtZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsaW5lYXJDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGluZWFyQ21kID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWQudG9PYmplY3QobWVzc2FnZS5saW5lYXJDbWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwibGluZWFyQ21kXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wRGV2aWNlQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BEZXZpY2VDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RvcERldmljZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuU3RvcERldmljZUNtZC50b09iamVjdChtZXNzYWdlLnN0b3BEZXZpY2VDbWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwic3RvcERldmljZUNtZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmF3UmVhZENtZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyYXdSZWFkQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJhd1JlYWRDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1JlYWRDbWQudG9PYmplY3QobWVzc2FnZS5yYXdSZWFkQ21kLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcInJhd1JlYWRDbWRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJhd1dyaXRlQ21kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJhd1dyaXRlQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJhd1dyaXRlQ21kID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdXcml0ZUNtZC50b09iamVjdChtZXNzYWdlLnJhd1dyaXRlQ21kLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcInJhd1dyaXRlQ21kXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yYXdTdWJzY3JpYmVDbWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmF3U3Vic2NyaWJlQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJhd1N1YnNjcmliZUNtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUmF3U3Vic2NyaWJlQ21kLnRvT2JqZWN0KG1lc3NhZ2UucmF3U3Vic2NyaWJlQ21kLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcInJhd1N1YnNjcmliZUNtZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmF3VW5zdWJzY3JpYmVDbWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmF3VW5zdWJzY3JpYmVDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmF3VW5zdWJzY3JpYmVDbWQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1Vuc3Vic2NyaWJlQ21kLnRvT2JqZWN0KG1lc3NhZ2UucmF3VW5zdWJzY3JpYmVDbWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwicmF3VW5zdWJzY3JpYmVDbWRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmJhdHRlcnlMZXZlbENtZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJiYXR0ZXJ5TGV2ZWxDbWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYmF0dGVyeUxldmVsQ21kID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWQudG9PYmplY3QobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxDbWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwiYmF0dGVyeUxldmVsQ21kXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yc3NpTGV2ZWxDbWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicnNzaUxldmVsQ21kXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJzc2lMZXZlbENtZCA9ICRyb290LkJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUlNTSUxldmVsQ21kLnRvT2JqZWN0KG1lc3NhZ2UucnNzaUxldmVsQ21kLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcInJzc2lMZXZlbENtZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEZGSU1lc3NhZ2UgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGRklNZXNzYWdlO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBEZXZpY2VNZXNzYWdlO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU2VydmVyTWVzc2FnZS5cclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWdcclxuICAgICAgICAgKiBAaW50ZXJmYWNlIElTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklPa3xudWxsfSBbb2tdIFNlcnZlck1lc3NhZ2Ugb2tcclxuICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSUVycm9yfG51bGx9IFtlcnJvcl0gU2VydmVyTWVzc2FnZSBlcnJvclxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JU2Nhbm5pbmdGaW5pc2hlZHxudWxsfSBbc2Nhbm5pbmdGaW5pc2hlZF0gU2VydmVyTWVzc2FnZSBzY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklEZXZpY2VBZGRlZHxudWxsfSBbZGV2aWNlQWRkZWRdIFNlcnZlck1lc3NhZ2UgZGV2aWNlQWRkZWRcclxuICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSURldmljZVJlbW92ZWR8bnVsbH0gW2RldmljZVJlbW92ZWRdIFNlcnZlck1lc3NhZ2UgZGV2aWNlUmVtb3ZlZFxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGlzY29ubmVjdHxudWxsfSBbZGlzY29ubmVjdF0gU2VydmVyTWVzc2FnZSBkaXNjb25uZWN0XHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU2VydmVyTWVzc2FnZS5cclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWdcclxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBTZXJ2ZXJNZXNzYWdlLlxyXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5JU2VydmVyTWVzc2FnZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFNlcnZlck1lc3NhZ2UocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2VydmVyTWVzc2FnZSBvay5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklPa3xudWxsfHVuZGVmaW5lZH0gb2tcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UucHJvdG90eXBlLm9rID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2VydmVyTWVzc2FnZSBlcnJvci5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklFcnJvcnxudWxsfHVuZGVmaW5lZH0gZXJyb3JcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UucHJvdG90eXBlLmVycm9yID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2VydmVyTWVzc2FnZSBzY2FubmluZ0ZpbmlzaGVkLlxyXG4gICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSVNjYW5uaW5nRmluaXNoZWR8bnVsbHx1bmRlZmluZWR9IHNjYW5uaW5nRmluaXNoZWRcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UucHJvdG90eXBlLnNjYW5uaW5nRmluaXNoZWQgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXJ2ZXJNZXNzYWdlIGRldmljZUFkZGVkLlxyXG4gICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSURldmljZUFkZGVkfG51bGx8dW5kZWZpbmVkfSBkZXZpY2VBZGRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5wcm90b3R5cGUuZGV2aWNlQWRkZWQgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXJ2ZXJNZXNzYWdlIGRldmljZVJlbW92ZWQuXHJcbiAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGV2aWNlUmVtb3ZlZHxudWxsfHVuZGVmaW5lZH0gZGV2aWNlUmVtb3ZlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5wcm90b3R5cGUuZGV2aWNlUmVtb3ZlZCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNlcnZlck1lc3NhZ2UgZGlzY29ubmVjdC5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklEaXNjb25uZWN0fG51bGx8dW5kZWZpbmVkfSBkaXNjb25uZWN0XHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gT25lT2YgZmllbGQgbmFtZXMgYm91bmQgdG8gdmlydHVhbCBnZXR0ZXJzIGFuZCBzZXR0ZXJzXHJcbiAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2VydmVyTWVzc2FnZSBtc2cuXHJcbiAgICAgICAgICogQG1lbWJlciB7XCJva1wifFwiZXJyb3JcInxcInNjYW5uaW5nRmluaXNoZWRcInxcImRldmljZUFkZGVkXCJ8XCJkZXZpY2VSZW1vdmVkXCJ8XCJkaXNjb25uZWN0XCJ8dW5kZWZpbmVkfSBtc2dcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXJ2ZXJNZXNzYWdlLnByb3RvdHlwZSwgXCJtc2dcIiwge1xyXG4gICAgICAgICAgICBnZXQ6ICR1dGlsLm9uZU9mR2V0dGVyKCRvbmVPZkZpZWxkcyA9IFtcIm9rXCIsIFwiZXJyb3JcIiwgXCJzY2FubmluZ0ZpbmlzaGVkXCIsIFwiZGV2aWNlQWRkZWRcIiwgXCJkZXZpY2VSZW1vdmVkXCIsIFwiZGlzY29ubmVjdFwiXSksXHJcbiAgICAgICAgICAgIHNldDogJHV0aWwub25lT2ZTZXR0ZXIoJG9uZU9mRmllbGRzKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFNlcnZlck1lc3NhZ2UgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklTZXJ2ZXJNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2V9IFNlcnZlck1lc3NhZ2UgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmVyTWVzc2FnZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2VydmVyTWVzc2FnZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklTZXJ2ZXJNZXNzYWdlfSBtZXNzYWdlIFNlcnZlck1lc3NhZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9rICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJva1wiKSlcclxuICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuT2suZW5jb2RlKG1lc3NhZ2Uub2ssIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVycm9yXCIpKVxyXG4gICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvci5lbmNvZGUobWVzc2FnZS5lcnJvciwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zY2FubmluZ0ZpbmlzaGVkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzY2FubmluZ0ZpbmlzaGVkXCIpKVxyXG4gICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkLmVuY29kZShtZXNzYWdlLnNjYW5uaW5nRmluaXNoZWQsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGV2aWNlQWRkZWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRldmljZUFkZGVkXCIpKVxyXG4gICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZC5lbmNvZGUobWVzc2FnZS5kZXZpY2VBZGRlZCwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZXZpY2VSZW1vdmVkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZXZpY2VSZW1vdmVkXCIpKVxyXG4gICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkLmVuY29kZShtZXNzYWdlLmRldmljZVJlbW92ZWQsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlzY29ubmVjdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGlzY29ubmVjdFwiKSlcclxuICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdC5lbmNvZGUobWVzc2FnZS5kaXNjb25uZWN0LCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFNlcnZlck1lc3NhZ2UgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5JU2VydmVyTWVzc2FnZX0gbWVzc2FnZSBTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVjb2RlcyBhIFNlcnZlck1lc3NhZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZX0gU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9rID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pay5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY2FubmluZ0ZpbmlzaGVkID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXZpY2VBZGRlZCA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRldmljZVJlbW92ZWQgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2Nvbm5lY3QgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlY29kZXMgYSBTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlfSBTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFZlcmlmaWVzIGEgU2VydmVyTWVzc2FnZSBtZXNzYWdlLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub2sgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2tcIikpIHtcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rLnZlcmlmeShtZXNzYWdlLm9rKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9rLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXJyb3JcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3IudmVyaWZ5KG1lc3NhZ2UuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3IuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zY2FubmluZ0ZpbmlzaGVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNjYW5uaW5nRmluaXNoZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZC52ZXJpZnkobWVzc2FnZS5zY2FubmluZ0ZpbmlzaGVkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNjYW5uaW5nRmluaXNoZWQuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZXZpY2VBZGRlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXZpY2VBZGRlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZC52ZXJpZnkobWVzc2FnZS5kZXZpY2VBZGRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXZpY2VBZGRlZC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRldmljZVJlbW92ZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGV2aWNlUmVtb3ZlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkLnZlcmlmeShtZXNzYWdlLmRldmljZVJlbW92ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGV2aWNlUmVtb3ZlZC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRpc2Nvbm5lY3QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGlzY29ubmVjdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0LnZlcmlmeShtZXNzYWdlLmRpc2Nvbm5lY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGlzY29ubmVjdC5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZX0gU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0Lm9rICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0Lm9rICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLm9rOiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm9rID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pay5mcm9tT2JqZWN0KG9iamVjdC5vayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iamVjdC5lcnJvciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5lcnJvciAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5lcnJvcjogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvciA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3IuZnJvbU9iamVjdChvYmplY3QuZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmplY3Quc2Nhbm5pbmdGaW5pc2hlZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zY2FubmluZ0ZpbmlzaGVkICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLnNjYW5uaW5nRmluaXNoZWQ6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2Nhbm5pbmdGaW5pc2hlZCA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZC5mcm9tT2JqZWN0KG9iamVjdC5zY2FubmluZ0ZpbmlzaGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0LmRldmljZUFkZGVkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmRldmljZUFkZGVkICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLmRldmljZUFkZGVkOiBvYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRldmljZUFkZGVkID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZC5mcm9tT2JqZWN0KG9iamVjdC5kZXZpY2VBZGRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iamVjdC5kZXZpY2VSZW1vdmVkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmRldmljZVJlbW92ZWQgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuZGV2aWNlUmVtb3ZlZDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5kZXZpY2VSZW1vdmVkID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkLmZyb21PYmplY3Qob2JqZWN0LmRldmljZVJlbW92ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QuZGlzY29ubmVjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5kaXNjb25uZWN0ICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLmRpc2Nvbm5lY3Q6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzY29ubmVjdCA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdC5mcm9tT2JqZWN0KG9iamVjdC5kaXNjb25uZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2V9IG1lc3NhZ2UgU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9rICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9rXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3Qub2sgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rLnRvT2JqZWN0KG1lc3NhZ2Uub2ssIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcIm9rXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZXJyb3JcIikpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5lcnJvciA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3IudG9PYmplY3QobWVzc2FnZS5lcnJvciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zY2FubmluZ0ZpbmlzaGVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNjYW5uaW5nRmluaXNoZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5zY2FubmluZ0ZpbmlzaGVkID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkLnRvT2JqZWN0KG1lc3NhZ2Uuc2Nhbm5pbmdGaW5pc2hlZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwic2Nhbm5pbmdGaW5pc2hlZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRldmljZUFkZGVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRldmljZUFkZGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGV2aWNlQWRkZWQgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkLnRvT2JqZWN0KG1lc3NhZ2UuZGV2aWNlQWRkZWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcImRldmljZUFkZGVkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGV2aWNlUmVtb3ZlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXZpY2VSZW1vdmVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGV2aWNlUmVtb3ZlZCA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlUmVtb3ZlZC50b09iamVjdChtZXNzYWdlLmRldmljZVJlbW92ZWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tc2cgPSBcImRldmljZVJlbW92ZWRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kaXNjb25uZWN0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRpc2Nvbm5lY3RcIikpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5kaXNjb25uZWN0ID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0LnRvT2JqZWN0KG1lc3NhZ2UuZGlzY29ubmVjdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbmVvZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwiZGlzY29ubmVjdFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBTZXJ2ZXJNZXNzYWdlIHRvIEpTT04uXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQnV0dHBsdWdFcnJvclR5cGUgZW51bS5cclxuICAgICAgICAgKiBAbmFtZSBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkJ1dHRwbHVnRXJyb3JUeXBlXHJcbiAgICAgICAgICogQGVudW0ge251bWJlcn1cclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQnV0dHBsdWdDb25uZWN0b3JFcnJvcj0wIEJ1dHRwbHVnQ29ubmVjdG9yRXJyb3IgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQnV0dHBsdWdIYW5kc2hha2VFcnJvcj0xIEJ1dHRwbHVnSGFuZHNoYWtlRXJyb3IgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQnV0dHBsdWdEZXZpY2VFcnJvcj0yIEJ1dHRwbHVnRGV2aWNlRXJyb3IgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQnV0dHBsdWdQaW5nRXJyb3I9MyBCdXR0cGx1Z1BpbmdFcnJvciB2YWx1ZVxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBCdXR0cGx1Z01lc3NhZ2VFcnJvcj00IEJ1dHRwbHVnTWVzc2FnZUVycm9yIHZhbHVlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEJ1dHRwbHVnVW5rbm93bkVycm9yPTUgQnV0dHBsdWdVbmtub3duRXJyb3IgdmFsdWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLkJ1dHRwbHVnRXJyb3JUeXBlID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiQnV0dHBsdWdDb25uZWN0b3JFcnJvclwiXSA9IDA7XHJcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJCdXR0cGx1Z0hhbmRzaGFrZUVycm9yXCJdID0gMTtcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIkJ1dHRwbHVnRGV2aWNlRXJyb3JcIl0gPSAyO1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiQnV0dHBsdWdQaW5nRXJyb3JcIl0gPSAzO1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0XSA9IFwiQnV0dHBsdWdNZXNzYWdlRXJyb3JcIl0gPSA0O1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiQnV0dHBsdWdVbmtub3duRXJyb3JcIl0gPSA1O1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1lc3NhZ2VBdHRyaWJ1dGVUeXBlIGVudW0uXHJcbiAgICAgICAgICogQG5hbWUgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlVHlwZVxyXG4gICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFZpYnJhdGVDbWQ9MCBWaWJyYXRlQ21kIHZhbHVlXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFJvdGF0ZUNtZD0xIFJvdGF0ZUNtZCB2YWx1ZVxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBMaW5lYXJDbWQ9MiBMaW5lYXJDbWQgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gU3RvcERldmljZUNtZD0zIFN0b3BEZXZpY2VDbWQgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUmF3UmVhZENtZD00IFJhd1JlYWRDbWQgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUmF3V3JpdGVDbWQ9NSBSYXdXcml0ZUNtZCB2YWx1ZVxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSYXdTdWJzY3JpYmVDbWQ9NiBSYXdTdWJzY3JpYmVDbWQgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUmF3VW5zdWJzY3JpYmVDbWQ9NyBSYXdVbnN1YnNjcmliZUNtZCB2YWx1ZVxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBCYXR0ZXJ5TGV2ZWxDbWQ9OCBCYXR0ZXJ5TGV2ZWxDbWQgdmFsdWVcclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUlNTSUxldmVsQ21kPTkgUlNTSUxldmVsQ21kIHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlVHlwZSA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIlZpYnJhdGVDbWRcIl0gPSAwO1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiUm90YXRlQ21kXCJdID0gMTtcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIkxpbmVhckNtZFwiXSA9IDI7XHJcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzNdID0gXCJTdG9wRGV2aWNlQ21kXCJdID0gMztcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNF0gPSBcIlJhd1JlYWRDbWRcIl0gPSA0O1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiUmF3V3JpdGVDbWRcIl0gPSA1O1xyXG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs2XSA9IFwiUmF3U3Vic2NyaWJlQ21kXCJdID0gNjtcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbN10gPSBcIlJhd1Vuc3Vic2NyaWJlQ21kXCJdID0gNztcclxuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbOF0gPSBcIkJhdHRlcnlMZXZlbENtZFwiXSA9IDg7XHJcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzldID0gXCJSU1NJTGV2ZWxDbWRcIl0gPSA5O1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIE1lc3NhZ2VBdHRyaWJ1dGVzLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElNZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZVR5cGV8bnVsbH0gW21lc3NhZ2VUeXBlXSBNZXNzYWdlQXR0cmlidXRlcyBtZXNzYWdlVHlwZVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZmVhdHVyZUNvdW50XSBNZXNzYWdlQXR0cmlidXRlcyBmZWF0dXJlQ291bnRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48bnVtYmVyPnxudWxsfSBbc3RlcENvdW50XSBNZXNzYWdlQXR0cmlidXRlcyBzdGVwQ291bnRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48QnV0dHBsdWcuRW5kcG9pbnQ+fG51bGx9IFtlbmRwb2ludHNdIE1lc3NhZ2VBdHRyaWJ1dGVzIGVuZHBvaW50c1xyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxudW1iZXI+fG51bGx9IFttYXhEdXJhdGlvbl0gTWVzc2FnZUF0dHJpYnV0ZXMgbWF4RHVyYXRpb25cclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBNZXNzYWdlQXR0cmlidXRlcy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgTWVzc2FnZUF0dHJpYnV0ZXMuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElNZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklNZXNzYWdlQXR0cmlidXRlcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gTWVzc2FnZUF0dHJpYnV0ZXMocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwQ291bnQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kcG9pbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heER1cmF0aW9uID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTWVzc2FnZUF0dHJpYnV0ZXMgbWVzc2FnZVR5cGUuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZVR5cGV9IG1lc3NhZ2VUeXBlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTWVzc2FnZUF0dHJpYnV0ZXMucHJvdG90eXBlLm1lc3NhZ2VUeXBlID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBNZXNzYWdlQXR0cmlidXRlcyBmZWF0dXJlQ291bnQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gZmVhdHVyZUNvdW50XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTWVzc2FnZUF0dHJpYnV0ZXMucHJvdG90eXBlLmZlYXR1cmVDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTWVzc2FnZUF0dHJpYnV0ZXMgc3RlcENvdW50LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48bnVtYmVyPn0gc3RlcENvdW50XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTWVzc2FnZUF0dHJpYnV0ZXMucHJvdG90eXBlLnN0ZXBDb3VudCA9ICR1dGlsLmVtcHR5QXJyYXk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTWVzc2FnZUF0dHJpYnV0ZXMgZW5kcG9pbnRzLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48QnV0dHBsdWcuRW5kcG9pbnQ+fSBlbmRwb2ludHNcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBNZXNzYWdlQXR0cmlidXRlcy5wcm90b3R5cGUuZW5kcG9pbnRzID0gJHV0aWwuZW1wdHlBcnJheTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBNZXNzYWdlQXR0cmlidXRlcyBtYXhEdXJhdGlvbi5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPG51bWJlcj59IG1heER1cmF0aW9uXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTWVzc2FnZUF0dHJpYnV0ZXMucHJvdG90eXBlLm1heER1cmF0aW9uID0gJHV0aWwuZW1wdHlBcnJheTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IE1lc3NhZ2VBdHRyaWJ1dGVzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JTWVzc2FnZUF0dHJpYnV0ZXM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXN9IE1lc3NhZ2VBdHRyaWJ1dGVzIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBNZXNzYWdlQXR0cmlidXRlcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlQXR0cmlidXRlcyhwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTWVzc2FnZUF0dHJpYnV0ZXMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JTWVzc2FnZUF0dHJpYnV0ZXN9IG1lc3NhZ2UgTWVzc2FnZUF0dHJpYnV0ZXMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBNZXNzYWdlQXR0cmlidXRlcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1lc3NhZ2VUeXBlXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQzMihtZXNzYWdlLm1lc3NhZ2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmZlYXR1cmVDb3VudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZmVhdHVyZUNvdW50XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikudWludDMyKG1lc3NhZ2UuZmVhdHVyZUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0ZXBDb3VudCAhPSBudWxsICYmIG1lc3NhZ2Uuc3RlcENvdW50Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5zdGVwQ291bnQubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIobWVzc2FnZS5zdGVwQ291bnRbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50cyAhPSBudWxsICYmIG1lc3NhZ2UuZW5kcG9pbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5lbmRwb2ludHMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5pbnQzMihtZXNzYWdlLmVuZHBvaW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWF4RHVyYXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLm1heER1cmF0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5tYXhEdXJhdGlvbi5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMihtZXNzYWdlLm1heER1cmF0aW9uW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBNZXNzYWdlQXR0cmlidXRlcyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklNZXNzYWdlQXR0cmlidXRlc30gbWVzc2FnZSBNZXNzYWdlQXR0cmlidXRlcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE1lc3NhZ2VBdHRyaWJ1dGVzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBNZXNzYWdlQXR0cmlidXRlcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzfSBNZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE1lc3NhZ2VBdHRyaWJ1dGVzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlVHlwZSA9IHJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmVhdHVyZUNvdW50ID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2Uuc3RlcENvdW50ICYmIG1lc3NhZ2Uuc3RlcENvdW50Lmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0ZXBDb3VudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGVwQ291bnQucHVzaChyZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RlcENvdW50LnB1c2gocmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmVuZHBvaW50cyAmJiBtZXNzYWdlLmVuZHBvaW50cy5sZW5ndGgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzLnB1c2gocmVhZGVyLmludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzLnB1c2gocmVhZGVyLmludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UubWF4RHVyYXRpb24gJiYgbWVzc2FnZS5tYXhEdXJhdGlvbi5sZW5ndGgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tYXhEdXJhdGlvbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tYXhEdXJhdGlvbi5wdXNoKHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tYXhEdXJhdGlvbi5wdXNoKHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIE1lc3NhZ2VBdHRyaWJ1dGVzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXN9IE1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgTWVzc2FnZUF0dHJpYnV0ZXMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBNZXNzYWdlQXR0cmlidXRlcyBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBNZXNzYWdlQXR0cmlidXRlcy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtZXNzYWdlVHlwZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UubWVzc2FnZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtZXNzYWdlVHlwZTogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmVhdHVyZUNvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZlYXR1cmVDb3VudFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmZlYXR1cmVDb3VudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZlYXR1cmVDb3VudDogaW50ZWdlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RlcENvdW50ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0ZXBDb3VudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnN0ZXBDb3VudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0ZXBDb3VudDogYXJyYXkgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2Uuc3RlcENvdW50Lmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnN0ZXBDb3VudFtpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGVwQ291bnQ6IGludGVnZXJbXSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kcG9pbnRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZHBvaW50c1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmVuZHBvaW50cykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVuZHBvaW50czogYXJyYXkgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuZW5kcG9pbnRzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuZW5kcG9pbnRzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmRwb2ludHM6IGVudW0gdmFsdWVbXSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWF4RHVyYXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWF4RHVyYXRpb25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5tYXhEdXJhdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1heER1cmF0aW9uOiBhcnJheSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5tYXhEdXJhdGlvbi5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5tYXhEdXJhdGlvbltpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXhEdXJhdGlvbjogaW50ZWdlcltdIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgTWVzc2FnZUF0dHJpYnV0ZXMgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXN9IE1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBNZXNzYWdlQXR0cmlidXRlcy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5tZXNzYWdlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlZpYnJhdGVDbWRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSb3RhdGVDbWRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJMaW5lYXJDbWRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTdG9wRGV2aWNlQ21kXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlVHlwZSA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmF3UmVhZENtZFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZVR5cGUgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJhd1dyaXRlQ21kXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlVHlwZSA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmF3U3Vic2NyaWJlQ21kXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlVHlwZSA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUmF3VW5zdWJzY3JpYmVDbWRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCYXR0ZXJ5TGV2ZWxDbWRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gODtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSU1NJTGV2ZWxDbWRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gOTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuZmVhdHVyZUNvdW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mZWF0dXJlQ291bnQgPSBvYmplY3QuZmVhdHVyZUNvdW50ID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zdGVwQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0LnN0ZXBDb3VudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzLnN0ZXBDb3VudDogYXJyYXkgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGVwQ291bnQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5zdGVwQ291bnQubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RlcENvdW50W2ldID0gb2JqZWN0LnN0ZXBDb3VudFtpXSA+Pj4gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuZW5kcG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5lbmRwb2ludHMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlcy5lbmRwb2ludHM6IGFycmF5IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3QuZW5kcG9pbnRzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5lbmRwb2ludHNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkNvbW1hbmRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJGaXJtd2FyZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJ4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUnhBY2NlbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJ4QkxFQmF0dGVyeVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJ4UHJlc3N1cmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSeFRvdWNoXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVHhcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSA3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJUeE1vZGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJUeFNob2NrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gOTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVHhWaWJyYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJUeFZlbmRvckNvbnRyb2xcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIldoaXRlbGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAxMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzBcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMTM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDE0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAxNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMTY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDE3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljNVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAxODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzZcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMTk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM3XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDIwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljOFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAyMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzlcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMjI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxMFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAyMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzExXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDI0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxM1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAyNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDI3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMjg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxNlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAyOTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE3XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDMwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMThcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMzE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxOVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAzMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDMzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjFcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMzQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAzNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDM2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gMzc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyNVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSAzODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI2XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDM5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gNDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyOFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSA0MTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50c1tpXSA9IDQyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMzBcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnRzW2ldID0gNDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMzMVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludHNbaV0gPSA0NDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lm1heER1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5tYXhEdXJhdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzLm1heER1cmF0aW9uOiBhcnJheSBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1heER1cmF0aW9uID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3QubWF4RHVyYXRpb24ubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4RHVyYXRpb25baV0gPSBvYmplY3QubWF4RHVyYXRpb25baV0gPj4+IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBNZXNzYWdlQXR0cmlidXRlcyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlc30gbWVzc2FnZSBNZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE1lc3NhZ2VBdHRyaWJ1dGVzLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0ZXBDb3VudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRwb2ludHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF4RHVyYXRpb24gPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2VUeXBlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJWaWJyYXRlQ21kXCIgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5mZWF0dXJlQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWVzc2FnZVR5cGVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2VUeXBlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlVHlwZVttZXNzYWdlLm1lc3NhZ2VUeXBlXSA6IG1lc3NhZ2UubWVzc2FnZVR5cGU7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5mZWF0dXJlQ291bnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmVhdHVyZUNvdW50XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5mZWF0dXJlQ291bnQgPSBtZXNzYWdlLmZlYXR1cmVDb3VudDtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0ZXBDb3VudCAmJiBtZXNzYWdlLnN0ZXBDb3VudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RlcENvdW50ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnN0ZXBDb3VudC5sZW5ndGg7ICsrailcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0ZXBDb3VudFtqXSA9IG1lc3NhZ2Uuc3RlcENvdW50W2pdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kcG9pbnRzICYmIG1lc3NhZ2UuZW5kcG9pbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRwb2ludHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UuZW5kcG9pbnRzLmxlbmd0aDsgKytqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kcG9pbnRzW2pdID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QuQnV0dHBsdWcuRW5kcG9pbnRbbWVzc2FnZS5lbmRwb2ludHNbal1dIDogbWVzc2FnZS5lbmRwb2ludHNbal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tYXhEdXJhdGlvbiAmJiBtZXNzYWdlLm1heER1cmF0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tYXhEdXJhdGlvbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5tYXhEdXJhdGlvbi5sZW5ndGg7ICsrailcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1heER1cmF0aW9uW2pdID0gbWVzc2FnZS5tYXhEdXJhdGlvbltqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBNZXNzYWdlQXR0cmlidXRlcyB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBNZXNzYWdlQXR0cmlidXRlcy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWVzc2FnZUF0dHJpYnV0ZXM7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5PayA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIE9rLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElPa1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IE9rLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gT2suXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElPa1xyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklPaz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gT2socHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgT2sgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklPaz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pa30gT2sgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE9rLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9rKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBPayBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklPa30gbWVzc2FnZSBPayBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE9rLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBPayBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklPa30gbWVzc2FnZSBPayBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE9rLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYW4gT2sgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pa1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pa30gT2tcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBPay5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYW4gT2sgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pa1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5Pa30gT2tcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBPay5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhbiBPayBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBPay52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGFuIE9rIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuT2tcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rfSBPa1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgT2suZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5PaylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIE9rIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk9rfSBtZXNzYWdlIE9rXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgT2sudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIE9rIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuT2tcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE9rLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBPaztcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLkVycm9yID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gRXJyb3IuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUVycm9yXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5CdXR0cGx1Z0Vycm9yVHlwZXxudWxsfSBbZXJyb3JUeXBlXSBFcnJvciBlcnJvclR5cGVcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW21lc3NhZ2VdIEVycm9yIG1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2JhY2t0cmFjZV0gRXJyb3IgYmFja3RyYWNlXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRXJyb3IuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhbiBFcnJvci5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUVycm9yXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSUVycm9yPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBFcnJvcihwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRXJyb3IgZXJyb3JUeXBlLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkJ1dHRwbHVnRXJyb3JUeXBlfSBlcnJvclR5cGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3JcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBFcnJvci5wcm90b3R5cGUuZXJyb3JUeXBlID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFcnJvciBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG1lc3NhZ2VcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3JcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBFcnJvci5wcm90b3R5cGUubWVzc2FnZSA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRXJyb3IgYmFja3RyYWNlLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGJhY2t0cmFjZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvclxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEVycm9yLnByb3RvdHlwZS5iYWNrdHJhY2UgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRXJyb3IgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklFcnJvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvcn0gRXJyb3IgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEVycm9yLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBFcnJvciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklFcnJvcn0gbWVzc2FnZSBFcnJvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEVycm9yLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lcnJvclR5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVycm9yVHlwZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS5lcnJvclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWVzc2FnZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmFja3RyYWNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJiYWNrdHJhY2VcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5iYWNrdHJhY2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXJyb3IgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvclxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRXJyb3J9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBFcnJvci5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEVycm9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3JcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3J9IEVycm9yXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRXJyb3IuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yVHlwZSA9IHJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IHJlYWRlci5zdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJhY2t0cmFjZSA9IHJlYWRlci5zdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEVycm9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3JcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3J9IEVycm9yXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRXJyb3IuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYW4gRXJyb3IgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvclxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRXJyb3IudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3JUeXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVycm9yVHlwZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuZXJyb3JUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JUeXBlOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWVzc2FnZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UubWVzc2FnZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1lc3NhZ2U6IHN0cmluZyBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmFja3RyYWNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImJhY2t0cmFjZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuYmFja3RyYWNlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYmFja3RyYWNlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYW4gRXJyb3IgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5FcnJvclxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRXJyb3J9IEVycm9yXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBFcnJvci5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5lcnJvclR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCdXR0cGx1Z0Nvbm5lY3RvckVycm9yXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvclR5cGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkJ1dHRwbHVnSGFuZHNoYWtlRXJyb3JcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yVHlwZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQnV0dHBsdWdEZXZpY2VFcnJvclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3JUeXBlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCdXR0cGx1Z1BpbmdFcnJvclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3JUeXBlID0gMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCdXR0cGx1Z01lc3NhZ2VFcnJvclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3JUeXBlID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCdXR0cGx1Z1Vua25vd25FcnJvclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3JUeXBlID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QubWVzc2FnZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IFN0cmluZyhvYmplY3QubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmJhY2t0cmFjZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYmFja3RyYWNlID0gU3RyaW5nKG9iamVjdC5iYWNrdHJhY2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEVycm9yIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yfSBtZXNzYWdlIEVycm9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRXJyb3IudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZXJyb3JUeXBlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJCdXR0cGx1Z0Nvbm5lY3RvckVycm9yXCIgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tZXNzYWdlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYmFja3RyYWNlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVycm9yVHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlcnJvclR5cGVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVycm9yVHlwZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuQnV0dHBsdWdFcnJvclR5cGVbbWVzc2FnZS5lcnJvclR5cGVdIDogbWVzc2FnZS5lcnJvclR5cGU7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5iYWNrdHJhY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYmFja3RyYWNlXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5iYWNrdHJhY2UgPSBtZXNzYWdlLmJhY2t0cmFjZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBFcnJvciB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkVycm9yXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBFcnJvci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRXJyb3I7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBTY2FubmluZ0ZpbmlzaGVkLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElTY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU2Nhbm5pbmdGaW5pc2hlZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU2Nhbm5pbmdGaW5pc2hlZC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVNjYW5uaW5nRmluaXNoZWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JU2Nhbm5pbmdGaW5pc2hlZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gU2Nhbm5pbmdGaW5pc2hlZChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBTY2FubmluZ0ZpbmlzaGVkIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklTY2FubmluZ0ZpbmlzaGVkPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLlNjYW5uaW5nRmluaXNoZWR9IFNjYW5uaW5nRmluaXNoZWQgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFNjYW5uaW5nRmluaXNoZWQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2Nhbm5pbmdGaW5pc2hlZChwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2Nhbm5pbmdGaW5pc2hlZCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLlNjYW5uaW5nRmluaXNoZWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JU2Nhbm5pbmdGaW5pc2hlZH0gbWVzc2FnZSBTY2FubmluZ0ZpbmlzaGVkIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU2Nhbm5pbmdGaW5pc2hlZC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2Nhbm5pbmdGaW5pc2hlZCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLlNjYW5uaW5nRmluaXNoZWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JU2Nhbm5pbmdGaW5pc2hlZH0gbWVzc2FnZSBTY2FubmluZ0ZpbmlzaGVkIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU2Nhbm5pbmdGaW5pc2hlZC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU2Nhbm5pbmdGaW5pc2hlZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLlNjYW5uaW5nRmluaXNoZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZH0gU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFNjYW5uaW5nRmluaXNoZWQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBTY2FubmluZ0ZpbmlzaGVkIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkfSBTY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU2Nhbm5pbmdGaW5pc2hlZC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFNjYW5uaW5nRmluaXNoZWQgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTY2FubmluZ0ZpbmlzaGVkLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBTY2FubmluZ0ZpbmlzaGVkIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuU2Nhbm5pbmdGaW5pc2hlZH0gU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgU2Nhbm5pbmdGaW5pc2hlZC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLlNjYW5uaW5nRmluaXNoZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU2Nhbm5pbmdGaW5pc2hlZCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLlNjYW5uaW5nRmluaXNoZWR9IG1lc3NhZ2UgU2Nhbm5pbmdGaW5pc2hlZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFNjYW5uaW5nRmluaXNoZWQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFNjYW5uaW5nRmluaXNoZWQgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5TY2FubmluZ0ZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBTY2FubmluZ0ZpbmlzaGVkLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTY2FubmluZ0ZpbmlzaGVkO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIFNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERldmljZUFkZGVkLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEZXZpY2VBZGRlZFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbmFtZV0gRGV2aWNlQWRkZWQgbmFtZVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIERldmljZUFkZGVkIGluZGV4XHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSU1lc3NhZ2VBdHRyaWJ1dGVzPnxudWxsfSBbbWVzc2FnZUF0dHJpYnV0ZXNdIERldmljZUFkZGVkIG1lc3NhZ2VBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGV2aWNlQWRkZWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERldmljZUFkZGVkLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGV2aWNlQWRkZWQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIERldmljZUFkZGVkKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUF0dHJpYnV0ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZXZpY2VBZGRlZCBuYW1lLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG5hbWVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEZXZpY2VBZGRlZC5wcm90b3R5cGUubmFtZSA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGV2aWNlQWRkZWQgaW5kZXguXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gaW5kZXhcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEZXZpY2VBZGRlZC5wcm90b3R5cGUuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERldmljZUFkZGVkIG1lc3NhZ2VBdHRyaWJ1dGVzLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JTWVzc2FnZUF0dHJpYnV0ZXM+fSBtZXNzYWdlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZFxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZUFkZGVkLnByb3RvdHlwZS5tZXNzYWdlQXR0cmlidXRlcyA9ICR1dGlsLmVtcHR5QXJyYXk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEZXZpY2VBZGRlZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSURldmljZUFkZGVkPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkfSBEZXZpY2VBZGRlZCBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlQWRkZWQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGV2aWNlQWRkZWQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERldmljZUFkZGVkIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSURldmljZUFkZGVkfSBtZXNzYWdlIERldmljZUFkZGVkIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlQWRkZWQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5hbWVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzICE9IG51bGwgJiYgbWVzc2FnZS5tZXNzYWdlQXR0cmlidXRlcy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzLmVuY29kZShtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZXZpY2VBZGRlZCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklEZXZpY2VBZGRlZH0gbWVzc2FnZSBEZXZpY2VBZGRlZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZUFkZGVkLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZXZpY2VBZGRlZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkfSBEZXZpY2VBZGRlZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZUFkZGVkLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWQoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5tZXNzYWdlQXR0cmlidXRlcyAmJiBtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzLmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZUF0dHJpYnV0ZXMucHVzaCgkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEZXZpY2VBZGRlZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkfSBEZXZpY2VBZGRlZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZUFkZGVkLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgRGV2aWNlQWRkZWQgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlQWRkZWQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5uYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5kZXg6IGludGVnZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VBdHRyaWJ1dGVzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UubWVzc2FnZUF0dHJpYnV0ZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtZXNzYWdlQXR0cmlidXRlczogYXJyYXkgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UubWVzc2FnZUF0dHJpYnV0ZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5NZXNzYWdlQXR0cmlidXRlcy52ZXJpZnkobWVzc2FnZS5tZXNzYWdlQXR0cmlidXRlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1lc3NhZ2VBdHRyaWJ1dGVzLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIERldmljZUFkZGVkIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkfSBEZXZpY2VBZGRlZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlQWRkZWQuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5uYW1lICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gU3RyaW5nKG9iamVjdC5uYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaW5kZXggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4ID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tZXNzYWdlQXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmplY3QubWVzc2FnZUF0dHJpYnV0ZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VBZGRlZC5tZXNzYWdlQXR0cmlidXRlczogYXJyYXkgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlQXR0cmlidXRlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0Lm1lc3NhZ2VBdHRyaWJ1dGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0Lm1lc3NhZ2VBdHRyaWJ1dGVzW2ldICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWQubWVzc2FnZUF0dHJpYnV0ZXM6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlQXR0cmlidXRlc1tpXSA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZXMuZnJvbU9iamVjdChvYmplY3QubWVzc2FnZUF0dHJpYnV0ZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIERldmljZUFkZGVkIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZUFkZGVkfSBtZXNzYWdlIERldmljZUFkZGVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlQWRkZWQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2VBdHRyaWJ1dGVzID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5uYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5uYW1lID0gbWVzc2FnZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gbWVzc2FnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzICYmIG1lc3NhZ2UubWVzc2FnZUF0dHJpYnV0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1lc3NhZ2VBdHRyaWJ1dGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLm1lc3NhZ2VBdHRyaWJ1dGVzLmxlbmd0aDsgKytqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubWVzc2FnZUF0dHJpYnV0ZXNbal0gPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLk1lc3NhZ2VBdHRyaWJ1dGVzLnRvT2JqZWN0KG1lc3NhZ2UubWVzc2FnZUF0dHJpYnV0ZXNbal0sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERldmljZUFkZGVkIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlQWRkZWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZUFkZGVkLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBEZXZpY2VBZGRlZDtcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBTZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERldmljZVJlbW92ZWQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2luZGV4XSBEZXZpY2VSZW1vdmVkIGluZGV4XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGV2aWNlUmVtb3ZlZC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGV2aWNlUmVtb3ZlZC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGV2aWNlUmVtb3ZlZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gRGV2aWNlUmVtb3ZlZChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGV2aWNlUmVtb3ZlZCBpbmRleC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBpbmRleFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlUmVtb3ZlZC5wcm90b3R5cGUuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRGV2aWNlUmVtb3ZlZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlUmVtb3ZlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGV2aWNlUmVtb3ZlZD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkfSBEZXZpY2VSZW1vdmVkIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEZXZpY2VSZW1vdmVkLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERldmljZVJlbW92ZWQocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERldmljZVJlbW92ZWQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSURldmljZVJlbW92ZWR9IG1lc3NhZ2UgRGV2aWNlUmVtb3ZlZCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZVJlbW92ZWQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkudWludDMyKG1lc3NhZ2UuaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGV2aWNlUmVtb3ZlZCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlUmVtb3ZlZFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGV2aWNlUmVtb3ZlZH0gbWVzc2FnZSBEZXZpY2VSZW1vdmVkIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGV2aWNlUmVtb3ZlZC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGV2aWNlUmVtb3ZlZCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGV2aWNlUmVtb3ZlZH0gRGV2aWNlUmVtb3ZlZFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZVJlbW92ZWQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkKCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIERldmljZVJlbW92ZWQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWR9IERldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEZXZpY2VSZW1vdmVkLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgRGV2aWNlUmVtb3ZlZCBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZVJlbW92ZWQudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgRGV2aWNlUmVtb3ZlZCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWR9IERldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZVJlbW92ZWQuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaW5kZXggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4ID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGV2aWNlUmVtb3ZlZCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EZXZpY2VSZW1vdmVkXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWR9IG1lc3NhZ2UgRGV2aWNlUmVtb3ZlZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZVJlbW92ZWQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IG1lc3NhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGV2aWNlUmVtb3ZlZCB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRldmljZVJlbW92ZWRcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERldmljZVJlbW92ZWQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIERldmljZVJlbW92ZWQ7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0ID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEaXNjb25uZWN0LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGlzY29ubmVjdC5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGlzY29ubmVjdC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGlzY29ubmVjdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gRGlzY29ubmVjdChwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEaXNjb25uZWN0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLklEaXNjb25uZWN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3R9IERpc2Nvbm5lY3QgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGlzY29ubmVjdChwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGlzY29ubmVjdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGlzY29ubmVjdH0gbWVzc2FnZSBEaXNjb25uZWN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGlzY29ubmVjdCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5JRGlzY29ubmVjdH0gbWVzc2FnZSBEaXNjb25uZWN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGlzY29ubmVjdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdH0gRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEaXNjb25uZWN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0fSBEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIERpc2Nvbm5lY3QgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBEaXNjb25uZWN0IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLlNlcnZlck1lc3NhZ2UuRGlzY29ubmVjdH0gRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGlzY29ubmVjdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkRpc2Nvbm5lY3R9IG1lc3NhZ2UgRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERpc2Nvbm5lY3QgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0O1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBTZXJ2ZXJNZXNzYWdlO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBCdXR0cGx1Zy5EZXZpY2VFdmVudCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERldmljZUV2ZW50LlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Z1xyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSURldmljZUV2ZW50XHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JRGlzY29ubmVjdHxudWxsfSBbZGlzY29ubmVjdF0gRGV2aWNlRXZlbnQgZGlzY29ubmVjdFxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuSUJhdHRlcnlMZXZlbFJlYWRpbmd8bnVsbH0gW2JhdHRlcnlMZXZlbFJlYWRpbmddIERldmljZUV2ZW50IGJhdHRlcnlMZXZlbFJlYWRpbmdcclxuICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLkRldmljZUV2ZW50LklSU1NJTGV2ZWxSZWFkaW5nfG51bGx9IFtyc3NpTGV2ZWxSZWFkaW5nXSBEZXZpY2VFdmVudCByc3NpTGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JUmF3UmVhZGluZ3xudWxsfSBbcmF3UmVhZGluZ10gRGV2aWNlRXZlbnQgcmF3UmVhZGluZ1xyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERldmljZUV2ZW50LlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Z1xyXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERldmljZUV2ZW50LlxyXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElEZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuSURldmljZUV2ZW50PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gRGV2aWNlRXZlbnQocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV2aWNlRXZlbnQgZGlzY29ubmVjdC5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JRGlzY29ubmVjdHxudWxsfHVuZGVmaW5lZH0gZGlzY29ubmVjdFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV2aWNlRXZlbnQgYmF0dGVyeUxldmVsUmVhZGluZy5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JQmF0dGVyeUxldmVsUmVhZGluZ3xudWxsfHVuZGVmaW5lZH0gYmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LnByb3RvdHlwZS5iYXR0ZXJ5TGV2ZWxSZWFkaW5nID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV2aWNlRXZlbnQgcnNzaUxldmVsUmVhZGluZy5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JUlNTSUxldmVsUmVhZGluZ3xudWxsfHVuZGVmaW5lZH0gcnNzaUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LnByb3RvdHlwZS5yc3NpTGV2ZWxSZWFkaW5nID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV2aWNlRXZlbnQgcmF3UmVhZGluZy5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JUmF3UmVhZGluZ3xudWxsfHVuZGVmaW5lZH0gcmF3UmVhZGluZ1xyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LnByb3RvdHlwZS5yYXdSZWFkaW5nID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gT25lT2YgZmllbGQgbmFtZXMgYm91bmQgdG8gdmlydHVhbCBnZXR0ZXJzIGFuZCBzZXR0ZXJzXHJcbiAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV2aWNlRXZlbnQgbXNnLlxyXG4gICAgICAgICAqIEBtZW1iZXIge1wiZGlzY29ubmVjdFwifFwiYmF0dGVyeUxldmVsUmVhZGluZ1wifFwicnNzaUxldmVsUmVhZGluZ1wifFwicmF3UmVhZGluZ1wifHVuZGVmaW5lZH0gbXNnXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERldmljZUV2ZW50LnByb3RvdHlwZSwgXCJtc2dcIiwge1xyXG4gICAgICAgICAgICBnZXQ6ICR1dGlsLm9uZU9mR2V0dGVyKCRvbmVPZkZpZWxkcyA9IFtcImRpc2Nvbm5lY3RcIiwgXCJiYXR0ZXJ5TGV2ZWxSZWFkaW5nXCIsIFwicnNzaUxldmVsUmVhZGluZ1wiLCBcInJhd1JlYWRpbmdcIl0pLFxyXG4gICAgICAgICAgICBzZXQ6ICR1dGlsLm9uZU9mU2V0dGVyKCRvbmVPZkZpZWxkcylcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEZXZpY2VFdmVudCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklEZXZpY2VFdmVudD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VFdmVudH0gRGV2aWNlRXZlbnQgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VFdmVudC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERldmljZUV2ZW50KHByb3BlcnRpZXMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZXZpY2VFdmVudCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VFdmVudC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuSURldmljZUV2ZW50fSBtZXNzYWdlIERldmljZUV2ZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VFdmVudC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlzY29ubmVjdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGlzY29ubmVjdFwiKSlcclxuICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QuZW5jb2RlKG1lc3NhZ2UuZGlzY29ubmVjdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxSZWFkaW5nICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJiYXR0ZXJ5TGV2ZWxSZWFkaW5nXCIpKVxyXG4gICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZy5lbmNvZGUobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxSZWFkaW5nLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJzc2lMZXZlbFJlYWRpbmcgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJzc2lMZXZlbFJlYWRpbmdcIikpXHJcbiAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nLmVuY29kZShtZXNzYWdlLnJzc2lMZXZlbFJlYWRpbmcsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmF3UmVhZGluZyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmF3UmVhZGluZ1wiKSlcclxuICAgICAgICAgICAgICAgICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmcuZW5jb2RlKG1lc3NhZ2UucmF3UmVhZGluZywgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZXZpY2VFdmVudCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VFdmVudC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuSURldmljZUV2ZW50fSBtZXNzYWdlIERldmljZUV2ZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VFdmVudC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlY29kZXMgYSBEZXZpY2VFdmVudCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnRcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlRXZlbnR9IERldmljZUV2ZW50XHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VFdmVudC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xyXG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudCgpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNjb25uZWN0ID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuRGlzY29ubmVjdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYmF0dGVyeUxldmVsUmVhZGluZyA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmcuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJzc2lMZXZlbFJlYWRpbmcgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yYXdSZWFkaW5nID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVjb2RlcyBhIERldmljZUV2ZW50IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlRXZlbnR9IERldmljZUV2ZW50XHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VFdmVudC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBWZXJpZmllcyBhIERldmljZUV2ZW50IG1lc3NhZ2UuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0ge307XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRpc2Nvbm5lY3QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGlzY29ubmVjdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QudmVyaWZ5KG1lc3NhZ2UuZGlzY29ubmVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkaXNjb25uZWN0LlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmF0dGVyeUxldmVsUmVhZGluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJiYXR0ZXJ5TGV2ZWxSZWFkaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5tc2cgPT09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXNnOiBtdWx0aXBsZSB2YWx1ZXNcIjtcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC5CYXR0ZXJ5TGV2ZWxSZWFkaW5nLnZlcmlmeShtZXNzYWdlLmJhdHRlcnlMZXZlbFJlYWRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYmF0dGVyeUxldmVsUmVhZGluZy5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJzc2lMZXZlbFJlYWRpbmcgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicnNzaUxldmVsUmVhZGluZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubXNnID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm1zZzogbXVsdGlwbGUgdmFsdWVzXCI7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZy52ZXJpZnkobWVzc2FnZS5yc3NpTGV2ZWxSZWFkaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJzc2lMZXZlbFJlYWRpbmcuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yYXdSZWFkaW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJhd1JlYWRpbmdcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtc2c6IG11bHRpcGxlIHZhbHVlc1wiO1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5tc2cgPSAxO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmcudmVyaWZ5KG1lc3NhZ2UucmF3UmVhZGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyYXdSZWFkaW5nLlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIERldmljZUV2ZW50IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50fSBEZXZpY2VFdmVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudCgpO1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0LmRpc2Nvbm5lY3QgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZGlzY29ubmVjdCAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlRXZlbnQuZGlzY29ubmVjdDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNjb25uZWN0ID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuRGlzY29ubmVjdC5mcm9tT2JqZWN0KG9iamVjdC5kaXNjb25uZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0LmJhdHRlcnlMZXZlbFJlYWRpbmcgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuYmF0dGVyeUxldmVsUmVhZGluZyAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlRXZlbnQuYmF0dGVyeUxldmVsUmVhZGluZzogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXR0ZXJ5TGV2ZWxSZWFkaW5nID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZy5mcm9tT2JqZWN0KG9iamVjdC5iYXR0ZXJ5TGV2ZWxSZWFkaW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0LnJzc2lMZXZlbFJlYWRpbmcgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QucnNzaUxldmVsUmVhZGluZyAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlRXZlbnQucnNzaUxldmVsUmVhZGluZzogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yc3NpTGV2ZWxSZWFkaW5nID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZy5mcm9tT2JqZWN0KG9iamVjdC5yc3NpTGV2ZWxSZWFkaW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0LnJhd1JlYWRpbmcgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QucmF3UmVhZGluZyAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIuQnV0dHBsdWcuRGV2aWNlRXZlbnQucmF3UmVhZGluZzogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yYXdSZWFkaW5nID0gJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZy5mcm9tT2JqZWN0KG9iamVjdC5yYXdSZWFkaW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBEZXZpY2VFdmVudCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnR9IG1lc3NhZ2UgRGV2aWNlRXZlbnRcclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIERldmljZUV2ZW50LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlzY29ubmVjdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkaXNjb25uZWN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlzY29ubmVjdCA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QudG9PYmplY3QobWVzc2FnZS5kaXNjb25uZWN0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJkaXNjb25uZWN0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmF0dGVyeUxldmVsUmVhZGluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJiYXR0ZXJ5TGV2ZWxSZWFkaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuYmF0dGVyeUxldmVsUmVhZGluZyA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmcudG9PYmplY3QobWVzc2FnZS5iYXR0ZXJ5TGV2ZWxSZWFkaW5nLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJiYXR0ZXJ5TGV2ZWxSZWFkaW5nXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucnNzaUxldmVsUmVhZGluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyc3NpTGV2ZWxSZWFkaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QucnNzaUxldmVsUmVhZGluZyA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmcudG9PYmplY3QobWVzc2FnZS5yc3NpTGV2ZWxSZWFkaW5nLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJyc3NpTGV2ZWxSZWFkaW5nXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmF3UmVhZGluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyYXdSZWFkaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QucmF3UmVhZGluZyA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmcudG9PYmplY3QobWVzc2FnZS5yYXdSZWFkaW5nLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJyYXdSZWFkaW5nXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERldmljZUV2ZW50IHRvIEpTT04uXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBEZXZpY2VFdmVudC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBEZXZpY2VFdmVudC5EaXNjb25uZWN0ID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEaXNjb25uZWN0LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnRcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIERpc2Nvbm5lY3QgaW5kZXhcclxuICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEaXNjb25uZWN0LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnRcclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGlzY29ubmVjdC5cclxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuSURpc2Nvbm5lY3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIERpc2Nvbm5lY3QocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERpc2Nvbm5lY3QgaW5kZXguXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gaW5kZXhcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LnByb3RvdHlwZS5pbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEaXNjb25uZWN0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuSURpc2Nvbm5lY3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3R9IERpc2Nvbm5lY3QgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGlzY29ubmVjdChwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGlzY29ubmVjdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VFdmVudC5EaXNjb25uZWN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JRGlzY29ubmVjdH0gbWVzc2FnZSBEaXNjb25uZWN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImluZGV4XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS51aW50MzIobWVzc2FnZS5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEaXNjb25uZWN0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklEaXNjb25uZWN0fSBtZXNzYWdlIERpc2Nvbm5lY3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBEaXNjb25uZWN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3R9IERpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGlzY29ubmVjdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5EaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5EaXNjb25uZWN0fSBEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIERpc2Nvbm5lY3QgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5kZXg6IGludGVnZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBEaXNjb25uZWN0IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5EaXNjb25uZWN0fSBEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBEaXNjb25uZWN0LmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaW5kZXggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4ID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGlzY29ubmVjdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuRGlzY29ubmVjdFxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuRGlzY29ubmVjdH0gbWVzc2FnZSBEaXNjb25uZWN0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRGlzY29ubmVjdC50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cylcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gbWVzc2FnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBEaXNjb25uZWN0IHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkRpc2Nvbm5lY3RcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIERpc2Nvbm5lY3QucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3Q7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgRGV2aWNlRXZlbnQuUmF3UmVhZGluZyA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUmF3UmVhZGluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2luZGV4XSBSYXdSZWFkaW5nIGluZGV4XHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QnV0dHBsdWcuRW5kcG9pbnR8bnVsbH0gW2VuZHBvaW50XSBSYXdSZWFkaW5nIGVuZHBvaW50XHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7VWludDhBcnJheXxudWxsfSBbZGF0YV0gUmF3UmVhZGluZyBkYXRhXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUmF3UmVhZGluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFJhd1JlYWRpbmcuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElSYXdSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklSYXdSZWFkaW5nPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBSYXdSZWFkaW5nKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSYXdSZWFkaW5nIGluZGV4LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGluZGV4XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5SYXdSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3UmVhZGluZy5wcm90b3R5cGUuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFJhd1JlYWRpbmcgZW5kcG9pbnQuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge0J1dHRwbHVnLkVuZHBvaW50fSBlbmRwb2ludFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRpbmcucHJvdG90eXBlLmVuZHBvaW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSYXdSZWFkaW5nIGRhdGEuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge1VpbnQ4QXJyYXl9IGRhdGFcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkaW5nLnByb3RvdHlwZS5kYXRhID0gJHV0aWwubmV3QnVmZmVyKFtdKTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJhd1JlYWRpbmcgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5SYXdSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JUmF3UmVhZGluZz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ30gUmF3UmVhZGluZyBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3UmVhZGluZy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSYXdSZWFkaW5nKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSYXdSZWFkaW5nIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklSYXdSZWFkaW5nfSBtZXNzYWdlIFJhd1JlYWRpbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkaW5nLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDMyKG1lc3NhZ2UuZW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGF0YVwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSYXdSZWFkaW5nIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklSYXdSZWFkaW5nfSBtZXNzYWdlIFJhd1JlYWRpbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkaW5nLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSYXdSZWFkaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmd9IFJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkaW5nLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gcmVhZGVyLmludDMyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gcmVhZGVyLmJ5dGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFJhd1JlYWRpbmcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ30gUmF3UmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRpbmcuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBSYXdSZWFkaW5nIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRpbmcudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuZW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmRwb2ludDogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxODpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQzOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGEgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGF0YVwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmRhdGEgJiYgdHlwZW9mIG1lc3NhZ2UuZGF0YS5sZW5ndGggPT09IFwibnVtYmVyXCIgfHwgJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5kYXRhKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRhdGE6IGJ1ZmZlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFJhd1JlYWRpbmcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LlJhd1JlYWRpbmd9IFJhd1JlYWRpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJhd1JlYWRpbmcuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pbmRleCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSBvYmplY3QuaW5kZXggPj4+IDA7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5lbmRwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkNvbW1hbmRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJGaXJtd2FyZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUnhBY2NlbFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4QkxFQmF0dGVyeVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJ4UHJlc3N1cmVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSeFRvdWNoXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeE1vZGVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gODtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFNob2NrXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhWaWJyYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFZlbmRvckNvbnRyb2xcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDExO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIldoaXRlbGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE2O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAxNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljNVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAxODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMTg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzZcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMTk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDE5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWM3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDIwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljOFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzlcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDIyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxMFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzExXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjU6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxM1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyNjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjY7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE0XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAyNztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMTVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMjg6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDI4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxNlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMjk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzE3XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMThcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzE6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDMxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMxOVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIwXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjFcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyMlwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzNTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzIzXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM2OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzNjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDM3O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyNVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gMzg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI2XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAzOTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMjdcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMyOFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0MTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiR2VuZXJpYzI5XCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSA0MjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHZW5lcmljMzBcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IDQzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdlbmVyaWMzMVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA0NDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gNDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmRhdGEgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5kYXRhID09PSBcInN0cmluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdXRpbC5iYXNlNjQuZGVjb2RlKG9iamVjdC5kYXRhLCBtZXNzYWdlLmRhdGEgPSAkdXRpbC5uZXdCdWZmZXIoJHV0aWwuYmFzZTY0Lmxlbmd0aChvYmplY3QuZGF0YSkpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmplY3QuZGF0YS5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGF0YSA9IG9iamVjdC5kYXRhO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUmF3UmVhZGluZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuUmF3UmVhZGluZ30gbWVzc2FnZSBSYXdSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUmF3UmVhZGluZy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVuZHBvaW50ID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJDb21tYW5kXCIgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmJ5dGVzID09PSBTdHJpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kYXRhID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRhdGEgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYnl0ZXMgIT09IEFycmF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRhdGEgPSAkdXRpbC5uZXdCdWZmZXIob2JqZWN0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IG1lc3NhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRwb2ludFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kcG9pbnQgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC5CdXR0cGx1Zy5FbmRwb2ludFttZXNzYWdlLmVuZHBvaW50XSA6IG1lc3NhZ2UuZW5kcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRhdGEgPSBvcHRpb25zLmJ5dGVzID09PSBTdHJpbmcgPyAkdXRpbC5iYXNlNjQuZW5jb2RlKG1lc3NhZ2UuZGF0YSwgMCwgbWVzc2FnZS5kYXRhLmxlbmd0aCkgOiBvcHRpb25zLmJ5dGVzID09PSBBcnJheSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG1lc3NhZ2UuZGF0YSkgOiBtZXNzYWdlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgUmF3UmVhZGluZyB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5SYXdSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSYXdSZWFkaW5nLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSYXdSZWFkaW5nO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIERldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmcgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEJhdHRlcnlMZXZlbFJlYWRpbmcuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElCYXR0ZXJ5TGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtpbmRleF0gQmF0dGVyeUxldmVsUmVhZGluZyBpbmRleFxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbcmVhZGluZ10gQmF0dGVyeUxldmVsUmVhZGluZyByZWFkaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQmF0dGVyeUxldmVsUmVhZGluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50XHJcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEJhdHRlcnlMZXZlbFJlYWRpbmcuXHJcbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElCYXR0ZXJ5TGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklCYXR0ZXJ5TGV2ZWxSZWFkaW5nPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBCYXR0ZXJ5TGV2ZWxSZWFkaW5nKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBCYXR0ZXJ5TGV2ZWxSZWFkaW5nIGluZGV4LlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGluZGV4XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5CYXR0ZXJ5TGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsUmVhZGluZy5wcm90b3R5cGUuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEJhdHRlcnlMZXZlbFJlYWRpbmcgcmVhZGluZy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSByZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5CYXR0ZXJ5TGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsUmVhZGluZy5wcm90b3R5cGUucmVhZGluZyA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBCYXR0ZXJ5TGV2ZWxSZWFkaW5nIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuSUJhdHRlcnlMZXZlbFJlYWRpbmc9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmd9IEJhdHRlcnlMZXZlbFJlYWRpbmcgaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbFJlYWRpbmcuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmF0dGVyeUxldmVsUmVhZGluZyhwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQmF0dGVyeUxldmVsUmVhZGluZyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5EZXZpY2VFdmVudC5CYXR0ZXJ5TGV2ZWxSZWFkaW5nLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5CYXR0ZXJ5TGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JQmF0dGVyeUxldmVsUmVhZGluZ30gbWVzc2FnZSBCYXR0ZXJ5TGV2ZWxSZWFkaW5nIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsUmVhZGluZy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImluZGV4XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS51aW50MzIobWVzc2FnZS5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWFkaW5nICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZWFkaW5nXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMSA9Ki8xNykuZG91YmxlKG1lc3NhZ2UucmVhZGluZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCYXR0ZXJ5TGV2ZWxSZWFkaW5nIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklCYXR0ZXJ5TGV2ZWxSZWFkaW5nfSBtZXNzYWdlIEJhdHRlcnlMZXZlbFJlYWRpbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBCYXR0ZXJ5TGV2ZWxSZWFkaW5nLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBCYXR0ZXJ5TGV2ZWxSZWFkaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmd9IEJhdHRlcnlMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBCYXR0ZXJ5TGV2ZWxSZWFkaW5nLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWRpbmcgPSByZWFkZXIuZG91YmxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEJhdHRlcnlMZXZlbFJlYWRpbmcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ30gQmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbFJlYWRpbmcuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBCYXR0ZXJ5TGV2ZWxSZWFkaW5nIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbFJlYWRpbmcudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5pbmRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWFkaW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRpbmdcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnJlYWRpbmcgIT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlYWRpbmc6IG51bWJlciBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIEJhdHRlcnlMZXZlbFJlYWRpbmcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LkJhdHRlcnlMZXZlbFJlYWRpbmd9IEJhdHRlcnlMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEJhdHRlcnlMZXZlbFJlYWRpbmcuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pbmRleCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSBvYmplY3QuaW5kZXggPj4+IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnJlYWRpbmcgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWRpbmcgPSBOdW1iZXIob2JqZWN0LnJlYWRpbmcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQmF0dGVyeUxldmVsUmVhZGluZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ30gbWVzc2FnZSBCYXR0ZXJ5TGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsUmVhZGluZy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlYWRpbmcgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5kZXggIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmluZGV4ID0gbWVzc2FnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlYWRpbmcgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVhZGluZ1wiKSlcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVhZGluZyA9IG9wdGlvbnMuanNvbiAmJiAhaXNGaW5pdGUobWVzc2FnZS5yZWFkaW5nKSA/IFN0cmluZyhtZXNzYWdlLnJlYWRpbmcpIDogbWVzc2FnZS5yZWFkaW5nO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEJhdHRlcnlMZXZlbFJlYWRpbmcgdG8gSlNPTi5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuQmF0dGVyeUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgQmF0dGVyeUxldmVsUmVhZGluZy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQmF0dGVyeUxldmVsUmVhZGluZztcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBEZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBSU1NJTGV2ZWxSZWFkaW5nLlxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnRcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIFJTU0lMZXZlbFJlYWRpbmcgaW5kZXhcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3JlYWRpbmddIFJTU0lMZXZlbFJlYWRpbmcgcmVhZGluZ1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJTU0lMZXZlbFJlYWRpbmcuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudFxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBSU1NJTGV2ZWxSZWFkaW5nLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5JUlNTSUxldmVsUmVhZGluZz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gUlNTSUxldmVsUmVhZGluZyhwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUlNTSUxldmVsUmVhZGluZyBpbmRleC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBpbmRleFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbFJlYWRpbmcucHJvdG90eXBlLmluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSU1NJTGV2ZWxSZWFkaW5nIHJlYWRpbmcuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gcmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbFJlYWRpbmcucHJvdG90eXBlLnJlYWRpbmcgPSAwO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUlNTSUxldmVsUmVhZGluZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklSU1NJTGV2ZWxSZWFkaW5nPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nfSBSU1NJTGV2ZWxSZWFkaW5nIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxSZWFkaW5nLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJTU0lMZXZlbFJlYWRpbmcocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJTU0lMZXZlbFJlYWRpbmcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuSVJTU0lMZXZlbFJlYWRpbmd9IG1lc3NhZ2UgUlNTSUxldmVsUmVhZGluZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbFJlYWRpbmcuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkudWludDMyKG1lc3NhZ2UuaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVhZGluZyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVhZGluZ1wiKSlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDMyKG1lc3NhZ2UucmVhZGluZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBSU1NJTGV2ZWxSZWFkaW5nIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LklSU1NJTGV2ZWxSZWFkaW5nfSBtZXNzYWdlIFJTU0lMZXZlbFJlYWRpbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxSZWFkaW5nLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBSU1NJTGV2ZWxSZWFkaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmd9IFJTU0lMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxSZWFkaW5nLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlYWRpbmcgPSByZWFkZXIuaW50MzIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgUlNTSUxldmVsUmVhZGluZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nfSBSU1NJTGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUlNTSUxldmVsUmVhZGluZy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFJTU0lMZXZlbFJlYWRpbmcgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUlNTSUxldmVsUmVhZGluZy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5kZXg6IGludGVnZXIgZXhwZWN0ZWRcIjtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlYWRpbmcgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicmVhZGluZ1wiKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnJlYWRpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZWFkaW5nOiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgUlNTSUxldmVsUmVhZGluZyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7QnV0dHBsdWcuRGV2aWNlRXZlbnQuUlNTSUxldmVsUmVhZGluZ30gUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgUlNTSUxldmVsUmVhZGluZy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmluZGV4ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IG9iamVjdC5pbmRleCA+Pj4gMDtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QucmVhZGluZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVhZGluZyA9IG9iamVjdC5yZWFkaW5nIHwgMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFJTU0lMZXZlbFJlYWRpbmcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmdcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLkRldmljZUV2ZW50LlJTU0lMZXZlbFJlYWRpbmd9IG1lc3NhZ2UgUlNTSUxldmVsUmVhZGluZ1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIFJTU0lMZXZlbFJlYWRpbmcudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZWFkaW5nID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmRleCA9IG1lc3NhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWFkaW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRpbmdcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlYWRpbmcgPSBtZXNzYWdlLnJlYWRpbmc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgUlNTSUxldmVsUmVhZGluZyB0byBKU09OLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5EZXZpY2VFdmVudC5SU1NJTGV2ZWxSZWFkaW5nXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBSU1NJTGV2ZWxSZWFkaW5nLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSU1NJTGV2ZWxSZWFkaW5nO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBEZXZpY2VFdmVudDtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Z1xyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSUJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtpZF0gQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlIGlkXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuSUZGSU1lc3NhZ2V8bnVsbH0gW21lc3NhZ2VdIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSBtZXNzYWdlXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Z1xyXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5cclxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5JQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSBpZC5cclxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGlkXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5wcm90b3R5cGUuaWQgPSAwO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UgbWVzc2FnZS5cclxuICAgICAgICAgKiBAbWVtYmVyIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuSUZGSU1lc3NhZ2V8bnVsbHx1bmRlZmluZWR9IG1lc3NhZ2VcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLnByb3RvdHlwZS5tZXNzYWdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuSUJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2V9IEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge0J1dHRwbHVnLklCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2V9IG1lc3NhZ2UgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xyXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS51aW50MzIobWVzc2FnZS5pZCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1lc3NhZ2VcIikpXHJcbiAgICAgICAgICAgICAgICAkcm9vdC5CdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZS5lbmNvZGUobWVzc2FnZS5tZXNzYWdlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5JQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlfSBtZXNzYWdlIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cclxuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVjb2RlcyBhIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZX0gQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9ICRyb290LkJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWNvZGVzIGEgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXHJcbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZX0gQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xyXG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVmVyaWZpZXMgYSBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UgbWVzc2FnZS5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpZFwiKSlcclxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UuaWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImlkOiBpbnRlZ2VyIGV4cGVjdGVkXCI7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibWVzc2FnZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QuQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2UudmVyaWZ5KG1lc3NhZ2UubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibWVzc2FnZS5cIiArIGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZX0gQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QuQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QuaWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSBvYmplY3QuaWQgPj4+IDA7XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QubWVzc2FnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5tZXNzYWdlICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UubWVzc2FnZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlID0gJHJvb3QuQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2UuZnJvbU9iamVjdChvYmplY3QubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcclxuICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlfSBtZXNzYWdlIEJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IDA7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QubWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaWRcIikpXHJcbiAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBtZXNzYWdlLmlkO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikpXHJcbiAgICAgICAgICAgICAgICBvYmplY3QubWVzc2FnZSA9ICRyb290LkJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlLnRvT2JqZWN0KG1lc3NhZ2UubWVzc2FnZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UgdG8gSlNPTi5cclxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2UgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZGSU1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0J1dHRwbHVnLklTZXJ2ZXJNZXNzYWdlfG51bGx9IFtzZXJ2ZXJNZXNzYWdlXSBGRklNZXNzYWdlIHNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCdXR0cGx1Zy5JRGV2aWNlRXZlbnR8bnVsbH0gW2RldmljZUV2ZW50XSBGRklNZXNzYWdlIGRldmljZUV2ZW50XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRkZJTWVzc2FnZS5cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGRklNZXNzYWdlLlxyXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuSUZGSU1lc3NhZ2U9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIEZGSU1lc3NhZ2UocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZGSU1lc3NhZ2Ugc2VydmVyTWVzc2FnZS5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuSVNlcnZlck1lc3NhZ2V8bnVsbHx1bmRlZmluZWR9IHNlcnZlck1lc3NhZ2VcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5wcm90b3R5cGUuc2VydmVyTWVzc2FnZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRkZJTWVzc2FnZSBkZXZpY2VFdmVudC5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7QnV0dHBsdWcuSURldmljZUV2ZW50fG51bGx8dW5kZWZpbmVkfSBkZXZpY2VFdmVudFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnByb3RvdHlwZS5kZXZpY2VFdmVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyBPbmVPZiBmaWVsZCBuYW1lcyBib3VuZCB0byB2aXJ0dWFsIGdldHRlcnMgYW5kIHNldHRlcnNcclxuICAgICAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGRklNZXNzYWdlIG1zZy5cclxuICAgICAgICAgICAgICogQG1lbWJlciB7XCJzZXJ2ZXJNZXNzYWdlXCJ8XCJkZXZpY2VFdmVudFwifHVuZGVmaW5lZH0gbXNnXHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGRklNZXNzYWdlLnByb3RvdHlwZSwgXCJtc2dcIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiAkdXRpbC5vbmVPZkdldHRlcigkb25lT2ZGaWVsZHMgPSBbXCJzZXJ2ZXJNZXNzYWdlXCIsIFwiZGV2aWNlRXZlbnRcIl0pLFxyXG4gICAgICAgICAgICAgICAgc2V0OiAkdXRpbC5vbmVPZlNldHRlcigkb25lT2ZGaWVsZHMpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRkZJTWVzc2FnZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuSUZGSU1lc3NhZ2U9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlfSBGRklNZXNzYWdlIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZGSU1lc3NhZ2UocHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZGSU1lc3NhZ2UgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuSUZGSU1lc3NhZ2V9IG1lc3NhZ2UgRkZJTWVzc2FnZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZlck1lc3NhZ2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlcnZlck1lc3NhZ2VcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5lbmNvZGUobWVzc2FnZS5zZXJ2ZXJNZXNzYWdlLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXZpY2VFdmVudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGV2aWNlRXZlbnRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuQnV0dHBsdWcuRGV2aWNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuZGV2aWNlRXZlbnQsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZGSU1lc3NhZ2UgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuSUZGSU1lc3NhZ2V9IG1lc3NhZ2UgRkZJTWVzc2FnZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlfSBGRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5CdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlcnZlck1lc3NhZ2UgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXZpY2VFdmVudCA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVjb2RlcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cclxuICAgICAgICAgICAgICogQHJldHVybnMge0J1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlfSBGRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZS5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcclxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZlck1lc3NhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2VydmVyTWVzc2FnZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubXNnID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LkJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UudmVyaWZ5KG1lc3NhZ2Uuc2VydmVyTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZlck1lc3NhZ2UuXCIgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXZpY2VFdmVudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXZpY2VFdmVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1zZyA9PT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXNnOiBtdWx0aXBsZSB2YWx1ZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1zZyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC52ZXJpZnkobWVzc2FnZS5kZXZpY2VFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRldmljZUV2ZW50LlwiICsgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIEZGSU1lc3NhZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxyXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxyXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZX0gRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgRkZJTWVzc2FnZS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC5CdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QuQnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3Quc2VydmVyTWVzc2FnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Quc2VydmVyTWVzc2FnZSAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLkJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlLnNlcnZlck1lc3NhZ2U6IG9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlcnZlck1lc3NhZ2UgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLmZyb21PYmplY3Qob2JqZWN0LnNlcnZlck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kZXZpY2VFdmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZGV2aWNlRXZlbnQgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi5CdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZS5kZXZpY2VFdmVudDogb2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGV2aWNlRXZlbnQgPSAkcm9vdC5CdXR0cGx1Zy5EZXZpY2VFdmVudC5mcm9tT2JqZWN0KG9iamVjdC5kZXZpY2VFdmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBGRklNZXNzYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cclxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlLkZGSU1lc3NhZ2V9IG1lc3NhZ2UgRkZJTWVzc2FnZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZGSU1lc3NhZ2UudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmVyTWVzc2FnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXJ2ZXJNZXNzYWdlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlcnZlck1lc3NhZ2UgPSAkcm9vdC5CdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLnRvT2JqZWN0KG1lc3NhZ2Uuc2VydmVyTWVzc2FnZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25lb2ZzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubXNnID0gXCJzZXJ2ZXJNZXNzYWdlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXZpY2VFdmVudCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXZpY2VFdmVudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZXZpY2VFdmVudCA9ICRyb290LkJ1dHRwbHVnLkRldmljZUV2ZW50LnRvT2JqZWN0KG1lc3NhZ2UuZGV2aWNlRXZlbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uZW9mcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1zZyA9IFwiZGV2aWNlRXZlbnRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBGRklNZXNzYWdlIHRvIEpTT04uXHJcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZS5GRklNZXNzYWdlXHJcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBGRklNZXNzYWdlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGRklNZXNzYWdlO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBCdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHJldHVybiBCdXR0cGx1ZztcclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gJHJvb3Q7XHJcbiIsIi8qIVxyXG4gKiBCdXR0cGx1ZyBKUyBTb3VyY2UgQ29kZSBGaWxlIC0gVmlzaXQgaHR0cHM6Ly9idXR0cGx1Zy5pbyBmb3IgbW9yZSBpbmZvIGFib3V0XHJcbiAqIHRoZSBwcm9qZWN0LiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtQ2xhdXNlIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUgaW4gdGhlXHJcbiAqIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgTm9ucG9seW5vbWlhbCBMYWJzIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcclxuaW1wb3J0IHsgQnV0dHBsdWcgfSBmcm9tIFwiLi9idXR0cGx1Z19mZmlcIjtcclxuaW1wb3J0IHsgQnV0dHBsdWdDbGllbnRDb25uZWN0b3JFcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnRQdHIsIGNyZWF0ZURldmljZVB0ciwgY29ubmVjdEVtYmVkZGVkLCBjb25uZWN0V2Vic29ja2V0LCBzdGFydFNjYW5uaW5nLCBzdG9wU2Nhbm5pbmcsIHN0b3BBbGxEZXZpY2VzLCBkaXNjb25uZWN0IH0gZnJvbSBcIi4vZmZpXCI7XHJcbmltcG9ydCB7IEJ1dHRwbHVnRW1iZWRkZWRDb25uZWN0b3JPcHRpb25zLCBCdXR0cGx1Z1dlYnNvY2tldENvbm5lY3Rvck9wdGlvbnMgfSBmcm9tIFwiLi9jb25uZWN0b3JzXCI7XHJcbmltcG9ydCB7IEJ1dHRwbHVnTWVzc2FnZVNvcnRlciB9IGZyb20gXCIuL3NvcnRlclwiO1xyXG5pbXBvcnQgeyBCdXR0cGx1Z0NsaWVudERldmljZSB9IGZyb20gXCIuL2RldmljZVwiO1xyXG5leHBvcnQgY2xhc3MgQnV0dHBsdWdDbGllbnQgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gIHByb3RlY3RlZCBfZGV2aWNlczogTWFwPG51bWJlciwgQnV0dHBsdWdDbGllbnREZXZpY2U+ID0gbmV3IE1hcCgpO1xyXG4gIHByb3RlY3RlZCBfY2xpZW50TmFtZTogc3RyaW5nO1xyXG4gIC8vIFRoaXMgd2lsbCBlaXRoZXIgYmUgbnVsbCwgb3Igb3VyIFdBU00gaGVhcCBwb2ludGVyIGZvciBvdXIgY29ubmVjdGVkIGNsaWVudCBvYmplY3QuXHJcbiAgcHJpdmF0ZSBfY2xpZW50UHRyPzogbnVtYmVyID0gdW5kZWZpbmVkO1xyXG4gIHByb3RlY3RlZCBfaXNTY2FubmluZyA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX2Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX3NvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyID0gbmV3IEJ1dHRwbHVnTWVzc2FnZVNvcnRlcigpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjbGllbnROYW1lOiBzdHJpbmcgPSBcIkdlbmVyaWMgQnV0dHBsdWcgQ2xpZW50XCIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLl9jbGllbnROYW1lID0gY2xpZW50TmFtZTtcclxuICAgIHRoaXMuX2NsaWVudFB0ciA9IGNyZWF0ZUNsaWVudFB0cih0aGlzLnNvcnRlckNhbGxiYWNrLCBjbGllbnROYW1lKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ29ubmVjdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3RlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgRGV2aWNlcygpOiBCdXR0cGx1Z0NsaWVudERldmljZVtdIHtcclxuICAgIC8vIFdoaWxlIHRoaXMgZnVuY3Rpb24gZG9lc24ndCBhY3R1YWxseSBzZW5kIGEgbWVzc2FnZSwgaWYgd2UgZG9uJ3QgaGF2ZSBhXHJcbiAgICAvLyBjb25uZWN0b3IsIHdlIHNob3VsZG4ndCBoYXZlIGRldmljZXMuXHJcbiAgICB0aGlzLkNoZWNrQ29ubmVjdG9yKCk7XHJcbiAgICBjb25zdCBkZXZpY2VzOiBCdXR0cGx1Z0NsaWVudERldmljZVtdID0gW107XHJcbiAgICB0aGlzLl9kZXZpY2VzLmZvckVhY2goKGQsIGkpID0+IHtcclxuICAgICAgZGV2aWNlcy5wdXNoKGQpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGV2aWNlcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaXNTY2FubmluZygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1NjYW5uaW5nO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNvbm5lY3QgPSBhc3luYyAob3B0aW9uczogQnV0dHBsdWdFbWJlZGRlZENvbm5lY3Rvck9wdGlvbnMgfCBCdXR0cGx1Z1dlYnNvY2tldENvbm5lY3Rvck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGlmICh0aGlzLl9jb25uZWN0ZWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEJ1dHRwbHVnQ2xpZW50Q29ubmVjdG9yRXJyb3IoXCJDbGllbnQgYWxyZWFkeSBjb25uZWN0ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBCdXR0cGx1Z0VtYmVkZGVkQ29ubmVjdG9yT3B0aW9ucykge1xyXG4gICAgICBhd2FpdCBjb25uZWN0RW1iZWRkZWQodGhpcy5fc29ydGVyLCB0aGlzLl9jbGllbnRQdHIhLCBvcHRpb25zKTtcclxuICAgIH0gZWxzZSBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIEJ1dHRwbHVnV2Vic29ja2V0Q29ubmVjdG9yT3B0aW9ucykge1xyXG4gICAgICBhd2FpdCBjb25uZWN0V2Vic29ja2V0KHRoaXMuX3NvcnRlciwgdGhpcy5fY2xpZW50UHRyISwgb3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgQnV0dHBsdWdDbGllbnRDb25uZWN0b3JFcnJvcihcIkludmFsaWQgY29ubmVjdG9yIHR5cGUuXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkaXNjb25uZWN0ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLl9jbGllbnRQdHIpIHtcclxuICAgICAgdGhyb3cgbmV3IEJ1dHRwbHVnQ2xpZW50Q29ubmVjdG9yRXJyb3IoXCJOb3QgY29ubmVjdGVkLlwiKTtcclxuICAgIH1cclxuICAgIGF3YWl0IGRpc2Nvbm5lY3QodGhpcy5fc29ydGVyLCB0aGlzLl9jbGllbnRQdHIpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXJ0U2Nhbm5pbmcgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xyXG4gICAgICB0aHJvdyBuZXcgQnV0dHBsdWdDbGllbnRDb25uZWN0b3JFcnJvcihcIk5vdCBjb25uZWN0ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNTY2FubmluZyA9IHRydWU7XHJcbiAgICBhd2FpdCBzdGFydFNjYW5uaW5nKHRoaXMuX3NvcnRlciwgdGhpcy5fY2xpZW50UHRyISk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RvcFNjYW5uaW5nID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEJ1dHRwbHVnQ2xpZW50Q29ubmVjdG9yRXJyb3IoXCJOb3QgY29ubmVjdGVkLlwiKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2lzU2Nhbm5pbmcgPSBmYWxzZTtcclxuICAgIGF3YWl0IHN0b3BTY2FubmluZyh0aGlzLl9zb3J0ZXIsIHRoaXMuX2NsaWVudFB0ciEpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0b3BBbGxEZXZpY2VzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEJ1dHRwbHVnQ2xpZW50Q29ubmVjdG9yRXJyb3IoXCJOb3QgY29ubmVjdGVkLlwiKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHN0b3BBbGxEZXZpY2VzKHRoaXMuX3NvcnRlciwgdGhpcy5fY2xpZW50UHRyISk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgQ2hlY2tDb25uZWN0b3IoKSB7XHJcbiAgICBpZiAoIXRoaXMuQ29ubmVjdGVkKSB7XHJcbiAgICAgIHRocm93IG5ldyBCdXR0cGx1Z0NsaWVudENvbm5lY3RvckVycm9yKFwiQnV0dHBsdWdDbGllbnQgbm90IGNvbm5lY3RlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc29ydGVyQ2FsbGJhY2sgPSAoYnVmOiBVaW50OEFycmF5KSA9PiB7XHJcbiAgICBjb25zdCBtc2cgPSBCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2UuZGVjb2RlKGJ1Zik7XHJcbiAgICBpZiAobXNnLmlkID4gMCkge1xyXG4gICAgICB0aGlzLl9zb3J0ZXIuUGFyc2VJbmNvbWluZ01lc3NhZ2VzKG1zZyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChtc2cubWVzc2FnZT8uc2VydmVyTWVzc2FnZT8uZGV2aWNlQWRkZWQpIHtcclxuICAgICAgY29uc3QgYWRkZWRNc2cgPSBtc2cubWVzc2FnZT8uc2VydmVyTWVzc2FnZT8uZGV2aWNlQWRkZWQ7XHJcbiAgICAgIGNvbnN0IGRldmljZVB0ciA9IGNyZWF0ZURldmljZVB0cih0aGlzLl9jbGllbnRQdHIhLCBhZGRlZE1zZy5pbmRleCEpO1xyXG4gICAgICBjb25zdCBkZXZpY2UgPSBuZXcgQnV0dHBsdWdDbGllbnREZXZpY2UoZGV2aWNlUHRyISwgdGhpcy5fc29ydGVyLCBhZGRlZE1zZy5pbmRleCEsIGFkZGVkTXNnLm5hbWUhLCBhZGRlZE1zZy5tZXNzYWdlQXR0cmlidXRlcyEpO1xyXG4gICAgICB0aGlzLl9kZXZpY2VzLnNldChhZGRlZE1zZy5pbmRleCEsIGRldmljZSk7XHJcbiAgICAgIHRoaXMuZW1pdChcImRldmljZWFkZGVkXCIsIGRldmljZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChtc2cubWVzc2FnZT8uc2VydmVyTWVzc2FnZT8uZGV2aWNlUmVtb3ZlZCkge1xyXG4gICAgICBjb25zdCByZW1vdmVkTXNnID0gbXNnLm1lc3NhZ2U/LnNlcnZlck1lc3NhZ2U/LmRldmljZVJlbW92ZWQ7XHJcbiAgICAgIGlmICh0aGlzLl9kZXZpY2VzLmhhcyhyZW1vdmVkTXNnLmluZGV4ISkpIHtcclxuICAgICAgICBjb25zdCByZW1vdmVkRGV2aWNlID0gdGhpcy5fZGV2aWNlcy5nZXQocmVtb3ZlZE1zZy5pbmRleCEpO1xyXG4gICAgICAgIHJlbW92ZWREZXZpY2U/LmVtaXREaXNjb25uZWN0ZWQoKTtcclxuICAgICAgICB0aGlzLl9kZXZpY2VzLmRlbGV0ZShyZW1vdmVkTXNnLmluZGV4ISk7XHJcbiAgICAgICAgdGhpcy5lbWl0KFwiZGV2aWNlcmVtb3ZlZFwiLCByZW1vdmVkRGV2aWNlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAobXNnLm1lc3NhZ2U/LnNlcnZlck1lc3NhZ2U/LnNjYW5uaW5nRmluaXNoZWQpIHtcclxuICAgICAgdGhpcy5faXNTY2FubmluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmVtaXQoXCJzY2FubmluZ2ZpbmlzaGVkXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAobXNnLm1lc3NhZ2U/LnNlcnZlck1lc3NhZ2U/LmRpc2Nvbm5lY3QpIHtcclxuICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZW1pdChcInNlcnZlcmRpc2Nvbm5lY3RcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBCdXR0cGx1Z0VtYmVkZGVkQ29ubmVjdG9yT3B0aW9ucyB7XHJcbiAgcHVibGljIFNlcnZlck5hbWU6IHN0cmluZyA9IFwiQnV0dHBsdWcgV0FTTSBFbWJlZGRlZCBTZXJ2ZXJcIjtcclxuICAvLyBFbXB0eSBzdHJpbmcgbWVhbnMgaWdub3JlLlxyXG4gIHB1YmxpYyBEZXZpY2VDb25maWdKU09OOiBzdHJpbmcgPSBcIlwiO1xyXG4gIC8vIEVtcHR5IHN0cmluZyBtZWFucyBpZ25vcmUuXHJcbiAgcHVibGljIFVzZXJEZXZpY2VDb25maWdKU09OOiBzdHJpbmcgPSBcIlwiO1xyXG4gIC8vIDAgaGVyZSBtZWFucyBhbGwgZGV2aWNlLlxyXG4gIHB1YmxpYyBEZXZpY2VDb21tdW5pY2F0aW9uTWFuYWdlclR5cGVzOiBudW1iZXIgPSAwO1xyXG4gIC8vIFJlcXVpcmUgb3B0LWluIG9uIHJhdyBtZXNzYWdlcy5cclxuICBwdWJsaWMgQWxsb3dSYXdNZXNzYWdlczogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHB1YmxpYyBNYXhQaW5nVGltZTogbnVtYmVyID0gMDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRwbHVnV2Vic29ja2V0Q29ubmVjdG9yT3B0aW9ucyB7XHJcbiAgLy8gRGVmYXVsdCB0byB0aGUgaW5zZWN1cmUgcG9ydC5cclxuICBwdWJsaWMgQWRkcmVzczogc3RyaW5nID0gXCJ3czovLzEyNy4wLjAuMToxMjM0NVwiO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7fVxyXG59IiwiLyohXHJcbiAqIEJ1dHRwbHVnIEpTIFNvdXJjZSBDb2RlIEZpbGUgLSBWaXNpdCBodHRwczovL2J1dHRwbHVnLmlvIGZvciBtb3JlIGluZm8gYWJvdXRcclxuICogdGhlIHByb2plY3QuIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1DbGF1c2UgbGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZSBpbiB0aGVcclxuICogcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbiAqXHJcbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSBOb25wb2x5bm9taWFsIExhYnMgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgeyBCdXR0cGx1ZyB9IGZyb20gXCIuL2J1dHRwbHVnX2ZmaVwiO1xyXG5pbXBvcnQgeyBCdXR0cGx1Z0RldmljZUVycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XHJcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcclxuaW1wb3J0IHsgdmlicmF0ZSwgcm90YXRlLCBzdG9wRGV2aWNlLCBsaW5lYXIsIGJhdHRlcnlMZXZlbCxcclxuICByc3NpTGV2ZWwsIHJhd1JlYWQsIHJhd1dyaXRlLCByYXdTdWJzY3JpYmUsIHJhd1Vuc3Vic2NyaWJlIH0gZnJvbSBcIi4vZmZpXCI7XHJcbmltcG9ydCB7IEJ1dHRwbHVnTWVzc2FnZVNvcnRlciB9IGZyb20gXCIuL3NvcnRlclwiO1xyXG5cclxuLy8gUmUtZXhwb3J0IHRoZSBwcm90b2J1ZiBlbnVtLCBzbyB3ZSBkb24ndCByZXF1aXJlIHVzZXJzIHRvIGhhdmUgdG8ga25vdyB0aGVcclxuLy8gZnVsbCByZXNvbHV0aW9uIHBhdGguXHJcbmV4cG9ydCBpbXBvcnQgQnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZSA9IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuTWVzc2FnZUF0dHJpYnV0ZVR5cGU7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUF0dHJpYnV0ZXMge1xyXG4gIC8qKiBNZXNzYWdlQXR0cmlidXRlcyBmZWF0dXJlQ291bnQgKi9cclxuICBmZWF0dXJlQ291bnQ/OiAobnVtYmVyIHwgbnVsbCk7XHJcblxyXG4gIC8qKiBNZXNzYWdlQXR0cmlidXRlcyBzdGVwQ291bnQgKi9cclxuICBzdGVwQ291bnQ/OiAobnVtYmVyW10gfCBudWxsKTtcclxuXHJcbiAgLyoqIE1lc3NhZ2VBdHRyaWJ1dGVzIGVuZHBvaW50cyAqL1xyXG4gIGVuZHBvaW50cz86IChCdXR0cGx1Zy5FbmRwb2ludFtdIHwgbnVsbCk7XHJcblxyXG4gIC8qKiBNZXNzYWdlQXR0cmlidXRlcyBtYXhEdXJhdGlvbiAqL1xyXG4gIG1heER1cmF0aW9uPzogKG51bWJlcltdIHwgbnVsbCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXM6IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSU1lc3NhZ2VBdHRyaWJ1dGVzKSB7XHJcbiAgICB0aGlzLmZlYXR1cmVDb3VudCA9IGF0dHJpYnV0ZXMuZmVhdHVyZUNvdW50O1xyXG4gICAgdGhpcy5zdGVwQ291bnQgPSBhdHRyaWJ1dGVzLnN0ZXBDb3VudDtcclxuICAgIHRoaXMubWF4RHVyYXRpb24gPSBhdHRyaWJ1dGVzLm1heER1cmF0aW9uO1xyXG4gICAgdGhpcy5lbmRwb2ludHMgPSBhdHRyaWJ1dGVzLmVuZHBvaW50cztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWaWJyYXRpb25DbWQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJbmRleDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBTcGVlZDogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihpbmRleDogbnVtYmVyLCBzcGVlZDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLkluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLlNwZWVkID0gc3BlZWQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUm90YXRpb25DbWQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJbmRleDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBTcGVlZDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBDbG9ja3dpc2U6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGluZGV4OiBudW1iZXIsIHNwZWVkOiBudW1iZXIsIGNsb2Nrd2lzZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5JbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5TcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5DbG9ja3dpc2UgPSBjbG9ja3dpc2U7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmVjdG9yQ21kIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSW5kZXg6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgRHVyYXRpb246IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUG9zaXRpb246IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoaW5kZXg6IG51bWJlciwgZHVyYXRpb246IG51bWJlciwgcG9zaXRpb246IG51bWJlcikge1xyXG4gICAgdGhpcy5JbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5EdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgdGhpcy5Qb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gYWJzdHJhY3QgZGV2aWNlLCBjYXBhYmxlIG9mIHRha2luZyBjZXJ0YWluIGtpbmRzIG9mIG1lc3NhZ2VzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1dHRwbHVnQ2xpZW50RGV2aWNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuXHJcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2luZGV4OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfZGV2aWNlUHRyOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfbWVzc2FnZUF0dHJpYnV0ZXM6IE1hcDxCdXR0cGx1Z0RldmljZU1lc3NhZ2VUeXBlLCBNZXNzYWdlQXR0cmlidXRlcz4gPSBuZXcgTWFwKCk7XHJcbiAgcHJpdmF0ZSBfc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiB0aGUgbmFtZSBvZiB0aGUgZGV2aWNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm4gdGhlIGluZGV4IG9mIHRoZSBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBJbmRleCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2luZGV4O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJuIGEgbGlzdCBvZiBtZXNzYWdlIHR5cGVzIHRoZSBkZXZpY2UgYWNjZXB0cy5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0IEFsbG93ZWRNZXNzYWdlcygpOiBCdXR0cGx1Z0RldmljZU1lc3NhZ2VUeXBlW10ge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fbWVzc2FnZUF0dHJpYnV0ZXMua2V5cygpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBfaW5kZXggSW5kZXggb2YgdGhlIGRldmljZSwgYXMgY3JlYXRlZCBieSB0aGUgZGV2aWNlIG1hbmFnZXIuXHJcbiAgICogQHBhcmFtIF9uYW1lIE5hbWUgb2YgdGhlIGRldmljZS5cclxuICAgKiBAcGFyYW0gYWxsb3dlZE1zZ3MgQnV0dHBsdWcgbWVzc2FnZXMgdGhlIGRldmljZSBjYW4gcmVjZWl2ZS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRldmljZVB0cjogbnVtYmVyLFxyXG4gICAgc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsXHJcbiAgICBpbmRleDogbnVtYmVyLFxyXG4gICAgbmFtZTogc3RyaW5nLFxyXG4gICAgYWxsb3dlZE1zZ3NPYmo6IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSU1lc3NhZ2VBdHRyaWJ1dGVzW10pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLl9kZXZpY2VQdHIgPSBkZXZpY2VQdHI7XHJcbiAgICB0aGlzLl9zb3J0ZXIgPSBzb3J0ZXI7XHJcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICBmb3IgKGxldCBhdHRyaWJ1dGVzIG9mIGFsbG93ZWRNc2dzT2JqKSB7XHJcbiAgICAgIHRoaXMuX21lc3NhZ2VBdHRyaWJ1dGVzLnNldChhdHRyaWJ1dGVzLm1lc3NhZ2VUeXBlISwgbmV3IE1lc3NhZ2VBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiB0aGUgbWVzc2FnZSBhdHRyaWJ1dGVzIHJlbGF0ZWQgdG8gdGhlIGdpdmVuIG1lc3NhZ2VcclxuICAgKi9cclxuICBwdWJsaWMgbWVzc2FnZUF0dHJpYnV0ZXMobWVzc2FnZU5hbWU6IEJ1dHRwbHVnRGV2aWNlTWVzc2FnZVR5cGUpOiBNZXNzYWdlQXR0cmlidXRlcyB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWVzc2FnZUF0dHJpYnV0ZXMuZ2V0KG1lc3NhZ2VOYW1lKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBjaGVja0FsbG93ZWRNZXNzYWdlVHlwZShtZXNzYWdlVHlwZTogQnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZSkge1xyXG4gICAgaWYgKCF0aGlzLl9tZXNzYWdlQXR0cmlidXRlcy5oYXMobWVzc2FnZVR5cGUpKSB7XHJcbiAgICAgIHRocm93IG5ldyBCdXR0cGx1Z0RldmljZUVycm9yKGBNZXNzYWdlICR7QnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZVttZXNzYWdlVHlwZV19IGRvZXMgbm90IGV4aXN0IG9uIGRldmljZSAke3RoaXMuX25hbWV9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgdmlicmF0ZShzcGVlZHM6IG51bWJlciB8IEFycmF5PFZpYnJhdGlvbkNtZCB8IG51bWJlcj4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuY2hlY2tBbGxvd2VkTWVzc2FnZVR5cGUoQnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZS5WaWJyYXRlQ21kKTtcclxuICAgIGxldCBtc2dTcGVlZHM6IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuVmlicmF0ZUNvbXBvbmVudFtdO1xyXG4gICAgaWYgKHR5cGVvZiAoc3BlZWRzKSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAvLyBXZSBjYW4gc2tpcCB0aGUgY2hlY2sgaGVyZSBzaW5jZSB3ZSdyZSBidWlsZGluZyB0aGUgY29tbWFuZCBhcnJheSBvdXJzZWx2ZXMuXHJcbiAgICAgIGNvbnN0IGZlYXR1cmVzID0gdGhpcy5fbWVzc2FnZUF0dHJpYnV0ZXMuZ2V0KEJ1dHRwbHVnRGV2aWNlTWVzc2FnZVR5cGUuVmlicmF0ZUNtZCkhLmZlYXR1cmVDb3VudCE7XHJcbiAgICAgIG1zZ1NwZWVkcyA9IEFycmF5LmZyb20oe2xlbmd0aDogZmVhdHVyZXN9LCAoXywgaSkgPT4gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgc3BlZWQ6IHNwZWVkcyxcclxuICAgICAgfSkpO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNwZWVkcykgJiYgc3BlZWRzLmV2ZXJ5KHggPT4gdHlwZW9mKHgpID09PSBcIm51bWJlclwiKSkge1xyXG4gICAgICBtc2dTcGVlZHMgPSBzcGVlZHMubWFwKCh4LCBpbmRleCkgPT4gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5WaWJyYXRlQ29tcG9uZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgIHNwZWVkOiB4IGFzIG51bWJlclxyXG4gICAgICB9KSk7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc3BlZWRzKSAmJiBzcGVlZHMuZXZlcnkoeCA9PiB4IGluc3RhbmNlb2YgVmlicmF0aW9uQ21kKSkge1xyXG4gICAgICBtc2dTcGVlZHMgPSAoc3BlZWRzIGFzIFZpYnJhdGlvbkNtZFtdKS5tYXAoeCA9PiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnQuY3JlYXRlKHtcclxuICAgICAgICBpbmRleDogeC5JbmRleCxcclxuICAgICAgICBzcGVlZDogeC5TcGVlZFxyXG4gICAgICB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgQnV0dHBsdWdEZXZpY2VFcnJvcihcInZpYnJhdGUgY2FuIG9ubHkgdGFrZSBudW1iZXJzIG9yIGFycmF5cyBvZiBudW1iZXJzIG9yIFZpYnJhdGlvbkNtZHMuXCIpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdmlicmF0ZSh0aGlzLl9zb3J0ZXIsIHRoaXMuX2RldmljZVB0ciwgbXNnU3BlZWRzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyByb3RhdGUoc3BlZWRzOiBudW1iZXIgfCBSb3RhdGlvbkNtZFtdLCBjbG9ja3dpc2U6IGJvb2xlYW4gfCB1bmRlZmluZWQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuY2hlY2tBbGxvd2VkTWVzc2FnZVR5cGUoQnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZS5Sb3RhdGVDbWQpO1xyXG4gICAgbGV0IG1zZ1JvdGF0aW9uczogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnRbXTtcclxuICAgIGlmICh0eXBlb2YgKHNwZWVkcykgPT09IFwibnVtYmVyXCIgJiYgY2xvY2t3aXNlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gV2UgY2FuIHNraXAgdGhlIGNoZWNrIGhlcmUgc2luY2Ugd2UncmUgYnVpbGRpbmcgdGhlIGNvbW1hbmQgYXJyYXkgb3Vyc2VsdmVzLlxyXG4gICAgICBjb25zdCBmZWF0dXJlcyA9IHRoaXMuX21lc3NhZ2VBdHRyaWJ1dGVzLmdldChCdXR0cGx1Z0RldmljZU1lc3NhZ2VUeXBlLlJvdGF0ZUNtZCkhLmZlYXR1cmVDb3VudCE7XHJcbiAgICAgIG1zZ1JvdGF0aW9ucyA9IEFycmF5LmZyb20oe2xlbmd0aDogZmVhdHVyZXN9LCAoXywgaSkgPT4gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnQuY3JlYXRlKHtcclxuICAgICAgICBpbmRleDogaSxcclxuICAgICAgICBzcGVlZDogc3BlZWRzLFxyXG4gICAgICAgIGNsb2Nrd2lzZTogY2xvY2t3aXNlXHJcbiAgICAgIH0pKTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzcGVlZHMpICYmIHNwZWVkcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBSb3RhdGlvbkNtZCkpIHtcclxuICAgICAgbXNnUm90YXRpb25zID0gKHNwZWVkcyBhcyBhbnkpLm1hcCh4ID0+IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ29tcG9uZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IHguSW5kZXgsXHJcbiAgICAgICAgc3BlZWQ6IHguU3BlZWQsXHJcbiAgICAgICAgY2xvY2t3aXNlOiB4LkNsb2Nrd2lzZVxyXG4gICAgICB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgQnV0dHBsdWdEZXZpY2VFcnJvcihcInJvdGF0ZSBjYW4gb25seSB0YWtlIG51bWJlci9ib29sZWFuIG9yIGFycmF5cyBvZiBSb3RhdGVDbWRzLlwiKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHJvdGF0ZSh0aGlzLl9zb3J0ZXIsIHRoaXMuX2RldmljZVB0ciwgbXNnUm90YXRpb25zKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBsaW5lYXIocG9zaXRpb246IG51bWJlciB8IFZlY3RvckNtZFtdLCBkdXJhdGlvbjogbnVtYmVyIHwgdW5kZWZpbmVkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLmNoZWNrQWxsb3dlZE1lc3NhZ2VUeXBlKEJ1dHRwbHVnRGV2aWNlTWVzc2FnZVR5cGUuTGluZWFyQ21kKTtcclxuICAgIGxldCBtc2dWZWN0b3JzOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFtdO1xyXG4gICAgaWYgKHR5cGVvZiAocG9zaXRpb24pID09PSBcIm51bWJlclwiICYmIGR1cmF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gV2UgY2FuIHNraXAgdGhlIGNoZWNrIGhlcmUgc2luY2Ugd2UncmUgYnVpbGRpbmcgdGhlIGNvbW1hbmQgYXJyYXkgb3Vyc2VsdmVzLlxyXG4gICAgICBjb25zdCBmZWF0dXJlcyA9IHRoaXMuX21lc3NhZ2VBdHRyaWJ1dGVzLmdldChCdXR0cGx1Z0RldmljZU1lc3NhZ2VUeXBlLkxpbmVhckNtZCkhLmZlYXR1cmVDb3VudCE7XHJcbiAgICAgIG1zZ1ZlY3RvcnMgPSBBcnJheS5mcm9tKHtsZW5ndGg6IGZlYXR1cmVzfSwgKF8sIGkpID0+IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxyXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblxyXG4gICAgICB9KSk7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocG9zaXRpb24pICYmIHBvc2l0aW9uLmV2ZXJ5KHggPT4geCBpbnN0YW5jZW9mIFZlY3RvckNtZCkpIHtcclxuICAgICAgbXNnVmVjdG9ycyA9IHBvc2l0aW9uLm1hcCh4ID0+IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuTGluZWFyQ29tcG9uZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IHguSW5kZXgsXHJcbiAgICAgICAgcG9zaXRpb246IHguUG9zaXRpb24sXHJcbiAgICAgICAgZHVyYXRpb246IHguRHVyYXRpb25cclxuICAgICAgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEJ1dHRwbHVnRGV2aWNlRXJyb3IoXCJsaW5lYXIgY2FuIG9ubHkgdGFrZSBudW1iZXIvbnVtYmVyIG9yIGFycmF5cyBvZiBWZWN0b3JDbWRzLlwiKTtcclxuICAgIH1cclxuICAgIGF3YWl0IGxpbmVhcih0aGlzLl9zb3J0ZXIsIHRoaXMuX2RldmljZVB0ciwgbXNnVmVjdG9ycyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgYmF0dGVyeUxldmVsKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICB0aGlzLmNoZWNrQWxsb3dlZE1lc3NhZ2VUeXBlKEJ1dHRwbHVnRGV2aWNlTWVzc2FnZVR5cGUuQmF0dGVyeUxldmVsQ21kKTtcclxuICAgIGxldCBiYXR0ZXJ5TXNnID0gYXdhaXQgYmF0dGVyeUxldmVsKHRoaXMuX3NvcnRlciwgdGhpcy5fZGV2aWNlUHRyKTtcclxuICAgIGlmIChiYXR0ZXJ5TXNnLm1lc3NhZ2U/LmRldmljZUV2ZW50Py5iYXR0ZXJ5TGV2ZWxSZWFkaW5nKSB7XHJcbiAgICAgIGxldCByZWFkaW5nID0gYmF0dGVyeU1zZy5tZXNzYWdlPy5kZXZpY2VFdmVudD8uYmF0dGVyeUxldmVsUmVhZGluZztcclxuICAgICAgcmV0dXJuIHJlYWRpbmcucmVhZGluZyE7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgQnV0dHBsdWdEZXZpY2VFcnJvcihcIldyb25nIHJlcGx5IG1lc3NhZ2UgcmVjZWl2ZWQgZm9yIGJhdHRlcnlMZXZlbDogXCIgKyBiYXR0ZXJ5TXNnKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyByc3NpTGV2ZWwoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIHRoaXMuY2hlY2tBbGxvd2VkTWVzc2FnZVR5cGUoQnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZS5SU1NJTGV2ZWxDbWQpO1xyXG4gICAgbGV0IHJzc2lNc2cgPSBhd2FpdCByc3NpTGV2ZWwodGhpcy5fc29ydGVyLCB0aGlzLl9kZXZpY2VQdHIpO1xyXG4gICAgaWYgKHJzc2lNc2cubWVzc2FnZT8uZGV2aWNlRXZlbnQ/LnJzc2lMZXZlbFJlYWRpbmcpIHtcclxuICAgICAgcmV0dXJuIHJzc2lNc2cubWVzc2FnZT8uZGV2aWNlRXZlbnQ/LnJzc2lMZXZlbFJlYWRpbmcucmVhZGluZyE7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgQnV0dHBsdWdEZXZpY2VFcnJvcihcIldyb25nIHJlcGx5IG1lc3NhZ2UgcmVjZWl2ZWQgZm9yIHJzc2lMZXZlbDogXCIgKyByc3NpTXNnKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyByYXdSZWFkKGVuZHBvaW50OiBCdXR0cGx1Zy5FbmRwb2ludCwgZXhwZWN0ZWRMZW5ndGg6IG51bWJlciwgdGltZW91dDogbnVtYmVyKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XHJcbiAgICB0aGlzLmNoZWNrQWxsb3dlZE1lc3NhZ2VUeXBlKEJ1dHRwbHVnRGV2aWNlTWVzc2FnZVR5cGUuUmF3UmVhZENtZCk7XHJcbiAgICBsZXQgcmVhZGluZ01zZyA9IGF3YWl0IHJhd1JlYWQodGhpcy5fc29ydGVyLCB0aGlzLl9kZXZpY2VQdHIsIGVuZHBvaW50LCBleHBlY3RlZExlbmd0aCwgdGltZW91dCk7XHJcbiAgICBpZiAocmVhZGluZ01zZy5tZXNzYWdlPy5kZXZpY2VFdmVudD8ucmF3UmVhZGluZykge1xyXG4gICAgICByZXR1cm4gcmVhZGluZ01zZy5tZXNzYWdlLmRldmljZUV2ZW50LnJhd1JlYWRpbmcuZGF0YSE7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgQnV0dHBsdWdEZXZpY2VFcnJvcihcIldyb25nIHJlcGx5IG1lc3NhZ2UgcmVjZWl2ZWQgZm9yIHJhd1JlYWQ6IFwiICsgcmVhZGluZ01zZyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgcmF3V3JpdGUoZW5kcG9pbnQ6IEJ1dHRwbHVnLkVuZHBvaW50LCBkYXRhOiBVaW50OEFycmF5LCB3cml0ZVdpdGhSZXNwb25zZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5jaGVja0FsbG93ZWRNZXNzYWdlVHlwZShCdXR0cGx1Z0RldmljZU1lc3NhZ2VUeXBlLlJhd1dyaXRlQ21kKTtcclxuICAgIGF3YWl0IHJhd1dyaXRlKHRoaXMuX3NvcnRlciwgdGhpcy5fZGV2aWNlUHRyLCBlbmRwb2ludCwgZGF0YSwgd3JpdGVXaXRoUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIHJhd1N1YnNjcmliZShlbmRwb2ludDogQnV0dHBsdWcuRW5kcG9pbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuY2hlY2tBbGxvd2VkTWVzc2FnZVR5cGUoQnV0dHBsdWdEZXZpY2VNZXNzYWdlVHlwZS5SYXdTdWJzY3JpYmVDbWQpO1xyXG4gICAgYXdhaXQgcmF3U3Vic2NyaWJlKHRoaXMuX3NvcnRlciwgdGhpcy5fZGV2aWNlUHRyLCBlbmRwb2ludCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgcmF3VW5zdWJzY3JpYmUoZW5kcG9pbnQ6IEJ1dHRwbHVnLkVuZHBvaW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLmNoZWNrQWxsb3dlZE1lc3NhZ2VUeXBlKEJ1dHRwbHVnRGV2aWNlTWVzc2FnZVR5cGUuUmF3VW5zdWJzY3JpYmVDbWQpO1xyXG4gICAgYXdhaXQgcmF3VW5zdWJzY3JpYmUodGhpcy5fc29ydGVyLCB0aGlzLl9kZXZpY2VQdHIsIGVuZHBvaW50KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBzdG9wKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgc3RvcERldmljZSh0aGlzLl9zb3J0ZXIsIHRoaXMuX2RldmljZVB0cik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZW1pdERpc2Nvbm5lY3RlZCgpIHtcclxuICAgIHRoaXMuZW1pdChcImRldmljZXJlbW92ZWRcIik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJ1dHRwbHVnIH0gZnJvbSBcIi4vYnV0dHBsdWdfZmZpXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQnV0dHBsdWdFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAvKlxyXG5cclxuICBwdWJsaWMgZ2V0IEVycm9yQ2xhc3MoKTogTWVzc2FnZXMuRXJyb3JDbGFzcyB7XHJcbiAgICByZXR1cm4gdGhpcy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBJbm5lckVycm9yKCk6IEVycm9yIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLmlubmVyRXJyb3I7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IElkKCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IEVycm9yTWVzc2FnZSgpOiBNZXNzYWdlcy5CdXR0cGx1Z01lc3NhZ2Uge1xyXG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlcy5FcnJvcih0aGlzLm1lc3NhZ2UsIHRoaXMuRXJyb3JDbGFzcywgdGhpcy5JZCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEZyb21FcnJvcihhRXJyb3I6IE1lc3NhZ2VzLkVycm9yKSB7XHJcbiAgICBzd2l0Y2ggKGFFcnJvci5FcnJvckNvZGUpIHtcclxuICAgICAgY2FzZSBNZXNzYWdlcy5FcnJvckNsYXNzLkVSUk9SX0RFVklDRTpcclxuICAgICAgICByZXR1cm4gbmV3IEJ1dHRwbHVnRGV2aWNlRXJyb3IoYUVycm9yLkVycm9yTWVzc2FnZSwgYUVycm9yLklkKTtcclxuICAgICAgY2FzZSBNZXNzYWdlcy5FcnJvckNsYXNzLkVSUk9SX0lOSVQ6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCdXR0cGx1Z0luaXRFcnJvcihhRXJyb3IuRXJyb3JNZXNzYWdlLCBhRXJyb3IuSWQpO1xyXG4gICAgICBjYXNlIE1lc3NhZ2VzLkVycm9yQ2xhc3MuRVJST1JfVU5LTk9XTjpcclxuICAgICAgICByZXR1cm4gbmV3IEJ1dHRwbHVnVW5rbm93bkVycm9yKGFFcnJvci5FcnJvck1lc3NhZ2UsIGFFcnJvci5JZCk7XHJcbiAgICAgIGNhc2UgTWVzc2FnZXMuRXJyb3JDbGFzcy5FUlJPUl9QSU5HOlxyXG4gICAgICAgIHJldHVybiBuZXcgQnV0dHBsdWdQaW5nRXJyb3IoYUVycm9yLkVycm9yTWVzc2FnZSwgYUVycm9yLklkKTtcclxuICAgICAgY2FzZSBNZXNzYWdlcy5FcnJvckNsYXNzLkVSUk9SX01TRzpcclxuICAgICAgICByZXR1cm4gbmV3IEJ1dHRwbHVnTWVzc2FnZUVycm9yKGFFcnJvci5FcnJvck1lc3NhZ2UsIGFFcnJvci5JZCk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXNzYWdlIHR5cGUgJHthRXJyb3IuRXJyb3JDb2RlfSBub3QgaGFuZGxlZGApO1xyXG4gICAgfVxyXG4gIH1cclxuKi9cclxuICBwdWJsaWMgaW5uZXJFcnJvcjogRXJyb3IgfCB1bmRlZmluZWQ7XHJcbiAgcHVibGljIG1lc3NhZ2VJZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoYU1lc3NhZ2U6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYUlkOiBudW1iZXIgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhSW5uZXI/OiBFcnJvcikge1xyXG4gICAgc3VwZXIoYU1lc3NhZ2UpO1xyXG4gICAgdGhpcy5pbm5lckVycm9yID0gYUlubmVyO1xyXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBhSWQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQnV0dHBsdWdIYW5kc2hha2VFcnJvciBleHRlbmRzIEJ1dHRwbHVnRXJyb3Ige1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihhTWVzc2FnZTogc3RyaW5nLCBhSWQ6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKGFNZXNzYWdlLCBhSWQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRwbHVnRGV2aWNlRXJyb3IgZXh0ZW5kcyBCdXR0cGx1Z0Vycm9yIHtcclxuICBwdWJsaWMgY29uc3RydWN0b3IoYU1lc3NhZ2U6IHN0cmluZywgYUlkOiBudW1iZXIgPSAwKSB7XHJcbiAgICBzdXBlcihhTWVzc2FnZSwgYUlkKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0cGx1Z01lc3NhZ2VFcnJvciBleHRlbmRzIEJ1dHRwbHVnRXJyb3Ige1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihhTWVzc2FnZTogc3RyaW5nLCBhSWQ6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKGFNZXNzYWdlLCBhSWQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRwbHVnUGluZ0Vycm9yIGV4dGVuZHMgQnV0dHBsdWdFcnJvciB7XHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKGFNZXNzYWdlOiBzdHJpbmcsIGFJZDogbnVtYmVyID0gMCkge1xyXG4gICAgc3VwZXIoYU1lc3NhZ2UsIGFJZCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQnV0dHBsdWdVbmtub3duRXJyb3IgZXh0ZW5kcyBCdXR0cGx1Z0Vycm9yIHtcclxuICBwdWJsaWMgY29uc3RydWN0b3IoYU1lc3NhZ2U6IHN0cmluZywgYUlkOiBudW1iZXIgPSAwKSB7XHJcbiAgICBzdXBlcihhTWVzc2FnZSwgYUlkKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0cGx1Z0NsaWVudENvbm5lY3RvckVycm9yIGV4dGVuZHMgQnV0dHBsdWdFcnJvciB7XHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKGFNZXNzYWdlOiBzdHJpbmcsIGFJZDogbnVtYmVyID0gMCkge1xyXG4gICAgc3VwZXIoYU1lc3NhZ2UsIGFJZCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFBCdWZFcnJvcihlcnI6IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuSUVycm9yLCBpZDogbnVtYmVyKTogQnV0dHBsdWdFcnJvciB7XHJcbiAgaWYgKGVyci5lcnJvclR5cGUgPT09IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuQnV0dHBsdWdFcnJvclR5cGUuQnV0dHBsdWdDb25uZWN0b3JFcnJvcikge1xyXG4gICAgcmV0dXJuIG5ldyBCdXR0cGx1Z0NsaWVudENvbm5lY3RvckVycm9yKGVyci5tZXNzYWdlISwgaWQpO1xyXG4gIH1cclxuICBpZiAoZXJyLmVycm9yVHlwZSA9PT0gQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5CdXR0cGx1Z0Vycm9yVHlwZS5CdXR0cGx1Z0RldmljZUVycm9yKSB7XHJcbiAgICByZXR1cm4gbmV3IEJ1dHRwbHVnRGV2aWNlRXJyb3IoZXJyLm1lc3NhZ2UhLCBpZCk7XHJcbiAgfVxyXG4gIGlmIChlcnIuZXJyb3JUeXBlID09PSBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkJ1dHRwbHVnRXJyb3JUeXBlLkJ1dHRwbHVnSGFuZHNoYWtlRXJyb3IpIHtcclxuICAgIHJldHVybiBuZXcgQnV0dHBsdWdIYW5kc2hha2VFcnJvcihlcnIubWVzc2FnZSEsIGlkKTtcclxuICB9XHJcbiAgaWYgKGVyci5lcnJvclR5cGUgPT09IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UuQnV0dHBsdWdFcnJvclR5cGUuQnV0dHBsdWdNZXNzYWdlRXJyb3IpIHtcclxuICAgIHJldHVybiBuZXcgQnV0dHBsdWdNZXNzYWdlRXJyb3IoZXJyLm1lc3NhZ2UhLCBpZCk7XHJcbiAgfVxyXG4gIGlmIChlcnIuZXJyb3JUeXBlID09PSBCdXR0cGx1Zy5TZXJ2ZXJNZXNzYWdlLkJ1dHRwbHVnRXJyb3JUeXBlLkJ1dHRwbHVnUGluZ0Vycm9yKSB7XHJcbiAgICByZXR1cm4gbmV3IEJ1dHRwbHVnUGluZ0Vycm9yKGVyci5tZXNzYWdlISwgaWQpO1xyXG4gIH1cclxuICBpZiAoZXJyLmVycm9yVHlwZSA9PT0gQnV0dHBsdWcuU2VydmVyTWVzc2FnZS5CdXR0cGx1Z0Vycm9yVHlwZS5CdXR0cGx1Z1Vua25vd25FcnJvcikge1xyXG4gICAgcmV0dXJuIG5ldyBCdXR0cGx1Z1Vua25vd25FcnJvcihlcnIubWVzc2FnZSEsIGlkKTtcclxuICB9XHJcbiAgdGhyb3cgbmV3IEJ1dHRwbHVnVW5rbm93bkVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZXJyb3I6IFwiICsgZXJyKTtcclxufVxyXG4iLCJcclxuaW1wb3J0IHsgQnV0dHBsdWdFbWJlZGRlZENvbm5lY3Rvck9wdGlvbnMsIEJ1dHRwbHVnV2Vic29ja2V0Q29ubmVjdG9yT3B0aW9ucyB9IGZyb20gXCIuL2Nvbm5lY3RvcnNcIjtcclxuaW1wb3J0IHsgQnV0dHBsdWdNZXNzYWdlU29ydGVyIH0gZnJvbSBcIi4vc29ydGVyXCI7XHJcbmltcG9ydCB7IEJ1dHRwbHVnIH0gZnJvbSBcIi4vYnV0dHBsdWdfZmZpXCI7XHJcblxyXG5mdW5jdGlvbiBtdXN0X3J1bl9pbml0XzEoYTogYW55IHwgdW5kZWZpbmVkKTogYW55IHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHJ1biBidXR0cGx1Z0luaXQoKSBhc3luYyBiZWZvcmUgY2FsbGluZyBhbnkgQnV0dHBsdWcgbWV0aG9kcyFcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG11c3RfcnVuX2luaXRfMihhOiBhbnkgfCB1bmRlZmluZWQsIGI6IGFueSB8IHVuZGVmaW5lZCk6IGFueSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBydW4gYnV0dHBsdWdJbml0KCkgYXN5bmMgYmVmb3JlIGNhbGxpbmcgYW55IEJ1dHRwbHVnIG1ldGhvZHMhXCIpO1xyXG59XHJcbi8vIGltcG9ydCB7IGJ1dHRwbHVnX2NyZWF0ZV9jbGllbnQsIGJ1dHRwbHVnX2ZyZWVfY2xpZW50LCBidXR0cGx1Z19wYXJzZV9jbGllbnRfbWVzc2FnZSwgYnV0dHBsdWdfYWN0aXZhdGVfZW52X2xvZ2dlciwgYnV0dHBsdWdfZnJlZV9kZXZpY2UsIGJ1dHRwbHVnX2NyZWF0ZV9kZXZpY2UsIGJ1dHRwbHVnX3BhcnNlX2RldmljZV9tZXNzYWdlIH0gZnJvbSBcIi4vYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaVwiO1xyXG5cclxubGV0IGJ1dHRwbHVnX2NyZWF0ZV9jbGllbnQgPSBtdXN0X3J1bl9pbml0XzI7XHJcbmxldCBidXR0cGx1Z19mcmVlX2NsaWVudCA9IG11c3RfcnVuX2luaXRfMTtcclxubGV0IGJ1dHRwbHVnX3BhcnNlX2NsaWVudF9tZXNzYWdlID0gbXVzdF9ydW5faW5pdF8yO1xyXG5sZXQgYnV0dHBsdWdfYWN0aXZhdGVfZW52X2xvZ2dlciA9IG11c3RfcnVuX2luaXRfMTtcclxubGV0IGJ1dHRwbHVnX2ZyZWVfZGV2aWNlID0gbXVzdF9ydW5faW5pdF8xO1xyXG5sZXQgYnV0dHBsdWdfY3JlYXRlX2RldmljZSA9IG11c3RfcnVuX2luaXRfMjtcclxubGV0IGJ1dHRwbHVnX3BhcnNlX2RldmljZV9tZXNzYWdlID0gbXVzdF9ydW5faW5pdF8yO1xyXG5sZXQgYnV0dHBsdWdfaGFzX2luaXRfcnVuID0gZmFsc2U7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnV0dHBsdWdJbml0KCkge1xyXG4gIGlmIChidXR0cGx1Z19oYXNfaW5pdF9ydW4pIHtcclxuICAgIGNvbnNvbGUubG9nKFwiYnV0dHBsdWdJbml0IGZ1bmN0aW9uIGhhcyBhbHJlYWR5IHJ1biBzdWNjZXNzZnVsbHkuIFRoaXMgb25seSBuZWVkcyB0byBiZSBydW4gb25jZSwgYnV0IGRvZXNuJ3QgYWZmZWN0IGFueXRoaW5nIChvdGhlciB0aGFuIHByaW50aW5nIHRoaXMgbWVzc2FnZSkgaWYgY2FsbGVkIGFnYWluLlwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgbGV0IGluZGV4ID0gYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tQcmVmZXRjaDogMSAqLyBcIi4vYnV0dHBsdWctcnMtZmZpL2J1dHRwbHVnX3JzX2ZmaVwiKS5jYXRjaCgoZSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgfSk7XHJcbiAgY29uc29sZS5sb2coaW5kZXgpO1xyXG4gIGJ1dHRwbHVnX2NyZWF0ZV9jbGllbnQgPSBpbmRleC5idXR0cGx1Z19jcmVhdGVfY2xpZW50O1xyXG4gIGJ1dHRwbHVnX2ZyZWVfY2xpZW50ID0gaW5kZXguYnV0dHBsdWdfZnJlZV9jbGllbnQ7XHJcbiAgYnV0dHBsdWdfcGFyc2VfY2xpZW50X21lc3NhZ2UgPSBpbmRleC5idXR0cGx1Z19wYXJzZV9jbGllbnRfbWVzc2FnZTtcclxuICBidXR0cGx1Z19hY3RpdmF0ZV9lbnZfbG9nZ2VyID0gaW5kZXguYnV0dHBsdWdfYWN0aXZhdGVfZW52X2xvZ2dlcjtcclxuICBidXR0cGx1Z19mcmVlX2RldmljZSA9IGluZGV4LmJ1dHRwbHVnX2ZyZWVfZGV2aWNlO1xyXG4gIGJ1dHRwbHVnX2NyZWF0ZV9kZXZpY2UgPSBpbmRleC5idXR0cGx1Z19jcmVhdGVfZGV2aWNlO1xyXG4gIGJ1dHRwbHVnX3BhcnNlX2RldmljZV9tZXNzYWdlID0gaW5kZXguYnV0dHBsdWdfcGFyc2VfZGV2aWNlX21lc3NhZ2U7XHJcbiAgYnV0dHBsdWdfaGFzX2luaXRfcnVuID0gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VuZENsaWVudE1lc3NhZ2Uoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGNsaWVudFB0cjogbnVtYmVyLCBtZXNzYWdlOiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgcHJvbWlzZSA9IHNvcnRlci5QcmVwYXJlT3V0Z29pbmdNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gIGxldCBidWZmZXIgPSBCdWZmZXIuZnJvbShCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLmVuY29kZShtZXNzYWdlKS5maW5pc2goKSlcclxuICBidXR0cGx1Z19wYXJzZV9jbGllbnRfbWVzc2FnZShjbGllbnRQdHIsIGJ1ZmZlcik7XHJcbiAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0RW1iZWRkZWQoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGNsaWVudFB0cjogbnVtYmVyLCBvcHRpb25zOiBCdXR0cGx1Z0VtYmVkZGVkQ29ubmVjdG9yT3B0aW9ucyk6IFByb21pc2U8QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPiB7XHJcbiAgbGV0IG1zZyA9IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuY3JlYXRlKHtcclxuICAgIG1lc3NhZ2U6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICBjb25uZWN0TG9jYWw6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdExvY2FsLmNyZWF0ZSh7XHJcbiAgICAgICAgc2VydmVyTmFtZTogb3B0aW9ucy5TZXJ2ZXJOYW1lLFxyXG4gICAgICAgIGFsbG93UmF3TWVzc2FnZXM6IG9wdGlvbnMuQWxsb3dSYXdNZXNzYWdlcyxcclxuICAgICAgICBkZXZpY2VDb25maWd1cmF0aW9uSnNvbjogb3B0aW9ucy5EZXZpY2VDb25maWdKU09OLFxyXG4gICAgICAgIHVzZXJEZXZpY2VDb25maWd1cmF0aW9uSnNvbjogb3B0aW9ucy5Vc2VyRGV2aWNlQ29uZmlnSlNPTixcclxuICAgICAgICBjb21tTWFuYWdlclR5cGVzOiBvcHRpb25zLkRldmljZUNvbW11bmljYXRpb25NYW5hZ2VyVHlwZXMsXHJcbiAgICAgICAgbWF4UGluZ1RpbWU6IG9wdGlvbnMuTWF4UGluZ1RpbWVcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZENsaWVudE1lc3NhZ2Uoc29ydGVyLCBjbGllbnRQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0V2Vic29ja2V0KHNvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyLCBjbGllbnRQdHI6IG51bWJlciwgb3B0aW9uczogQnV0dHBsdWdXZWJzb2NrZXRDb25uZWN0b3JPcHRpb25zKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIGNvbm5lY3RXZWJzb2NrZXQ6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuQ29ubmVjdFdlYnNvY2tldC5jcmVhdGUoe1xyXG4gICAgICAgIGFkZHJlc3M6IG9wdGlvbnMuQWRkcmVzc1xyXG4gICAgICB9KVxyXG4gICAgfSksXHJcbiAgICBpZDogMVxyXG4gIH0pO1xyXG4gIHJldHVybiBzZW5kQ2xpZW50TWVzc2FnZShzb3J0ZXIsIGNsaWVudFB0ciwgbXNnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc2Nvbm5lY3Qoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGNsaWVudFB0cjogbnVtYmVyKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIGRpc2Nvbm5lY3Q6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRGlzY29ubmVjdC5jcmVhdGUoe30pXHJcbiAgICB9KVxyXG4gIH0pO1xyXG4gIHJldHVybiBzZW5kQ2xpZW50TWVzc2FnZShzb3J0ZXIsIGNsaWVudFB0ciwgbXNnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0U2Nhbm5pbmcoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGNsaWVudFB0cjogbnVtYmVyKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuQ2xpZW50TWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIHN0YXJ0U2Nhbm5pbmc6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RhcnRTY2FubmluZy5jcmVhdGUoe30pXHJcbiAgICB9KSxcclxuICAgIGlkOiAxXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHNlbmRDbGllbnRNZXNzYWdlKHNvcnRlciwgY2xpZW50UHRyLCBtc2cpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RvcFNjYW5uaW5nKHNvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyLCBjbGllbnRQdHI6IG51bWJlcik6IFByb21pc2U8QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPiB7XHJcbiAgbGV0IG1zZyA9IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuY3JlYXRlKHtcclxuICAgIG1lc3NhZ2U6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuRkZJTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICBzdG9wU2Nhbm5pbmc6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcFNjYW5uaW5nLmNyZWF0ZSh7fSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZENsaWVudE1lc3NhZ2Uoc29ydGVyLCBjbGllbnRQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdG9wQWxsRGV2aWNlcyhzb3J0ZXI6IEJ1dHRwbHVnTWVzc2FnZVNvcnRlciwgY2xpZW50UHRyOiBudW1iZXIpOiBQcm9taXNlPEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZT4ge1xyXG4gIGxldCBtc2cgPSBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICBtZXNzYWdlOiBCdXR0cGx1Zy5DbGllbnRNZXNzYWdlLkZGSU1lc3NhZ2UuY3JlYXRlKHtcclxuICAgICAgc3RvcEFsbERldmljZXM6IEJ1dHRwbHVnLkNsaWVudE1lc3NhZ2UuU3RvcEFsbERldmljZXMuY3JlYXRlKHt9KVxyXG4gICAgfSksXHJcbiAgICBpZDogMVxyXG4gIH0pO1xyXG4gIHJldHVybiBzZW5kQ2xpZW50TWVzc2FnZShzb3J0ZXIsIGNsaWVudFB0ciwgbXNnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGRldmljZVB0cjogbnVtYmVyLCBtZXNzYWdlOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgcHJvbWlzZSA9IHNvcnRlci5QcmVwYXJlT3V0Z29pbmdNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gIGxldCBidWZmZXIgPSBCdWZmZXIuZnJvbShCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLmVuY29kZShtZXNzYWdlKS5maW5pc2goKSlcclxuICBidXR0cGx1Z19wYXJzZV9kZXZpY2VfbWVzc2FnZShkZXZpY2VQdHIsIGJ1ZmZlcik7XHJcbiAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2aWJyYXRlKHNvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyLCBkZXZpY2VQdHI6IG51bWJlciwgc3BlZWRzOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDb21wb25lbnRbXSk6IFByb21pc2U8QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPiB7XHJcbiAgbGV0IG1zZyA9IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuY3JlYXRlKHtcclxuICAgIG1lc3NhZ2U6IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICB2aWJyYXRlQ21kOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlZpYnJhdGVDbWQuY3JlYXRlKHtcclxuICAgICAgICBzcGVlZHM6IHNwZWVkc1xyXG4gICAgICB9KVxyXG4gICAgfSksXHJcbiAgICBpZDogMVxyXG4gIH0pO1xyXG4gIHJldHVybiBzZW5kRGV2aWNlTWVzc2FnZShzb3J0ZXIsIGRldmljZVB0ciwgbXNnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShzb3J0ZXI6IEJ1dHRwbHVnTWVzc2FnZVNvcnRlciwgZGV2aWNlUHRyOiBudW1iZXIsIHJvdGF0aW9uczogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5Sb3RhdGVDb21wb25lbnRbXSk6IFByb21pc2U8QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPiB7XHJcbiAgbGV0IG1zZyA9IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuY3JlYXRlKHtcclxuICAgIG1lc3NhZ2U6IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICByb3RhdGVDbWQ6IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuUm90YXRlQ21kLmNyZWF0ZSh7XHJcbiAgICAgICAgcm90YXRpb25zOiByb3RhdGlvbnNcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyLCBkZXZpY2VQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXIoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGRldmljZVB0cjogbnVtYmVyLCB2ZWN0b3JzOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkxpbmVhckNvbXBvbmVudFtdKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIGxpbmVhckNtZDogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5MaW5lYXJDbWQuY3JlYXRlKHtcclxuICAgICAgICBtb3ZlbWVudHM6IHZlY3RvcnNcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyLCBkZXZpY2VQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdG9wRGV2aWNlKHNvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyLCBkZXZpY2VQdHI6IG51bWJlcik6IFByb21pc2U8QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPiB7XHJcbiAgbGV0IG1zZyA9IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuY3JlYXRlKHtcclxuICAgIG1lc3NhZ2U6IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICBzdG9wRGV2aWNlQ21kOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlN0b3BEZXZpY2VDbWQuY3JlYXRlKHtcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyLCBkZXZpY2VQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiYXR0ZXJ5TGV2ZWwoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGRldmljZVB0cjogbnVtYmVyKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIGJhdHRlcnlMZXZlbENtZDogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5CYXR0ZXJ5TGV2ZWxDbWQuY3JlYXRlKHtcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyLCBkZXZpY2VQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByc3NpTGV2ZWwoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGRldmljZVB0cjogbnVtYmVyKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIHJzc2lMZXZlbENtZDogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SU1NJTGV2ZWxDbWQuY3JlYXRlKHtcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyLCBkZXZpY2VQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYXdSZWFkKHNvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyLCBkZXZpY2VQdHI6IG51bWJlciwgZW5kcG9pbnQ6IEJ1dHRwbHVnLkVuZHBvaW50LCBleHBlY3RlZExlbmd0aDogbnVtYmVyLCB0aW1lb3V0OiBudW1iZXIpOiBQcm9taXNlPEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZT4ge1xyXG4gIGxldCBtc2cgPSBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICBtZXNzYWdlOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLkZGSU1lc3NhZ2UuY3JlYXRlKHtcclxuICAgICAgcmF3UmVhZENtZDogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdSZWFkQ21kLmNyZWF0ZSh7XHJcbiAgICAgICAgZW5kcG9pbnQ6IGVuZHBvaW50LFxyXG4gICAgICAgIGV4cGVjdGVkTGVuZ3RoOiBleHBlY3RlZExlbmd0aCxcclxuICAgICAgICB0aW1lb3V0OiB0aW1lb3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KSxcclxuICAgIGlkOiAxXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHNlbmREZXZpY2VNZXNzYWdlKHNvcnRlciwgZGV2aWNlUHRyLCBtc2cpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmF3V3JpdGUoc29ydGVyOiBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIsIGRldmljZVB0cjogbnVtYmVyLCBlbmRwb2ludDogQnV0dHBsdWcuRW5kcG9pbnQsIGRhdGE6IFVpbnQ4QXJyYXksIHdyaXRlV2l0aFJlc3BvbnNlOiBib29sZWFuKTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIHJhd1dyaXRlQ21kOiBCdXR0cGx1Zy5EZXZpY2VNZXNzYWdlLlJhd1dyaXRlQ21kLmNyZWF0ZSh7XHJcbiAgICAgICAgZW5kcG9pbnQ6IGVuZHBvaW50LFxyXG4gICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgd3JpdGVXaXRoUmVzcG9uc2U6IHdyaXRlV2l0aFJlc3BvbnNlXHJcbiAgICAgIH0pXHJcbiAgICB9KSxcclxuICAgIGlkOiAxXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHNlbmREZXZpY2VNZXNzYWdlKHNvcnRlciwgZGV2aWNlUHRyLCBtc2cpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmF3U3Vic2NyaWJlKHNvcnRlcjogQnV0dHBsdWdNZXNzYWdlU29ydGVyLCBkZXZpY2VQdHI6IG51bWJlciwgZW5kcG9pbnQ6IEJ1dHRwbHVnLkVuZHBvaW50KTogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICBsZXQgbXNnID0gQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgbWVzc2FnZTogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5GRklNZXNzYWdlLmNyZWF0ZSh7XHJcbiAgICAgIHJhd1N1YnNjcmliZUNtZDogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdTdWJzY3JpYmVDbWQuY3JlYXRlKHtcclxuICAgICAgICBlbmRwb2ludDogZW5kcG9pbnRcclxuICAgICAgfSlcclxuICAgIH0pLFxyXG4gICAgaWQ6IDFcclxuICB9KTtcclxuICByZXR1cm4gc2VuZERldmljZU1lc3NhZ2Uoc29ydGVyLCBkZXZpY2VQdHIsIG1zZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYXdVbnN1YnNjcmliZShzb3J0ZXI6IEJ1dHRwbHVnTWVzc2FnZVNvcnRlciwgZGV2aWNlUHRyOiBudW1iZXIsIGVuZHBvaW50OiBCdXR0cGx1Zy5FbmRwb2ludCk6IFByb21pc2U8QnV0dHBsdWcuQnV0dHBsdWdGRklTZXJ2ZXJNZXNzYWdlPiB7XHJcbiAgbGV0IG1zZyA9IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuY3JlYXRlKHtcclxuICAgIG1lc3NhZ2U6IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UuRkZJTWVzc2FnZS5jcmVhdGUoe1xyXG4gICAgICByYXdVbnN1YnNjcmliZUNtZDogQnV0dHBsdWcuRGV2aWNlTWVzc2FnZS5SYXdVbnN1YnNjcmliZUNtZC5jcmVhdGUoe1xyXG4gICAgICAgIGVuZHBvaW50OiBlbmRwb2ludFxyXG4gICAgICB9KVxyXG4gICAgfSksXHJcbiAgICBpZDogMVxyXG4gIH0pO1xyXG4gIHJldHVybiBzZW5kRGV2aWNlTWVzc2FnZShzb3J0ZXIsIGRldmljZVB0ciwgbXNnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNsaWVudFB0cihldmVudENhbGxiYWNrOiBGdW5jdGlvbiwgY2xpZW50TmFtZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICByZXR1cm4gYnV0dHBsdWdfY3JlYXRlX2NsaWVudChldmVudENhbGxiYWNrLCBjbGllbnROYW1lKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURldmljZVB0cihjbGllbnRQdHI6IG51bWJlciwgZGV2aWNlSW5kZXg6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xyXG4gIHJldHVybiBidXR0cGx1Z19jcmVhdGVfZGV2aWNlKGNsaWVudFB0ciwgZGV2aWNlSW5kZXgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZnJlZUNsaWVudFB0cihjbGllbnRQdHI6IG51bWJlcikge1xyXG4gIGJ1dHRwbHVnX2ZyZWVfY2xpZW50KGNsaWVudFB0cik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmcmVlRGV2aWNlUHRyKGRldmljZVB0cjogbnVtYmVyKSB7XHJcbiAgYnV0dHBsdWdfZnJlZV9kZXZpY2UoZGV2aWNlUHRyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlQ29uc29sZUxvZ2dlcihsb2dMZXZlbDogXCJlcnJvclwiIHwgXCJ3YXJuXCIgfCBcImluZm9cIiB8IFwiZGVidWdcIiB8IFwidHJhY2VcIikge1xyXG4gIGJ1dHRwbHVnX2FjdGl2YXRlX2Vudl9sb2dnZXIobG9nTGV2ZWwpO1xyXG59XHJcblxyXG4vKlxyXG5leHBvcnQgZnVuY3Rpb24gYWRkTG9nSGFuZGxlcihsb2dDYWxsYmFjazogRnVuY3Rpb24sIGxvZ0xldmVsOiBcImVycm9yXCIgfCBcIndhcm5cIiB8IFwiaW5mb1wiIHwgXCJkZWJ1Z1wiIHwgXCJ0cmFjZVwiLCB1c2VKU09OOiBib29sZWFuKSB7XHJcbiAgYnV0dHBsdWdfYWRkX2xvZ19oYW5kbGVyKGxvZ0NhbGxiYWNrLCBsb2dMZXZlbCwgdXNlSlNPTik7XHJcbn1cclxuKi8iLCIvKiFcclxuICogQnV0dHBsdWcgV0FTTSBTb3VyY2UgQ29kZSBGaWxlIC0gVmlzaXQgaHR0cHM6Ly9idXR0cGx1Zy5pbyBmb3IgbW9yZSBpbmZvIGFib3V0XHJcbiAqIHRoZSBwcm9qZWN0LiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtQ2xhdXNlIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUgaW4gdGhlXHJcbiAqIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDIwLTIwMjEgKGMpIE5vbnBvbHlub21pYWwgTGFicyBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqL1xyXG5cclxuZXhwb3J0ICogZnJvbSBcIi4vY2xpZW50XCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2Nvbm5lY3RvcnNcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vZGV2aWNlXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2Vycm9yc1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9mZmlcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vc29ydGVyXCI7XHJcblxyXG5pbXBvcnQgeyBCdXR0cGx1ZyB9IGZyb20gXCIuL2J1dHRwbHVnX2ZmaVwiO1xyXG5leHBvcnQgaW1wb3J0IEVuZHBvaW50ID0gQnV0dHBsdWcuRW5kcG9pbnQ7IiwiLyohXHJcbiAqIEJ1dHRwbHVnIEpTIFNvdXJjZSBDb2RlIEZpbGUgLSBWaXNpdCBodHRwczovL2J1dHRwbHVnLmlvIGZvciBtb3JlIGluZm8gYWJvdXRcclxuICogdGhlIHByb2plY3QuIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1DbGF1c2UgbGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZSBpbiB0aGVcclxuICogcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbiAqXHJcbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSBOb25wb2x5bm9taWFsIExhYnMgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEJ1dHRwbHVnIH0gZnJvbSBcIi4vYnV0dHBsdWdfZmZpXCI7XHJcbmltcG9ydCB7IGNvbnZlcnRQQnVmRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0cGx1Z01lc3NhZ2VTb3J0ZXIge1xyXG4gIHByb3RlY3RlZCBfY291bnRlcjogbnVtYmVyID0gMTtcclxuICBwcm90ZWN0ZWQgX3dhaXRpbmdNc2dzOiBNYXA8bnVtYmVyLCBbKHZhbDogQnV0dHBsdWcuU2VydmVyTWVzc2FnZSkgPT4gdm9pZCwgKGVycjogRXJyb3IpID0+IHZvaWRdPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gIH1cclxuXHJcbiAgLy8gT25lIG9mIHRoZSBwbGFjZXMgd2Ugc2hvdWxkIGFjdHVhbGx5IHJldHVybiBhIHByb21pc2UsIGFzIHdlIG5lZWQgdG8gc3RvcmVcclxuICAvLyB0aGVtIHdoaWxlIHdhaXRpbmcgZm9yIHRoZW0gdG8gcmV0dXJuIGFjcm9zcyB0aGUgbGluZS5cclxuICAvLyB0c2xpbnQ6ZGlzYWJsZTpwcm9taXNlLWZ1bmN0aW9uLWFzeW5jXHJcbiAgcHVibGljIFByZXBhcmVPdXRnb2luZ01lc3NhZ2UoYU1zZzogQnV0dHBsdWcuQ2xpZW50TWVzc2FnZSB8IEJ1dHRwbHVnLkRldmljZU1lc3NhZ2UpIDogUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+IHtcclxuICAgIGFNc2cuaWQgPSB0aGlzLl9jb3VudGVyO1xyXG4gICAgLy8gQWx3YXlzIGluY3JlbWVudCBsYXN0LCBvdGhlcndpc2Ugd2UgbWlnaHQgbG9zZSBzeW5jXHJcbiAgICB0aGlzLl9jb3VudGVyICs9IDE7XHJcbiAgICBsZXQgcmVzO1xyXG4gICAgbGV0IHJlajtcclxuICAgIGNvbnN0IG1zZ1Byb21pc2UgPSBuZXcgUHJvbWlzZTxCdXR0cGx1Zy5CdXR0cGx1Z0ZGSVNlcnZlck1lc3NhZ2U+KChyZXNvbHZlLCByZWplY3QpID0+IHsgcmVzID0gcmVzb2x2ZTsgcmVqID0gcmVqZWN0OyB9KTtcclxuICAgIHRoaXMuX3dhaXRpbmdNc2dzLnNldChhTXNnLmlkLCBbcmVzLCByZWpdKTtcclxuICAgIHJldHVybiBtc2dQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFBhcnNlSW5jb21pbmdNZXNzYWdlcyhtc2c6IEJ1dHRwbHVnLkJ1dHRwbHVnRkZJU2VydmVyTWVzc2FnZSk6IEJ1dHRwbHVnLlNlcnZlck1lc3NhZ2UgfCBudWxsIHtcclxuICAgIGlmIChtc2cuaWQgIT09IDAgJiYgdGhpcy5fd2FpdGluZ01zZ3MuaGFzKG1zZy5pZCkpIHtcclxuICAgICAgY29uc3QgW3JlcywgcmVqXSA9IHRoaXMuX3dhaXRpbmdNc2dzLmdldChtc2cuaWQpITtcclxuICAgICAgLy8gSWYgd2UndmUgZ290dGVuIGJhY2sgYW4gZXJyb3IsIHJlamVjdCB0aGUgcmVsYXRlZCBwcm9taXNlIHVzaW5nIGFcclxuICAgICAgLy8gQnV0dHBsdWdFeGNlcHRpb24gZGVyaXZlZCB0eXBlLlxyXG4gICAgICBpZiAobXNnLm1lc3NhZ2U/LnNlcnZlck1lc3NhZ2U/LmVycm9yKSB7XHJcbiAgICAgICAgcmVqKGNvbnZlcnRQQnVmRXJyb3IobXNnLm1lc3NhZ2U/LnNlcnZlck1lc3NhZ2U/LmVycm9yLCBtc2cuaWQpKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICByZXMobXNnKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXNnO1xyXG4gIH1cclxufVxyXG4iLCIvKiFcclxuICogQnV0dHBsdWcgV0FTTSBTb3VyY2UgQ29kZSBGaWxlIC0gVmlzaXQgaHR0cHM6Ly9idXR0cGx1Zy5pbyBmb3IgbW9yZSBpbmZvIGFib3V0XHJcbiAqIHRoZSBwcm9qZWN0LiBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtQ2xhdXNlIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUgaW4gdGhlXHJcbiAqIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDIwLTIwMjEgKGMpIE5vbnBvbHlub21pYWwgTGFicyBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqL1xyXG5cclxuLy8gR29kYXdmdWwgaGFjayBmb3IgQ0ROIHN1cHBvcnQuXHJcbi8vXHJcbi8vIFNpbmNlIHVzZXJzIGFyZSB1c2VkIHRvIGJlaW5nIGFibGUgdG8gaW5jbHVkZSB0aGUgbGlicmFyeSBvZmYgQ0ROcywgSSB3YW50ZWRcclxuLy8gdG8ga2VlcCBzdXBwb3J0aW5nIHRoYXQgd2l0aCB0aGUgbmV3IFdBU00gcGFja2FnZS4gVW5mb3J0dW5hdGVseSBXQVNNXHJcbi8vIHJlcXVpcmVzIHdlYnBhY2sgdG8gY2h1bmsgbG9hZGluZyBkdWUgdG8gdGhlIGFzeW5jIG5hdHVyZSBvZiBXQVNNIGxvYWRzLFxyXG4vLyB3aGljaCBtZWFucyBkeW5hbWljIGltcG9ydCgpIGNhbGxzLiBJbiBvcmRlciB0byBtYWtlIHN1cmUgdGhlIGltcG9ydCBhbHdheXNcclxuLy8gaW5jbHVkZXMgaXRzZWxmIG9uIHRoZSBjb3JyZWN0IGRvbWFpbiwgd2UgaGF2ZSB0bzpcclxuLy9cclxuLy8gLSBHZXQgdGhlIFVSTCBvZiB0aGUgQ0ROIHdlJ3JlIG9uICh2aWEgcXVlcnlpbmcgdGhlIGN1cnJlbnRseSBwcm9jZXNzZWRcclxuLy8gICBzY3JpcHQuIEhhY2t5IGFzIGhlbGwuKVxyXG4vLyAtIE92ZXJyaWRlIFdlYnBhY2sncyBzcGVjaWFsIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIHdpdGggdGhhdCBwYXRoLlxyXG4vLyAtIEhhdmUgdGhlIHVzZXIgY2FsbCB0aGUgYnV0dHBsdWdJbml0KCkgbWV0aG9kIHRvIGFjdHVhbGx5IGxvYWQgdGhlIFdBU01cclxuLy8gICBibG9iLlxyXG4vL1xyXG4vLyBHcm9zcywgYnV0IGl0IGRvZXMgdGhlIGpvYi5cclxuXHJcbmRlY2xhcmUgdmFyIF9fd2VicGFja19wdWJsaWNfcGF0aF9fOiBhbnk7XHJcblxyXG52YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInNjcmlwdFwiICk7XHJcbnZhciBsYXN0U2NyaXB0ID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyYztcclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSBsYXN0U2NyaXB0LnN1YnN0cigwLCBsYXN0U2NyaXB0Lmxhc3RJbmRleE9mKCcvJykgKyAxKTtcclxuXHJcbmV4cG9ydCAqIGZyb20gXCIuL2luZGV4XCI7Il0sInNvdXJjZVJvb3QiOiIifQ==